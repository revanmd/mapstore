(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[1710],{564864:(e,t,r)=>{"use strict";r.d(t,{y6:()=>l,g$:()=>i,Xk:()=>a,H1:()=>s,MY:()=>o,Xs:()=>u,no:()=>n,Nd:()=>d,Zq:()=>p,Xr:()=>c,Rb:()=>F,HH:()=>f});const l="LAYER_FILTER:INIT_LAYER_FILTER",i="LAYER_FILTER:APPLIED_FILTER",a="LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",s="LAYER_FILTER:DISCARD_CURRENT_FILTER",o="LAYER_FILTER:APPLY_FILTER",u="LAYER_FILTER:OPEN_QUERY_BUILDER";function n(){return{type:a}}function d(){return{type:s}}function p(){return{type:u}}function c(e){return{type:i,filter:e}}function F(){return{type:o}}function f(e){return{type:l,filter:e}}},698183:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var l=r(612132),i=r(306692),a=r(884757),s=r(687753),o=r(727418),u=r.n(o);const n=e=>["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((t=>({attribute:t,values:e.features.reduce(((e,r)=>-1===e.indexOf(r.properties[t])?[...e,r.properties[t]].sort():e),[])}))).reduce(((e,t)=>u()(e,{[t.attribute]:t.values.map((e=>({id:e,name:e})))})),{}),d={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!1,isLayerFilter:!1},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.S0:return u()({},e,{typeName:t.typeName,url:t.url});case l.u7:return u()({},e,{featureTypes:u()({},e.featureTypes,{[t.typeName]:t.featureType})});case l.lN:return u()({},e,{featureTypes:u()({},e.featureTypes,{[t.typeName]:{error:t.error}})});case l.yz:return u()({},e,{featureLoading:t.isLoading});case l.lj:return u()({},e,{featureLoading:!1,data:u()({},e.data,{[t.typeName]:n(t.feature)})});case l.zW:return u()({},e,{featureLoading:!1,featureTypes:u()({},e.data,{[t.typeName]:{error:t.error}})});case l.Yx:return u()({},e,{isNew:!0,searchUrl:t.searchUrl,filterObj:t.filterObj});case l.VN:return u()({},e,{filterObj:u()({},e.filterObj,t.updates)});case l.Hu:return u()({},e,{isNew:!1,result:t.result,searchUrl:t.searchUrl,filterObj:t.filterObj,resultError:null});case l.VT:return u()({},e,{isNew:!1,result:null,resultError:t.error});case s.l:case a.Eg:return t.skip&&t.skip.indexOf("query")>=0?e:u()({},e,{isNew:!1,result:null,filterObj:null,searchUrl:null});case l.RD:return u()({},e,{result:null,resultError:null});case l._T:return u()({},e,{syncWmsFilter:!e.syncWmsFilter});case i.WB:return u()({},e,{syncWmsFilter:t.syncWmsFilter});case l.vO:return u()({},e,{isLayerFilter:!e.isLayerFilter});default:return e}}},13316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var l=r(884757),i=r(296252),a=r(727418),s=r.n(a),o=r(819412),u=r.n(o),n=r(294707),d=r.n(n),p=r(227361),c=r.n(p),F=r(521923);const f={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[]},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s()({},e,{[t.fieldName]:t.fieldValue,type:t.fieldType},{fieldOptions:s()({},{...e.fieldOptions},{currentPage:void 0===t.fieldOptions.currentPage?1:t.fieldOptions.currentPage})});return"attribute"===t.fieldName&&(r.value="string"===t.fieldType?"":null,r.operator="="),"operator"===t.fieldName&&(r.value=null),r},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.E6:{const r={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return s()({},e,{filterFields:e.filterFields?[...e.filterFields,r]:[r]})}case l.vo:return s()({},e,{filterFields:e.filterFields.filter((e=>e.rowId!==t.rowId))});case l.l1:return s()({},e,{filterFields:e.filterFields.map((e=>e.rowId===t.rowId?y(e,t):e))});case l.o7:return s()({},e,{filterFields:e.filterFields.map((e=>e.rowId===t.filterField.rowId?s()({},e,{options:s()({},{...e.options},{[e.attribute]:t.options})},{fieldOptions:s()({},{...e.fieldOptions},{valuesCount:t.valuesCount})}):e))});case l.Sm:return"filterField"===t.layerFilterType?s()({},e,{filterFields:e.filterFields.map((e=>e.rowId===t.rowId?s()({},e,{openAutocompleteMenu:t.status}):e))}):(0,F.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(c()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((e=>e.rowId===t.rowId?{...e,openAutocompleteMenu:t.status}:e)),e);case l.D6:return s()({},e,{autocompleteEnabled:t.status});case l.Nr:return"filterField"===t.layerFilterType?s()({},e,{filterFields:e.filterFields.map((e=>e.rowId===t.filterField.rowId?s()({},e,{loading:t.status}):e))}):(0,F.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(c()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((e=>e.rowId===t.filterField.rowId?{...e,loading:t.status}:e)),e);case l.J9:return s()({},e,{filterFields:e.filterFields.map((e=>e.rowId===t.rowId?s()({},e,{exception:t.exceptionMessage}):e))});case l.U:{const r={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return s()({},e,{groupFields:e.groupFields?[...e.groupFields,r]:[r]})}case l.z8:return s()({},e,{groupFields:e.groupFields.map((e=>e.id===t.groupId?s()({},e,{logic:t.logic}):e))});case l.ql:return s()({},e,{filterFields:e.filterFields.filter((e=>e.groupId!==t.groupId)),groupFields:e.groupFields.filter((e=>e.id!==t.groupId))});case l.O_:return s()({},e,{filterFields:e.filterFields.map((e=>{for(let r=0;r<t.attributes.length;r++)if(e.attribute===t.attributes[r].id)return s()({},e,{value:null});return e}))});case l.M$:return s()({},e,{attributePanelExpanded:t.expand});case l.Ug:return s()({},e,{spatialPanelExpanded:t.expand});case l.p5:return s()({},e,{crossLayerExpanded:t.expand});case l.Fz:return s()({},e,{crossLayerFilter:(0,F.t8)(t.key,t.value,e.crossLayerFilter)});case l.Gf:return(0,F.vy)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case l.nh:return(0,F.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(c()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((e=>e.rowId===t.rowId?y(e,t):e)),e);case l.Rf:return(0,F.z6)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case l.WZ:return s()({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case l.Xp:return(0,F.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(c()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((e=>e.rowId===t.filterField.rowId?{...e,options:{...e.options,[e.attribute]:t.options},fieldOptions:{...e.fieldOptions,valuesCount:t.valuesCount}}:e)),e);case l.bP:return s()({},e,{spatialField:s()({},e.spatialField,{[t.fieldName]:t.method,geometry:null})});case l.d_:return s()({},e,{spatialField:s()({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case l.xM:return s()({},e,{spatialField:s()({},e.spatialField,{[t.fieldName]:t.operation})});case l.bl:return s()({},e,{spatialField:s()({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:s()({},e.crossLayerFilter,{attribute:t.attribute})});case i.hZ:return"queryform"===t.owner&&"start"===t.status?s()({},e,{toolbarEnabled:!1}):e;case l.Wi:return s()({},e,{toolbarEnabled:!0,spatialField:s()({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?{...t.geometry,projection:t.srsName}:t.geometry})});case i.pb:{let r;return r="queryform"===t.owner?s()({},e,{toolbarEnabled:!0,spatialField:s()({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e,r}case l.PN:{let t=s()({},f.spatialField,{attribute:e.spatialField.attribute,value:void 0});return s()({},e,{spatialField:s()({},e.spatialField,t)})}case l._M:return s()({},e,{showDetailsPanel:t.show});case l.Eg:{let t=s()({},f.spatialField,{attribute:e.spatialField.attribute,value:void 0}),r={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return s()({},e,f,{spatialField:t,crossLayerFilter:r})}case l.V1:return s()({},e,{showGeneratedFilter:t.data});case l.cY:return s()({},e,{spatialField:s()({},e.spatialField,{geometry:s()({},e.spatialField.geometry,{distance:t.distance})})});case l.co:return s()({},e,{spatialField:s()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((e=>e.id===t.id&&t.data.features&&t.data.features.length>0?s()({},e,{values:t.data.features,open:!0,error:null}):e))})});case l.RD:return s()({},e,{spatialField:s()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((e=>e.id===t.id?s()({},e,{busy:t.active}):e))})});case l.uY:{let r,l;const i=e.spatialField.zoneFields.map((e=>{if(e.id===t.id){if(r=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){let r=t.value.feature[0],i=r.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(let e=1;e<t.value.feature.length;e++){let l=t.value.feature[e];l&&(r=u()(r,l))}l={coordinates:r.geometry.coordinates,geometryName:i,geometryType:r.geometry.type}}else l={coordinates:r.geometry.coordinates,geometryName:i,geometryType:r.geometry.type}}return s()({},e,{value:r,open:!1,geometryName:l?l.geometryName:null})}return e.dependson&&t.id===e.dependson.id?s()({},e,{disabled:!1,values:null,value:null,open:!1,dependson:s()({},e.dependson,{value:r})}):e}));let a=d()({type:"FeatureCollection",features:t.value.feature});return s()({},e,{spatialField:s()({},e.spatialField,{zoneFields:i,geometry:a&&l?{extent:a,type:l.geometryType,coordinates:l.coordinates}:null})})}case l.H8:return s()({},e,{spatialField:s()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((e=>{let t=s()({},e,{values:null,value:null,open:!1,error:null});return e.dependson?s()({},t,{disabled:!0,open:!1,value:null,dependson:s()({},e.dependson,{value:null})}):t})),geometry:null})});case l.Hl:{let r;return s()({},e,{spatialField:s()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((e=>e.id===t.id?(r="object"!=typeof t.error?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,s()({},e,{error:r,busy:!1})):e))})})}case l.je:{const r=e.simpleFilterFields.reduce(((e,r)=>(r.fieldId===t.id?e.push({...r,...t.properties}):e.push(r),e)),[]);return{...e,simpleFilterFields:r}}case l.go:{const r=t.properties.fieldId?t.properties:{...t.properties,fieldId:(new Date).getTime()},l=e.simpleFilterFields?[...e.simpleFilterFields,r]:[r];return{...e,simpleFilterFields:l}}case l._8:return{...e,simpleFilterFields:e.simpleFilterFields.filter((e=>e.fieldId!==t.id))};case l.xd:return{...e,simpleFilterFields:[]};case l.Ef:const{attribute:r,...a}=f.spatialField,o=s()({},f,{spatialField:{...a}}),{spatialField:n,filterFields:p,groupFields:m,crossLayerFilter:g,attributePanelExpanded:b,spatialPanelExpanded:I,crossLayerExpanded:E}=t.filter||o;return{...e,attributePanelExpanded:b,spatialPanelExpanded:I,crossLayerExpanded:E,spatialField:{...n,attribute:n&&n.attribute||e.spatialField&&e.spatialField.attribute},filterFields:p,groupFields:m,crossLayerFilter:{...g,attribute:g&&g.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute}};default:return e}}}}]);