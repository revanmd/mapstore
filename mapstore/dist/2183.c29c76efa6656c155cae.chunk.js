(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[2183],{904759:(t,e,i)=>{"use strict";i.r(e);var r=i(845243),a=i.n(r),o=i(926447),n=i.n(o),s=(i(371851),i(727418)),l=i.n(s);a().BingLayer.prototype.loadMetadata=function(){if(this.metaRequested)return;this.metaRequested=!0;const t=this,e="_bing_metadata_"+a().Util.stamp(this);window[e]=function(i){t.meta=i,window[e]=void 0;const r=document.getElementById(e);return r.parentNode.removeChild(r),i.errorDetails?(t.fire("load",{layer:t}),t.onError(i)):(t.initMetadata(i),null)};const i="file:"===document.location.protocol?"https":document.location.protocol.slice(0,-1),r=i+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._key+"&UriScheme="+i,o=document.createElement("script");o.type="text/javascript",o.src=r,o.id=e,document.getElementsByTagName("head")[0].appendChild(o)},a().BingLayer.prototype.onError=function(t){return this.options.onError?this.options.onError(t):null},n().registerType("bing",{create:t=>{var e=t.apiKey;let i={subdomains:[0,1,2,3],type:t.name,attribution:"Bing",culture:"",onError:t.onError,maxNativeZoom:t.maxNativeZoom||19,maxZoom:t.maxZoom||23};return t.zoomOffset&&(i=l()({},i,{zoomOffset:t.zoomOffset})),new(a().BingLayer)(e,i)},isValid:t=>!t.meta||!t.meta.statusCode||200===t.meta.statusCode})},685410:(t,e,i)=>{var r=i(845243);t.exports=r.TileLayer.extend({initialize:function(t){r.TileLayer.prototype.initialize.call(this,this.url,t)}})},974177:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(845243),n=i.n(o);i(514767),a().registerType("google",(t=>{return(null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps)?n().gridLayer.googleMutant({type:t.name.toLowerCase(),maxNativeZoom:t.maxNativeZoom||18,maxZoom:t.maxZoom||20}):null;var e,i}))},476747:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(471305),n=i.n(o),s=i(727418),l=i.n(s);i(522729),a().registerType("graticule",{create:t=>{const e=l()({interval:20,showOriginLabel:!0,redraw:"move"},t);return n()?new(n())(e):null},isValid:()=>!!n()})},106782:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(789285),n=i.n(o);a().registerType("mapquest",{create:t=>n()?n().mapLayer({maxZoom:23,...t}):(t&&t.onError&&t.onError(),!1),isValid:()=>!!n()})},265610:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(845243),n=i.n(o);a().registerType("osm",(t=>n().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomOffset:t.zoomOffset||0,maxNativeZoom:t.maxNativeZoom||19,maxZoom:t.maxZoom||23})))},799985:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(845243),n=i.n(o);a().registerType("tms",(t=>n().tileLayer(`${t.tileMapUrl}/{z}/{x}/{y}.${t.extension}`,{hideErrors:t.hideErrors||!0,tms:!0})))},99370:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(845243),n=i.n(o),s=i(470326);a().registerType("tileprovider",(t=>{let[e,i]=s.Z.getLayerConfig(t.provider,{maxZoom:23,...t});return n().tileLayer(e,i)}))},58655:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(618446),n=i.n(o),s=i(414293),l=i.n(s),u=i(845243),c=i.n(u),m=i(119950);const d=(t,e)=>{t.eachLayer&&t.eachLayer((t=>{t.setOpacity&&t.setOpacity(e),d(t,e)}))},p=t=>{var e,i;return(null==t||null===(e=t.style)||void 0===e?void 0:e.body)&&(null==t||null===(i=t.style)||void 0===i?void 0:i.format)},y=t=>{const e=function(t){const{hideLoading:e}=t,i=c().geoJson([],{pointToLayer:"marker"!==t.styleName?function(e,i){return c().circleMarker(i,e.style||t.style)}:null,hideLoading:e});return i.setOpacity=t=>{d(i,t)},i.on("layeradd",(e=>{let{layer:r}=e;i.setOpacity(l()(i.opacity)?t.opacity:i.opacity,r)})),i}(t);return e.opacity=l()(t.opacity)?1:t.opacity,e._msLegacyGeoJSON=!0,e},h=t=>{const{hideLoading:e}=t,i=c().geoJson(t.features,{hideLoading:e});return(0,m.getStyle)((0,m.applyDefaultStyleToLayer)(t),"leaflet").then((e=>{const{style:r,pointToLayer:a=(()=>null),filter:o=(()=>!0)}=e&&e({opacity:t.opacity})||{};i.clearLayers(),i.options.pointToLayer=a,i.options.filter=o,i.addData(t.features),i.setStyle(r)})),i};a().registerType("vector",{create:t=>p(t)?h(t):y(t),update:(t,e,i)=>t._msLegacyGeoJSON?((t,e,i)=>(e.opacity!==i.opacity&&(t.opacity=e.opacity),n()(e.style,i.style)?null:p(e)?h(e):y(e)))(t,e,i):((t,e,i)=>(n()(i.style,e.style)&&e.opacity===i.opacity||(0,m.getStyle)((0,m.applyDefaultStyleToLayer)(e),"leaflet").then((i=>{const{style:r,pointToLayer:a=(()=>null),filter:o=(()=>!0)}=i&&i({opacity:e.opacity})||{};t.clearLayers(),t.options.pointToLayer=a,t.options.filter=o,t.addData(e.features),t.setStyle(r)})),null))(t,e,i),render:()=>null})},216130:(t,e,i)=>{"use strict";var r=i(618446),a=i.n(r),o=i(845243),n=i.n(o),s=i(351546),l=i(926447),u=i.n(l),c=i(676794),m=i(487758),d=i(988594),p=i(119950);const y=(t,e)=>{(0,p.layerToGeoStylerStyle)(e).then((i=>{(0,p.getStyle)((0,p.applyDefaultStyleToLayer)({...e,style:i}),"leaflet").then((i=>{const{style:r,pointToLayer:a=(()=>null),filter:o=(()=>!0)}=i&&i({opacity:e.opacity})||{};t.clearLayers(),t.options.pointToLayer=a,t.options.filter=o,t.addData(t._msFeatures),t.setStyle(r)}))}))},h=(t,e)=>{t.fireEvent("loading");const i=(0,c.v)(e),r=()=>{t.fireEvent("loadError")};return(0,m.Bm)(e.url,e.name,{outputFormat:"application/json",maxFeatures:1e3,srsname:(0,s.normalizeSRS)("EPSG:4326"),...i}).then((i=>(200===i.status?(t.clearLayers(),t._msFeatures={...i.data},t.addData(i.data),t.fireEvent("load"),y(t,e)):(console.error(i),r(new Error("status code of response:"+i.status))),t))).catch((t=>{r()}))};u().registerType("wfs",{create:t=>{const e=new(n().GeoJSON)([],{});return h(e,t),e},update:(t,e,i)=>((0,d.Es)(i,e)&&h(t,e),a()(e.style,i.style)&&e.styleName===i.styleName&&e.opacity===i.opacity||y(t,e),null),render:()=>null})},742728:(t,e,i)=>{"use strict";i.r(e);var r=i(124852),a=i.n(r),o=i(804504),n=i(926447),s=i.n(n),l=i(676794),u=i(508808),c=i.n(u),m=i(845243),d=i.n(m),p=i(727418),y=i.n(p),h=i(701469),g=i.n(h),f=i(414293),v=i.n(f),x=i(555363),S=i(642165),T=i(399790),L=i(40649);i(312787),d().NonTiledLayer.WMSCustom=d().NonTiledLayer.WMS.extend({initialize:function(t,e){this._wmsUrl=t;let i=d().extend({},this.defaultWmsParams);for(let t in e)this.options.hasOwnProperty(t)||"CRS"===t.toUpperCase()||"maxNativeZoom"===t||(i[t]=e[t]);this.wmsParams=i,d().setOptions(this,e)},removeParams:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return t.forEach((t=>delete this.wmsParams[t])),e||this.redraw(),this}}),d().nonTiledLayer.wmsCustom=function(t,e){return new(d().NonTiledLayer.WMSCustom)(t,e)},d().TileLayer.MultipleUrlWMS=d().TileLayer.WMS.extend({initialize:function(t,e){this._url=t[0],this._urls=t,this._urlsIndex=0;let i=d().extend({},this.defaultWmsParams),r=e.tileSize||this.options.tileSize;e.detectRetina&&d().Browser.retina?i.width=i.height=2*r:i.width=i.height=r;for(let t in e)this.options.hasOwnProperty(t)||"CRS"===t.toUpperCase()||"maxNativeZoom"===t||(i[t]=e[t]);this.wmsParams=i,d().setOptions(this,e)},getTileUrl:function(t){let e=this._map,i=this.options.tileSize,r=t.multiplyBy(i),a=r.add([i,i]),o=this._crs.project(e.unproject(r,t.z)),n=this._crs.project(e.unproject(a,t.z)),s=this._wmsVersion>=1.3&&this._crs===d().CRS.EPSG4326?[n.y,o.x,o.y,n.x].join(","):[o.x,n.y,n.x,o.y].join(",");this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);const l=d().Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(t)});return l+d().Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+s},removeParams:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return t.forEach((t=>delete this.wmsParams[t])),e||this.redraw(),this}}),d().tileLayer.multipleUrlWMS=function(t,e){return new(d().TileLayer.MultipleUrlWMS)(t,e)},d().TileLayer.ElevationWMS=d().TileLayer.MultipleUrlWMS.extend({initialize:function(t,e,i,r){this._tiles={},this._nodata=i,this._littleendian=r,d().TileLayer.MultipleUrlWMS.prototype.initialize.apply(this,arguments)},_addTile:function(t){const e=this.getTileUrl(t);(0,S.qR)(e,t,this._tileCoordsToKey(t))},getElevation:function(t,e){try{const i=this._getTileFromCoords(t),r=(0,S.yQ)(this._tileCoordsToKey(i),this._getTileRelativePixel(i,e),this.getTileSize().x,this._nodata,this._littleendian);return r.available?r.value:a().createElement(o.Z,{msgId:r.message})}catch(t){return a().createElement(o.Z,{msgId:"elevationLoadingError"})}},_getTileFromCoords:function(t){var e=this._map.project(t).divideBy(256).floor();return y()(e,{z:this._tileZoom})},_getTileRelativePixel:function(t,e){var i=Math.floor(e.x-this._getTilePos(t).x-this._map._getMapPanePos().x),r=Math.min(this.getTileSize().x-1,Math.floor(e.y-this._getTilePos(t).y-this._map._getMapPanePos().y));return new(d().Point)(i,r)},_removeTile:function(){},_abortLoading:function(){}}),d().tileLayer.elevationWMS=function(t,e,i,r){return new(d().TileLayer.ElevationWMS)(t,e,i,r)};const w=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce(((e,i)=>v()(t[i])?e:y()(e,{[i]:t[i]})),{})};function M(t){var e=void 0!==t.opacity?t.opacity:1;const i=(0,l.v)(t),r=y()({},t.baseParams,{attribution:t.credits&&(0,T.go)(t.credits),layers:t.name,styles:t.style||"",format:((0,L.z)(t.format)?"image/png":t.format)||"image/png",transparent:void 0===t.transparent||t.transparent,tiled:void 0===t.tiled||t.tiled,opacity:e,zIndex:t.zIndex,version:t.version||"1.3.0",tileSize:t.tileSize||256,maxZoom:t.maxZoom||23,maxNativeZoom:t.maxNativeZoom||18},y()(t._v_?{_v_:t._v_}:{},i||{}));return(0,x.addAuthenticationToSLD)(r,t)}function _(t){return t.map((t=>t.split("?")[0]))}s().registerType("wms",{create:t=>{const e=_(g()(t.url)?t.url:[t.url]),i=w(M(t)||{});return e.forEach((e=>(0,x.addAuthenticationParameter)(e,i,t.securityToken))),t.useForElevation?d().tileLayer.elevationWMS(e,i,t.nodata||-9999,t.littleendian||!1):t.singleTile?d().nonTiledLayer.wmsCustom(e[0],i):d().tileLayer.multipleUrlWMS(e,i)},update:function(t,e,i){if(i.singleTile!==e.singleTile||i.tileSize!==e.tileSize||i.securityToken!==e.securityToken&&e.visibility){let t;const i=_(g()(e.url)?e.url:[e.url]),r=M(e)||{};return i.forEach((t=>(0,x.addAuthenticationParameter)(t,r,e.securityToken))),t=e.singleTile?d().nonTiledLayer.wmsCustom(i[0],r):d().tileLayer.multipleUrlWMS(i,r),t}let r=y()({},c().filterWMSParamOptions(M(i)),(0,x.addAuthenticationToSLD)(i.params||{},i)),a=y()({},c().filterWMSParamOptions(M(e)),(0,x.addAuthenticationToSLD)(e.params||{},e)),o=Object.keys(a).filter((t=>a[t]!==r[t])),n=Object.keys(r).filter((t=>r[t]!==a[t])),s={};return n.length>0&&t.removeParams(n,o.length>0),o.length>0&&(s=o.reduce(((t,e)=>y()({},t,{[e]:a[e]})),s),t.setParams(w(y()(s,s.params,(0,x.addAuthenticationToSLD)(e.params||{},e))))),null}})},929887:(t,e,i)=>{"use strict";i.r(e);var r=i(926447),a=i.n(r),o=i(351546),n=i(845243),s=i.n(n),l=i(727418),u=i.n(l),c=i(555363),m=i(399790),d=i(276570),p=i(835516),y=i(91175),h=i.n(y),g=i(281763),f=i.n(g);const v=s().TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.3.0",layer:"",style:"",tileMatrixSet:"",format:"image/jpeg"},initialize:function(t,e,i){this._url=t[0],this._urls=t,this._urlsIndex=0;let r=s().extend({},this.defaultWmtsParams),a=e.tileSize||this.options.tileSize;e.detectRetina&&s().Browser.retina?r.width=r.height=2*a:r.width=r.height=a;for(let t in e)this.options.hasOwnProperty(t)||"crs"===t||(r[t]=e[t]);this.wmtsParams=r,this.matrixIds=i.matrixIds&&this.getMatrix(i.matrixIds,i)||this.getDefaultMatrix(i),this.matrixSet=i.matrixSet&&i.matrixSet.TileMatrix||[],this.ignoreErrors=i.ignoreErrors||!1,s().setOptions(this,e)},getWMTSParams:(t,e,i,r,a)=>{const n=(0,p.getScales)()[i],s=h()(t.map(((e,i)=>{if(i===t.length-1)return null;const r=parseFloat(e.ScaleDenominator),a=parseFloat(t[i+1].ScaleDenominator);return r>=n&&a<n?n-a>(r-a)/2?{id:i,data:e}:{id:i+1,data:t[i+1]}:null})).filter((t=>t))),l=s&&f()(s.id)&&s.id+""||0===t.length&&i||null;if(!e[l])return null;const u=e[l].identifier,c=s.data&&s.data.TopLeftCorner&&(0,o.parseString)(s.data.TopLeftCorner)||e[l].topLeftCorner,m=c.lng||c.x,d=c.lat||c.y,y=Math.round((r.x-m)/a),g=-Math.round((r.y-d)/a),v=s.data&&s.data.MatrixWidth&&s.data.MatrixHeight&&{cols:{min:0,max:s.data.MatrixWidth-1},rows:{min:0,max:s.data.MatrixHeight-1}},x=e[l].ranges||v;return x&&!function(t,e,i){return!(t<i.cols.min||t>i.cols.max||e<i.rows.min||e>i.rows.max)}(y,g,x)?null:{ident:u,tilecol:y,tilerow:g}},getTileUrl:function(t){let e=this._map,i=e.options.crs,r=this.options.tileSize,a=t.multiplyBy(r);a.x+=1,a.y-=1;let o=a.add([r,r]),n=i.project(e.unproject(a,t.z)),l=i.project(e.unproject(o,t.z)).x-n.x;const u=this.getWMTSParams([...this.matrixSet],[...this.matrixIds],t.z,n,l);if(!u)return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);const c=s().Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(t),TileRow:u.tilerow,TileCol:u.tilecol,TileMatrixSet:this.options.tileMatrixSet,TileMatrix:u.ident,Style:this.options.style});return"RESTful"===this.options.requestEncoding?c:c+s().Util.getParamString(this.wmtsParams,c,!0)+"&tilematrix="+u.ident+"&tilerow="+u.tilerow+"&tilecol="+u.tilecol},getMatrix:function(t,e){return t.map((t=>({identifier:t.identifier,topLeftCorner:new(s().LatLng)(e.originY,e.originX),ranges:t.ranges||null})))},getDefaultMatrix:function(t){var e=new Array(22);for(let i=0;i<22;i++)e[i]={identifier:t.tileMatrixPrefix+i,topLeftCorner:new(s().LatLng)(t.originY,t.originX)};return e},onError:function(){return!this.ignoreErrors}});var x=i(701469),S=i.n(x),T=i(40649);s().tileLayer.wmts=function(t,e,i){return new v(t,e,i)};const L=t=>{const e=function(t){return t.map((t=>t.split("?")[0]))}(S()(t.url)?t.url:[t.url]),i=function(t){const e=(0,o.normalizeSRS)(t.srs||"EPSG:3857",t.allowedSRS),i=t.credits&&(0,m.go)(t.credits)||"",r=d.C2(t.tileMatrixSet,e,t.allowedSRS,t.matrixIds);return u()({requestEncoding:t.requestEncoding,layer:t.name,style:t.style||"",attribution:i,format:((0,T.z)(t.format)?"image/png":t.format)||"image/png",tileMatrixSet:r,version:t.version||"1.0.0",tileSize:t.tileSize||256,CRS:(0,o.normalizeSRS)(t.srs||"EPSG:3857",t.allowedSRS),maxZoom:t.maxZoom||23,maxNativeZoom:t.maxNativeZoom||18},t.params||{})}(t)||{};e.forEach((e=>(0,c.addAuthenticationParameter)(e,i,t.securityToken)));const r=(0,o.normalizeSRS)(t.srs||"EPSG:3857",t.allowedSRS),{tileMatrixSet:a,matrixIds:n}=d.h7(t,r);return s().tileLayer.wmts(e,i,{tileMatrixPrefix:t.tileMatrixPrefix||i.tileMatrixSet+":"||r+":",originY:t.originY||20037508.3428,originX:t.originX||-20037508.3428,ignoreErrors:t.ignoreErrors||!1,matrixIds:n,matrixSet:a})};a().registerType("wmts",{create:L,update:(t,e,i)=>i.securityToken!==e.securityToken||i.format!==e.format||i.credits!==e.credits?L(e):null})},72183:(t,e,i)=>{t.exports={BingLayer:i(904759),Commons:i(685410),GraticuleLayer:i(476747),GoogleLayer:i(974177),MapQuest:i(106782),OSMLayer:i(265610),TMSLayer:i(799985),TileProviderLayer:i(99370),WFSLayer:i(216130).default,WMSLayer:i(742728),WMTSLayer:i(929887),VectorLayer:i(58655)}},789285:t=>{t.exports=window.MQ},642165:(t,e,i)=>{"use strict";i.d(e,{qR:()=>c,yQ:()=>m});var r=i(470509),a=i.n(r),o=i(581399),n=i.n(o),s=i(882702);let l=new(n())(100);const u=function(t,e,i,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-9999,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const n=r*t+i;try{const t=e.dataView.getInt16(2*n,o);if(t!==a&&32767!==t&&-32768!==t)return t}catch(t){}return null},c=(t,e,i)=>l.has(i)?null:new s.Promise(((r,o)=>{a().get(t,{responseType:"arraybuffer"}).then((t=>{((t,e,i)=>{l.set(i,{data:t,dataView:new DataView(t),coords:e,current:!0,status:"success"})})(t.data,e,i),r()})).catch((t=>{((t,e,i)=>{l.set(i,{coords:e,current:!0,status:"error: "+t})})(t.message,e,i),o(t)}))})),m=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-9999,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=l.get(t);return o&&"success"===o.status?{available:!0,value:u(i,o,e.x,e.y,r,a)}:o&&"loading"===o.status?{available:!1,message:"elevationLoading"}:o&&"error"===o.status?{available:!1,message:"elevationLoadingError"}:{available:!1,message:"elevationNotAvailable"}}},40649:(t,e,i)=>{"use strict";i.d(e,{z:()=>a});const r=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],a=t=>-1!==r.indexOf(t)},508808:(t,e,i)=>{var r=i(727418),a={PARAM_OPTIONS:["layers","styles","format","transparent","version","tiled","zindex","_v_","cql_filter","sld"],wmsToLeafletOptions:function(t){var e=void 0!==t.opacity?t.opacity:1;return r({layers:t.name,styles:t.style||"",format:t.format||"image/png",transparent:void 0===t.transparent||t.transparent,tiled:void 0===t.tiled||t.tiled,opacity:e},t.params||{})},getWMSURL:function(t){return t.split("?")[0]},filterWMSParamOptions(t){let e={};return Object.keys(t).forEach((i=>{i&&i.toLowerCase&&a.PARAM_OPTIONS.indexOf(i.toLowerCase())>=0&&(e[i]=t[i])})),e}};t.exports=a}}]);