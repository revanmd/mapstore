(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[3726],{574198:(t,e,o)=>{"use strict";o.d(e,{Z:()=>k});var r=o(45697),i=o.n(r),s=o(124852),n=o.n(s),a=o(618446),l=o.n(a),p=o(701469),h=o.n(p),m=o(984596),c=o.n(m),u=o(727418),d=o.n(u),g=o(409669),y=o.n(g),f=o(247012),b=o(119950);function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},L.apply(this,arguments)}function v(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class w extends n().Component{constructor(){super(...arguments),v(this,"createLayer",(t=>{t.geometry&&this.addFeature({...t,style:t.style&&c()(t.style)||void 0}),t.features&&t.features.forEach((e=>{let o=d()({},t,{type:e.type,geometry:e.geometry,style:e.style&&c()(e.style)||void 0,properties:e.properties});this.addFeature(o)}))})),v(this,"removeLayer",(t=>{this._layers&&(this._layers.forEach((e=>{t.container.removeLayer(e)})),this._layers=[])}))}componentDidMount(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}UNSAFE_componentWillReceiveProps(t){l()(t.properties,this.props.properties)&&l()(t.geometry,this.props.geometry)&&t.features===this.props.features&&t.style===this.props.style&&t.styleName===this.props.styleName||(this.removeLayer(t),this.createLayer(t))}componentWillUnmount(){this.removeLayer(this.props)}render(){return null}addFeature(t){if(h()(t.style)){let e=(0,b.createStylesAsync)(t.style);y().all(e).then((e=>{this.addLayer(t,e)}))}else this.addLayer(t,t.style)}addLayer(t,e){const o=(0,f.geometryToLayer)({type:t.type,geometry:t.geometry,properties:t.properties,msId:t.msId},{style:e,styleName:t.styleName});t.container.addLayer(o),o.on("click",(e=>{if(t.onClick){var o;let r=[e.latlng.lat,e.latlng.lng];if(this.props.options.handleClickOnLayer&&"Point"===(null===(o=t.geometry)||void 0===o?void 0:o.type)){const{_map:t}=(null==e?void 0:e.target)||{},{lat:o,lng:i}=(null==t?void 0:t.mouseEventToLatLng(null==e?void 0:e.originalEvent))||{};r=[o,i]}t.onClick({pixel:{x:e.originalEvent&&e.originalEvent.x,y:e.originalEvent&&e.originalEvent.y},latlng:e.latlng,rawPos:r},this.props.options.handleClickOnLayer?this.props.options.id:null)}})),o.setOpacity||(o.setOpacity=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.originalStyle||this.options&&this.options.style||this.options||{};this.originalStyle={...e};const{opacity:r=1,fillOpacity:i=1,color:s,fillColor:n,radius:a,weight:l}=e,p={color:s,fillColor:n,radius:a,weight:l,opacity:r*t,fillOpacity:i*t};o.setStyle&&o.setStyle(p)}),this._layers.push(o)}}v(w,"propTypes",{msId:i().oneOfType([i().string,i().number]),type:i().string,styleName:i().string,properties:i().object,container:i().object,geometry:i().object,features:i().array,style:i().object,onClick:i().func,options:i().object});class C extends n().Component{render(){return this.props.container._msLegacyGeoJSON?n().createElement(w,L({},this.props,{ref:t=>{t&&(this._layers=t._layers)}})):null}}v(C,"propTypes",{container:i().object});const k=C},580537:(t,e,o)=>{"use strict";o.d(e,{Z:()=>f});var r=o(124852),i=o.n(r),s=o(45697),n=o.n(s),a=o(926447),l=o.n(a),p=o(727418),h=o.n(p),m=o(618446),c=o.n(m),u=o(414293),d=o.n(u);function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class y extends i().Component{constructor(){super(...arguments),g(this,"setLayerVisibility",(t=>{const e=this.getVisibilityOption(this.props),o=this.getVisibilityOption(t);o!==e&&(o?this.addLayer():this.removeLayer(),this.updateZIndex())})),g(this,"getVisibilityOption",(t=>{const{options:e={},zoom:o,resolutions:r=[]}=t,{visibility:i,minResolution:s=-1/0,maxResolution:n=1/0,disableResolutionLimits:a}=e||{};if(!a&&!d()(r[o])){const t=r[o];if(!(t<n&&t>=s))return!1}return!1!==i})),g(this,"setLayerOpacity",(t=>{t!==(this.props.options&&void 0!==this.props.options.opacity?this.props.options.opacity:1)&&this.layer&&this.layer.setOpacity&&this.layer.setOpacity(t)})),g(this,"generateOpts",((t,e,o)=>h()({},t,e?{zIndex:e,srs:this.props.srs}:null,{zoomOffset:-this.props.zoomOffset,onError:()=>{this.props.onCreationError(t)},securityToken:o}))),g(this,"updateZIndex",(t=>{let e=t||this.props.position;e&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(e)})),g(this,"createLayer",((t,e,o,r)=>{if(t){const i=this.generateOpts(e,o,r);this.layer=l().createLayer(t,i),this.layer&&(this.layer.layerName=e.name,this.layer.layerId=e.id),this.forceUpdate()}})),g(this,"updateLayer",((t,e)=>{const o=l().updateLayer(t.type,this.layer,this.generateOpts(t.options,t.position,t.securityToken),this.generateOpts(e.options,e.position,e.securityToken));o&&(this.removeLayer(),this.layer=o,t.options.visibility&&this.addLayer(),this.updateZIndex(t.position))})),g(this,"addLayer",(()=>{if(this.isValid()&&(this.props.map.addLayer(this.layer),this.props.options.refresh&&this.layer.setParams)){let t=0;this.refreshTimer=setInterval((()=>{this.layer.setParams(h()({},this.props.options.params,{_refreshCounter:t++}))}),this.props.options.refresh)}})),g(this,"removeLayer",(()=>{this.isValid()&&this.props.map.removeLayer(this.layer)})),g(this,"isValid",(()=>{if(this.layer){const t=l().isValid(this.props.type,this.layer);return this.valid=t,t}return!1}))}componentDidMount(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&this.getVisibilityOption(this.props)&&(this.addLayer(),this.updateZIndex())}UNSAFE_componentWillReceiveProps(t){this.setLayerVisibility(t);const e=t.options&&void 0!==t.options.opacity?t.options.opacity:1;this.setLayerOpacity(e),t.position!==this.props.position&&this.updateZIndex(t.position),this.updateLayer(t,this.props)}shouldComponentUpdate(t){return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce(((e,o)=>{switch(o){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return e&&this.props[o]===t[o];case"options":return e&&(this.props[o]===t[o]||c()({...this.props[o],loading:!1},{...t[o],loading:!1}));default:return e}}),!0)}componentWillUnmount(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}render(){if(this.props.children){const t=this.layer,e=t?i().Children.map(this.props.children,(e=>e?i().cloneElement(e,{container:t,styleName:this.props.options&&this.props.options.styleName,onClick:this.props.onClick,options:this.props.options||{}}):null)):null;return i().createElement(i().Fragment,null,e)}return l().renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}g(y,"propTypes",{map:n().object,type:n().string,srs:n().string,options:n().object,position:n().number,zoomOffset:n().number,onCreationError:n().func,onClick:n().func,securityToken:n().string,resolutions:n().array,zoom:n().number}),g(y,"defaultProps",{onCreationError:()=>{},options:{}});const f=y},728589:(t,e,o)=>{"use strict";o.d(e,{Z:()=>v});var r=o(845243),i=o.n(r),s=o(45697),n=o.n(s),a=o(124852),l=o.n(a),p=o(234228),h=o(351546),m=o(727418),c=o.n(m),u=o(835516),d=o(49977),g=o.n(d),y=o(823493),f=o.n(y);function b(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o(727741),o(934970);class L extends l().Component{constructor(){var t;super(...arguments),t=this,b(this,"state",{}),b(this,"getDocument",(()=>this.props.document||document)),b(this,"getResolutions",(()=>this.props.resolutions)),b(this,"getIntersectedFeatures",((t,e)=>{let o={};const r=i().latLngBounds(e,e);return t.eachLayer((t=>{null!=t&&t.layerId&&null!=t&&t.eachLayer&&t.eachLayer((e=>{const s=null!=e&&e.getLatLng?i().latLngBounds(e.getLatLng(),e.getLatLng()):null,n=null!=e&&e.getBounds?e.getBounds():s;if(n&&null!=e&&e.toGeoJSON&&n&&r.intersects(n)){const r=e.toGeoJSON();o[t.layerId]=o[t.layerId]?[...o[t.layerId],r]:[r]}}))})),Object.keys(o).map((t=>({id:t,features:o[t]})))})),b(this,"_updateMapPositionFromNewProps",(t=>{const e=function(t,e){return void 0!==t&&void 0!==e&&t.toFixed(12)-e.toFixed(12)==0},o=t.center,r=this.props.center,i=this.map.getCenter(),s=e(o.x,r.x)&&e(o.y,r.y)||e(o.x,i.lng)&&e(o.y,i.lat),n=t.zoom,a=this.props.zoom,l=this.map.getZoom(),p=n===a||n===l;s||p?p?s||this.map.setView([t.center.y,t.center.x]):this.map.setZoom(t.zoom):this.map.setView([t.center.y,t.center.x],Math.round(t.zoom))})),b(this,"updateMapInfoState",(()=>{const t=this.map.getBounds().toBBoxString().split(","),e={height:this.map.getSize().y,width:this.map.getSize().x},o=this.map.getCenter(),r=this.map.getZoom(),i=this.props.viewerOptions;this.props.onMapViewChanges({x:o.lng,y:o.lat,crs:"EPSG:4326"},r,{bounds:{minx:parseFloat(t[0]),miny:parseFloat(t[1]),maxx:parseFloat(t[2]),maxy:parseFloat(t[3])},crs:"EPSG:4326",rotation:0},e,this.props.id,this.props.projection,i,this.getResolutions()[r])})),b(this,"setMousePointer",(t=>{this.map&&(this.map.getContainer().style.cursor=t||"auto")})),b(this,"mouseMoveEvent",(t=>{let e=t.latlng.wrap();this.props.onMouseMove({x:e.lng||0,y:e.lat||0,z:this.elevationLayer&&this.elevationLayer.getElevation(e,t.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:t.containerPoint.x,y:t.containerPoint.x},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:this.elevationLayer&&this.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng]})})),b(this,"registerHooks",(()=>{this.props.hookRegister.registerHook(u.EXTENT_TO_ZOOM_HOOK,(t=>{var e=(0,h.reproject)([t[0],t[1]],this.props.projection,"EPSG:4326"),o=(0,h.reproject)([t[2],t[3]],this.props.projection,"EPSG:4326");return this.map.getBoundsZoom([[e.y,e.x],[o.y,o.x]])-1})),this.props.hookRegister.registerHook(u.RESOLUTIONS_HOOK,(()=>this.getResolutions())),this.props.hookRegister.registerHook(u.COMPUTE_BBOX_HOOK,((t,e)=>{let o=i().latLng([t.y,t.x]),r=this.map._getNewPixelOrigin(o,e),s=new(i().Bounds)(r,r.add(this.map.getSize())),n=this.map.unproject(s.getBottomLeft(),e),a=this.map.unproject(s.getTopRight(),e),l=new(i().LatLngBounds)(n,a).toBBoxString().split(",");return{bounds:{minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(l[2]),maxy:parseFloat(l[3])},crs:"EPSG:4326",rotation:0}})),this.props.hookRegister.registerHook(u.GET_PIXEL_FROM_COORDINATES_HOOK,(t=>{let e=(0,h.reproject)(t,this.props.projection,"EPSG:4326"),o=this.map.latLngToContainerPoint([e.y,e.x]);return[o.x,o.y]})),this.props.hookRegister.registerHook(u.GET_COORDINATES_FROM_PIXEL_HOOK,(t=>{const e=this.map.containerPointToLatLng(t);let o=(0,h.reproject)([e.lng,e.lat],"EPSG:4326",this.props.projection);return[o.x,o.y]})),this.props.hookRegister.registerHook(u.ZOOM_TO_EXTENT_HOOK,(function(e){let{padding:o,crs:r,maxZoom:s,duration:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=o&&i().point(o.left||0,o.top||0),l=o&&i().point(o.right||0,o.bottom||0),p=(0,h.reprojectBbox)(e,r,"EPSG:4326");t.map.fitBounds([[p[1],p[0]],[p[3],p[2]]],{paddingTopLeft:a,paddingBottomRight:l,maxZoom:s,duration:n,animate:0!==n&&void 0})}))})),b(this,"addLayerObservable",((t,e)=>{!t.layer.layerId||t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&e&&(t.layer._ms2LoadingTileCount=0,t.layer.layerLoadingStream$=new(g().Subject),t.layer.layerLoadStream$=new(g().Subject),t.layer.layerErrorStream$=new(g().Subject),t.layer.layerErrorStream$.bufferToggle(t.layer.layerLoadingStream$,(()=>t.layer.layerLoadStream$)).subscribe({next:e=>{const o=t.layer._ms2LoadingTileCount||e&&e.length||0;e&&e.length>0&&this.props.onLayerError(e[0].target.layerId,o,e.length),t.layer._ms2LoadingTileCount=0}}))}))}UNSAFE_componentWillMount(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){const t=i().CRS.EPSG3857.scale,e=this.props.mapOptions.view.resolutions[0]/(0,u.getGoogleMercatorResolutions)(0,23)[0];this.crs=c()({},i().CRS.EPSG3857,{scale:o=>t.call(i().CRS.EPSG3857,o)/Math.pow(2,Math.round(Math.log2(e)))}),this.zoomOffset=Math.round(Math.log2(e))}}componentDidMount(){const{limits:t={}}=this.props,e=t.restrictedExtent&&t.crs&&(0,h.reprojectBbox)(t.restrictedExtent,t.crs,"EPSG:4326");let o=c()({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:e&&i().latLngBounds([[e[1],e[0]],[e[3],e[2]]]),maxBoundsViscosity:e&&1,minZoom:t&&t.minZoom,maxZoom:t&&t.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{});const r=i().map(this.getDocument().getElementById(this.props.id),c()({zoomControl:!1},o)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=r,this.props.registerHooks&&this.registerHooks(),this.props.zoomControl&&(this.mapZoomControl=i().control.zoom(),this.map.addControl(this.mapZoomControl)),this.attribution=i().control.attribution(),this.attribution.addTo(this.map);const s=this.getDocument();this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(s.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),s.querySelector(".leaflet-control-container .leaflet-control-attribution")&&s.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(s.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(t=>{if(this.props.onClick){const e=this.getIntersectedFeatures(r,t.latlng);this.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:this.elevationLayer&&this.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng],modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey},intersectedFeatures:e})}}));const n=f()(this.mouseMoveEvent,100);this.map.on("dragstart",(()=>{this.map.off("mousemove",n)})),this.map.on("dragend",(()=>{this.map.on("mousemove",n)})),this.map.on("mousemove",n),this.map.on("contextmenu",(()=>{this.props.onRightClick&&this.props.onRightClick(event.containerPoint)})),this.map.on("mouseout",(()=>{setTimeout((()=>this.props.onMouseOut()),150)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions()),this.map.on("layeradd",(t=>{if(t.layer._ms2Added){const e=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;this.addLayerObservable(t,e)}else t.layer._ms2Added=!0,t.layer.getElevation&&(this.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(this.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(this.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(e=>{this.props.onLayerLoading(e.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(e=>{this.props.onLayerLoad(e.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(()=>{t.layer._ms2LoadingTileCount++})),(t.layer.options&&!t.layer.options.hideErrors||!t.layer.options)&&t.layer.on("tileerror",(e=>{t.layer.layerErrorStream$.next(e)})),t.layer.on("loaderror",(t=>{this.props.onLayerError(t.target.layerId)}))))})),this.map.on("layerremove",(t=>{t.layer.layerLoadingStream$&&(t.layer.layerLoadingStream$.complete(),t.layer.layerLoadStream$.complete(),t.layer.layerErrorStream$.complete())})),this.drawControl=null}UNSAFE_componentWillReceiveProps(t){if(t.mousePointer!==this.props.mousePointer&&this.setMousePointer(t.mousePointer),this.map&&t.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(t),t.zoomControl!==this.props.zoomControl&&(t.zoomControl?(this.mapZoomControl=i().control.zoom(),this.map.addControl(this.mapZoomControl)):this.mapZoomControl&&!t.zoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0)),t.resize!==this.props.resize&&setTimeout((()=>{this.map&&this.map.invalidateSize(!1)}),0),this.props.limits!==t.limits){const{limits:e={}}=t,{limits:o}=this.props;if(e.restrictedExtent!==(o&&o.restrictedExtent)){const t=e.restrictedExtent&&e.crs&&(0,h.reprojectBbox)(e.restrictedExtent,e.crs,"EPSG:4326");this.map.setMaxBounds(e.restrictedExtent&&i().latLngBounds([[t[1],t[0]],[t[3],t[2]]]))}e.minZoom!==(o&&o.minZoom)&&this.map.setMinZoom(e.minZoom),this.props.onResolutionsChange(this.getResolutions())}return!1}componentWillUnmount(){const t=this.getDocument(),e=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&t.querySelector(this.props.mapOptions.attribution.container);if(e&&this.attribution.getContainer()&&e.querySelector(".leaflet-control-attribution"))try{e.removeChild(this.attribution.getContainer())}catch(t){}this.mapZoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0),this.map.off(),this.map.remove(),this.map=void 0}render(){const t=this.map,e=this.props.projection,o=t?l().Children.map(this.props.children,(o=>o?l().cloneElement(o,{map:t,projection:e,zoomOffset:this.zoomOffset,onCreationError:this.props.onCreationError,onClick:this.props.onClick,resolutions:this.getResolutions(),zoom:this.props.zoom}):null)):null;return l().createElement("div",{id:this.props.id,style:this.props.style},o)}}b(L,"propTypes",{id:n().string,document:n().object,center:p.ZP.PropTypes.center,zoom:n().number.isRequired,viewerOptions:n().object,mapStateSource:p.ZP.PropTypes.mapStateSource,style:n().object,projection:n().string,onMapViewChanges:n().func,onClick:n().func,onRightClick:n().func,mapOptions:n().object,limits:n().object,zoomControl:n().bool,mousePointer:n().string,onMouseMove:n().func,onLayerLoading:n().func,onLayerLoad:n().func,onLayerError:n().func,resize:n().oneOfType([n().number,n().string]),measurement:n().object,changeMeasurementState:n().func,registerHooks:n().bool,interactive:n().bool,resolutions:n().array,hookRegister:n().object,onCreationError:n().func,onMouseOut:n().func,onResolutionsChange:n().func}),b(L,"defaultProps",{id:"map",onMapViewChanges:()=>{},onCreationError:()=>{},onClick:null,onMouseMove:()=>{},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:()=>{},onLayerLoad:()=>{},onLayerError:()=>{},resize:0,registerHooks:!0,hookRegister:{registerHook:u.registerHook},style:{},interactive:!0,resolutions:(0,u.getGoogleMercatorResolutions)(0,23),onMouseOut:()=>{},onResolutionsChange:()=>{}});const v=L},876504:(t,e,o)=>{"use strict";o.d(e,{Z:()=>C});var r=o(45697),i=o.n(r),s=o(124852),n=o.n(s),a=o(727418),l=o.n(a),p=o(845243),h=o.n(p),m=o(512571),c=o.n(m),u=o(351546),d=o(556233);function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o(921787),o(451172);let y={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};h().getMeasureWithTreshold=(t,e,o,r,i,s,n)=>t>e?h().GeometryUtil.formattedNumber((0,d.Ov)(t,o,r),i[r])+" "+n:h().GeometryUtil.formattedNumber(t,i[o])+" "+s;const f=h().GeometryUtil.readableDistance;h().GeometryUtil.readableDistance=function(t,e,o,r,i,s){if(!s)return f.apply(null,arguments);if("Bearing"===s.geomType)return s.bearing;const n=h().Util.extend({},y,i),{unit:a,label:l}=s.uom.length;let p=h().GeometryUtil.formattedNumber((0,d.Ov)(t,"m",a),n[a])+" "+l;return s.useTreshold&&(e&&(p=h().getMeasureWithTreshold(t,1e3,"m","km",n,"m","km")),"mi"===a&&(p=h().getMeasureWithTreshold((0,d.Ov)(t,"m","yd"),1760,"yd","mi",n,"yd","mi"))),p};const b=h().GeometryUtil.readableArea;h().GeometryUtil.readableArea=function(t,e,o,r){if(!r)return b.apply(null,arguments);const{unit:i,label:s}=r.uom.area,n=h().Util.extend({},y,o);let a=h().GeometryUtil.formattedNumber((0,d.Ov)(t,"sqm",i),n[i])+" "+s;return r.useTreshold&&(e&&(a=h().getMeasureWithTreshold(t,1e6,"sqm","sqkm",n,"m²","km²")),"sqmi"===i&&(a=h().getMeasureWithTreshold((0,d.Ov)(t,"sqm","sqyd"),3097600,"sqyd","sqmi",n,"yd²","mi²"))),a};const L=h().Draw.Polygon.prototype._getMeasurementString;h().Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return L.apply(this,arguments);let t=this._area,e="";if(!t&&!this.options.showLength)return null;if(this.options.showLength&&(e=h().Draw.Polyline.prototype._getMeasurementString.call(this)),t){const o={uom:this.options.uom,useTreshold:this.options.useTreshold};e+=this.options.showLength?"<br>":""+h().GeometryUtil.readableArea(t,this.options.metric,this.options.precision,o)}return e};const v=h().Draw.Polyline.prototype._getMeasurementString;h().Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return v.apply(this,arguments);let t,e=this._currentLatLng,o=this._markers[this._markers.length-1].getLatLng();t=h().GeometryUtil.isVersion07x()?o&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(o)*(this.options.factor||1):this._measurementRunningTotal||0:o&&e?this._measurementRunningTotal+this._map.distance(e,o)*(this.options.factor||1):this._measurementRunningTotal||0;const r={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?(0,d.rp)(this.options.bearing,this.options.trueBearing):0};return h().GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,r)};class w extends n().Component{constructor(){super(...arguments),g(this,"onDrawStart",(()=>{this.props.map.off("click",this.restartDrawing,this),this.removeArcLayer(),this.props.map.doubleClickZoom&&this.props.map.doubleClickZoom.disable(),this.drawing=!0})),g(this,"onDrawCreated",(t=>{this.drawing=!1,this.props.map.addLayer(t.layer),this.lastLayer=t.layer;let e=this.lastLayer&&this.lastLayer.toGeoJSON()||{};if("LineString"===this.props.measurement.geomType&&(e=l()({},e,{geometry:l()({},e.geometry,{coordinates:(0,u.transformLineToArcs)(e.geometry.coordinates)})})),"Point"===this.props.measurement.geomType){let t=this.drawControl._marker.getLatLng(),o={x:t.lng,y:t.lat,srs:"EPSG:4326"},r=l()({},this.props.measurement,{point:o,feature:e});this.props.changeMeasurementState(r)}else{let t=l()({},this.props.measurement,{feature:e});this.props.changeMeasurementState(t)}this.props.measurement.lineMeasureEnabled&&this.lastLayer&&this.addArcsToMap([e]),setTimeout((()=>{this.props.map.off("click",this.restartDrawing,this),this.props.map.on("click",this.restartDrawing,this)}),100)})),g(this,"onDrawVertex",(()=>{let t=this.drawControl._markers||[];"Bearing"===this.props.measurement.geomType&&t.length>=2?setTimeout((()=>{this.drawControl._markers=c()(this.drawControl._markers,0,2),this.drawControl._poly._latlngs=c()(this.drawControl._poly._latlngs,0,2),this.drawControl._poly._originalPoints=c()(this.drawControl._poly._originalPoints,0,2),this.updateMeasurementResults(),this.drawControl._finishShape(),this.drawControl.disable()}),100):this.updateMeasurementResults()})),g(this,"addArcsToMap",(t=>{this.removeLastLayer();let e=t.map((t=>l()({},t,{geometry:l()({},t.geometry,{coordinates:(0,u.transformLineToArcs)(t.geometry.coordinates)})})));this.arcLayer=h().geoJson(e,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),this.props.map.addLayer(this.arcLayer),e&&e.length>0&&this.arcLayer.addData(e)})),g(this,"updateMeasurementResults",(()=>{if(!this.drawing||!this.drawControl)return;let t=0,e=0,o=0,r=this.drawControl._currentLatLng;if("LineString"===this.props.measurement.geomType&&this.drawControl._markers&&this.drawControl._markers.length>1){const e=this.drawControl._markers.reduce(((t,e)=>{const{lng:o,lat:r}=e.getLatLng();return[...t,[o,r]]}),[]);t=(0,u.calculateDistance)(e,this.props.measurement.lengthFormula)}else if("Polygon"===this.props.measurement.geomType&&this.drawControl._poly){let t=[...this.drawControl._poly.getLatLngs(),r];e=h().GeometryUtil.geodesicArea(t)}else"Bearing"===this.props.measurement.geomType&&this.drawControl._markers&&this.drawControl._markers.length>0&&(o=this.calculateBearing());let i=l()({},this.props.measurement,{point:null,len:t,area:e,bearing:o});this.props.changeMeasurementState(i)})),g(this,"restartDrawing",(()=>{this.props.map.off("click",this.restartDrawing,this),this.props.map.doubleClickZoom&&this.props.map.doubleClickZoom.enable(),this.props.map.removeLayer(this.lastLayer),this.drawControl.enable(),this.drawing=!0})),g(this,"addDrawInteraction",(t=>{if(this.removeDrawInteraction(),this.props.map.on("draw:created",this.onDrawCreated,this),this.props.map.on("draw:drawstart",this.onDrawStart,this),this.props.map.on("draw:drawvertex",this.onDrawVertex,this),this.props.map.on("mousemove",this.updateBearing,this),this.props.updateOnMouseMove&&this.props.map.on("mousemove",this.updateMeasurementResults,this),"Point"===t.measurement.geomType)this.drawControl=new(h().Draw.Marker)(this.props.map,{repeatMode:!1});else if("LineString"===t.measurement.geomType||"Bearing"===t.measurement.geomType){const e=this.uomLengthOptions(t);this.drawControl=new(h().Draw.Polyline)(this.props.map,{shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType,...e,repeatMode:!1,icon:new(h().DivIcon)({iconSize:new(h().Point)(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new(h().DivIcon)({iconSize:new(h().Point)(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),trueBearing:t.measurement.trueBearing})}else if("Polygon"===t.measurement.geomType){const e=this.uomAreaOptions(t);this.drawControl=new(h().Draw.Polygon)(this.props.map,{shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType,...e,icon:new(h().DivIcon)({iconSize:new(h().Point)(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new(h().DivIcon)({iconSize:new(h().Point)(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})})}this.drawControl.enable()})),g(this,"removeDrawInteraction",(()=>{null!==this.drawControl&&void 0!==this.drawControl&&(this.drawControl.disable(),this.drawControl=null,this.removeLastLayer(),this.removeArcLayer(),this.props.map.off("draw:created",this.onDrawCreated,this),this.props.map.off("draw:drawstart",this.onDrawStart,this),this.props.map.off("draw:drawvertex",this.onDrawVertex,this),this.props.map.off("mousemove",this.updateBearing,this),this.props.map.off("click",this.restartDrawing,this),this.props.updateOnMouseMove&&this.props.map.off("mousemove",this.updateMeasurementResults,this),this.props.map.doubleClickZoom&&this.props.map.doubleClickZoom.enable())})),g(this,"removeLastLayer",(()=>{this.lastLayer&&this.props.map.removeLayer(this.lastLayer)})),g(this,"removeArcLayer",(()=>{this.arcLayer&&this.props.map.removeLayer(this.arcLayer)})),g(this,"uomLengthOptions",(t=>{let{unit:e}=t.uom.length;return{metric:"m"===e||"km"===e,nautic:"nm"===e,feet:"ft"===e}})),g(this,"uomAreaOptions",(t=>{let{unit:e}=t.uom.area;return{metric:"sqm"===e||"sqkm"===e,nautic:"sqnm"===e,feet:"sqft"===e}})),g(this,"calculateBearing",(()=>{let t,e=this.drawControl._currentLatLng,o=0,r=this.drawControl._markers,i=[r[0].getLatLng().lng,r[0].getLatLng().lat];return 1===r.length?t=[e.lng,e.lat]:2===r.length&&(t=[r[1].getLatLng().lng,r[1].getLatLng().lat]),i=(0,u.reproject)(i,"EPSG:4326",this.props.projection),t=(0,u.reproject)(t,"EPSG:4326",this.props.projection),o=(0,u.calculateAzimuth)(i,t,this.props.projection),o})),g(this,"updateBearing",(()=>{if("Bearing"===this.props.measurement.geomType&&this.drawControl._markers&&this.drawControl._markers.length>0){const t=this.props.measurement&&this.props.measurement.trueBearing;this.drawControl.setOptions({bearing:this.calculateBearing(),trueBearing:t})}}))}UNSAFE_componentWillReceiveProps(t){if((t&&t.uom&&t.uom.length&&t.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){const e=this.uomLengthOptions(t);this.drawControl.setOptions({...e,uom:t.uom})}if((t&&t.uom&&t.uom.area&&t.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){const e=this.uomAreaOptions(t);this.drawControl.setOptions({...e,uom:t.uom})}(t.measurement.geomType&&t.measurement.geomType!==this.props.measurement.geomType||t.measurement.geomType&&this.props.measurement.geomType&&(t.measurement.lineMeasureEnabled||t.measurement.areaMeasureEnabled||t.measurement.bearingMeasureEnabled)&&!this.props.enabled&&t.enabled)&&this.addDrawInteraction(t),t.measurement.geomType||this.removeDrawInteraction()}render(){var t=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return t&&(h().drawLocal=t),null}}g(w,"displayName","MeasurementSupport"),g(w,"propTypes",{map:i().object,metric:i().bool,feet:i().bool,nautic:i().bool,enabled:i().bool,useTreshold:i().bool,projection:i().string,measurement:i().object,changeMeasurementState:i().func,messages:i().object,uom:i().object,updateOnMouseMove:i().bool}),g(w,"contextTypes",{messages:i().object}),g(w,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1});const C=w},397969:(t,e,o)=>{function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var i=o(45697),s=o(124852),n=o(117244),a=o(845243),l=o(926447),p=o(727418);o(928143);const h={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0};class m extends s.Component{componentDidMount(){let t=p({},h,this.props.overviewOpt);if(this.props.layers){let e=[];this.props.layers.forEach((t=>{e.push(l.createLayer(t.type,t.options||{}))})),1===e.length?this.overview=new n(e[0],t):e.length>1&&(this.overview=new n(a.layerGroup(e),t))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}render(){return null}}r(m,"displayName","Overview"),r(m,"propTypes",{map:i.object,overviewOpt:i.object,layers:i.array}),r(m,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),t.exports=m},982935:(t,e,o)=>{function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var i=o(45697),s=o(124852),n=o(845243);class a extends s.Component{componentDidMount(){if(this.scalebar=n.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());const t=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");t&&t.parentNode&&t.parentNode.removeChild(t)}}componentWillUnmount(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(t){}}render(){return null}}r(a,"propTypes",{map:i.object,position:i.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:i.number,metric:i.bool,imperial:i.bool,updateWhenIdle:i.bool,container:i.string}),r(a,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),t.exports=a},934970:(t,e,o)=>{var r=o(845243);r.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),r.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(t){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,t),this.options.singleClickTimeout||500)},_fireSingleClick:function(t){t.originalEvent._stopped||this.fire("singleclick",r.Util.extend(t,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},931806:(t,e,o)=>{const r=o(845243),i=o(623560);o(124402),o(32245),t.exports={extra:{getIcon:t=>{const e=t.iconPrefix||"fa";return r.ExtraMarkers.icon({icon:e+"-"+t.iconGlyph,markerColor:t.iconColor||"blue",shape:t.iconShape||"square",prefix:e,extraClasses:t.highlight?"marker-selected":""})}},standard:{getIcon:t=>r.icon({iconUrl:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl,shadowUrl:t.shadowUrl,iconSize:t.iconSize,shadowSize:t.shadowSize,iconAnchor:t.iconAnchor,shadowAnchor:t.shadowAnchor,popupAnchor:t.popupAnchor})},html:{getIcon:(t,e)=>r.divIcon(i(t.html)?t.html(e):t.html)}}},247012:(t,e,o)=>{const r=o(845243),i=o(931806),s=o(727418),{isMarkerStyle:n,isSymbolStyle:a}=o(119950),l=function(t,e,o){var r=[],i=t.length;for(let s,n=0;n<i;n++)s=e?l(t[n],e-1,o):(o||this.coordsToLatLng)(t[n]),r.push(s);return r},p=t=>{if("GeometryCollection"===t.geometry.type)return!1;const e=t.style;return e&&(n(e)||a(e)||e.iconUrl||e.iconGlyph)},h={coordsToLatLngF:function(t){return new r.LatLng(t[1],t[0],t[2])},coordsToLatLngs:l,isMarker:p,getPointLayer:function(t,e,o,r){return t?t(e,o):h.pointToLayer(o,e,{...r.style,styleName:r.styleName,highlight:r.highlight})},pointToLayer:(t,e,o)=>{const s=o.Point||o.MultiPoint||o,n=((t,e)=>{if(t&&t.iconGlyph){const e=t.iconLibrary||"extra";if(i[e])return i[e].getIcon(t)}return t&&t.html&&e?i.html.getIcon(t,e):t&&t.iconUrl||t.symbolUrlCustomized||t.symbolUrl?i.standard.getIcon(t):null})(s,e);return n?r.marker(t,{icon:n,opacity:s&&s.opacity||1}):r.marker(t,{opacity:s&&s.opacity||1})},toValidGeoJSON:()=>{},createTextPointMarkerLayer:function(){let{pointToLayer:t,geojson:e,latlng:o,options:i,style:s={},highlight:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.properties&&e.properties.isText){let t=r.divIcon({html:`<span style="\n                font:${s.font};\n                color:${s.fillColor};\n                -webkit-text-stroke-width:1px;\n                -webkit-text-stroke-color:${s.color};">${e.properties.valueText}</span>`,className:""});return new r.Marker(o,{icon:t})}return h.getPointLayer(t,e,o,{...i,style:s,highlight:n})},createPolygonCircleLayer:function(){let{geojson:t,style:e={},latlngs:o=[],coordsToLatLng:i=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.properties&&t.properties.isCircle){let o=i(t.properties.center);return r.circle(o,{...e,radius:t.properties.radius})}return new r.Polygon(o,e)},geometryToLayer:function(t,e){const o="Feature"===t.type?t.geometry:t,i=o?o.coordinates:null,n=[],a={styleName:e.styleName,style:e.style&&e.style[0]||e.style,...t},m=e&&!p(a)?function(t,e){return"marker"===a.styleName?r.marker(e,a.style):r.circleMarker(e,a.style&&a.style[0]||a.style)}:null;let c,u=e&&e.coordsToLatLng||h.coordsToLatLngF;if(!i&&!o)return null;let d,g,y,f,b=a.style||s({},e.style&&e.style[o.type]||e.style,{highlight:e.style&&e.style.highlight});switch(o.type){case"Point":return d=u(i),c=h.createTextPointMarkerLayer({pointToLayer:m,geojson:t,latlng:d,options:e,style:b,highlight:b&&b.highlight}),c;case"MultiPoint":for(y=0,f=i.length;y<f;y++)d=u(i[y]),c=h.createTextPointMarkerLayer({pointToLayer:m,geojson:t,latlng:d,options:e,style:b,highlight:b&&b.highlight}),c.msId=t.id,n.push(c);return new r.FeatureGroup(n);case"LineString":return b=h.updateHighlightStyle(b),g=l(i,"LineString"===o.type?0:1,u),c=new r.Polyline(g,b),c.msId=t.id,c;case"MultiLineString":for(b=h.updateHighlightStyle(b),g=l(i,"LineString"===o.type?0:1,u),y=0,f=g.length;y<f;y++)c=new r.Polyline(g[y],b),c.msId=t.id,c&&n.push(c);return new r.FeatureGroup(n);case"Polygon":return b=h.updateHighlightStyle(b),g=l(i,"Polygon"===o.type?1:2,u),c=h.createPolygonCircleLayer({geojson:t,style:b,latlngs:g,coordsToLatLng:u}),c.msId=t.id,c;case"MultiPolygon":for(b=h.updateHighlightStyle(b),g=l(i,"Polygon"===o.type?1:2,u),y=0,f=g.length;y<f;y++)c=h.createPolygonCircleLayer({geojson:t,style:b,latlngs:g,coordsToLatLng:u}),c.msId=t.id,c&&n.push(c);return new r.FeatureGroup(n);case"GeometryCollection":for(y=0,f=o.geometries.length;y<f;y++)c=h.geometryToLayer({geometry:o.geometries[y],type:"Feature",properties:t.properties},e),c&&n.push(c);return new r.FeatureGroup(n);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:t=>{let{highlight:e}=t;return e?s({},t,{dashArray:e?"10":null}):t}};t.exports=h},319438:(t,e,o)=>{"use strict";o.d(e,{Z:()=>s});var r=o(923645),i=o.n(r)()((function(t){return t[1]}));i.push([t.id,".ms2 .leaflet-control-minimap {\n    border:solid rgba(255, 255, 255, 1.0) 4px;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n    border-radius: 3px;\n    background: #f8f8f9;\n    transition: all .2s;\n}\n.ms2 .leafletbottom.leafletright, .ms2 .leaflet-control-minimap{\n    position:relative;\n    bottom:5px;\n}\n.ms2 .leaflet-control-minimap a {\n    background-color: rgba(255, 255, 255, 1.0);\n    background-repeat: no-repeat;\n    z-index: 99999;\n    transition: all .2s;\n}\n\n.ms2 .leaflet-control-minimap a.minimized-bottomright {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    border-radius: 0px;\n    bottom: -3px;\n    right: -3px;\n}\n\n.ms2 .leaflet-control-minimap a.minimized-topleft {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n    border-radius: 0px;\n}\n\n.ms2 .leaflet-control-minimap a.minimized-bottomleft {\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n    border-radius: 0px;\n}\n\n.ms2 .leaflet-control-minimap a.minimized-topright {\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n    border-radius: 0px;\n}\n\n.ms2 .leaflet-control-minimap-toggle-display{\n    background-size: cover;\n    position: absolute;\n    border-radius: 3px 0px 0px 0px;\n}\n\n.ms2 .leaflet-control-minimap-toggle-display-bottomright {\n    bottom: 0;\n    right: 0;\n}\n\n.ms2 .leaflet-control-minimap-toggle-display-topleft{\n    top: 0;\n    left: 0;\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.ms2 .leaflet-control-minimap-toggle-display-bottomleft{\n    bottom: 0;\n    left: 0;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.ms2 .leaflet-control-minimap-toggle-display-topright{\n    top: 0;\n    right: 0;\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n/* Old IE */\n.ms2 .leaflet-oldie .leaflet-control-minimap {\n    border: 1px solid #999;\n}\n\n.ms2 .leaflet-oldie .leaflet-control-minimap a {\n    background-color: #fff;\n}\n\n.ms2 .leaflet-oldie .leaflet-control-minimap a.minimized {\n    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n}\n",""]);const s=i},928143:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>n});var r=o(893379),i=o.n(r),s=o(319438);i()(s.Z,{insert:"head",singleton:!1});const n=s.Z.locals||{}}}]);