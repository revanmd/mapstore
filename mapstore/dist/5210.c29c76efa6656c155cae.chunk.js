(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[5210],{35210:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var i=a(124852),l=a.n(i),o=a(414293),s=a.n(o),n=a(630294),d=a(472986),r=a.n(d),c=a(8204),m=a(804504),p=a(446524),u=a(406557),h=a.n(u),v=a(173581);const w={component:e=>{let{modules:t={toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},editorState:a,onUpdateEditorState:i=(()=>{})}=e;return l().createElement("div",{id:"ms-details-editor"},l().createElement(v.Z,{bounds:"#ms-details-editor",value:a||"<p><br></p>",onChange:e=>{i(e)},modules:t}))},detailsTextToEditorState:h(),editorStateToDetailsText:h(),containerBodyClass:"ms-details-quill-editor"};var b=a(867076),g=a(592172),S=a(406714);const E={QuillEditor:w,DraftJSEditor:{component:(0,b.compose)((0,b.withProps)((e=>{let{editorState:t,onUpdateEditorState:a=(()=>{})}=e;return{onEditorStateChange:e=>{a(e)},editorState:t,toolbar:{options:["fontFamily","blockType","inline","textAlign","colorPicker","list","link","remove","image"],image:{className:void 0,component:void 0,popupClassName:void 0,urlEnabled:!0,uploadEnabled:!0,alignmentEnabled:!0,uploadCallback:e=>new Promise(((t,a)=>{const i=new FileReader;i.addEventListener("load",(()=>{t({data:{link:i.result}})})),e?i.readAsDataURL(e):a()})),previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"auto"}}}}})),g.Sq)(),detailsTextToEditorState:S.n0,editorStateToDetailsText:S.sc,containerBodyClass:"ms-details-draftjs-editor"}};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},D.apply(this,arguments)}const k=(0,b.compose)((0,b.withState)("showPreview","setShowPreview",!1),(0,b.withHandlers)({onShowPreview:e=>{let{setShowPreview:t=(()=>{})}=e;return()=>{t(!0)}},onHidePreview:e=>{let{setShowPreview:t=(()=>{})}=e;return()=>{t(!1)}}}))((e=>{let{loading:t=!1,showPreview:a=!1,editDetailsDisabled:i,detailsText:o,settings:d={},canUndo:p=!1,onShowPreview:u=(()=>{}),onHidePreview:h=(()=>{}),onUndo:v=(()=>{}),onShowDetailsSheet:w=(()=>{}),onUpdate:b=(()=>{}),onUpdateResource:g=(()=>{}),onDelete:S=(()=>{})}=e;return l().createElement("div",{className:"ms-section"+(a?" ms-transition":"")},l().createElement("div",{className:"mapstore-block-width"},l().createElement(n.Row,null,l().createElement(n.Col,{xs:6},l().createElement("div",{className:"m-label"},!t&&s()(o)?l().createElement(m.Z,{msgId:"map.details.add"}):l().createElement(m.Z,{msgId:"map.details.rowTitle"}))),l().createElement(n.Col,{xs:6},l().createElement("div",{className:"ms-details-sheet"},l().createElement("div",{className:"pull-right"},t?l().createElement(r(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,!t&&l().createElement(c.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:a?"eye-open":"eye-close",visible:!!o,onClick:()=>a?h():u(),disabled:t,tooltipId:a?"map.details.hidePreview":"map.details.showPreview"},{glyph:"undo",tooltipId:"map.details.undo",visible:p,onClick:()=>v(),disabled:t},{glyph:"pencil-add",tooltipId:"map.details.add",visible:!o,onClick:()=>{w(),b()},disabled:t},{glyph:"pencil",tooltipId:"map.details.edit",visible:!!o&&!i,onClick:()=>{w(),b(o)},disabled:t},{glyph:"new-window",tooltipId:"map.details.showAsModal",visible:!!o,bsStyle:d.showAsModal?"success":"default",onClick:()=>g("attributes.detailsSettings.showAsModal",!d.showAsModal)},{glyph:"pushpin",tooltipId:"map.details.showAtStartup",visible:!!o,bsStyle:d.showAtStartup?"success":"default",onClick:()=>g("attributes.detailsSettings.showAtStartup",!d.showAtStartup)},{glyph:"trash",tooltipId:"map.details.delete",visible:!!o,onClick:()=>S(),disabled:t}]})))))),o&&l().createElement("div",{className:"ms-details-preview-container"},""!==o?l().createElement("div",{className:"ms-details-preview",dangerouslySetInnerHTML:{__html:o}}):l().createElement("div",{className:"ms-details-preview"}," ",l().createElement(m.Z,{msgId:"maps.feedback.noDetailsAvailable"}))))})),T=e=>{var t,a;let{loading:i,resource:o={},editor:n="DraftJSEditor",editorProps:d={},editorState:r,savedDetailsText:c,detailsBackup:m,showDetailsSheet:u,setEditorState:h=(()=>{}),setDetailsBackup:v=(()=>{}),onUpdateResource:w=(()=>{}),onUpdateLinkedResource:b=(()=>{}),onShowDetailsSheet:g=(()=>{}),onHideDetailsSheet:S=(()=>{})}=e;const{component:T,editorStateToDetailsText:y,detailsTextToEditorState:C,containerBodyClass:A}=E[n];return l().createElement(l().Fragment,null,l().createElement(k,{loading:i||o.saving,detailsText:c,detailsBackup:m,editDetailsDisabled:!s()(o.canEdit)&&!o.canEdit,settings:null===(t=o.attributes)||void 0===t?void 0:t.detailsSettings,canUndo:!!m,onUndo:()=>{b("details",m,"DETAILS"),v()},onUpdate:e=>h(C(e)),onUpdateResource:w,onShowDetailsSheet:g,onDelete:()=>{v(c),b("details","NODATA","DETAILS")}}),l().createElement(p.Z,{loading:i,show:u,title:null===(a=o.metadata)||void 0===a?void 0:a.name,detailsText:r,bodyClassName:A,onClose:()=>{S()},onSave:e=>{let t=y(e);S(),v(),t&&"<p><br></p>"!==t||(t=c),b("details",t||"NODATA","DETAILS")}},l().createElement(T,D({},d,{editorState:r,onUpdateEditorState:h}))))}},173581:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(124852);const l=(0,a(297977).Z)()((0,i.lazy)((()=>Promise.all([a.e(6758),a.e(9715)]).then(a.bind(a,439715)))))}}]);