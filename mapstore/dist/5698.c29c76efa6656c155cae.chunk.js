(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[5698],{626824:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(45697),o=t.n(r),i=t(753370),n=t.n(i),l=t(180307),c=t.n(l);function a(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}class p extends(n()){constructor(e){super(e),a(this,"scrollListener",(()=>{this.props.isFocused||(this.scroll=this.canvas.scrollTop);const e=Math.ceil(this.canvas.clientHeight/this.props.rowHeight),s=Math.floor(this.canvas.scrollTop/this.props.rowHeight),t=s+e;this.props.onGridScroll&&this.props.onGridScroll({firstRowIdx:s,lastRowIdx:t})})),a(this,"setCanvasListener",(()=>{this.canvas=c().findDOMNode(this).querySelector(".react-grid-Canvas"),this.header=c().findDOMNode(this).querySelector(".react-grid-HeaderRow"),this.canvas&&this.canvas.addEventListener("scroll",this.scrollListener)}))}componentDidMount(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}componentWillUnmount(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}componentDidUpdate(e){const{virtualScroll:s,displayFilters:t,scrollToTopCounter:r}=this.props;e.displayFilters!==t&&this.onToggleFilter(),s&&(this.canvas&&this.canvas!==c().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),r!==e.scrollToTopCounter&&this.canvas?this.canvas.scrollTop=0:this.canvas&&this.header&&(this.canvas.scrollLeft=this.header.scrollLeft))}}a(p,"propTypes",{displayFilters:o().bool});const d=p},785698:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(124852),o=t.n(r),i=t(45697),n=t.n(i);function l(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}const c={ALLOW:{classNameRow:"ms-allow-row"},DENY:{classNameRow:"ms-deny-row"}};class a extends o().Component{constructor(e){super(e),this.setScrollLeft=e=>this.row.setScrollLeft(e)}componentWillUnmount(){this.setScrollLeft=null}render(){const{row:e={},isSelected:s}=this.props,t=(s?" ms-row-select ":"")+((c[e.grant]||{}).classNameRow||" ");return this.props.renderBaseRow({extraClasses:t,...this.props})}}l(a,"propTypes",{idx:n().oneOfType([n().string,n().number]),row:n().object,renderBaseRow:n().func.isRequired,isSelected:n().bool}),l(a,"defaultProps",{selected:[]});const p=a;var d=t(747119),h=t(45453),u=t(626824),w=t(590937),g=t(753370);const{CheckboxEditor:m}=g.editors;class v extends o().Component{renderRowIndex(){return o().createElement("div",{className:"rdg-row-index"},this.props.dependentValues&&this.props.dependentValues.priority||"")}render(){const{connectDragSource:e,rowSelection:s}=this.props;let t=null!==s?{position:"absolute",marginTop:"-2px",marginLeft:"3px"}:{},r=this.props.value,i=r?"rdg-actions-checkbox selected":"rdg-actions-checkbox";return e(o().createElement("div",null,o().createElement("div",{className:"rdg-drag-row-handle",style:t}),r?null:this.renderRowIndex(),null!==s&&o().createElement("div",{className:i},o().createElement(m,{column:this.props.column,rowIdx:this.props.rowIdx,dependentValues:this.props.dependentValues,value:this.props.value}))))}}v.propTypes={rowIdx:n().number.isRequired,connectDragSource:n().func.isRequired,connectDragPreview:n().func.isRequired,isDragging:n().bool.isRequired,isRowHovered:n().bool,column:n().object,dependentValues:n().object,value:n().bool,rowSelection:n().object.isRequired},v.defaultProps={rowIdx:0};const f=(0,w.Ej)("Row",{beginDrag:e=>({idx:e.rowIdx,data:e.dependentValues}),endDrag:e=>({idx:e.rowIdx,data:e.dependentValues})},(function(e,s){return{connectDragSource:e.dragSource(),isDragging:s.isDragging(),connectDragPreview:e.dragPreview()}}))(v);function y(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}const{Container:S,DropTargetRowContainer:b}=h.Draggable,R=b(p);class x extends o().Component{constructor(){super(...arguments),y(this,"componentDidUpdate",(e=>{let{rowsCount:s,isEditing:t}=e;(this.props.rowsCount>0&&s!==this.props.rowsCount||t&&!this.props.isEditing)&&this.grid.scrollListener()})),y(this,"onRowsSelected",(e=>{const s=this._getSelectedRow(this.props.rowKey,this.props.selectedIds,this.props.rows).concat(e.map((e=>{let{row:s}=e;return s})).filter((e=>{let{id:s}=e;return"empty_row"!==s})));s.length>0&&this.props.onSelect(s)})),y(this,"onRowsDeselected",(e=>{let s=e.map((e=>e.row[this.props.rowKey]));const t=this.props.selectedIds.filter((e=>-1===s.indexOf(e)));this.props.onSelect(this._getSelectedRow(this.props.rowKey,t,this.props.rows))})),y(this,"isDraggedRowSelected",((e,s)=>{if(e&&e.length>0){let t=this.props.rowKey;return e.filter((e=>e[t]===s.data[t])).length>0}return!1})),y(this,"_getSelectedRow",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(t).reduce(((r,o)=>r.concat(t[o].filter((t=>-1!==s.indexOf(t[e]))))),[])})),y(this,"reorderRows",(e=>{if("empty_row"===e.rowSource.data[this.props.rowKey]||"empty_row"===e.rowTarget.data[this.props.rowKey])return;if(e.rowSource.idx===e.rowTarget.idx)return;let s=this._getSelectedRow(this.props.rowKey,this.props.selectedIds,this.props.rows),t=this.isDraggedRowSelected(s,e.rowSource)?s:[e.rowSource.data];this.props.onReorderRows({rules:t,targetPriority:e.rowTarget.data.priority})}))}componentDidMount(){this.props.rowsCount>0&&this.grid.scrollListener()}componentWillUnmount(){this.grid=null}render(){return o().createElement(S,null,o().createElement(u.Z,{displayFilters:!0,ref:e=>{this.grid=e},enableCellSelection:!1,emptyRowsView:()=>o().createElement(d.Z,{glyph:"inbox"}),rowActionsCell:f,columns:this.props.columns,rowGetter:this.props.rowGetter,rowsCount:this.props.rowsCount,rows:this.props.rows,minHeight:this.props.height,minWidth:this.props.width,rowRenderer:o().createElement(R,{onRowDrop:this.reorderRows}),virtualScroll:!0,onGridScroll:this.props.onGridScroll,onAddFilter:this.props.onAddFilter,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:this.onRowsSelected,onRowsDeselected:this.onRowsDeselected,selectBy:{keys:{rowKey:this.props.rowKey,values:this.props.selectedIds}}}}))}}y(x,"propTypes",{rowKey:n().string.isRequired,width:n().number,height:n().number,rows:n().oneOfType([n().array,n().object]),rowsCount:n().number,columns:n().array,onSelect:n().func,selectedIds:n().array,rowGetter:n().func,onGridScroll:n().func,onAddFilter:n().func,onReorderRows:n().func,isEditing:n().bool}),y(x,"contextTypes",{messages:n().object}),y(x,"defaultProps",{rowKey:"id",rows:[],onSort:()=>{},onSelect:()=>{},selectedIds:[],columns:[],isEditing:!1});const C=x}}]);