(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[6311],{403410:(e,t,l)=>{"use strict";l.d(t,{hn:()=>r,yg:()=>n,vD:()=>o,jJ:()=>a,oy:()=>i,W:()=>s,B1:()=>d,fU:()=>c,cY:()=>u});const r="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",n="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",o="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",s=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",r=arguments.length>3?arguments[3]:void 0;return{type:a,id:e,owner:t,actionType:l,options:r}},d=(e,t)=>({type:i,owner:e,options:t}),c=function(){let{id:e,owner:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:n,id:e,owner:t}},u=e=>({type:o,owner:e})},546243:(e,t,l)=>{"use strict";l.d(t,{vZ:()=>r,TB:()=>n,gF:()=>o,g$:()=>a,dJ:()=>i,uz:()=>s,vA:()=>d,lX:()=>c,E2:()=>u,mF:()=>p,ch:()=>m,DX:()=>y,j1:()=>f,wL:()=>g,Nm:()=>h,rb:()=>b,dk:()=>v,Wv:()=>k,Nf:()=>E,FU:()=>S,k5:()=>I,pt:()=>T,Wm:()=>C,wj:()=>w,l1:()=>F,cu:()=>O,Fe:()=>P,Lc:()=>x,p2:()=>A,WQ:()=>N,E0:()=>L,xR:()=>R,WB:()=>Z,bB:()=>z});const r="STYLEEDITOR:TOGGLE_STYLE_EDITOR",n="STYLEEDITOR:SELECT_STYLE_TEMPLATE",o="STYLEEDITOR:UPDATE_TEMPORARY_STYLE",a="STYLEEDITOR:UPDATE_STATUS",i="STYLEEDITOR:RESET_STYLE_EDITOR",s="STYLEEDITOR:ADD_STYLE",d="STYLEEDITOR:CREATE_STYLE",c="STYLEEDITOR:LOADING_STYLE",u="STYLEEDITOR:LOADED_STYLE",p="STYLEEDITOR:ERROR_STYLE",m="STYLEEDITOR:UPDATE_STYLE_CODE",y="STYLEEDITOR:EDIT_STYLE_CODE",f="STYLEEDITOR:DELETE_STYLE",g="STYLEEDITOR:INIT_STYLE_SERVICE",h="STYLEEDITOR:SET_EDIT_PERMISSION",b="STYLEEDITOR:SET_DEFAULT_STYLE",v="STYLEEDITOR:UPDATE_EDITOR_METADATA";function k(e,t){return{type:r,layer:e,enabled:t}}function E(e){return{type:a,status:e}}function S(){let{code:e,templateId:t,format:l,languageVersion:r,init:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:n,code:e,templateId:t,format:l,init:o,languageVersion:r}}function I(){let{temporaryId:e,templateId:t,code:l,format:r,languageVersion:n,init:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:o,temporaryId:e,templateId:t,code:l,format:r,init:a,languageVersion:n}}function T(e){return{type:c,status:e}}function C(){return{type:u}}function w(e){return{type:d,settings:e}}function F(){return{type:i}}function O(e){return{type:s,add:e}}function P(e,t){return{type:p,status:e,error:t}}function x(){return{type:m}}function A(e){return{type:y,code:e}}function N(e){return{type:f,styleName:e}}function L(e,t){return{type:g,service:e,canEdit:t}}function R(e){return{type:h,canEdit:e}}function Z(){return{type:b}}function z(e){return{type:v,metadata:e}}},458698:(e,t,l)=>{"use strict";l.d(t,{Z:()=>A});var r=l(959956),n=l(472500),o=l.n(n),a=l(189734),i=l.n(a),s=l(91175),d=l.n(s),c=l(984596),u=l.n(c),p=l(281763),m=l.n(p),y=l(747037),f=l.n(y),g=l(944908),h=l.n(g),b=l(727418),v=l.n(b),k=l(65792),E=l.n(k),S=l(399790);const I=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]},...h()(Object.keys(E().brewer).map((e=>e.toLocaleLowerCase()))).map((e=>({name:e,colors:e})))],T=(e,t,l,r)=>{const n=e?d()((e.thematic.colors||e.thematic.additionalColors||[]).filter((e=>e.name===t)))||d()(I.filter((e=>e.name===t))):r?d()([r,...I].filter((e=>e.name===t))):d()(I.filter((e=>e.name===t)));return n&&(f()(n.colors)||n.colors.length>=2)?{ramp:"custom",colors:E().scale(n.colors).colors(l).join(",")}:{ramp:t}},C=(e,t)=>{const l=e.thematic&&e.thematic.params||[],r=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce(((n,o)=>{return((e,t)=>function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((t=>t.field===e)).length>0}(e,t))(o,[...l,...r])?v()(n,((e,t,l)=>({viewparams:(e?e+";":"")+t+":"+l}))(n.viewparams,o,t[o])):"ramp"===o?v()(n,T(e,t[o],t.intervals||5)):"classification"===o?v()(n,(a=t[o])?{customClasses:a.reduce(((e,t)=>[...e,t.min+","+t.max+","+t.color]),[]).join(";")}:{}):"attribute"===o?v()(n,{attribute:e.thematic&&e.thematic.fieldAsParam?t[o]:t.field}):"field"===o&&e.thematic&&!e.thematic.fieldAsParam?n:"strokeWeight"!==o||t.strokeOn?"strokeOn"===o?n:v()(n,{[o]:t[o]}):v()(n,{[o]:-1});var a}),{})},w=e=>v()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{}),F=e=>e.reduce(((e,t)=>m()(t)?t:e),null),O=e=>e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null,P=e=>e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080",x={getStyleService:(e,t)=>{const l=(0,r.ij)((0,S.Hi)(e));return o().format(v()(w(l),{pathname:l.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:v()({},C(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:e=>{const t=(0,r.ij)((0,S.Hi)(e));return o().format(v()(w(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:(e,t,l)=>{const{baseUrl:n="",isStatic:a=!1}=l||{},i=(0,r.ij)(a?n:(0,S.Hi)(e));return o().format(v()(w(i),{pathname:i.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:(e,t)=>({SLD:x.getStyleService(e,t),viewparams:C(e,t).viewparams}),getMetadataParameters:(e,t)=>C(e,t),getFieldsService:e=>{const t=(0,r.ij)((0,S.Hi)(e)),l=e.thematic&&e.thematic.datatable||e.name;return o().format(v()(w(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+l+"/attributes.json"}))},readFields:e=>i()(u()(e.Attributes.Attribute||[]).filter((e=>{return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((e=>({name:e.name,type:(e.type,"number")}))),(e=>e.name)),readClassification:(e,t)=>{(e=>{if(e&&e.Rule)throw new Error("toc.thematic.invalid_attribute");if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");u()(e.Rules.Rule).forEach((e=>{if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))})(e);const l=u()(e.Rules.Rule||[]);return l.map(((e,r)=>{var n,o,a,i;return{title:e.Title,color:P(e),type:O(e),..."uniqueInterval"===t?{unique:e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal}:{min:F([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,r===l.length-1&&(null==e||null===(n=e.Filter)||void 0===n||null===(o=n.PropertyIsGreaterThanOrEqualTo)||void 0===o?void 0:o.Literal)]),max:F([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===r&&(null==e||null===(a=e.Filter)||void 0===a||null===(i=a.PropertyIsLessThan)||void 0===i?void 0:i.Literal)])}}}))||[]},readRasterClassification:e=>{var t,l,r,n;return((null===(l=u()(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===l||null===(r=l.RasterSymbolizer)||void 0===r||null===(n=r.ColorMap)||void 0===n?void 0:n.ColorMapEntry)||[]).map((e=>({color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])})))},methods:["equalInterval","quantile","jenks"],getThematicParameters:e=>e.map((e=>e.type&&x.standardParams[e.type]&&v()({},x.standardParams[e.type],e)||e)),standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:T,getColors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const n=t?t.thematic.colors||[...e,...t.thematic.additionalColors||[]]:r?[r,...e]:[...e];return n.map((e=>!f()(e.colors)&&e.colors.length>=l?e:v()({},e,{colors:E().scale(e.colors).colors(l)})))},hasThematicStyle:e=>!!(e&&e.params&&e.params.SLD),removeThematicStyle:e=>{const{SLD:t,viewparams:l,...r}=e;return v()({},r,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}},A=x},811408:(e,t,l)=>{"use strict";l.d(t,{eb:()=>k,IW:()=>E,DG:()=>S});var r=l(618446),n=l.n(r),o=l(227361),a=l.n(o),i=l(984596),s=l.n(i),d=l(470509),c=l.n(d),u=l(860294),p=l(458698);const m=["equalInterval","uniqueInterval","quantile","jenks","standardDeviation"],y=["equalInterval","quantile","jenks"];let f={};function g(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return t.map((t=>t.ruleId===e?l(t):t))}function h(e){const{capabilities:t={}}=e||{},{vector:l={}}=t,{raster:r={}}=t,n=l.classifications||[],o=r.classifications||[];return{vector:n.filter((e=>-1!==m.indexOf(e))),raster:o.filter((e=>-1!==m.indexOf(e)))}}const b=(e,t)=>{const l=a()(e,"Rules.Rule"),r=l&&a()(l,"RasterSymbolizer.ColorMap.ColorMapEntry"),n="classificationRaster"===t.type?r&&s()(r).length:l&&s()(l).length,o="custom"===t.ramp&&t.classification.length>0&&{name:"custom",colors:t.classification.map((e=>e.color))},{colors:i=[]}=p.Z.getColor(void 0,t.ramp,n||t.intervals,o);let d=null==i?void 0:i.split(",");return t.reverse&&(d=d.reverse()),{classification:p.Z["classificationRaster"===t.type?"readRasterClassification":"readClassification"](e,t.method).map(((e,t)=>({...e,color:d[t]})))}},v=e=>{let{baseUrl:t,styleService:l}=e;const r=null!=l&&l.isStatic?l.baseUrl:t;if(f[r])return new Promise((e=>e(f[r])));const n=p.Z.getCapabilitiesUrl({url:r});return(null!=l&&l.isStatic?new Promise((e=>e(l))):u.ZP.getStyleService({baseUrl:r})).then((e=>c().get(n).then((t=>{let{data:l}=t;return[e,l]})).catch((()=>[e,null])))).then((e=>{let[t,l]=e;const n={...t,classificationMethods:l?h(l):{vector:y,raster:y}};return f[r]=n,n}))};function k(e){let{baseUrl:t,styleService:l}=e;return v({baseUrl:t,styleService:l})}function E(e){let{values:t,properties:l,rules:r,layer:o,styleService:a}=e,i=["intervals","method","reverse","attribute","ramp","intervalsForUnique"],s={...l,...t};const{ruleId:d}=l;if(void 0!==t.ramp&&t.ramp!==l.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){const{colors:e}=p.Z.getColor(void 0,t.ramp,s.intervals),l=e.split(",");return new Promise((e=>e(g(d,r,(e=>({...e,...s,classification:s.classification.map(((e,t)=>({...e,color:l[t]}))),errorId:void 0}))))))}const u=i.reduce(((e,t)=>({...e,[t]:l[t]})),{}),m=i.reduce(((e,t)=>({...e,[t]:s[t]})),{}),y=!i.find((e=>void 0===s[e]))&&!n()(u,m)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method),f=function(){let{errorId:e,msgParams:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(d,r,(r=>({...r,...t,errorId:e,msgParams:l})))};if(y){const e={intervals:s.intervals,method:s.method,attribute:s.attribute,intervalsForUnique:s.intervalsForUnique};return c().get(p.Z.getStyleMetadataService(o,e,a)).then((e=>{let{data:l}=e;return g(d,r,(e=>({...e,...t,...b(l,s),errorId:void 0})))})).catch((e=>f(((e,t)=>{const l="uniqueInterval"===(null==e?void 0:e.method),r=null==e?void 0:e.intervalsForUnique;return{errorId:t&&t.includes("toc")?t:l?"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationError",msgParams:l?{intervalsForUnique:r}:{}}})(s,null==e?void 0:e.message))))}return new Promise((e=>e(f())))}function S(e){let{values:t,properties:l,rules:r,layer:o,styleService:a}=e;const i=["intervals","continuous","method","reverse","ramp","intervalsForUnique"],s={...l,...t},{ruleId:d}=l;if(void 0!==t.ramp&&t.ramp!==l.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){const{colors:e}=p.Z.getColor(void 0,t.ramp,s.intervals),l=e.split(",");return new Promise((e=>e(g(d,r,(e=>({...e,...s,classification:s.classification.map(((e,t)=>({...e,color:l[t]}))),errorId:void 0}))))))}const u=i.reduce(((e,t)=>({...e,[t]:l[t]})),{}),m=i.reduce(((e,t)=>({...e,[t]:s[t]})),{}),y=!i.find((e=>void 0===s[e]))&&!n()(u,m)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method),f=function(){let{errorId:e,msgParams:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(d,r,(r=>({...r,...t,errorId:e,msgParams:l})))};return y?c().get(p.Z.getStyleMetadataService(o,{intervals:s.intervals,continuous:s.continuous,method:s.method,reverse:s.reverse,intervalsForUnique:s.intervalsForUnique},a)).then((e=>{let{data:l}=e;return g(d,r,(e=>({...e,...t,...b(l,s),errorId:void 0})))})).catch((e=>f(((e,t)=>{const l="uniqueInterval"===(null==e?void 0:e.method),r=null==e?void 0:e.intervalsForUnique;return{errorId:l?t&&t.includes("float type")?"styleeditor.classificationRasterUniqueIntervalError":"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationRasterError",msgParams:l?{intervalsForUnique:r}:{}}})(s,null==e?void 0:e.data)))):new Promise((e=>e(f())))}},860294:(e,t,l)=>{"use strict";l.d(t,{ZP:()=>F});var r=l(470509),n=l.n(r),o=l(727418),a=l.n(o),i=l(227361),s=l.n(i),d=l(567523),c=l.n(d),u=l(968929),p=l.n(u);let m={};const y=e=>e.map((e=>c()(e,((e,t)=>p()(t)))));var f=l(91175),g=l.n(f),h=l(984596),b=l.n(h),v=l(644825);const k=[{regex:/gt-css/,format:"css"}],E={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},S=(e,t)=>"sld"===e?t&&t.version&&"1.1.0"===t.version?E.sldse:E.sld:E[e]||E.sld,I=(e,t)=>{let{options:l={},format:r,baseUrl:n,name:o,workspace:a,languageVersion:i}=e;const s=t?{name:encodeURIComponent(o)}:{};return{options:{...l,params:{...l.params,...s},headers:{...l.headers||{},"Content-Type":S(r,i)}},url:`${n}rest/${a&&`workspaces/${a}/`||""}styles${t?".json":`/${encodeURIComponent(o)}`}`}},T=e=>{let{geoserverBaseUrl:t,workspace:l,name:r,format:n="json"}=e;return`${t}rest/${l&&`workspaces/${l}/`||""}styles/${encodeURIComponent(r)}.${n}`},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=b()((null==e?void 0:e.entry)||[]);return t.reduce(((e,t)=>({...e,[t["@key"]]:t.$})),{})},w=e=>{let{baseUrl:t,styleName:l,metadata:r}=e;const o=T({...(0,v.$N)(l),geoserverBaseUrl:t});return n().get(o).then((function(){var e;let{data:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().put(o,{style:{...t.style,metadata:{...C(null===(e=t.style)||void 0===e?void 0:e.metadata),...r}}})}))},F={saveStyle:(e,t,l,r)=>{let o=e+"styles/"+encodeURI(t),i=a()({},r);return i.headers=a()({},i.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),n().put(o,l,i)},getStyleService:e=>{let{baseUrl:t}=e;return function(e){let{baseUrl:t}=e;return m[t]?new Promise((e=>e(m[t]))):n().all([n().get(`${t}rest/about/version`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"about.resource")})).catch((()=>null)),n().get(`${t}rest/about/manifest`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"about.resource")})).catch((()=>null)),n().get(`${t}rest/fonts`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"fonts")})).catch((()=>null))]).then((e=>{let[l,r,n]=e;const o={version:l&&y(l),manifest:r&&y(r),fonts:n};return l&&r?(m[t]=o,m[t]):o}))}({baseUrl:t}).then((e=>{let{version:l,manifest:r,fonts:n=[]}=e;if(!l)return null;const o=(r||[]).map((e=>{let{name:t}=e;return g()(k.filter((e=>{let{regex:l}=e;return t.match(l)})).map((e=>{let{format:t}=e;return t})))})).filter((e=>e)),a=g()(l.filter((e=>{let{name:t=""}=e;return"geoserver"===t.toLowerCase()})))||{};return{baseUrl:t,version:a.version,formats:[...o,"sld"],availableUrls:[],fonts:n}}))},getStyle:e=>{let{options:t,format:l,baseUrl:r,styleName:o}=e;const{name:a,workspace:i}=(0,v.$N)(o),s=I({options:t,format:l,baseUrl:r,name:a,workspace:i});return n().get(s.url,s.options)},createStyle:e=>{let{baseUrl:t,code:l,options:r,format:o="sld",styleName:a,languageVersion:i,metadata:s}=e;const{name:d,workspace:c}=(0,v.$N)(a),u=I({options:r,format:o,baseUrl:t,name:d,workspace:c,languageVersion:i},!0);return n().post(u.url,l,u.options).then((()=>s?w({baseUrl:t,styleName:a,metadata:s}).then((()=>null)).catch((()=>null)):null))},updateStyle:e=>{let{baseUrl:t,code:l,options:r,format:o="sld",styleName:a,languageVersion:i,metadata:s}=e;const{name:d,workspace:c}=(0,v.$N)(a),u=I({options:r,format:o,baseUrl:t,name:d,workspace:c,languageVersion:i});return n().put(u.url,l,u.options).then((()=>s?w({baseUrl:t,styleName:a,metadata:s}).then((()=>null)).catch((()=>null)):null))},deleteStyle:e=>{let{baseUrl:t,options:l,format:r="sld",styleName:o}=e;const{name:a,workspace:i}=(0,v.$N)(o),s=I({options:l,format:r,baseUrl:t,name:a,workspace:i});return n().delete(s.url,s.options)},getStylesInfo:e=>{let{baseUrl:t,styles:l=[]}=e,r=[],o=l.length;return new Promise((function(e){l&&0!==l.length?l.forEach(((i,s)=>{let{name:d,href:c}=i;return n().get(c||T({...(0,v.$N)(d),geoserverBaseUrl:t})).then((t=>{let{data:n}=t;r[s]=a()({},l[s],n&&n.style&&{...n.style,...n.style.metadata&&{metadata:C(n.style.metadata)},name:(0,v.U_)(n.style)}||{}),o--,0===o&&e(r.filter((e=>e)))})).catch((()=>{r[s]=a()({},l[s]),o--,0===o&&e(r.filter((e=>e)))}))})):e([])}))},getStyleCodeByName:e=>{let{baseUrl:t,styleName:l,options:r}=e;const{name:o,workspace:a}=(0,v.$N)(l),i=T({name:o,workspace:a,geoserverBaseUrl:t});return n().get(i,r).then((e=>{return e.data&&e.data.style&&e.data.style.name?n().get(T({workspace:a,geoserverBaseUrl:t,name:e.data.style.name,format:(l=e.data.style.filename,l.split(".").pop())})).then((t=>{var l,r;let{data:n}=t;return{...e.data.style,...(null==e||null===(l=e.data)||void 0===l||null===(r=l.style)||void 0===r?void 0:r.metadata)&&{metadata:C(e.data.style.metadata)},code:n}})):null;var l}))},updateStyleMetadata:w}},768977:(e,t,l)=>{"use strict";l.d(t,{Z:()=>p});var r=l(45697),n=l.n(r),o=l(124852),a=l.n(o),i=l(630294),s=l(222777);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},d.apply(this,arguments)}function c(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class u extends a().Component{render(){const{cardComponent:e,items:t,colProps:l,onItemClick:r,size:n}=this.props,o=e||s.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(i.Row,{className:"items-list"},t.map(((e,t)=>a().createElement(i.Col,d({key:e.id||t},l),a().createElement(o,d({onClick:function(){for(var t=arguments.length,l=new Array(t),n=0;n<t;n++)l[n]=arguments[n];return r(e,...l)},size:n},e)))))))}}c(u,"propTypes",{size:n().string,onItemClick:n().func,colProps:n().object,items:n().array,cardComponent:n().oneOfType([n().string,n().func]),className:n().string}),c(u,"defaultProps",{size:"",onItemClick:()=>{},colProps:{xs:12},className:"",items:[]});const p=u},847911:(e,t,l)=>{"use strict";l.d(t,{Z:()=>d});var r=l(124852),n=l.n(r),o=l(45697),a=l.n(o),i=l(23279),s=l.n(i);const d=(e,t)=>l=>{function o(o){const a=(0,r.useRef)(),[i,d]=(0,r.useState)(o[t]),c=(0,r.useRef)();c.current=i,(0,r.useEffect)((()=>{c.current!==o[t]&&d(o[t])}),[o[t]]),(0,r.useEffect)((()=>(a.current=s()((t=>{let{newProps:l,newValue:r}=t;l[e](r)}),o.debounceTime),()=>{a.current.cancel()})),[o.debounceTime]);const u={...o,[t]:i,[e]:function(e){d(e),a.current&&(a.current.cancel(),a.current({newProps:o,newValue:e}))}};return n().createElement(l,u)}return o.propTypes={debounceTime:a().number},o.defaultProps={debounceTime:300},o.displayName=l.displayName+"WithDebounceOnCallback",o}},392021:(e,t,l)=>{"use strict";l.d(t,{Z:()=>p});var r=l(45697),n=l.n(r),o=l(124852),a=l.n(o),i=l(743129),s=l(598611),d=l.n(s);function c(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class u extends a().Component{constructor(){super(...arguments),c(this,"styleRenderer",((e,t,l)=>{const r=this.props.styleRendererPattern||a().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},a().createElement("path",{className:"ms-dash-array",strokeWidth:this.props.defaultStrokeWidth,strokeDasharray:l||e.value,d:"M0 12.5, 300 12.5"}));return a().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},r)}))}render(){const e=d()(this.props.dashArray||"1 0"," "),t=this.props.options.find((t=>t.value===e))?this.props.options:[{value:e},...this.props.options],l=this.props.creatable?i.ZP.Creatable:i.ZP;return a().createElement(l,{options:t,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:e,isValidNewOption:this.props.isValidNewOption,onChange:e=>{if(e){const t=e.value.split(" ");this.props.onChange(t)}}})}}c(u,"propTypes",{dashArray:n().array,menuPlacement:n().string,clearable:n().bool,value:n().string,optionRenderer:n().func,styleRendererPattern:n().node,valueRenderer:n().func,disabled:n().bool,onChange:n().func,options:n().array,creatable:n().bool,isValidNewOption:n().func,defaultStrokeWidth:n().number}),c(u,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:()=>{},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const p=u},28815:(e,t,l)=>{"use strict";l.d(t,{Z:()=>O});var r=l(23279),n=l.n(r),o=l(666654),a=l.n(o),i=l(618446),s=l.n(i),d=l(623560),c=l.n(d),u=l(513218),p=l.n(u),m=l(747037),y=l.n(m),f=l(727418),g=l.n(f),h=l(45697),b=l.n(h),v=l(124852),k=l.n(v),E=l(804504),S=l(756435),I=l(89518),T=l(423214),C=l(662398);function w(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class F extends k().Component{constructor(){super(...arguments),w(this,"state",{}),w(this,"onRenderToken",(e=>{const t=e.lineCount();this.inlineWidgets&&this.inlineWidgets.forEach((e=>{e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),this.inlineWidgets=[],e.doc.iter(0,t,(t=>{const l=t.lineNo();e.getLineTokens(l).forEach((t=>{this.inlineWidgets=this.props.inlineWidgets.reduce(((r,n)=>{let{type:o,style:a={},active:i=(()=>!1),className:s=""}=n;if(i(t)){const n=this.getInlineWidget({className:s,token:t,onClick:()=>this.setState({inlineWidgetType:o,token:t,lineNo:l}),style:c()(a)&&a(t)||a});return e.addWidget({line:l,ch:t.start-1},n,!1),[...r,n]}return[...r]}),[...this.inlineWidgets])}))}))})),w(this,"onAutocomplete",(e=>{if(e&&e.state&&e.state.completionActive)return;const t=e.getCursor(),l=e.getTokenAt(t);if(l.string&&(a()(l.string,"-")||l.string.match(/^[.`\w@]\w*$/))&&l.string.length>0){const t=this.editor&&this.editor.getWrapperElement&&this.editor.getWrapperElement()||null;this.cm.commands.autocomplete(e,null,{completeSingle:!1,container:t})}})),w(this,"onUpdate",(()=>{this.update.cancel(),this.update()})),w(this,"getInlineWidget",(e=>{let{onClick:t=(()=>{}),token:l={},className:r="",style:n={}}=e;const o=document.createElement("div");return o.setAttribute("class",`${r} ms-style-editor-inline-widget`),g()(o.style,n),o.onclick=()=>t({...l}),o})),w(this,"getChangedCode",((e,t)=>{if("application/json"===t&&y()(e))try{return{code:JSON.parse(e)}}catch(e){return{error:e}}return{code:e}})),w(this,"getErrorMessage",(()=>this.props.error.messageId?k().createElement(E.Z,{msgId:this.props.error.messageId,msgParams:this.props.error.messageParams}):this.props.error.line?this.props.error.message:k().createElement(E.Z,{msgId:"styleeditor.genericValidationError"})))}UNSAFE_componentWillMount(){this.setState({code:p()(this.props.code)?JSON.stringify(this.props.code,null,2):this.props.code})}UNSAFE_componentWillUpdate(e){if(!s()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){const t=this.editor.lineCount(),l={line:e.error.line-1||0,ch:0},r=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(l,r,{className:"ms-style-editor-error"})}}render(){return k().createElement(S.Z,{className:"ms-style-editor",style:this.props.style,header:k().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&k().createElement(I.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&k().createElement(T.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:k().createElement(E.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.getErrorMessage()}))},k().createElement(C.Z,{key:"style-editor",value:this.state.code,editorDidMount:(e,t,l,r)=>{this.onRenderToken(e),this.editor=e,this.cm=r,e.on("inputRead",this.onAutocomplete),this.update=n()((()=>{const{error:e,code:t}=this.getChangedCode(this.state.code,this.props.mode);e?this.props.onError(e):this.props.onChange(t)}),this.props.waitTime),this.cm.extendMode(this.props.mode,{hintProperties:this.props.hintProperties})},editorWillUnmount:e=>e.off("inputRead",this.onAutocomplete),onBeforeChange:(e,t,l)=>this.setState({code:l}),onChange:e=>{this.onRenderToken(e),this.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&k().createElement("div",{className:"ms-inline-widget-container"},k().createElement("div",null,k().createElement("button",{className:"btn close square-button",onClick:()=>{this.state.value&&this.editor.replaceRange(this.state.value,{line:this.state.lineNo,ch:this.state.token.start},{line:this.state.lineNo,ch:this.state.token.end}),this.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),k().createElement("div",null,this.props.inlineWidgets.filter((e=>{let{type:t}=e;return t===this.state.inlineWidgetType})).map((e=>{let{Widget:t}=e;return k().createElement(t,{value:this.state.value,token:this.state.token,onChange:e=>this.setState({value:e})})})))))}}w(F,"propTypes",{mode:b().string,theme:b().string,style:b().object,code:b().oneOfType([b().string,b().object]),onChange:b().func,waitTime:b().number,hintProperties:b().object,error:b().object,inlineWidgets:b().array,loading:b().bool,onError:b().func}),w(F,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:()=>{},waitTime:1e3,hintProperties:{},inlineWidgets:[],onError:()=>{}});const O=F},393666:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});var r=l(124852),n=l.n(r);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},o.apply(this,arguments)}const a=e=>{let{type:t,patterns:l,paths:r,texts:a,backgroundColor:i="#ffffff"}=e;return n().createElement("svg",{viewBox:"0 0 200 200"},n().createElement("defs",null,l&&l.filter((e=>e.icon)).map((e=>n().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&n().createElement("path",e.icon)))),l&&l.filter((e=>e.image)).map((e=>n().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&n().createElement("image",e.image))))),n().createElement("path",{fill:i,d:"M0 0 L200 0 L200 200 L0 200Z"}),r&&r.map((e=>{let{type:l,...r}=e;return"polygon"===(l||t)&&n().createElement("path",o({},r,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(l||t)&&n().createElement("path",o({},r,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(l||t)&&n().createElement("path",r)})),a&&a.map((e=>{let{text:t,...l}=e;return n().createElement("text",o({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},l),t)})))}},625671:(e,t,l)=>{"use strict";l.d(t,{Z:()=>Pt});var r=l(124852),n=l.n(r),o=l(45697),a=l.n(o),i=l(23279),s=l.n(i),d=l(313311),c=l.n(d),u=l(406557),p=l.n(u),m=l(8204),y=l(89518),f=l(701469),g=l.n(f),h=l(630294),b=l(513218),v=l.n(b),k=l(957557),E=l.n(k),S=l(414293),I=l.n(S),T=l(807654),C=l.n(T),w=l(147814),F=l(981537),O=l(894449),P=l(392021),x=l(317723),A=l(804504),N=l(486234);const L=function(e){let{children:t,label:l,tools:r,divider:o,invalid:a,warning:i,disabled:s}=e;if(o)return n().createElement("div",{className:"ms-symbolizer-field-divider"});const d=i?" ms-symbolizer-value-warning":"",c=a?" ms-symbolizer-value-invalid":"",u=s?" ms-symbolizer-value-disabled":"";return n().createElement("div",{className:"ms-symbolizer-field"},n().createElement("div",{className:"ms-symbolizer-label"},n().createElement(A.Z,{msgId:l})),n().createElement("div",{className:"ms-symbolizer-value"+c+u+d,onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},t,n().createElement("div",{className:"ms-symbolizer-tools"},r)))};var R=l(424471),Z=l(393666);const z=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var D=l(36549),W=l(23888);const M=(0,D.Z)(W.Z),$=function(e){let{value:t,config:l={},onChange:r=(()=>{})}=e;const{options:o=z}=l,a=o.find((e=>e.value===t));return n().createElement(R.Z,{content:n().createElement("div",{className:"ms-mark-list"},n().createElement("ul",null,o.map((e=>n().createElement("li",{key:e.value},n().createElement(M,{className:"ms-mark-preview",active:e.value===t,onClick:()=>r(e.value)},n().createElement(Z.Z,e.preview)))))))},n().createElement(M,{className:"ms-mark-preview"},a&&n().createElement(Z.Z,a.preview)))};var j=l(743129);const U=function(e){let{label:t="styleeditor.band",value:l,bands:r,onChange:o,enhancementType:a}=e;return n().createElement(n().Fragment,null,n().createElement(L,{label:t},n().createElement(j.ZP,{clearable:!1,options:r,value:l,onChange:e=>o("band",e.value)})),n().createElement(L,{label:"styleeditor.contrastEnhancement"},n().createElement(j.ZP,{clearable:!1,options:[{label:n().createElement(A.Z,{msgId:"styleeditor.none"}),value:"none"},{label:n().createElement(A.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:n().createElement(A.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:a||"none",onChange:e=>{const t="none"===e.value?void 0:e.value;o("enhancementType",t)}})))};var V=l(847911),B=l(644825);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},q.apply(this,arguments)}const G=(0,V.Z)("onChange","value")((0,N.Z)("placeholder")((function(e){return n().createElement(h.FormControl,q({},e,{onChange:t=>e.onChange(t.target.value)}))}))),_=(0,D.Z)(h.Glyphicon);function K(e){let{value:t,onChange:l,onLoad:o}=e;const a=(0,r.useRef)(!0);(0,r.useEffect)((()=>(a.current=!0,()=>{a.current=!1})),[]);const[i,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!0),[u,p]=(0,r.useState)(t),m=(e,t)=>{p(e),s(!0),c(!1),(0,B.ZF)(e).then((t=>{if(a.current){let l=!1;t.isBase64&&(l={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),c(l),s(!1),o(l,e)}})).catch((t=>{if(a.current){const l=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};c(l),s(!1),o(l,e)}})),t&&l(e)},f=(0,r.useRef)(t);return(0,r.useEffect)((()=>{m(f.current)}),[]),n().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},n().createElement(h.FormGroup,{style:{flex:1}},n().createElement(G,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:e=>m(e,!0)})),n().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},u&&!d&&!i&&n().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:`url(${u})`,backgroundPosition:"center",backgroundSize:"contain"}}),d&&n().createElement(_,{glyph:"exclamation-sign",tooltipId:`styleeditor.${d.messageId}`}),i&&n().createElement(y.Z,{size:20})))}K.propTypes={value:a().bool,onChange:a().node,onLoad:a().object,onError:a().object},K.defaultProps={value:"",onChange:()=>{},onLoad:()=>{},onError:()=>{}};const Y=K;var H=l(984596),J=l.n(H);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},X.apply(this,arguments)}const Q=(0,N.Z)(["placeholder","noResultsText"])(j.ZP),ee=(0,N.Z)(["placeholder","noResultsText"])(j.ZP.Creatable),te=function(e){let{label:t,value:l,config:{getOptions:o=(()=>[]),selectProps:a={}}={},onChange:i,disabled:s,...d}=e;const{creatable:c,clearable:u=!1,multi:p}=a;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const l=e.map((e=>e.value)),r=(null==t?void 0:t.value)&&-1===l.indexOf(t.value);return r?[t,...e]:e}function y(e){return l?J()(l).map((e=>({value:e,label:e}))).reduce(m,e):e}const f=o(d),[g,b]=(0,r.useState)(y(f));(0,r.useEffect)((()=>{b(y(f))}),[JSON.stringify(f)]);const v=c?ee:Q;return n().createElement(v,X({disabled:s,clearable:u,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},a,{options:g.map((e=>({...e,label:e.labelId?n().createElement(n().Fragment,null,n().createElement(A.Z,{msgId:e.labelId}),e.glyphId&&n().createElement(h.Glyphicon,{style:{marginLeft:10},glyph:e.glyphId})):e.label}))),value:l,onChange:e=>p?i(e.length>0?e.map((e=>e.value)):void 0):(b(m(g,e)),i(e.value))}))};function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},le.apply(this,arguments)}const re=(0,N.Z)("placeholder")(h.FormControl),ne={color:e=>{let{label:t,config:l={},value:o,onChange:a=(()=>{}),disableAlpha:i,format:s}=e;const d=(0,r.useRef)({value:o});if(d.current={value:o},"pattern"==(v()(o)&&o.kind?"pattern":"solid")){const{params:e={}}=(null==l?void 0:l.getGroupParams(o.kind))||{},t=(null==l?void 0:l.getGroupConfig(o.kind))||{},r=o;return n().createElement(n().Fragment,null,n().createElement(oe,{properties:r,params:t.omittedKeys?E()(e,t.omittedKeys):e,config:{disableAlpha:t.disableAlpha},onChange:e=>a({...d.current.value,...e}),format:s}),n().createElement(L,{divider:!0}))}return n().createElement(L,{label:t},n().createElement(w.Z,{color:o,line:l.stroke,disableAlpha:l.disableAlpha||i,onChangeColor:e=>e&&a(e)}))},slider:e=>{let{label:t,value:l,disabled:r,config:o={},onChange:a=(()=>{})}=e;return n().createElement(L,{label:t,disabled:r},n().createElement("div",{className:"mapstore-slider with-tooltip",onClick:e=>{e.stopPropagation()}},n().createElement(F.Z,{start:[l],disabled:r,tooltips:[!0],format:o.format,range:o.range||{min:0,max:10},onChange:e=>a(e)})))},input:e=>{let{label:t,value:l,config:r={},onChange:o=(()=>{}),disabled:a}=e;return n().createElement(L,{label:t},n().createElement(h.FormGroup,null,n().createElement(re,{type:r.type||"text",value:l,disabled:a,placeholder:"styleeditor.placeholderInput",onChange:e=>o(e.target.value)})))},toolbar:e=>{let{label:t,value:l,onChange:r=(()=>{}),config:o={},disabled:a}=e;return n().createElement(L,{label:t,disabled:a},n().createElement(m.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(o.options||[]).map((e=>{let{glyph:t,label:o,labelId:i,tooltipId:s,value:d}=e;return{glyph:t,tooltipId:s,disabled:a,text:i?n().createElement(A.Z,{msgId:i}):o,active:d===l,onClick:()=>r(l===d?void 0:d)}}))}))},mark:e=>{let{label:t,...l}=e;return n().createElement(L,{label:t},n().createElement($,l))},image:e=>{let{label:t,value:l,config:{},onChange:o}=e;const[a,i]=(0,r.useState)(!1),s=v()(l)?l.src:l;return n().createElement(L,{label:t,invalid:!("error"!==(null==a?void 0:a.type)),warning:!("warning"!==(null==a?void 0:a.type))},n().createElement(Y,{label:t,value:s,onChange:e=>{o(e),i(!1)},onLoad:(e,t)=>{i(e),e&&o({src:t,errorId:e.messageId})}}))},select:e=>{const{label:t,value:l,config:{isValid:r},visible:o=!0}=e;if(!o)return null;const a=!r||r({value:l});return n().createElement(L,{label:t,invalid:!a},n().createElement(te,e))},colorRamp:e=>{let{label:t,value:l,config:{samples:r=5,getOptions:o=(()=>[]),rampFunction:a=(e=>{let{colors:t}=e;return t})},onChange:i,...s}=e;const d=o(s);return n().createElement(L,{label:t},n().createElement(O.Z,{items:d,rampFunction:a,samples:r,value:{name:l},onChange:e=>i(e.name)}))},colorMap:e=>{let{value:t,onChange:l}=e;return n().createElement("div",{onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},n().createElement(x.Z,{classification:t,onUpdateClasses:(e,t)=>l({classification:e,type:t})}))},channel:e=>{var t,l,r;let{value:o,onChange:a,bands:i}=e;const{channelSelection:s}=o,d=s?s.grayChannel?"gray":"rgb":"auto",c=(i||[]).map((e=>({label:e,value:e})));if("rgb"===d)return Object.keys(s).map((e=>{var t,l;const r=null===(t=s[e])||void 0===t?void 0:t.sourceChannelName,i=null===(l=s[e])||void 0===l?void 0:l.contrastEnhancement;return n().createElement(n().Fragment,null,n().createElement(U,{key:e,value:r,bands:c,label:"styleeditor."+e,enhancementType:(null==i?void 0:i.enhancementType)||"none",onChange:(t,l)=>"band"===t?a({contrastEnhancement:{},channelSelection:{...o.channelSelection,[e]:{...o.channelSelection[e],sourceChannelName:l}}}):"enhancementType"===t?a({contrastEnhancement:{},channelSelection:{...o.channelSelection,[e]:{...o.channelSelection[e],contrastEnhancement:{...s[e].contrastEnhancement,enhancementType:l}}}}):null}),n().createElement(L,{key:e+"-divider",divider:!0}))}));const u=void 0===(null==s||null===(t=s.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==s||null===(l=s.grayChannel)||void 0===l?void 0:l.sourceChannelName,p="auto"===d?o.contrastEnhancement:null==s||null===(r=s.grayChannel)||void 0===r?void 0:r.contrastEnhancement;return n().createElement(U,{label:"styleeditor.grayChannel",value:u,bands:[{label:n().createElement(A.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"},...c],enhancementType:(null==p?void 0:p.enhancementType)||"none",onChange:(e,t)=>"band"===e?a("auto"===t?{...o,channelSelection:void 0}:{contrastEnhancement:{},channelSelection:{grayChannel:{contrastEnhancement:{},...null==s?void 0:s.grayChannel,sourceChannelName:t}}}):"enhancementType"===e?a("auto"===d?{channelSelection:void 0,contrastEnhancement:{...o.contrastEnhancement,enhancementType:t}}:{contrastEnhancement:{},channelSelection:Object.keys(s).reduce(((e,l)=>({...e,[l]:{...s[l],contrastEnhancement:{...s[l].contrastEnhancement,enhancementType:t}}})),{})}):null})},dash:e=>{let{label:t,value:l,onChange:r,config:{options:o}}=e;return n().createElement(L,{label:t},n().createElement(P.Z,{dashArray:l,onChange:r,options:o,defaultStrokeWidth:2,isValidNewOption:e=>!!e.label&&!e.label.split(" ").find((e=>C()(parseFloat(e)))),creatable:!0}))}};function oe(e){let{properties:t,params:l,config:o,onChange:a,format:i}=e;const s=(0,r.useRef)({properties:t});return s.current={properties:t},n().createElement(n().Fragment,null,Object.keys(l).map((e=>{const{type:r,setValue:d,getValue:c,isDisabled:u,config:p,label:m,key:y,isVisible:f}=l[e]||{},g=y||e,h=ne[r],b=d&&d(t[g],s.current.properties);return h&&n().createElement(h,le({},o,{key:g,label:m||g,config:p,format:i,visible:f&&f(t[g],s.current.properties,i),disabled:u&&u(t[g],s.current.properties,o),value:I()(b)?t[g]:b,onChange:e=>a(c&&c(e,s.current.properties)||e)}))})))}const ae=oe;var ie=l(423570),se=l.n(ie),de=l(651493);const ce=(0,D.Z)(W.Z),ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l={...e,[t.fieldName]:t.fieldValue,type:t.fieldType,fieldOptions:{...e.fieldOptions,currentPage:void 0===t.fieldOptions.currentPage?1:t.fieldOptions.currentPage}};return"attribute"===t.fieldName?{...l,value:"string"===t.fieldType?"":null,operator:""}:"operator"===t.fieldName?{...l,value:null}:l},pe=e=>{let{filterObj:t={groupFields:[{id:1,logic:"OR",index:0}]},attributes:l=[],format:r,groupLevels:o=0,onChange:a=(()=>{})}=e;const{groupFields:i,filterFields:s}=t;return n().createElement("div",{className:"ms-style-rule-filter"},n().createElement(de.Z,{textFieldTooltipMessageId:{css:"queryform.attributefilter.tooltipTextFieldCSS","3dtiles":"queryform.attributefilter.tooltipTextField3DTiles"}[r],attributes:l,filterFields:s,groupFields:i,autocompleteEnabled:!1,groupLevels:o,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:(e,t)=>{const l={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};a({filterFields:s,groupFields:i?[...i,l]:[l]})},onAddFilterField:e=>{const t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};a({filterFields:s?[...s,t]:[t],groupFields:i})},onRemoveFilterField:e=>{a({filterFields:s.filter((t=>t.rowId!==e)),groupFields:i})},onUpdateFilterField:function(e,t,l,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a({filterFields:s.map((o=>o.rowId===e?ue(o,{rowId:e,fieldName:t,fieldValue:l,fieldType:r,fieldOptions:n}):o)),groupFields:i})},onUpdateExceptionField:(e,t)=>{a({filterFields:s.map((l=>l.rowId===e?{...l,exception:t}:l)),groupFields:i})},onUpdateLogicCombo:(e,t)=>{a({filterFields:s,groupFields:i.map((l=>l.id===e?{...l,logic:t}:l))})},onRemoveGroupField:e=>{a({filterFields:s.filter((t=>t.groupId!==e)),groupFields:i.filter((t=>t.id!==e))})},onChangeCascadingValue:()=>{}}}))};function me(e){var t;let{value:l,hide:r,attributes:o,format:a,onChange:i,placement:s="right"}=e;if(r||!o||0===o.length)return null;const d=(null==l||null===(t=l.filterFields)||void 0===t?void 0:t.length)>0;return n().createElement(R.Z,{placement:s,content:n().createElement(pe,{filterObj:l,attributes:o,format:a,onChange:e=>i({filter:e})})},n().createElement(ce,{className:"square-button-md no-border",active:d,tooltipId:"styleeditor.openFilterBuilder"},n().createElement(h.Glyphicon,{glyph:"filter"})))}const ye=(0,N.Z)(["placeholder","noResultsText"])(j.ZP.Creatable),fe=(0,D.Z)(W.Z);function ge(e){let{label:t,currentZoom:l}=e;return n().createElement("span",null,t,l&&n().createElement(n().Fragment,null," ",n().createElement(h.Glyphicon,{glyph:"arrow-left"})))}function he(e){let{label:t,value:l,options:r,isValidNewOption:o,onChange:a}=e;return n().createElement(L,{label:t},n().createElement(ye,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:l,options:r,optionRenderer:ge,valueRenderer:ge,isValidNewOption:e=>{if(e.label){const t=parseFloat(e.label);return!C()(t)&&o(t)}return!1},onChange:e=>{const t=(null==e?void 0:e.value)&&parseFloat(e.value);a(C()(t)?void 0:t)}}))}function be(e){let{value:t,zoom:l,scales:o=[],onChange:a}=e;function i(e,t){const l=e.map((e=>e.value));return t&&-1===l.indexOf(t)?[{value:t},...e].sort(((e,t)=>e.value>t.value?-1:1)):e}const[s,d]=(0,r.useState)(function(e){const l=e.map(((e,t)=>({value:e,zoom:t}))),r=[t.min,t.max].filter((e=>void 0!==e));return 0===r.length?l:r.reduce(i,l)}(o));return n().createElement("div",{className:"ms-style-rule-scale"},n().createElement(he,{label:"styleeditor.maxScaleDenominator",value:t.max,options:s.map((e=>({value:e.value,label:"1 : "+e.value,currentZoom:void 0!==l&&l===e.zoom,disabled:t.min&&e.value<=t.min}))),isValidNewOption:e=>e>=t.min,onChange:e=>{a({...t,max:e}),d(i(s,e))}}),n().createElement(he,{label:"styleeditor.minScaleDenominator",value:t.min,options:s.map((e=>({value:e.value,label:"1 : "+e.value,currentZoom:void 0!==l&&l===e.zoom,disabled:t.max&&e.value>=t.max}))),isValidNewOption:e=>e<=t.max,onChange:e=>{a({...t,min:e}),d(i(s,e))}}))}function ve(e){let{value:t={},scales:l=[],zoom:r,hide:o,onChange:a,placement:i="right"}=e;return o?null:n().createElement(R.Z,{placement:i,content:n().createElement(be,{value:t,zoom:r,scales:l,onChange:e=>a({scaleDenominator:e})})},n().createElement(fe,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==t.min||void 0!==t.max},n().createElement(h.Glyphicon,{glyph:"1-ruler"})))}const ke=e=>{let{ruleBlock:t,symbolizerBlock:l,kind:r}=e;return"Raster"!==r?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:e=>{let{ruleId:t,defaultProperties:l}=e;return{ruleId:t,name:"",symbolizers:[{...l,symbolizerId:se()()}]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:e=>{let{ruleId:l,symbolizerKind:r,defaultProperties:n}=e;return{...n,...t.Classification.defaultProperties,ruleId:l,symbolizerKind:r}}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:e=>{let{graphicKey:t}=e;return!!t},onSelect:e=>{let{ruleId:t,defaultProperties:r,graphicKey:n}=e;return{ruleId:t,name:"",symbolizers:[{...r,symbolizerId:se()(),fill:void 0,[n]:{...l.Mark.defaultProperties}}]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:e=>{let{graphicKey:t}=e;return!!t},onSelect:e=>{let{ruleId:t,defaultProperties:r,graphicKey:n}=e;return{ruleId:t,name:"",symbolizers:[{...r,symbolizerId:se()(),fill:void 0,[n]:{...l.Icon.defaultProperties}}]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:e=>{let{ruleId:t}=e;return{ruleId:t,name:"",symbolizers:[{...l.Raster.defaultProperties,symbolizerId:se()()}]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:e=>{let{ruleId:t}=e;return{ruleId:t,name:"",symbolizers:[{...l.Raster.defaultProperties,channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:se()()}]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:e=>{let{ruleId:l}=e;return{...t.Raster.defaultProperties,ruleId:l}}}]},Ee=e=>{let{ruleKind:t,graphic:l,symbolizerKind:r,channelSelection:n}=e;return"Raster"===t?"PseudoColor":"Raster"===r?null!=n&&n.redChannel?"RGB":"Gray":void 0!==t?t:null!=l&&l.kind?null==l?void 0:l.kind:"Simple"};function Se(e){var t,l;let{ruleKind:r,symbolizerKind:o,ruleId:a,graphic:i,channelSelection:s,hide:d,ruleBlock:c,symbolizerBlock:u,getSelected:p=Ee,getOptions:m=ke,onSelect:y}=e;const f=m({ruleBlock:c,symbolizerBlock:u,kind:o}),{defaultProperties:g,params:b={}}=o?u[o]:{},v=null==b||null===(t=b.color)||void 0===t||null===(l=t.config)||void 0===l?void 0:l.graphicKey,k=p({ruleKind:r,symbolizerKind:o,graphic:i,channelSelection:s});return d?null:n().createElement(h.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:n().createElement(h.Glyphicon,{glyph:"option-vertical"})},f.map((e=>!e.isVisible||e.isVisible({graphicKey:v})?n().createElement(h.MenuItem,{key:e.value,active:k===e.value,onClick:()=>{return t=e.value,l=e.onSelect({ruleId:a,ruleKind:r,symbolizerKind:o,defaultProperties:g,graphicKey:v}),t===k?null:y(l);var t,l}},n().createElement(A.Z,{msgId:e.labelId})):null)))}const Ie=function(e){let{className:t,glyph:l,tools:r,children:o}=e;const a=t?" "+t:"";return n().createElement("li",{className:`ms-symbolizer${a}`},n().createElement("div",{className:"ms-symbolizer-info"},l&&n().createElement(h.Glyphicon,{glyph:l}),n().createElement("div",{className:"ms-symbolizer-tools"},r)),o)};var Te=l(623560),Ce=l.n(Te);const we=function(e){let{ruleId:t,glyph:l,params:o,kind:a,symbolizerKind:i,classificationType:s="classificationVector",attributes:d=[],onUpdate:c,onReplace:u,methods:p,getColors:m=(()=>{}),ruleBlock:y={},symbolizerBlock:f={},bands:g,config:h,...b}=e;const{ramp:v,method:k,classification:E,attribute:S,intervals:I,intervalsForUnique:T=(null==h?void 0:h.intervalsForUnique)||100,reverse:C,continuous:w,format:F}=b,O=(0,r.useRef)();O.current={ruleId:t,intervals:I,intervalsForUnique:T,method:k,attribute:S,reverse:C,ramp:v,continuous:w,classification:E};const P=o.reduce(((e,t)=>Ce()(t)?{...e,...t(i)}:{...e,...t}),{}),{glyph:x}=f[i]||{};return n().createElement(Ie,{key:"Classification",glyph:x||l,tools:n().createElement(Se,{ruleKind:a,symbolizerKind:i,ruleId:t,onSelect:u,ruleBlock:y,symbolizerBlock:f})},n().createElement(ae,{properties:b,format:F,config:{attributes:d,methods:p,getColors:function(){const e="custom"===v&&E.length>0&&{name:"custom",colors:E.map((e=>e.color))},t=m(void 0,void 0,5,e);return t?t.map((e=>{let{name:t,...l}=e;return{label:t?`global.colors.${t}`:void 0,name:t,...l}})):[]},bands:g,method:k,methodEdit:null==b?void 0:b.methodEdit},params:P,onChange:e=>c({...O.current,type:s,values:e})}))};var Fe=l(618446),Oe=l.n(Fe),Pe=l(717621),xe=l.n(Pe);const Ae=e=>{let{key:t="color",opacityKey:l="opacity",graphicKey:r,label:n="Fill",stroke:o,pattern:a,disableAlpha:i,getGroupParams:s,getGroupConfig:d}=e;return{type:"color",label:n,config:{stroke:o,pattern:a,disableAlpha:i,getGroupParams:s,getGroupConfig:d,graphicKey:r},setValue:(e,t)=>{var n;if(a&&null!==(n=t[r])&&void 0!==n&&n.kind)return t[r];const o=I()(t[l])?1:t[l];return xe()(e).setAlpha(o).toRgb()},getValue:e=>{if(a&&v()(e)&&e.kind)return{[r]:e,[t]:void 0,[l]:void 0};const{a:n,...o}=e||{};return{[t]:xe()({...o,a:1}).toHexString(),[l]:n,...a&&{[r]:void 0}}}}},Ne=e=>{let{key:t="width",label:l="Width",dasharrayKey:r="dasharray"}=e;return{type:"slider",label:l,config:{range:{min:0,max:20},format:{from:e=>Math.round(e),to:e=>Math.round(e)+" px"}},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const n=e[0]&&e[0].split(" px")[0],o=parseFloat(n),a=l[r],i=l[t];return{[t]:o,...a&&{[r]:o?a.map((e=>Math.round(e/i*o))):void 0}}}}},Le=e=>{let{key:t="dasharray",label:l="Dash array"}=e;return{type:"dash",label:l,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:(e,t)=>{const l=void 0===t.width?1:t.width;return void 0!==e?e.map((e=>Math.round(e/l))):[0]},getValue:(e,l)=>{if(Oe()(e,["0"]))return{[t]:void 0};const r=void 0===l.width?1:l.width,n=!(e||[]).find((e=>C()(parseFloat(e))));return{[t]:void 0!==e&&n?e.map((e=>parseFloat(e)*r)):void 0}}}},Re=e=>{let{key:t="cap",label:l="Line cap"}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:e=>({[t]:e})}},Ze=e=>{let{key:t="join",label:l="Line join"}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:e=>({[t]:e})}},ze=e=>{let{key:t="colorMapType",label:l="Color map type",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.colorMapType.ramp",value:"ramp"},{labelId:"styleeditor.colorMapType.intervals",value:"intervals"},{labelId:"styleeditor.colorMapType.values",value:"values"}]},getValue:e=>({[t]:e}),isDisabled:r}},De=e=>{let{key:t="radius",label:l="Radius",range:r}=e;return{type:"slider",label:l,config:{range:r||{min:1,max:100},format:{from:e=>Math.round(e),to:e=>Math.round(e)+" px"}},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const l=e[0]&&e[0].split(" px")[0];return{[t]:parseFloat(l)}}}},We=e=>{let{key:t="opacity",label:l="Opacity"}=e;return{type:"slider",label:l,config:{range:{min:0,max:1}},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const l=e[0]&&e[0].split(" px")[0];return{[t]:parseFloat(l)}}}},Me=e=>{let{key:t="offset",label:l="",axis:r=""}=e;return{key:t,type:"slider",label:l,config:{range:{min:-100,max:100},format:{from:e=>Math.round(e),to:e=>Math.round(e)+" px"}},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t="y"===r?parseFloat(e[1]):parseFloat(e[0]);return C()(t)?0:t},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const n=e[0]&&e[0].split(" px")[0],o=l[t]||[0,0];return{[t]:"y"===r?[o[0],parseFloat(n)]:[parseFloat(n),o[1]]}}}},$e=e=>{let{key:t="rotate",label:l="Rotation (deg)"}=e;return{type:"slider",label:l,config:{range:{min:0,max:360},format:{from:e=>Math.round(e),to:e=>Math.round(e)+"°"}},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const l=e[0]&&e[0].split("°")[0];return{[t]:parseFloat(l)}}}},je=e=>{let{key:t="msClampToGround",label:l="Clamp to ground"}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},getValue:e=>({[t]:e}),setValue:e=>!!e}},Ue=e=>{let{key:t="msBringToFront",label:l="Arrange"}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},getValue:e=>({[t]:e}),setValue:e=>!!e}},Ve=e=>{let{key:t="msClassificationType",label:l="PolygonType"}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.3dTile",value:"3d"},{labelId:"styleeditor.terrain",value:"terrain"},{labelId:"styleeditor.both",value:"both"}]},getValue:e=>({[t]:e}),setValue:e=>!!e}},Be=e=>{let{label:t,key:l="wellKnownName"}=e;return{type:"mark",label:t,getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{[l]:e}}}},qe=e=>{let{label:t,key:l="image"}=e;return{type:"image",label:t,config:{},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{[l]:e}}}},Ge=e=>{let{label:t,key:l="fontStyle"}=e;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{[l]:e}}}},_e=e=>{let{label:t,key:l="fontWeight"}=e;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{[l]:e}}}},Ke=e=>{let{key:t="label",label:l,isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:r,getValue:e=>({[t]:e})}},Ye=e=>{let{key:t="intervals",label:l,isDisabled:r=((e,t)=>"customInterval"===(null==t?void 0:t.method))}=e;return{type:"slider",label:l,config:{range:{min:2,max:25},format:{from:e=>Math.round(e),to:e=>Math.round(e)}},isDisabled:r,setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{[t]:parseFloat(e[0])}}}},He=e=>{let{label:t,key:l="",getOptions:r=(()=>[]),selectProps:n,isValid:o,isDisabled:a,isVisible:i}=e;return{type:"select",label:t,config:{getOptions:r,selectProps:n,isValid:o},getValue:e=>({[l]:e}),isDisabled:a,isVisible:i}},Je=e=>{let{label:t,key:l="",getOptions:r=(()=>[])}=e;return{type:"colorRamp",label:t,config:{getOptions:r},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{[l]:e}}}},Xe=e=>{let{label:t,key:l=""}=e;return{type:"colorMap",label:t,getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const{classification:r,type:n}=e,o="customInterval"===t.method,a="interval"===n||o,i="color"===n||"custom"===t.ramp;return{[l]:r,...a&&{method:"customInterval",methodEdit:o?t.methodEdit:t.method},...i&&{ramp:"custom"}}}}},Qe=e=>{let{label:t}=e;return{type:"channel",label:t,setValue:(e,t)=>({channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}),getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}};var et=l(264721),tt=l.n(et);const lt={msClampToGround:je({label:"styleeditor.clampToGround"})},rt={msBringToFront:Ue({label:"styleeditor.msBringToFront"})},nt={msClassificationType:Ve({label:"styleeditor.classificationtype"})},ot=function(){let{exactMatchGeometrySymbol:e,enable3dStyleOptions:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],params:{wellKnownName:Be({label:"styleeditor.shape"}),color:Ae({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:Ae({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:Ne({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:De({key:"radius",label:"styleeditor.radius"}),rotate:$e({label:"styleeditor.rotation"}),...t?rt:{}},defaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0,msBringToFront:!1}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],hideMenu:!0,params:{image:qe({label:"styleeditor.image",key:"image"}),format:He({label:"styleeditor.format",key:"format",isVisible:function(e){let{image:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return"css"!==l&&!v()(t)&&!["png","jpg","svg","gif","jpeg"].includes(t.split(".").pop())},getOptions:()=>B.qL}),opacity:We({label:"styleeditor.opacity"}),size:De({key:"size",label:"styleeditor.size"}),rotate:$e({label:"styleeditor.rotation"}),...t?rt:{}},defaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0,msBringToFront:!1}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:e?["linestring","vector"]:["linestring","polygon","vector"],params:{color:Ae({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:e=>l[e],getGroupConfig:e=>"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{},graphicKey:"graphicStroke"}),width:Ne({label:"styleeditor.strokeWidth",key:"width"}),dasharray:Le({label:"styleeditor.lineStyle",key:"dasharray"}),cap:Re({label:"styleeditor.lineCap",key:"cap"}),join:Ze({label:"styleeditor.lineJoin",key:"join"}),...t?lt:{}},defaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:Ae({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:e=>l[e],getGroupConfig:e=>"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}),outlineColor:Ae({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:Ne({key:"outlineWidth",label:"styleeditor.outlineWidth"}),...t?{...nt,...lt}:{}},defaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1,msClassificationType:"both",msClampToGround:!0}},PointCloud:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["pointcloud"],hideMenu:!0,params:{color:Ae({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),radius:De({key:"radius",label:"styleeditor.radius",range:{min:1,max:10}})},defaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,radius:1}},Polyhedron:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polyhedron"],hideMenu:!0,params:{color:Ae({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:e=>l[e],getGroupConfig:e=>"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}})},defaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],params:{label:He({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:e=>{let{attributes:t}=e;return(null==t?void 0:t.map((e=>({value:"{{"+e.attribute+"}}",label:e.attribute}))))||[]}}),font:He({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:e=>{let{fonts:t}=e;return(null==t?void 0:t.map((e=>({value:e,label:e}))))||[]}}),color:Ae({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:De({label:"styleeditor.fontSize",key:"size"}),fontStyle:Ge({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:_e({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:Ae({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:Ne({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:$e({label:"styleeditor.rotation"}),offsetX:Me({label:"styleeditor.offsetX",axis:"x"}),offsetY:Me({label:"styleeditor.offsetY",axis:"y"})},defaultProperties:{kind:"Text",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:Qe({}),opacity:We({label:"styleeditor.opacity"})},defaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},r={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:Je({key:"ramp",label:"styleeditor.colorRamp",getOptions:e=>{let{getColors:t}=e;return t()}}),reverse:Ke({key:"reverse",label:"styleeditor.reverse",isDisabled:(e,t)=>"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}),attribute:He({key:"attribute",label:"styleeditor.attribute",isValid:e=>{let{value:t}=e;return void 0!==t},getOptions:e=>{let{attributes:t}=e;return null==t?void 0:t.map((e=>({value:e.attribute,label:e.attribute,disabled:e.disabled})))}}),method:He({key:"method",label:"styleeditor.method",isDisabled:(e,t,l)=>{var r,n;let{attributes:o}=l;return"string"===(null==o||null===(r=o.filter((e=>{let{label:l}=e;return l===(null==t?void 0:t.attribute)})))||void 0===r||null===(n=r[0])||void 0===n?void 0:n.type)&&"customInterval"!==(null==t?void 0:t.method)},getOptions:e=>{let{methods:t,method:l,methodEdit:r}=e;return[..."customInterval"===l?[{labelId:"styleeditor."+r,glyphId:"edit",value:l}]:[],...(null==t?void 0:t.map((e=>({labelId:"styleeditor."+e,value:e}))))||[]]}}),intervals:Ye({label:"styleeditor.intervals",isDisabled:(e,t)=>tt()(["customInterval","uniqueInterval"],null==t?void 0:t.method)})},e=>{var t,r,n,o;if(!e)return{};switch(e){case"Mark":return{fillOpacity:We({key:"fillOpacity",label:"styleeditor.opacity"}),...E()(null===(t=l[e])||void 0===t?void 0:t.params,["color"])};case"Line":return{opacity:We({key:"opacity",label:"styleeditor.opacity"}),...E()(null===(r=l[e])||void 0===r?void 0:r.params,["color"])};case"Fill":return{fillOpacity:We({key:"fillOpacity",label:"styleeditor.opacity"}),...E()(null===(n=l[e])||void 0===n?void 0:n.params,["color"])};default:return null===(o=l[e])||void 0===o?void 0:o.params}},{classification:Xe({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:Qe({}),opacity:We({label:"styleeditor.opacity"}),ramp:Je({key:"ramp",label:"styleeditor.colorRamp",getOptions:e=>{let{getColors:t}=e;return t()}}),reverse:Ke({key:"reverse",label:"styleeditor.reverse",isDisabled:(e,t)=>"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}),continuous:Ke({key:"continuous",label:"styleeditor.continuous",isDisabled:(e,t)=>"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}),colorMapType:ze({key:"colorMapType",label:"styleeditor.colorMapType.label"}),method:He({key:"method",label:"styleeditor.method",getOptions:e=>{let{methods:t,method:l,methodEdit:r}=e;return[..."customInterval"===l?[{labelId:"styleeditor."+r,glyphId:"edit",value:l}]:[],...(null==t?void 0:t.map((e=>({labelId:"styleeditor."+e,value:e}))))||[]]}}),intervals:Ye({label:"styleeditor.intervals"})},{classification:Xe({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,colorMapType:"ramp",symbolizerKind:"Raster"}}};return{symbolizerBlock:l,ruleBlock:r}};var at=l(180307),it=l(590937);function st(e){let{title:t,tools:l,errorId:o,msgParams:a,draggable:i,connectDragSource:s,connectDropTarget:d,isDragging:c,children:u}=e;const p=(0,r.useRef)(null);i&&(s(p.current),d(p.current));const m=c?" ms-drop-target":"";return n().createElement("li",{ref:p,className:`ms-style-rule${m}`},n().createElement("div",{className:"ms-style-rule-head"},i&&n().createElement("div",{className:"ms-style-rule-grab-handle"},n().createElement(h.Glyphicon,{glyph:"grab-handle"})),n().createElement("div",{className:"ms-style-rule-head-info"},t),n().createElement("div",{className:"ms-style-rule-head-tools"},l)),o&&n().createElement(h.Alert,{bsStyle:"danger"},n().createElement(A.Z,{msgId:o,msgParams:a})),n().createElement("ul",{className:"ms-style-rule-body"},u))}st.propTypes={title:a().oneOfType([a().node,a().string]),tools:a().node,errorId:a().string,draggable:a().bool,connectDragSource:a().func,connectDropTarget:a().func,isDragging:a().bool},st.defaultProps={connectDragSource:e=>e,connectDropTarget:e=>e};const dt="RULE",ct=(0,it.GR)(dt,{hover(e,t,l){!function(e,t,l){if(!l)return null;const r=(0,at.findDOMNode)(l);if(!r)return null;const n=t.getItem().index,o=e.index;if(n===o)return null;const{bottom:a,top:i}=r.getBoundingClientRect(),s=(a-i)/2,d=t.getClientOffset().y-i;n<o&&d<s||n>o&&d>s||(e.onSort(n,o),t.getItem().index=o)}(e,t,l)}},(e=>({connectDropTarget:e.dropTarget()})))((0,it.Ej)(dt,{beginDrag:e=>({id:e.id,index:e.index})},((e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()})))(st));var ut=l(423214);function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},pt.apply(this,arguments)}const mt=(0,D.Z)(W.Z),yt=(0,N.Z)("placeholder")(h.FormControl);function ft(){return n().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},n().createElement("div",null,n().createElement(h.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),n().createElement("h1",null,n().createElement(A.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),n().createElement("p",null,n().createElement(A.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}const gt=(0,r.forwardRef)(((e,t)=>{let{rules:l=[],loading:o,toolbar:a,config:i={},ruleBlock:s={},symbolizerBlock:d={},onUpdate:u=(()=>{}),onChange:p=(()=>{})}=e;const{geometryType:y,attributes:f,bands:b,scales:v,zoom:k,fonts:E,methods:S,getColors:I,classification:T,format:C,simple:w}=i,F=(0,r.useRef)();function O(e,t){let{values:l,ruleId:r,symbolizerId:n}=e;if(t){const e=F.current.rules.map((e=>e.ruleId===r?{...e,...l}:e));return p(e)}const o=F.current.rules.map((e=>e.symbolizers?{...e,symbolizers:e.symbolizers.map((t=>t.symbolizerId===n&&e.ruleId===r?{...t,...l}:t))}:e));return p(o)}function P(e){const t=[e,...F.current.rules];p(t)}function x(e){let{ruleId:t,...l}=e;const r=F.current.rules.map((e=>e.ruleId===t?{ruleId:t,...l}:e));return p(r)}function N(e,t){const l=c()(F.current.rules,((t,l)=>l===e)),r=F.current.rules.reduce(((r,n,o)=>o===e?r:o===t?e>t?[...r,l,n]:[...r,n,l]:[...r,n]),[]);return p(r)}function L(e,t){const{symbolizers:l=[]}=e;return!!c()(l,(e=>{let{kind:t}=e;return"Text"===t}))&&t>0}return F.current={rules:l},n().createElement("div",{ref:t,className:"ms-style-rules-editor"},n().createElement("div",{className:"ms-style-rules-editor-head"},n().createElement("div",{className:"ms-style-rules-editor-left"},a),n().createElement("div",{className:"ms-style-rules-editor-right"},n().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[...Object.keys(d).map((e=>{const t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(y),tooltipId:t.tooltipAddId,onClick:()=>P({name:"",ruleId:se()(),symbolizers:[{...d[e].defaultProperties,symbolizerId:se()()}]})}})),...Object.keys(s).filter((e=>s[e].add)).map((e=>{const t=s[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(y),tooltipId:t.tooltipAddId,onClick:()=>P({name:"",ruleId:se()(),...s[e].defaultProperties})}}))]}))),n().createElement("ul",{className:"ms-style-rules-editor-body"},0===l.length&&n().createElement(ft,null),l.map(((e,t)=>{var r;const{name:o,symbolizers:a=[],filter:i,scaleDenominator:c={},ruleId:m,kind:P,errorId:R,msgParams:Z}=e,{params:z,glyph:D,hideInputLabel:W,hideFilter:M,hideScaleDenominator:$,classificationType:j}=s[P]||{},U=!!g()(f)&&"number"===(null===(r=f.find((t=>{let{label:l}=t;return l===(null==e?void 0:e.attribute)}))||{})||void 0===r?void 0:r.type);return n().createElement(ct,{key:m+(l.length>1?"_draggable":""),draggable:l.length>1,id:m,index:t,errorId:R,msgParams:Z,onSort:N,title:W?n().createElement(A.Z,{msgId:`styleeditor.rule${P}`}):n().createElement(h.FormGroup,{onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},n().createElement(yt,{value:o,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:e=>O({values:{name:e.target.value},ruleId:m},!0)})),tools:n().createElement(n().Fragment,null,L(e,t)&&n().createElement(ut.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:n().createElement(A.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:n().createElement(A.Z,{msgId:"styleeditor.warningTextOrder"})}),n().createElement(me,{hide:M,value:i,attributes:f,format:C,onChange:e=>O({values:e,ruleId:m},!0)}),v&&n().createElement(ve,{hide:$,value:c,scales:v,zoom:k,onChange:e=>O({values:e,ruleId:m},!0)}),n().createElement(mt,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:()=>function(e){const t=F.current.rules.filter((t=>t.ruleId!==e));p(t)}(m)},n().createElement(h.Glyphicon,{glyph:"trash"})))},"Classification"===P||"Raster"===P?n().createElement(we,pt({},e,{ruleBlock:s,symbolizerBlock:d,glyph:D,classificationType:j,config:T||{},params:z,methods:S,getColors:I,bands:b,attributes:f&&f.map((t=>({...t,..."customInterval"===e.method?{disabled:U?"number"!==t.type:t.label!==e.attribute}:"uniqueInterval"!==e.method&&{disabled:"number"!==t.type}}))),onUpdate:u,onChange:e=>O({values:e,ruleId:m},!0),onReplace:x,format:C})):a.map((e=>{let{kind:t="",symbolizerId:l,...r}=e;const{params:o,glyph:a,hideMenu:i}=function(e){const t=Object.keys(d).filter((e=>d[e].supportedTypes.includes(y))).find((t=>{var l;return(null===(l=d[t])||void 0===l?void 0:l.kind)===e}));return d[t]||d[e]||{}}(t);return o&&n().createElement(Ie,{key:l,defaultExpanded:!0,draggable:!0,glyph:a,tools:!w&&n().createElement(Se,{hide:i,symbolizerKind:t,ruleBlock:s,symbolizerBlock:d,ruleId:m,onSelect:x,graphic:r.graphicFill||r.graphicStroke,channelSelection:r.channelSelection})},n().createElement(ae,{properties:r,format:C,params:o,config:{bands:b,attributes:f,fonts:E},onChange:e=>O({values:e,ruleId:m,symbolizerId:l})}))})))})),o&&n().createElement("div",{className:"ms-style-rule-overlay-loader",style:{position:"absolute",width:"100%",height:"100%",zIndex:10,transition:"0.3s all"}})))})),{symbolizerBlock:ht,ruleBlock:bt}=ot();gt.propTypes={rules:a().array,loading:a().bool,toolbar:a().node,config:a().object,ruleBlock:a().object,symbolizerBlock:a().object,onUpdate:a().func,onChange:a().func},gt.defaultProps={rules:[],config:{},ruleBlock:bt,symbolizerBlock:ht,onUpdate:()=>{},onChange:()=>{}};const vt=gt;var kt=l(119950),Et=l(21090);const St="UPDATE_STYLE",It="UNDO_STYLE",Tt="REDO_STYLE",Ct={[St]:(e,t)=>({...t})},wt=(0,Et.ZP)(((e,t)=>(Ct[t.type]||p())(e,t.payload)),{limit:20,undoType:It,redoType:Tt,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Ft={};function Ot(e){var t,l;let{code:o,format:a,layer:i,zoom:d,scales:u,geometryType:p,fonts:f,bands:g,attributes:h,onChange:b,onError:v,defaultStyleJSON:k,config:E,loading:S,error:I,methods:T,getColors:C,styleUpdateTypes:w,debounceTime:F,styleService:O,exactMatchGeometrySymbol:P,enable3dStyleOptions:x}=e;const{symbolizerBlock:N,ruleBlock:L}=ot({exactMatchGeometrySymbol:P,enable3dStyleOptions:x}),[R,Z]=(0,r.useState)(!1),[z,D]=(0,r.useReducer)(wt,{}),W=(null==z?void 0:z.present)||Ft,M=(0,r.useRef)();M.current={style:W};const $=(0,r.useRef)(!1);(0,r.useEffect)((()=>{$.current&&null!==k||(0,kt.getStyleParser)(a).then((e=>e&&o&&null===k?e.readStyle(o).then((e=>{D({type:St,payload:(0,B.VM)(e)}),$.current=!0})).catch((e=>v({...e,status:400}))):e&&o&&k?($.current=!0,D({type:St,payload:k})):o&&!e?v({messageId:"styleeditor.formatNotSupported",status:400}):null))}),[o,a,k]);const j=e=>{if(Z(!1),!e)return null;const t={...M.current.style,rules:e};return D({type:St,payload:t})},U=(0,r.useRef)();(0,r.useEffect)((()=>(U.current=s()((e=>{var t;const l=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400,isEmpty:!0};const t=c()(e.map((e=>{let{errorId:t}=e;return t})),(e=>e));if(t)return{messageId:t,status:400};if(c()(e,(e=>{let{kind:t,classification:l}=e;return!("Classification"!==t&&"Raster"!==t||l&&0!==l.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};const l=c()(e,(e=>{let{symbolizers:t=[]}=e;return c()(t,(e=>{let{kind:t,image:l}=e;return"Icon"===t&&(null==l?void 0:l.errorId)}))}));var r,n,o;return l?{messageId:`styleeditor.${null==l||null===(r=l.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId}`,status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);return l?v(l):(0,kt.getStyleParser)(e.format).then((t=>t.writeStyle((0,B.Gg)(e.style)).then((t=>{const{parsedCode:l,errorObj:r}=(0,B.BG)(e,t);r?v(r):b(l,e.style)})).catch((e=>{v({...e,status:400})}))))}),F),()=>{U.current.cancel()})),[]),(0,r.useEffect)((()=>{U.current.cancel(),U.current({format:a,style:W})}),[JSON.stringify(W)]);const V=I&&(I.message||I.messageId&&n().createElement(A.Z,{msgId:I.messageId}));return n().createElement(vt,{loading:R,toolbar:n().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===((null==z||null===(t=z.past)||void 0===t?void 0:t.length)||0),onClick:()=>D({type:It})},{disabled:0===((null==z||null===(l=z.future)||void 0===l?void 0:l.length)||0),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:()=>D({type:Tt})},{visible:!!I,Element:()=>n().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},n().createElement(ut.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:n().createElement(A.Z,{msgId:"styleeditor.validationErrorTitle"}),text:n().createElement(n().Fragment,null,n().createElement("p",null,n().createElement(A.Z,{msgId:"styleeditor.genericValidationError"})),V?n().createElement("p",null,n().createElement(A.Z,{msgId:"styleeditor.validationError"}),": ",V):n().createElement("p",null,n().createElement(A.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))},{visible:!(!S&&!R),Element:()=>n().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},n().createElement(y.Z,{size:18}))}]}),ruleBlock:L,symbolizerBlock:N,config:{geometryType:p,zoom:d,fonts:f,scales:u,bands:g,attributes:h,methods:T,getColors:C,format:a,...E},rules:(null==W?void 0:W.rules)&&[...W.rules].reverse(),onChange:e=>j([...e].reverse()),onUpdate:e=>{let{values:t,...l}=e;Z(!0),(e=>{let{values:t,properties:l,rules:r,layer:n,styleService:o,styleUpdateTypes:a={}}=e;return new Promise((e=>{const i=l.type&&a[l.type];return e(i?i({values:t,properties:l,rules:r,layer:n,styleService:o}):r.map((e=>e.ruleId===l.ruleId?{...e,...t,errorId:void 0}:e)))}))})({values:t,properties:l,layer:i,rules:M.current.style.rules,styleService:O,styleUpdateTypes:w}).then((e=>j(e))).catch((()=>j()))}})}Ot.propTypes={code:a().string,format:a().string,layer:a().object,zoom:a().number,scales:a().array,geometryType:a().string,fonts:a().array,bands:a().array,attributes:a().array,onChange:a().func,onError:a().func,defaultStyleJSON:a().object,config:a().object,loading:a().bool,error:a().object,methods:a().array,getColors:a().func,styleUpdateTypes:a().object,debounceTime:a().number},Ot.defaultProps={onChange:()=>{},onError:()=>{},config:{},getColors:()=>{},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const Pt=Ot},900683:(e,t,l)=>{"use strict";l.d(t,{T:()=>R,Z:()=>Z});var r=l(701469),n=l.n(r),o=l(513218),a=l.n(o),i=l(124852),s=l.n(i),d=l(630294),c=l(171703),u=l(22222),p=l(546243),m=l(458698),y=l(811408),f=l(804504),g=l(756435),h=l(89518),b=l(8204),v=l(28815),k=l(625671),E=l(274363),S=l(703011),I=l(904160),T=l(644825),C=l(24198),w=l(717621),F=l.n(w);const O=[{type:"color",active:e=>"atom"===e.type&&F()(e.string).isValid(),style:e=>({backgroundColor:e.string}),Widget:e=>{let{token:t,value:l,onChange:r=(()=>{})}=e;return s().createElement(C.xS,{color:{hex:l||t.string},onChange:e=>r(e.hex)})}}];function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},P.apply(this,arguments)}const x={classificationVector:y.IW,classificationRaster:y.DG,classification:y.IW,"classification-raster":y.DG};function A(e,t){return e&&"raster"!==t?(0,T.u9)(e):[]}const N=(0,c.connect)((0,u.P1)([S.gB,S.iB,S.m2,S.p,S.aN,S.Vf,S.lC,E.up,E.Od,S.Z0],((e,t,l,r,o,a,i,s,d,c)=>{var u,p;return{code:e,mode:(0,T.H$)(t),bands:n()(l)&&"raster"===i&&l||[],attributes:A(l,i),error:r.edit||null,loading:o,format:t,layer:a,geometryType:i,scales:s.map((e=>Math.round(e))),zoom:d.zoom,fonts:c.fonts||[],methods:("raster"===i?null==c||null===(u=c.classificationMethods)||void 0===u?void 0:u.raster:null==c||null===(p=c.classificationMethods)||void 0===p?void 0:p.vector)||m.Z.methods,styleService:{baseUrl:null==c?void 0:c.baseUrl,isStatic:null==c?void 0:c.isStatic}}})),{onError:p.Fe.bind(null,"edit")})(k.Z);N.defaultProps={getColors:m.Z.getColors,styleUpdateTypes:x};const L={visual:N,textarea:(0,c.connect)((0,u.P1)([S.gB,S.iB,S.m2,S.p,S.aN],((e,t,l,r,n)=>({code:e,mode:(0,T.H$)(t),hintProperties:l,error:r.edit||null,loading:n}))))(v.Z)};function R(e){let{code:t,error:l,canEdit:r,editorType:n,onUpdateMetadata:o,onChange:c,loading:u,header:p,editors:m=[],...y}=e;const[v,k]=(0,i.useState)(),E={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!t&&!l)return s().createElement("div",{style:E},s().createElement(h.Z,{size:150}));if(!r)return s().createElement("div",{style:E},s().createElement("div",null,s().createElement(d.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),s().createElement("h1",null,s().createElement(f.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==l?void 0:l.status))return s().createElement("div",{style:E},s().createElement("div",null,s().createElement(d.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),s().createElement("h1",null,s().createElement(f.Z,{msgId:"styleeditor.styleNotFound"}))));const S=m[n]||L[n]||L.textarea;return s().createElement(g.Z,{style:{position:"relative"},header:s().createElement("div",{className:"ms-style-editor-toolbar"},s().createElement("div",{className:"ms-style-editor-toolbar-left"},p),s().createElement(b.Z,{buttons:[{className:"no-border",bsSize:"xs",disabled:u,active:"textarea"===n,textId:"visual"===n?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:()=>u?null:"visual"===n?o({editorType:"textarea"}):k(!0)}]}))},S&&s().createElement(S,P({},y,{code:t,error:l,onChange:(e,t)=>{c(e),a()(t)&&o({styleJSON:JSON.stringify(t)})}})),v&&s().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},s().createElement(d.Alert,{bsStyle:"warning",style:{textAlign:"center"}},s().createElement("p",{style:{padding:8}},s().createElement(f.Z,{msgId:"styleeditor.alertForceTranslate"})),s().createElement("p",null,s().createElement(b.Z,{buttons:[{text:s().createElement(f.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:()=>k(!1),style:{marginRight:4}},{bsStyle:"primary",text:s().createElement(f.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:()=>{o({editorType:"visual"}),k(!1)}}]})))))}R.defaultProps={inlineWidgets:O};const Z=(0,c.connect)((0,I.y)(S.gB,S.p,S.z_,(e=>{const t=(0,S.WW)(e);return null==t?void 0:t.editorType}),(e=>{try{const t=(0,S.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),S.aN,((e,t,l,r,n,o)=>({code:e,error:t.edit||null,canEdit:l,editorType:r,defaultStyleJSON:n,loading:o}))),{onUpdateMetadata:p.bB,onChange:p.p2})(R)},756311:(e,t,l)=>{"use strict";l.d(t,{m2:()=>$,tM:()=>K,lC:()=>G});var r=l(124852),n=l.n(r),o=l(171703),a=l(867076),i=l(22222),s=l(403410),d=l(16075),c=l(333101),u=l(546243),p=l(804504),m=l(756435),y=l(141919),f=l(554155),g=l(715828),h=l(89518),b=l(630294),v=l(768977),k=l(486234),E=l(36549),S=l(603754),I=l(393666);const T=(0,k.Z)("filterPlaceholder")(S.Z),C=(0,E.Z)(b.Glyphicon),w=(0,y.Z)((e=>{let{items:t}=e;return 0===t.length}),{title:n().createElement(p.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(v.Z);var F=l(91175),O=l.n(F),P=l(867517);const x=e=>{let{disabled:t,selected:l,title:r,preview:o,previewSrc:a,onClick:i=(()=>{})}=e;return n().createElement("div",{className:`ms-square-card${l?" ms-selected":""}${t?" ms-disabled":""}`,onClick:t?null:()=>i()},(o||a)&&n().createElement("div",{className:"ms-preview"},o||a&&n().createElement("img",{src:a})),n().createElement("small",null,r))};var A=l(466737),N=l(283604);const L=(0,k.Z)("filterPlaceholder")(S.Z),R=(0,k.Z)("placeholder")(b.FormControl),Z=(0,y.Z)((e=>{let{items:t}=e;return 0===t.length}),{title:n().createElement(p.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(v.Z),z=e=>{let{title:t,_abstract:l}=e;const r=/^[a-zA-Z0-9\s]*$/,n=t&&null!==t.match(r);return n&&!l||n&&l&&null!==l.match(r)};var D=l(8204);var W=l(703011),M=l(644825);const $=l(900683).Z,j=(0,M.YD)(),U=(0,y.Z)((e=>{let{canEdit:t}=e;return!t}),{glyph:"exclamation-mark",title:n().createElement(p.Z,{msgId:"styleeditor.noPermission"})}),V=e=>(0,f.Z)(e,{size:150,style:{margin:"auto"}},(e=>n().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},n().createElement(h.Z,e)))),B=(0,a.compose)((0,a.defaultProps)({templates:j}),(0,o.connect)((0,i.P1)([W.Mc,W.w_,W.lC,W.z_,W.Z0,W.aN],(function(e,t,l,r){let{formats:n=[]}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:l,canEdit:r,availableFormats:n,loading:o}})),{onSelect:u.FU,onClose:u.cu.bind(null,!1),onSave:u.wj}),U,V((e=>{let{geometryType:t}=e;return!t})),(0,a.withState)("filterText","onFilter",""),(0,a.withState)("styleSettings","onUpdate",{}))((e=>{let{selectedStyle:t,add:l,styleSettings:r={},geometryType:o="",templates:a=[],filterText:i,availableFormats:s=["sld","css"],formFields:d=[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:n().createElement(p.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:n().createElement(p.Z,{msgId:"styleeditor.abstractSettings"})}],onFilter:c=(()=>{}),onSelect:u=(()=>{}),onClose:y=(()=>{}),onSave:f=(()=>{}),onUpdate:g=(()=>{}),loading:v}=e;return n().createElement(m.Z,{header:n().createElement("div",null,n().createElement(L,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:i,onFilter:c}),n().createElement("div",{className:"text-center"},n().createElement("small",null,v?n().createElement(h.Z,{size:15,style:{display:"inline-block"}}):n().createElement(p.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},n().createElement(Z,{colProps:{},cardComponent:x,onItemClick:e=>{let{code:t,styleId:l,format:n}=e;u({code:t,templateId:l,format:n||"css"}),g({...r,title:O()(a.filter((e=>{let{styleId:t}=e;return t===l})).map((e=>{let{title:t}=e;return t})))})},items:a.filter((e=>{let{title:t}=e;return!i||i&&-1!==t.indexOf(i)})).filter((e=>{let{types:t,format:l}=e;return!t||O()(t.filter((e=>e===o)))&&-1!==s.indexOf(l)})).map((e=>{var l;return{...e,preview:null!=e&&null!==(l=e.preview)&&void 0!==l&&l.config?n().createElement(I.Z,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:v}}))}),n().createElement(A.Z,null,n().createElement(N.Z,{show:!!l,fitContent:!0,title:n().createElement(p.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:()=>y(),buttons:[{text:n().createElement(p.Z,{msgId:"save"}),bsStyle:"primary",disabled:!z(r),onClick:()=>f(r)}]},n().createElement(b.Form,null,n().createElement(b.FormGroup,{controlId:"styleTitle",validationState:!z(r)&&"error"},d.map((e=>{let{title:t,placeholder:l,key:o}=e;return n().createElement("span",{key:o},n().createElement(b.ControlLabel,null,t),n().createElement(R,{type:"text",defaultValue:r[o],placeholder:l,onChange:e=>g({...r,[o]:e.target.value})}))}))),!z(r)&&n().createElement(b.Alert,{style:{margin:0},bsStyle:"danger"},n().createElement(P.Z,{msgId:"styleeditor.titleRequired"}))))))})),q=(0,a.compose)((0,o.connect)((0,i.P1)([W.ex,W.ov],((e,t)=>{let{defaultStyle:l,enabledStyle:r,availableStyles:n}=t;return{status:e,defaultStyle:l,enabledStyle:r,availableStyles:n}})),{onSelect:c.Xy}),(0,a.withState)("filterText","onFilter",""),(0,g.Z)((e=>{let{status:t,readOnly:l}=e;return"template"===t&&!l}),(()=>n().createElement(B,null)),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((e=>{let{showDefaultStyleIcon:t,enabledStyle:l,defaultStyle:r,availableStyles:o=[],onSelect:a,formatColors:i={sld:"#33ffaa",css:"#ffaa33"},filterText:s,onFilter:d=(()=>{})}=e;return n().createElement(m.Z,{className:"ms-style-editor-list",header:n().createElement(T,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:s,onFilter:d})},n().createElement(w,{size:"sm",onItemClick:e=>{let{name:t}=e;return a({style:t},!0)},items:o.filter((e=>{var t,l;let{name:r="",title:n="",_abstract:o="",metadata:a={}}=e;return!s||s&&(-1!==r.indexOf(s)||-1!==(null==a||null===(t=a.title)||void 0===t?void 0:t.indexOf(s))||-1!==(null==a||null===(l=a.description)||void 0===l?void 0:l.indexOf(s))||-1!==n.indexOf(s)||-1!==o.indexOf(s))})).map((e=>{var o,a,s;return{...e,title:(null==e||null===(o=e.metadata)||void 0===o?void 0:o.title)||e.label||e.title||e.name,description:(null==e||null===(a=e.metadata)||void 0===a?void 0:a.description)||e._abstract,selected:l===e.name,preview:e.format&&n().createElement(I.Z,{backgroundColor:"#333333",texts:[{text:(s=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[s]||s||"").toUpperCase(),fill:i[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||n().createElement(C,{glyph:"geoserver"}),tools:t&&r===e.name?n().createElement(C,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null}}))}))})),G=(0,a.compose)((0,a.withState)("showModal","onShowModal"),(0,o.connect)((0,i.P1)([W.ex,W.Mc,W.p,W.QW,W.gB,W.aN,W.i7,W.z_,W.ov,W.Z0,W.Ed],(function(e,t,l,r,n,o,a,i,s){let{defaultStyle:d}=s,{formats:c=["sld"]}=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},u=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:l,isCodeChanged:r!==n,loading:o,layerDefaultStyleName:d,selectedStyle:d===a?"":a,editEnabled:i,disableCodeEditing:-1===c.indexOf(u)}})),{onSelectStyle:u.Nf.bind(null,"template"),onEditStyle:u.Nf.bind(null,"edit"),onBack:u.Nf.bind(null,""),onReset:s.B1.bind(null,M.s1,[{}]),onAdd:u.cu.bind(null,!0),onUpdate:u.Lc,onDelete:u.WQ,onSetDefault:u.WB}))((e=>{let{status:t,buttons:l=[],templateId:r,error:o,isCodeChanged:a,showModal:i,onShowModal:s,loading:d,selectedStyle:c,layerDefaultStyleName:u,editEnabled:m,enableSetDefaultStyle:y,defaultStyles:f=["generic","point","line","polygon","raster"],onBack:g=(()=>{}),onAdd:h=(()=>{}),onReset:v=(()=>{}),onDelete:k=(()=>{}),onSelectStyle:E=(()=>{}),onEditStyle:S=(()=>{}),onUpdate:I=(()=>{}),onSetDefault:T=(()=>{}),disableCodeEditing:C}=e;return n().createElement("div",null,n().createElement(D.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!t,tooltipId:"styleeditor.backToList",disabled:!!d,onClick:()=>{"edit"===t&&a?s({title:n().createElement(p.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:n().createElement(b.Alert,{bsStyle:"warning",style:{margin:0}},n().createElement(p.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:n().createElement(p.Z,{msgId:"close"}),bsStyle:"primary",onClick:()=>{s(null),g(),v()}}]}):(g(),v())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(t||!m),disabled:!!d,onClick:()=>E()},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(t||!m),disabled:!!d||-1!==f.indexOf(c)||!c&&-1!==f.indexOf(u)||C,onClick:()=>S()},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(o&&o.edit&&o.edit.status)||!!d||-1!==f.indexOf(c),visible:!("edit"!==t||!m),onClick:()=>I()},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==t||!r||!m),disabled:!!d,onClick:()=>h()},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!d||-1!==f.indexOf(c)||!c,visible:!(t||!m),onClick:()=>{s({title:n().createElement(p.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:n().createElement(b.Alert,{bsStyle:"warning",style:{margin:0}},n().createElement(p.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:n().createElement(p.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:()=>{s(null),k(c)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!d||-1!==f.indexOf(c)||!c,visible:!(!y||t||!m),onClick:()=>T()},...t?[]:l]}),n().createElement(A.Z,null,n().createElement(N.Z,{show:i,fitContent:!0,title:i&&i.title,onClose:()=>s(null),buttons:i&&i.buttons},i&&i.message)))})),_=(0,a.compose)((0,o.connect)((0,i.P1)([W.Vf],(e=>({layer:e}))),{onInit:d.k}),(0,a.lifecycle)({UNSAFE_componentWillMount(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),V((e=>{let{layer:t={}}=e;return t&&t.capabilitiesLoading})))((()=>n().createElement(m.Z,{className:"ms-style-editor-container",footer:n().createElement("div",{style:{height:25}})},n().createElement(q,{readOnly:!0})))),K=(0,a.branch)((e=>{let{readOnly:t}=e;return t}),(()=>_))(q)},703011:(e,t,l)=>{"use strict";l.d(t,{gc:()=>m,Mc:()=>y,ex:()=>f,p:()=>g,aN:()=>h,iB:()=>b,j5:()=>v,gB:()=>k,QW:()=>E,w_:()=>S,ji:()=>I,Z0:()=>T,z_:()=>C,Vf:()=>w,lC:()=>F,m2:()=>O,i7:()=>P,Ed:()=>x,ov:()=>A,WW:()=>N});var r=l(227361),n=l.n(r),o=l(91175),a=l.n(o),i=l(545578),s=l.n(i),d=(l(313311),l(747037)),c=l.n(d),u=l(612912),p=l(644825);const m=e=>n()(e,"styleeditor.temporaryId"),y=e=>n()(e,"styleeditor.templateId"),f=e=>n()(e,"styleeditor.status"),g=e=>n()(e,"styleeditor.error")||{},h=e=>n()(e,"styleeditor.loading"),b=e=>n()(e,"styleeditor.format")||"css",v=e=>n()(e,"styleeditor.languageVersion")||{},k=e=>n()(e,"styleeditor.code"),E=e=>n()(e,"styleeditor.initialCode")||"",S=e=>n()(e,"styleeditor.addStyle")||"",I=e=>n()(e,"styleeditor.enabled"),T=e=>n()(e,"styleeditor.service")||{},C=e=>n()(e,"styleeditor.canEdit"),w=e=>{const t=(0,u.jN)(e);return{...(0,u.Iz)(e)||{},...t&&t.options||{}}},F=e=>{const t=w(e),{geometryType:l="vector"}=(0,p.Py)(t);return l},O=e=>{const t=w(e),{properties:l={}}=(0,p.Py)(t);return l},P=e=>{const t=w(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},x=e=>{const{availableStyles:t=[]}=w(e)||{},l=P(e);return a()(t.filter((e=>{let{name:t}=e;return t===l})).map((e=>{let{format:t}=e;return t})))},A=e=>{const t=w(e),l=t.availableStyles||[],{name:r}=a()(l)||{},n=t.style||t&&!t.style&&r;return{availableStyles:s()(l.map((e=>{const t=e&&e.title&&c()(e.title)&&e.title.split(p.I$),l=t&&t[0]||e.name;return{...e,label:l}})),"name"),defaultStyle:r,enabledStyle:n}},N=e=>{var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata}},644825:(e,t,l)=>{"use strict";l.d(t,{I$:()=>$,s1:()=>j,q9:()=>B,Vi:()=>q,nK:()=>G,Py:()=>_,H$:()=>K,uW:()=>Y,YD:()=>H,$N:()=>J,U_:()=>X,Gg:()=>re,VM:()=>ne,ZF:()=>oe,qL:()=>ae,BG:()=>ie,co:()=>se,u9:()=>de,g5:()=>ce,wc:()=>ue,uo:()=>pe,Yt:()=>me});var r=l(91175),n=l.n(r),o=l(227361),a=l.n(o),i=l(701469),s=l.n(i),d=l(747037),c=l.n(d),u=l(385564),p=l.n(u),m=l(414293),y=l.n(m),f=l(441609),g=l.n(f),h=l(957557),b=l.n(h),v=l(114176),k=l.n(v),E=l(352353),S=l.n(E),I=l(436968),T=l.n(I),C=l(984596),w=l.n(C),F=l(513218),O=l.n(F),P=l(281763),x=l.n(P),A=l(423570),N=l.n(A),L=l(472500),R=l.n(L),Z=l(403595),z=l(119950),D=l(505055),W=l.n(D);const M=new(W().Builder),$="___",j="styleeditor",U={},V={css:"geocss",sld:"xml","3dtiles":"application/json",geostyler:"application/json"},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.localType&&e.localType.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},q=()=>`${N()()}_ms_${Date.now().toString()}`,G=e=>{let{title:t=""}=e;return`${t.toLowerCase().replace(/\s/g,"_")}${$}${N()()}`},_=function(){let{describeLayer:e={},describeFeatureType:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l=(null==e?void 0:e.owsType)||null,r=a()(t,"featureTypes[0].properties")||null,o=r&&n()(r.filter((e=>{let{type:t,localType:l}=e;return t&&t.includes("gml")&&l}))),i=("WCS"===l?"raster":o&&"WFS"===l&&B(o))||null,s="raster"===i?e.bands:r&&r.reduce(((e,t)=>{let{name:l,type:r={},localType:n}=t;return{...e,[l]:{localType:n,prefix:r.replace(`:${n}`,"")}}}),{});return{geometryType:i,properties:s,owsType:l}},K=e=>V[e]||e,Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(U.isSameOrigin)return U.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;const l=[t.baseUrl,...t.availableUrls||[]],r=l.map((e=>{const t=R().parse(e);return`${t.protocol}//${t.host}`})),n=R().parse(e.url),o=`${n.protocol}//${n.host}`;return-1!==r.indexOf(o)},H=()=>{if(U.getStyleTemplates){const e=U.getStyleTemplates();return[...s()(e)?e:[],...Z.baseTemplates]}return[...Z.customTemplates,...Z.baseTemplates]},J=e=>{const t=c()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},X=e=>{let{name:t,workspace:l}=e;return`${l&&l.name&&`${l.name}:`||""}${t}`},Q=(e,t)=>{if(!(e&&e.filterFields&&e.groupFields&&t))return null;const l=[...e.filterFields.filter((e=>e.groupId===t.id)),...e.groupFields.filter((e=>e.groupId===t.id))],r={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},n=l.map((t=>{if(void 0!==t.rowId){const{operator:e,attribute:l,value:n}=t;return e&&l&&!y()(n)?[r[e]||e,l,"isNull"===e?null:n]:null}return Q(e,t)})).filter((e=>e)),{logic:o}=t;return 0===n.length?null:[r[o],...n]},ee=function(e){let{index:t=0,groupId:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(!e)return null;const n={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},[o,...a]=e,i=s()(o),d=i?o[0]:o,c=i?o.filter(((e,t)=>0!==t)):a;if("||"===d||"&&"===d){const e=N()();return r("groupField",{id:e,index:t,logic:n[d]}),ee(a,{index:t+1,groupId:e},r)}return d?(r("filterField",{attribute:c[0],groupId:l,operator:n[d]||d,rowId:N()(),type:isNaN(parseFloat(c[1]))?"string":"number",value:c[1]}),ee(a,{index:t,groupId:l},r)):null},te=e=>{let t=[],l=[];return ee(e,void 0,((e,r)=>{"groupField"===e&&t.push(r),"filterField"===e&&l.push(r)})),{groupFields:t,filterFields:l}};function le(e){const t=k()(e,S());return Object.keys(t).reduce(((e,l)=>{switch(l){case"haloColor":case"haloWidth":return"Text"===t.kind&&0===t.haloWidth?e:{...e,[l]:t[l]};case"outlineWidth":case"outlineColor":case"outlineOpacity":return"Fill"===t.kind&&0===t.outlineWidth?e:{...e,[l]:t[l]};case"strokeWidth":case"strokeColor":case"strokeOpacity":return"Mark"===t.kind&&0===t.strokeWidth?e:{...e,[l]:t[l]};case"graphicFill":case"graphicStroke":return{...e,[l]:le(t[l])};default:return{...e,[l]:t[l]}}}),{})}function re(e){return e&&e.rules?{...e,rules:p()(e.rules.map((e=>{if("Classification"===e.kind)return(e.classification||[]).map(((t,l)=>{const r=l===e.classification.length-1?"<=":"<",n=!y()(t.min),o=!y()(t.max),a=!y()(t.unique),i=a?["==",e.attribute,t.unique]:[],s=n?[[">=",e.attribute,t.min]]:[],d=o?[[r,e.attribute,t.max]]:[],c=a&&t.unique,u=n&&">= "+t.min,p=o&&r+" "+t.max;return{name:c||(u&&p?u+" and "+p:u||p),filter:g()(i)?g()(s[0])&&g()(d[0])?void 0:["&&",...s,...d]:i,...e.scaleDenominator&&{scaleDenominator:e.scaleDenominator},symbolizers:[le({...b()(e,["ruleId","classification","intervals","intervalsForUnique","method","ramp","reverse","attribute","symbolizerKind"]),kind:e.symbolizerKind||"Fill",color:t.color})]}}));if("Raster"===e.kind){const t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((e=>({label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}))),type:e.colorMapType};return{name:e.name||"",...e.scaleDenominator&&{scaleDenominator:e.scaleDenominator},symbolizers:[le({...b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name","colorMapType"]),kind:"Raster",...t&&{colorMap:t}})]}}const t=(e=>{var t;const l=null==e||null===(t=e.groupFields)||void 0===t?void 0:t.find((e=>{let{groupId:t}=e;return!t}));return l&&Q(e,l)})(e.filter);return{...e,filter:t,symbolizers:((null==e?void 0:e.symbolizers)||[]).map((e=>le(e)))}})))}:e}function ne(e){return{...e,rules:e.rules.map((e=>({...e,ruleId:N()(),filter:e.filter&&te(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((e=>({...e,symbolizerId:N()()})))||[]})))}}function oe(e){return new Promise(((t,l)=>{e||l({messageId:"imageSrcEmpty",isBase64:!1});let r=!1;if(0===e.indexOf("data:image")){const t=e.split("base64,");r=function(e){try{return window.atob(e),!0}catch(e){return!1}}(t[t.length-1]),r||l({messageId:"imageSrcInvalidBase64",isBase64:r})}const n=new Image;n.onload=()=>{t({src:e,isBase64:r})},n.onerror=()=>{l({messageId:r?"imageSrcInvalidBase64":"imageSrcLoadError",isBase64:r})},n.src=e}))}const ae=[{label:"image/png",value:"image/png"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/gif",value:"image/gif"},{label:"image/svg+xml",value:"image/svg+xml"}],ie=(e,t)=>{let l=t;"sld"===e.format&&W().parseString(t,{explicitArray:!1},((t,r)=>{const n="StyledLayerDescriptor.NamedLayer.UserStyle.FeatureTypeStyle.Rule";let o=w()(a()(r,n,[]));o=p()(o.map(((t,l)=>{var r;const{baseGraphicPath:n,imgFormat:o}=((e,t)=>{var l,r,n,o;const{kind:a,...i}=(null===(l=e[t])||void 0===l||null===(r=l.symbolizers)||void 0===r?void 0:r[0])||{};switch(a){case"Icon":return{baseGraphicPath:"PointSymbolizer",imgFormat:null==i?void 0:i.format};case"Line":return{baseGraphicPath:"LineSymbolizer.Stroke.GraphicStroke",imgFormat:null==i||null===(n=i.graphicStroke)||void 0===n?void 0:n.format};case"Fill":return{baseGraphicPath:"PolygonSymbolizer.Fill.GraphicFill",imgFormat:null==i||null===(o=i.graphicFill)||void 0===o?void 0:o.format};default:return{}}})((null===(r=e.style)||void 0===r?void 0:r.rules)||[],l),i=`${n}.Graphic.ExternalGraphic`,s=a()(t,i),d=`${i}.Format`,c=a()(t,d);return s&&!c&&g()(o)?null:s?c?t:T()(t,d,o):t})));const i=o.some((e=>null===e));l=i?"":M.buildObject(T()(r,n,o))}));const r=!!g()(l)&&{messageId:"styleeditor.imageFormatEmpty",status:400};return{parsedCode:l,errorObj:r}};function se(){let{metadata:e={},format:t,code:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.e(2568).then(l.t.bind(l,402568,23)).then((l=>{const n=l.default,{msStyleJSON:o,msMD5Hash:a}=e;if(a&&r)return n(r)!==a;if(!o)return Promise.resolve(!1);let i;try{i=re(JSON.parse(o))}catch(e){return Promise.resolve(!0)}return(0,z.getStyleParser)(t).then((e=>e.writeStyle(i).then((e=>n(r)!==n(e)))))}))}function de(e){const t=["string"],l=["integer","long","double","float","bigdecimal","decimal","number","int"];return Object.keys(e).filter((r=>-1!==[...t,...l].indexOf(e[r].localType.toLowerCase()))).map((t=>{const{localType:r}=e[t];return{attribute:t,label:t,type:-1!==l.indexOf(r.toLowerCase())?"number":"string"}}))}function ce(e){return null!=e&&e.properties?"3dtiles"===(null==e?void 0:e.type)?Object.keys(e.properties||{}).map((t=>{const{minimum:l,maximum:r,type:n}=e.properties[t],o=x()(l)||x()(r)?"number":"string";return{attribute:t,label:t,type:n||o}})):"wfs"===(null==e?void 0:e.type)?de(e.properties):"vector"===(null==e?void 0:e.type)?Object.keys(e.properties||{}).filter((t=>x()(e.properties[t])||c()(e.properties[t]))).map((t=>({attribute:t,label:t,type:x()(e.properties[t])?"number":"string"}))):null:null}function ue(e){return"3dtiles"===e.type?"pnts"===(null==e?void 0:e.format)?"pointcloud":"polyhedron":(null==e?void 0:e.geometryType)||"vector"}function pe(e){return"3dtiles"===e.type?{format:"3dtiles",body:{},metadata:{editorType:"visual"}}:{format:"geostyler",body:{},metadata:{editorType:"visual"}}}const me={"3dtiles":(e,t)=>{const{defines:l={},meta:r,...n}=e,o=[{key:"color",type:"string"},{key:"pointSize",type:"number"}].find((e=>{let{key:t,type:l}=e;if("string"===l&&n[t]&&!c()(n[t])&&!O()(n[t]))return!0;if("number"===l&&n[t]&&!c()(n[t])&&!x()(n[t])&&!O()(n[t]))return!0;if(O()(n[t])){var r,o;if(0===((null===(r=n[t])||void 0===r||null===(o=r.conditions)||void 0===o?void 0:o.length)||0))return!0;if(n[t].conditions.find((e=>{let[t,l]=e;return!l||!t})))return!0}return!1}));if(o)return{messageId:"styleeditor.invalidProperty",messageParams:o};const a=[...Object.keys((null==t?void 0:t.properties)||{}),...Object.keys(l),"POSITION","POSITION_ABSOLUTE","COLOR","NORMAL"].map((e=>`\${${e}}`)),i=JSON.stringify(n).match(/\${(.*?)}/g);if(i){const e=i.find((e=>!a.includes(e)));if(e)return{messageId:"styleeditor.notSupportedVariable",messageParams:{key:e}}}return!1}}},403595:(e,t,l)=>{const r=l(423570),n=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((e=>({...e,styleId:r()}))),o=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((e=>({...e,styleId:r()})));e.exports={baseTemplates:n,customTemplates:o}}}]);