(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[6465],{52855:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(124852),l=n.n(a),o=n(630294);const r=(0,n(486234).Z)("placeholder")(o.FormControl),s=e=>{let{onSearchTextChange:t=(()=>{}),searchText:n,title:a,subTitle:s=null}=e;return l().createElement(o.Grid,{className:"catalog-form",fluid:!0},l().createElement(o.Row,null,l().createElement(o.Col,{xs:12},a&&l().createElement("h4",{className:"text-center"},a),s,l().createElement(o.FormGroup,{controlId:"catalog-form"},l().createElement(r,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:e=>t(e.currentTarget.value)})))))}},768977:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(45697),l=n.n(a),o=n(124852),r=n.n(o),s=n(630294),i=n(222777);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r().Component{render(){const{cardComponent:e,items:t,colProps:n,onItemClick:a,size:l}=this.props,o=e||i.Z;return r().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},r().createElement(s.Row,{className:"items-list"},t.map(((e,t)=>r().createElement(s.Col,c({key:e.id||t},n),r().createElement(o,c({onClick:function(){for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return a(e,...n)},size:l},e)))))))}}d(p,"propTypes",{size:l().string,onItemClick:l().func,colProps:l().object,items:l().array,cardComponent:l().oneOfType([l().string,l().func]),className:l().string}),d(p,"defaultProps",{size:"",onItemClick:()=>{},colProps:{xs:12},className:"",items:[]});const m=p},890032:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(867076);const l=n(49977),o=function(e,t,n){let{dataProp:a="items",initialStreamDebounce:o=0,throttleTime:r=500}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.take(1).concat(e.debounceTime(o)).switchMap((e=>n(e,0).startWith({loading:!0}).concat(l.Observable.of({loading:!1})).concat(t.throttleTime(r).distinct().exhaustMap((t=>n(e,t).startWith({loading:!0}).concat(l.Observable.of({loading:!1}))))).scan(((e,t)=>{let{[a]:n,...l}=e,{[a]:o,...r}=t;return{[a]:o?[...n||[],...o]:n||[],...l,...r}})).map((e=>({...e}))))).catch((e=>l.Observable.of({loading:!1,error:e})))},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>l.Observable.empty(),t=arguments.length>1?arguments[1]:void 0;return(0,a.mapPropsStream)((n=>{const{handler:l,stream:r}=(0,a.createEventHandler)(),{handler:s,stream:i}=(0,a.createEventHandler)();return n.combineLatest(o(i,r,e,t).startWith({}),((e,t)=>({...e,...t,onLoadMore:l,loadFirst:s})))}))}},185936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(890032),l=n(867076),o=n(274335);const r=e=>{let{loadPage:t,scrollSpyOptions:n,loadStreamOptions:r,loadMoreStreamOptions:s,hasMore:i,isScrolled:c}=e;return(0,l.compose)((0,a.Z)(t,s),(0,l.defaultProps)({hasMore:i,isScrolled:c}),(0,o.Z)(n,r))}},274335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(124852),l=n.n(a),o=n(45697),r=n.n(o),s=n(180307),i=n.n(s);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(49977);const d=function(){let{dataProp:e="items",querySelector:t,closest:n=!1,loadingProp:a="loading",skip:o=0,pageSize:s=10,offsetSize:d=200}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p=>{var m;return m=class extends l().Component{constructor(){super(...arguments),c(this,"findScrollDomNode",(()=>{if(!this.isMounded)return null;let e=i().findDOMNode(this);return e&&n&&t?e.closest(t||"*"):e&&(t?e.querySelector(t):e)})),c(this,"onScroll",(()=>{const t={skip:o,pageSize:s,offsetSize:d,...this.props.scrollOptions},n=this.findScrollDomNode();n&&this.props.isScrolled({div:n,offset:t.offsetSize})&&(!e||this.props[e]&&this.props[e].length)&&(!a||!this.props[a])&&this.props.hasMore(this.props)&&this.props.onLoadMore(e?Math.ceil((this.props[e].length-t.skip)/t.pageSize):null)}))}componentDidMount(){this.isMounded=!0;const e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}componentDidUpdate(t){const n=this.findScrollDomNode();n&&!this.listenerAdded&&(n.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!n||e&&this.props[e]&&this.props[e]===t[e]||setTimeout((()=>this.onScroll()),300)}componentWillUnmount(){this.isMounded=!1,this.listenerAdded=!1;const e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}render(){return l().createElement(p,this.props)}},c(m,"propTypes",{hasMore:r().func,onLoadMore:r().func,isScrolled:r().func,scrollOptions:r().object}),c(m,"defaultProps",{onLoadMore:()=>{},hasMore:()=>!0,isScrolled:e=>{let{div:t,offset:n}=e;return t.scrollTop+t.clientHeight>=t.scrollHeight-n}}),m}}},77665:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(124852),l=n.n(a),o=n(630294);const r=e=>{let{title:t,description:n}=e;return l().createElement(o.Row,null,l().createElement(o.Col,{xs:12,className:"text-center"},l().createElement("div",{className:"mapstore-step-title"},t),l().createElement("div",{className:"mapstore-step-description"},n)))}},657579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(124852),l=n.n(a),o=n(804504),r=n(141919);const s=e=>(0,r.Z)(e,{title:l().createElement(o.Z,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:l().createElement(o.Z,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})},500023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(740292),l=n(867076);const o=(0,l.compose)((0,l.withHandlers)({onMapViewChanges:e=>{let{onChange:t=(()=>{})}=e;return e=>{t("maps",e),t("mapStateSource",e.mapStateSource)}}}))(a.Z)},81674:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var a=n(49977),l=n(470509),o=n.n(l),r=n(510810),s=n(474810);const i=(e,t)=>a.Observable.defer((()=>o().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}))).let(r.oB)},736465:(e,t,n)=>{"use strict";n.d(t,{Z:()=>jl});var a=n(124852),l=n.n(a),o=n(171703),r=n(22222),s=n(867076),i=n(952273),c=n(756435),d=n(492838),p=n(554155),m=n(141919),g=n(509978),u=n(227361),h=n.n(u),y=n(49977),b=n.n(y),v=n(141520),C=n(81674);function f(e){return(0,C.l)(e.url,"gs:Aggregate")}var E=n(131400),w=n(452341);const x="ALL",S=function(){let{needsWPS:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.compose)((0,s.defaultProps)({dataStreamFactory:function(t){let{onEditorChange:n=(()=>{}),onConfigurationError:a=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.distinctUntilChanged((function(){let{layer:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{layer:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.name===t.name})).switchMap((function(){let{layer:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y.Observable.forkJoin((0,v.v$)({layer:t}),...e?[f(t)]:[f(t).catch((()=>y.Observable.of(!1)))]).do((e=>{let[t]=e;const a=h()((0,w.findGeometryProperty)(t.data||{}),"name");a&&n("geomProp",a)})).map((e=>{let[t,n]=e;return{hasAggregateProcess:!!n,loading:!1,types:x,featureTypeProperties:h()(t,"data.featureTypes[0].properties")||[]}}))})).catch((e=>(a(e),y.Observable.of({errorObj:e,loading:!1,featureTypeProperties:[]})))).startWith({loading:!0})}}),g.Z,(0,p.Z)(),(0,m.Z)((e=>{let{featureTypeProperties:t=[],types:n=[]}=e;return 0===t.length||0===n.length}),(()=>({title:l().createElement(E.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:l().createElement(E.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}))))},P=(0,s.withProps)((e=>{let{onResetChange:t=(()=>{})}=e;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:()=>{t("options",void 0),t("widgetType",void 0)}}]}}));var Z=n(352353),A=n.n(Z),T=n(943650),I=n(964091);const O=(e,t)=>["tms","wfs"].includes(null==t?void 0:t.type)?e:I.Z[(null==t?void 0:t.type)||"wms"].getLayerFromRecord(e),k=(e,t)=>["tms","wmts"].includes(null==t?void 0:t.type)?b().Observable.of(O(e,t)):(0,T.HI)(O(e,t)),L=(0,s.compose)((0,s.withState)("selected","setSelected",null),(0,s.withState)("layer","setLayer",null),(0,s.mapPropsStream)((e=>e.distinctUntilKeyChanged("selected").filter((function(){let{selected:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})).switchMap((function(){let{selected:e,layerValidationStream:t=(e=>e),setLayer:n=(()=>{}),dashboardSelectedService:a,dashboardServices:l,defaultSelectedService:o,defaultServices:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b().Observable.of(O(e,l?l[a]:r[o])).let(t).switchMap((()=>k(e,l?l[a]:r[o]))).do((e=>n({...e,visibility:!!A()(e.visibility)||e.visibility}))).mapTo({canProceed:!0}).catch((e=>b().Observable.of({error:e,canProceed:!1})))})).startWith({canProceed:!0}).combineLatest(e,(function(){let{canProceed:e,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return{error:t,canProceed:e,...n}}))))),z=(0,o.connect)((()=>({})),{onLayerChoice:e=>(0,d.Rz)("layer",e),onResetChange:d.Rz}),N=(0,s.compose)((0,s.setDisplayName)("ChartLayerSelector"),z,(0,s.defaultProps)({layerValidationStream:e=>e.switchMap((e=>(e=>y.Observable.forkJoin((0,v.v$)({layer:e})))(e)))}),P,L),M=e=>(0,s.withHandlers)({toggleConnection:t=>{let{toggleConnection:n=(()=>{}),editorData:a={}}=t;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const o=t.filter((e=>{const[,t,n]=d.jB.exec(e)||[];return t&&n?l.some((e=>e.id===t&&e.selectedMapId===n)):e}));return n(!a.mapSync,o,{dependenciesMap:a.dependenciesMap,mappings:e,sourceWidgetType:a.widgetType})}}}),F=(e,t,n)=>"table"===t&&0===e.filter((e=>Object.keys(e).filter((t=>e[t]&&-1!==e[t].indexOf(n.id))).length>0)).length,D=(0,s.compose)((0,s.withProps)((e=>{let{editorData:t={},widgets:n=[]}=e;const a=n.filter((e=>{let{mapSync:t,dependenciesMap:n}=e;return t&&n})).map((e=>{let{dependenciesMap:t}=e;return t}));return{canConnect:t.geomProp&&"table"!==t.widgetType||F(a,t.widgetType,t),connected:t.mapSync}})),M({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"}));var R=n(715828),B=n(804504);const W=(0,s.compose)((0,o.connect)((0,r.P1)(i.xI,(e=>({widgetSelectionActive:e})))),(0,R.Z)((e=>{let{widgetSelectionActive:t}=e;return t}),(()=>l().createElement("div",{style:{margin:"auto"}},l().createElement(B.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))),{alwaysWrap:!0})),j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>{let{step:t}=e;return 0===t},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.withProps)((n=>{let{stepButtons:a=[],exitButton:l,...o}=n;return{stepButtons:[{...l,visible:e({stepButtons:a,exitButton:l,...o}),...t},...a]}}))},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0;return(0,s.compose)((0,s.withProps)((t=>{let{disableMultiDependencySupport:n,stepButtons:a=[],toggleConnection:l=(()=>{}),availableDependencies:o=[],canConnect:r,connected:s,...i}=t;return{stepButtons:[...a,{onClick:()=>l(o,i.widgets),disabled:n,visible:!!e(i)&&!!r&&o.length>0,bsStyle:s?"success":"primary",glyph:s?"plug":"unplug",tooltipId:s?"widgets.builder.wizard.clearConnection":1===o.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}]}})))};var U=n(366907),V=n(45697),q=n.n(V),Y=n(630294),$=n(23888);function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Q extends l().Component{constructor(){super(...arguments),H(this,"renderButtons",(()=>{let e=[];const{isStepValid:t,children:n=[]}=this.props,a=n.length>=0?n.length:1;return this.props.hideButtons?null:(this.props.step>0&&e.push(l().createElement($.Z,{key:"prev",className:"ms-wizard-prev",onClick:()=>this.props.onPrevPage()},l().createElement(B.Z,{msgId:"wizard.prev"}))),this.props.step>=a-1?e.push(l().createElement($.Z,{key:"finish",className:"ms-wizard-finish",onClick:()=>this.props.onFinish()},l().createElement(B.Z,{msgId:"wizard.finish"}))):this.props.step<a-1&&a>1&&e.push(l().createElement($.Z,{key:"next",className:"ms-wizard-next",disabled:!t(this.props.step),onClick:()=>this.props.onNextPage()},l().createElement(B.Z,{msgId:"wizard.next"}))),e)}))}render(){const e=this.props.children||[],t=e.length>=0?e.length:1;return l().createElement("div",{key:"wizard-pages",className:"ms-wizard map-options"},l().Children.map(e,((e,n)=>n===this.props.step?l().cloneElement(e,{key:`wizard-component-${n}`,onNextPage:this.props.step===t-1?this.props.onFinish:this.props.onNextPage,onPrevPage:this.props.onPrevPage}):null)),l().createElement(Y.Row,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}H(Q,"propTypes",{step:q().number,hideButtons:q().bool,onNextPage:q().func,onPrevPage:q().func,buttonType:q().node,onFinish:q().func,isStepValid:q().func}),H(Q,"defaultProps",{step:0,isStepValid:()=>!0,hideButtons:!1,onNextPage:()=>{},onPrevPage:()=>{},onFinish:()=>{}});const _=Q,K=(0,s.compose)((0,s.withPropsOnChange)(["step"],(function(){let{skipButtonsOnSteps:e=[],step:t,hideButtons:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.indexOf(t)>=0?{hideButtons:!0}:{hideButtons:n}})),(0,s.withHandlers)({onNextPage:e=>{let{step:t,setPage:n=(()=>{})}=e;return()=>{n(t+1)}},onPrevPage:e=>{let{step:t,setPage:n=(()=>{})}=e;return()=>{n(Math.max(t-1,0))}}}));(0,s.compose)((0,s.withState)("step","setPage",0),K);var J=n(657579),X=n(768977);const ee=(0,s.defaultProps)({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}});var te=n(353710),ne=n(77665);function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)}const le=ee(te.Z),oe={xAxisAngle:0,legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},re=[{type:"bar"},{type:"pie"},{type:"line"}].map((e=>{let{type:t}=e;return{type:t,title:l().createElement(B.Z,{msgId:`widgets.chartType.${t}.title`}),description:l().createElement(B.Z,{msgId:`widgets.chartType.${t}.description`}),caption:l().createElement(B.Z,{msgId:`widgets.chartType.${t}.caption`})}})),se=(0,s.shouldUpdate)(((e,t)=>{let{types:n,type:a}=e,{types:l,type:o}=t;return a!==o&&n!==l}))((function(){let{onSelect:e=(()=>{}),onNextPage:t=(()=>{}),types:n=re,type:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Y.Row,null,l().createElement(ne.Z,{key:"title",title:l().createElement(B.Z,{msgId:"widgets.selectChartType.title"})}),l().createElement(X.Z,{key:"content",onItemClick:n=>{e(n.type),t()},items:n&&re.map((e=>({...e,selected:e.type===a,preview:l().createElement(le,ae({},oe,{type:e.type,autoColorOptions:e.type===a?{base:0,s:0,v:0}:void 0}))})))}))}));var ie=n(486234),ce=n(454388),de=n(313311),pe=n.n(de);const me=e=>e.filter((function(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0!==e.indexOf("gml:")})).map((function(){let{name:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{label:e,value:e}})),ge=e=>e.filter((function(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0!==e.indexOf("gml:")})).map((function(){let{name:e,localType:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{label:e,value:e,type:t}})).filter((e=>"string"===e.type||"number"===e.type)),ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=pe()(t,{name:e});return!n||"number"!==n.localType&&"int"!==n.localType?[{value:"Count",label:"widgets.operations.COUNT"}]:(0,ce.Mt)()},he=(0,s.compose)((0,s.withProps)((function(){let{featureTypeProperties:e=[],data:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{options:me(e),typedOptions:ge(e),aggregationOptions:("counter"!==(null==t?void 0:t.widgetType)?[{value:"None",label:"widgets.operations.NONE"}]:[]).concat(ue(t.options&&t.options.aggregationAttribute,e))}})),(0,ie.Z)("aggregationOptions"));var ye=n(91175),be=n.n(ye),ve=n(743129),Ce=n(894449),fe=n(209756),Ee=n(584202),we=n(594239),xe=n(414293),Se=n.n(xe),Pe=n(867517),Ze=n(981537),Ae=n(423214),Te=n(118438);function Ie(e){let{showOnRender:t,placement:n,id:o,left:r,top:s,title:i,text:c,bsStyle:d="info",glyph:p="question-sign",popoverClassName:m}=e;const[g,u]=(0,a.useState)(t);let h=(0,a.useRef)(null);return l().createElement(l().Fragment,null,l().createElement(Y.Glyphicon,{onClick:()=>u(!g),ref:e=>h.current=e,style:{cursor:"pointer"},className:`text-${d}`,glyph:p}),l().createElement(Te.Z,{target:h.current,show:g,placement:n},l().createElement(Y.Popover,{id:o,placement:n,positionLeft:r,positionTop:s,title:i,className:m},l().createElement(Y.Glyphicon,{glyph:"1-close",style:{position:"absolute",right:0,top:0,margin:8},onClick:()=>u(!1)}),c)))}var Oe=n(807654),ke=n.n(Oe),Le=n(664647),ze=n.n(Le),Ne=n(379785);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Me.apply(this,arguments)}const Fe={value:1};function De(e){try{if(!e)return[!0];const t=(0,Ne.B)(e,Fe);return[!Se()(t)&&!ke()(t)&&!ze()(t),t]}catch(e){return[!1,e]}}function Re(e,t){return e?null:Se()(t)?"the expression returns no value":ke()(t)?"the expression returned NaN":ze()(t)?t.message:null}function Be(e,t){return t?e?"success":"error":null}function We(e){let{onChange:t,value:n,...o}=e;const[r,s]=De(n),[i,c]=(0,a.useState)(r),[d,p]=(0,a.useState)(s),[m,g]=(0,a.useState)(n);return l().createElement(Y.FormGroup,{validationState:Be(i,m)},l().createElement(Y.Col,{xs:12},l().createElement(Y.ControlLabel,null,l().createElement(B.Z,{msgId:"widgets.advanced.formula"})),l().createElement(Ie,{placement:"top",title:l().createElement(B.Z,{msgId:"widgets.advanced.formula"}),text:l().createElement(Pe.Z,{msgId:"widgets.advanced.formulaExamples"})}),l().createElement(Y.FormControl,Me({placeholder:"e.g. value / 100",feedback:Re(i,d)},o,{type:"text",value:m,onChange:e=>{const[n,a]=De(e.target.value);n?(c(!0),p(void 0),t(e)):(c(!1),p(a)),g(e.target.value)}}))))}var je=n(569291);const Ge=(0,ie.Z)("options")(ve.ZP),Ue=[{value:"-",label:"widgets.advanced.axisTypes.auto"},{value:"linear",label:"widgets.advanced.axisTypes.linear"},{value:"category",label:"widgets.advanced.axisTypes.category"},{value:"log",label:"widgets.advanced.axisTypes.log"},{value:"date",label:"widgets.advanced.axisTypes.date"}],Ve=[{id:"stacked",value:"stack",label:"widgets.advanced.stackedBarChart"},{id:"grouped",value:"group",label:"widgets.advanced.groupedBarChart"}];function qe(e){let{}=e;return l().createElement("span",null,l().createElement("span",{style:{cursor:"pointer"}},l().createElement(B.Z,{msgId:"widgets.advanced.title"})))}function Ye(e){var t,n,o,r,s,i,c,d,p;let{classificationAttribute:m,data:g,onChange:u=(()=>{})}=e;const[h,y]=(0,a.useState)(g.barChartType||"stack");return l().createElement(je.Z,{id:"displayCartesian",header:l().createElement(qe,{data:g}),collapsible:!0,expanded:g.panel,onSwitch:e=>{u("panel",e)}},l().createElement(Y.FormGroup,{controlId:"AdvancedOptions"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.displayCartesian"})),l().createElement(Y.Col,{sm:6},l().createElement(we.Z,{checked:!(!g.cartesian&&!1!==g.cartesian||g.cartesian),onChange:e=>{u("cartesian",!e)}})),"bar"===g.type&&m&&l().createElement("div",{className:"bar-chart-type"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.barChartType"})),Ve.map((e=>l().createElement(Y.Col,{xs:3,className:"radio-btn",key:e.value},l().createElement("input",{type:"radio",id:e.id,value:e.value,name:"barChartType",checked:h===e.value,onChange:e=>{const{value:t}=e.target;y(t),u("barChartType",t)}}),l().createElement(B.Z,{msgId:e.label}))))),l().createElement(Y.Col,{componentClass:"label",sm:12},l().createElement(B.Z,{msgId:"widgets.advanced.yAxis"})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.xAxisType"})),l().createElement(Y.Col,{sm:6},l().createElement(Ge,{value:g.yAxisOpts&&g.yAxisOpts.type||"-",options:Ue,onChange:e=>{u("yAxisOpts.type",e&&e.value)}})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.hideLabels"})),l().createElement(Y.Col,{sm:6},l().createElement(we.Z,{checked:!g.yAxis&&!1!==g.yAxis||!g.yAxis,onChange:e=>{u("yAxis",!e)}})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:12},l().createElement(B.Z,{msgId:"widgets.advanced.format"})),l().createElement(Y.Col,{sm:4},l().createElement(Y.ControlLabel,null,l().createElement(B.Z,{msgId:"widgets.advanced.prefix"}),l().createElement(Y.FormControl,{placeholder:"e.g.: ~",disabled:!1===g.yAxis,value:null==g||null===(t=g.yAxisOpts)||void 0===t?void 0:t.tickPrefix,type:"text",onChange:e=>u("yAxisOpts.tickPrefix",e.target.value)}))),l().createElement(Y.Col,{sm:4},l().createElement(Y.ControlLabel,null,l().createElement(B.Z,{msgId:"widgets.advanced.format"})),l().createElement(Ie,{placement:"top",title:l().createElement(B.Z,{msgId:"widgets.advanced.examples"}),text:l().createElement(Pe.Z,{msgId:"widgets.advanced.formatExamples"})}),l().createElement(Y.FormControl,{placeholder:"e.g.: .2s",disabled:!1===g.yAxis,value:null==g||null===(n=g.yAxisOpts)||void 0===n?void 0:n.format,type:"text",onChange:e=>u("yAxisOpts.format",e.target.value)})),l().createElement(Y.Col,{sm:4},l().createElement(Y.ControlLabel,null,l().createElement(B.Z,{msgId:"widgets.advanced.suffix"})),l().createElement(Y.FormControl,{placeholder:"e.g.: W",disabled:!1===g.yAxis,value:null==g||null===(o=g.yAxisOpts)||void 0===o?void 0:o.tickSuffix,type:"text",onChange:e=>u("yAxisOpts.tickSuffix",e.target.value)})),l().createElement(Y.Col,{sm:12},l().createElement(We,{disabled:!1===g.yAxis,value:g.formula,type:"text",onChange:e=>u("formula",e.target.value)})),l().createElement(Y.Col,{componentClass:"label",sm:12},l().createElement(B.Z,{msgId:"widgets.advanced.xAxis"})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.xAxisType"})),l().createElement(Y.Col,{sm:6},l().createElement(Ge,{value:(null==g||null===(r=g.xAxisOpts)||void 0===r?void 0:r.type)??"-",options:Ue,onChange:e=>{u("xAxisOpts.type",e&&e.value)}})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.hideLabels"})),l().createElement(Y.Col,{sm:6},l().createElement(we.Z,{checked:(null==g||null===(s=g.xAxisOpts)||void 0===s?void 0:s.hide)??!1,onChange:e=>{u("xAxisOpts.hide",e)}})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.forceTicks"})),l().createElement(Y.Col,{sm:6},l().createElement(we.Z,{disabled:(null==g||null===(i=g.xAxisOpts)||void 0===i?void 0:i.hide)??!1,checked:!(null==g||null===(c=g.xAxisOpts)||void 0===c||!c.nTicks),onChange:e=>{u("xAxisOpts.nTicks",e?200:void 0)}}),l().createElement("span",{style:{position:"relative",top:-5,margin:10}},l().createElement(Ae.Z,{bsStyle:"info",text:l().createElement(B.Z,{msgId:"widgets.advanced.maxXAxisLabels",msgParams:{max:200}})}))),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.xAxisAngle"})),l().createElement(Y.Col,{sm:6,style:{display:"flex"}},l().createElement(we.Z,{disabled:(null==g||null===(d=g.xAxisOpts)||void 0===d?void 0:d.hide)??!1,checked:void 0!==g.xAxisAngle,onChange:e=>{u("xAxisAngle",e?0:void 0)}}),l().createElement("div",{style:{flexGrow:1,padding:5}},void 0!==g.xAxisAngle?l().createElement("div",{className:"mapstore-slider with-tooltip",onClick:e=>{e.stopPropagation()}},l().createElement(Ze.Z,{disabled:!(null==g||null===(p=g.xAxisOpts)||void 0===p||!p.hide),key:"priority",format:{to:e=>`${parseInt(e,10)}Â°`,from:e=>Number(e)},onSlide:e=>{u("xAxisAngle",parseInt(e[0],10))},range:{min:-90,max:90},start:[Se()(g.xAxisAngle)?0:g.xAxisAngle],step:15,tooltips:[!0]})):l().createElement("div",{style:{textAlign:"center"}},"Auto")))),l().createElement(Y.FormGroup,{controlId:"yAxisLabel"},l().createElement(Y.Col,{componentClass:"label",sm:12},l().createElement(B.Z,{msgId:"widgets.advanced.legend"})),l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.advanced.yAxisLabel"})),l().createElement(Y.Col,{sm:6},l().createElement(Y.FormControl,{value:g.yAxisLabel,type:"text",onChange:e=>u("yAxisLabel",e.target.value)}))))}var $e=n(294184),He=n.n($e),Qe=n(147814),_e=n(466737),Ke=n(283604),Je=n(317723);const Xe=(e,t)=>l().createElement(Ie,{popoverClassName:"chart-color-class-popover",placement:e,title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.customLabels"}),text:l().createElement(Pe.Z,{msgId:`widgets.builder.wizard.classAttributes.${t}ChartCustomLabelsExample`})}),et=e=>{let{onUpdateClasses:t,classification:n,defaultClassLabel:a,onChangeDefaultClassLabel:o,layer:r,chartType:s,classificationAttribute:i,classificationAttributeType:c}=e;return l().createElement(l().Fragment,null,l().createElement(Y.Row,{xs:12},l().createElement(Y.Col,{componentClass:Y.ControlLabel,xs:6},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.defaultClassLabel"}),Xe("top",s)),l().createElement(Y.Col,{xs:6},l().createElement(Y.FormControl,{value:a,type:"text",onChange:e=>o(e.target.value)}))),l().createElement(Y.Row,{xs:12},l().createElement(Y.Col,{xs:12},l().createElement(l().Fragment,null,l().createElement(Y.Row,{xs:12},l().createElement(Y.Col,{xs:4},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classColor"})),l().createElement(Y.Col,{xs:4},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classValue"})),l().createElement(Y.Col,{xs:4},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classLabel"}),Xe("right",s))),l().createElement(Je.Z,{noEmptyIndex:!0,classification:n,onUpdateClasses:e=>t(e,c),allowEmpty:!1,customLabels:!0,uniqueValuesClasses:!0,autoCompleteOptions:{classificationAttribute:i,dropUpAutoComplete:!0,layer:r},dropUpMenu:!0,usePresetColors:!0})))))};et.PropTypes={onUpdateClasses:q().func,classification:q().array,defaultClassLabel:q().string,onChangeDefaultClassLabel:q().func,layer:q().object,chartType:q().string,classificationAttribute:q().string,classificationAttributeType:q().string};const tt=et,nt=(e,t,n,a)=>l().createElement(Ie,{popoverClassName:"chart-color-class-popover",placement:e,title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.customLabels"}),text:l().createElement(Pe.Z,{msgId:`widgets.builder.wizard.classAttributes.${t}${n}${a}ChartCustomLabelsExample`})}),at=e=>{let{onUpdateClasses:t,rangeClassification:n,defaultClassLabel:a,onChangeDefaultClassLabel:o,chartType:r,classificationAttributeType:s}=e;return l().createElement(l().Fragment,null,l().createElement(Y.Row,{xs:12},l().createElement(Y.Col,{componentClass:Y.ControlLabel,xs:6},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.defaultClassLabel"}),nt("top",r,"Range","Default")),l().createElement(Y.Col,{xs:6},l().createElement(Y.FormControl,{value:a,type:"text",onChange:e=>o(e.target.value)}))),l().createElement(Y.Row,null,l().createElement(Y.Col,{xs:12},l().createElement(Y.Col,{xs:3},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classColor"})),l().createElement(Y.Col,{xs:3},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.minValue"})),l().createElement(Y.Col,{xs:3},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.maxValue"})),l().createElement(Y.Col,{xs:3},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classLabel"}),nt("right",r,"Range","Class")))),l().createElement(Je.Z,{noEmptyIndex:!0,classification:n,onUpdateClasses:e=>t(e,s),allowEmpty:!1,customLabels:!0,usePresetColors:!0,dropUpMenu:!0}))};at.PropTypes={onUpdateClasses:q().func,rangeClassification:q().array,defaultClassLabel:q().string,onChangeDefaultClassLabel:q().function,chartType:q().string,classificationAttributeType:q().string};const lt=at;var ot=n(455877),rt=n.n(ot);const st=e=>{let{modalClassName:t,show:n,onClose:o,onSaveClassification:r,onChangeClassAttribute:s,classificationAttribute:i,classificationAttributeType:c,onUpdateClasses:d,options:p,placeHolder:m,classification:g,rangeClassification:u,defaultCustomColor:h,defaultClassLabel:y,onChangeColor:b,onChangeDefaultClassLabel:v,layer:C,chartType:f}=e;const[E,w]=(0,a.useState)(!1);return l().createElement(_e.Z,null,l().createElement(Ke.Z,{modalClassName:He()(t,{"menu-open":E||i},{"text-class":"string"===c},{"range-class":"number"===c}),title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.title"}),show:n,clickOutEnabled:!1,showClose:!1,onClose:()=>o(),buttons:[{className:"btn-cancel",text:l().createElement(B.Z,{msgId:"close"}),bsSize:"sm",onClick:()=>o()},{className:"btn-save",text:l().createElement(B.Z,{msgId:"save"}),bsSize:"sm",onClick:()=>r()}]},l().createElement(Y.Row,{xs:12},l().createElement(Y.Col,{componentClass:Y.ControlLabel,xs:6},l().createElement(B.Z,{msgId:i?"widgets.builder.wizard.classAttributes.defaultColor":"widgets.builder.wizard.classAttributes.color"})),l().createElement(Y.Col,{xs:6},l().createElement(Qe.Z,{key:0,color:h,disableAlpha:!0,format:"hex",onChangeColor:e=>b(e)}))),l().createElement(Y.Row,{xs:12},l().createElement(Y.Form,{id:"chart-color-class-form",horizontal:!0},l().createElement(Y.FormGroup,{controlId:"classificationAttribute",className:"chart-color-class-form-group"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,xs:6},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.classificationAttribute"})),l().createElement(Y.Col,{xs:6},l().createElement(ve.ZP,{value:i,options:p,placeholder:m,onChange:e=>{const t=e&&e.value||void 0,n=e&&e.type||void 0;s(t,n)},onOpen:()=>w(!E),onClose:()=>w(!E)}))))),i&&"string"===c?l().createElement(tt,{onUpdateClasses:d,classification:g,defaultClassLabel:y,onChangeDefaultClassLabel:v,layer:C,chartType:f,classificationAttribute:i,classificationAttributeType:c}):i&&"number"===c?l().createElement(lt,{onUpdateClasses:d,chartType:f,onChangeDefaultClassLabel:v,defaultClassLabel:y,rangeClassification:u,classificationAttributeType:c}):null))};st.propTypes={modalClassName:q().string,show:q().boolean,onClose:q().func,onSaveClassification:q().func,onChangeClassAttribute:q().func,classificationAttribute:q().string,onUpdateClasses:q().func,options:q().array,placeHolder:q().string,classification:q().array,rangeClassification:q().array,defaultCustomColor:q().string,defaultClassLabel:q().string,onChangeColor:q().func,onChangeDefaultClassLabel:q().func},st.defaultProps={modalClassName:"chart-color-class-modal",onClose:()=>{},onSaveClassification:()=>{},onChangeClassAttribute:()=>{},classificationAttribute:"",onUpdateClasses:()=>{},options:[],classification:[{uuid:rt().v1(),title:"",color:(0,fe.TM)(),type:"Polygon",unique:""}],rangeClassification:[{uuid:rt().v1(),title:"",color:(0,fe.TM)(),type:"Polygon",min:0,max:0}],defaultCustomColor:"#0888A1",defaultClassLabel:"",onChangeColor:()=>{},onChangeDefaultClassLabel:()=>{}};const it=st;var ct=n(116988);const dt={base:190,range:0,s:.95,v:.63},pt=[{showWhen:e=>"pie"===e,name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{showWhen:e=>"bar"===e||"pie"===e,name:"global.colors.custom",schema:"sequencial",options:dt,ramp:"#fff",custom:!0}],mt=[{id:rt().v1(),title:"",color:(0,fe.TM)(),type:"Polygon",unique:""}],gt=[{id:rt().v1(),title:"",color:(0,fe.TM)(),type:"Polygon",min:0,max:0}],ut=(e,t,n,a)=>(pt.filter((e=>e.custom))[0].ramp=n?[...t.map((e=>e.color)),a]:a,pt.filter((t=>t.showWhen?t.showWhen(e):t))),ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`widgets.${e}.${t.type||t.widgetType||"default"}`},yt=l().createElement(B.Z,{msgId:ht("placeHolder")}),bt=(e,t)=>e.map((e=>({id:e.id||rt().v1(),title:e.title??e.unique,color:e.color,..."string"===t&&{value:e.unique,unique:e.unique},..."number"===t&&{max:e.max??0,min:e.min??0}}))),vt=e=>{var t,n;let{hasAggregateProcess:o,data:r={options:{},autoColorOptions:{}},onChange:s=(()=>{}),options:i=[],typedOptions:c=[],formOptions:d={showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0},aggregationOptions:p=[],sampleChart:m,layer:g}=e;const[u,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),C="global.colors.custom"===(null===(t=r.autoColorOptions)||void 0===t?void 0:t.name),{classificationAttribute:f}=(null==r?void 0:r.options)||{},{classificationAttributeType:E}=(null==r?void 0:r.options)||{},{classification:w=mt}=(null==r?void 0:r.autoColorOptions)||{},{rangeClassification:x=gt}=(null==r?void 0:r.autoColorOptions)||{},S="number"===E?x:w,{defaultClassLabel:P=""}=(null==r?void 0:r.autoColorOptions)||{},Z=(null==r||null===(n=r.autoColorOptions)||void 0===n?void 0:n.defaultCustomColor)||(0,ct.HC)(1,dt)[0]||"#0888A1",A=(e,t,n,a,l)=>{const o="number"===a?"autoColorOptions.rangeClassification":"autoColorOptions.classification",r="number"===a?gt:mt;e.length===n.length?(s(o,r),l===a&&(s("options.classificationAttribute",void 0),s("options.classificationAttributeType",void 0))):s(o,t||[])};return(0,a.useEffect)((()=>{var e;"line"!==r.type||null!=r&&null!==(e=r.autoColorOptions)&&void 0!==e&&e.name&&!C||s("autoColorOptions",{name:"global.colors.blue",base:190,range:20})}),[r.type]),l().createElement(Y.Row,null,l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"widgets.chartOptionsTitle"})}),l().createElement(Y.Col,{xs:12,style:{position:"sticky",top:0,zIndex:1}},l().createElement("div",{style:{marginBottom:"30px"}},m)),l().createElement(Y.Col,{xs:12},l().createElement(Y.Form,{className:"chart-options-form",horizontal:!0},d.showGroupBy?l().createElement(Y.FormGroup,{controlId:"groupByAttributes",className:"mapstore-block-width"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:ht("groupByAttributes",r)})),l().createElement(Y.Col,{sm:6},l().createElement(ve.ZP,{value:r.options&&r.options.groupByAttributes,options:i,placeholder:yt,onChange:e=>{s("options.groupByAttributes",e&&e.value)}}))):null,l().createElement(Y.FormGroup,{controlId:"aggregationAttribute",className:"mapstore-block-width"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:ht("aggregationAttribute",r)})),l().createElement(Y.Col,{sm:6},l().createElement(ve.ZP,{value:r.options&&r.options.aggregationAttribute,options:i,placeholder:yt,onChange:e=>{s("options.aggregationAttribute",e&&e.value)}}))),o?l().createElement(Y.FormGroup,{controlId:"aggregateFunction",className:"mapstore-block-width"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:ht("aggregateFunction",r)})),l().createElement(Y.Col,{sm:6},l().createElement(ve.ZP,{value:r.options&&r.options.aggregateFunction,options:p,placeholder:yt,onChange:e=>{s("options.aggregateFunction",e&&e.value)}}))):null,d.showUom?l().createElement(Y.FormGroup,{controlId:"uom"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:ht("uom",r)})),l().createElement(Y.Col,{sm:6},l().createElement(Y.FormControl,{value:h()(r,"options.seriesOptions[0].uom"),type:"text",onChange:e=>s("options.seriesOptions.[0].uom",e.target.value)}))):null,d.showColorRampSelector?l().createElement(Y.FormGroup,{controlId:"colorRamp",className:"mapstore-block-width"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:C?5:6},l().createElement(B.Z,{msgId:ht("colorRamp",r)})),l().createElement(Y.Col,{sm:C?7:6},l().createElement(Y.FormGroup,null,C&&l().createElement(Y.Col,{xs:2},l().createElement(Y.OverlayTrigger,{key:"customColors",placement:"top",overlay:l().createElement(Y.Tooltip,{id:"wizard-tooltip-customColors"},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.editCustomColors"}))},l().createElement($.Z,{bsSize:"sm",className:`custom-color-btn btn btn-default ${r.type}`,onClick:()=>y(!0)},l().createElement(Y.Glyphicon,{glyph:"pencil"})))),l().createElement(Y.Col,{xs:C?10:12,className:He()({"custom-color":C})},l().createElement(Ce.Z,{items:ut(r.type,S,f,Z),value:be()(ut(r.type,S,f,Z).filter((e=>r.autoColorOptions&&e.name===r.autoColorOptions.name))),samples:"pie"===r.type?5:1,onChange:e=>{s("autoColorOptions",{...e.options,name:e.name,...w?{classification:bt(w,"string")}:{},...x?{rangeClassification:bt(x,"number")}:{},defaultCustomColor:Z??"#0888A1"}),e.custom||(s("options.classificationAttribute",void 0),s("options.classificationAttributeType",void 0))}}))))):null,l().createElement(it,{modalClassName:"chart-color-class-modal",show:u,onClose:()=>{const e=w.filter((e=>!e.unique||!e.value)),t=x.filter((e=>!e.title));(e.length>0&&"string"===E||t.length>0&&"number"===E)&&f?v(!0):y(!1)},onSaveClassification:()=>{y(!1),s("autoColorOptions.defaultCustomColor",Z),s("options.classificationAttribute",f),s("options.classificationAttributeType",E),f&&s("autoColorOptions",{...r.autoColorOptions,defaultClassLabel:P||"",classification:w?bt(w,"string"):[],rangeClassification:x?bt(x,"number"):[]})},onChangeClassAttribute:(e,t)=>{s("options.classificationAttribute",e),s("options.classificationAttributeType",t)},classificationAttribute:f,classificationAttributeType:E,onUpdateClasses:(e,t)=>{s("number"===t?"autoColorOptions.rangeClassification":"autoColorOptions.classification",bt(e,t)||[])},options:c,placeHolder:yt,classification:w,rangeClassification:x,defaultCustomColor:Z,onChangeColor:e=>s("autoColorOptions.defaultCustomColor",e),defaultClassLabel:P,onChangeDefaultClassLabel:e=>s("autoColorOptions.defaultClassLabel",e),layer:g,chartType:r.type}),(T=b,I=()=>{v(!1)},O=()=>{const[e,t]=[(n=w).filter((e=>!e.unique&&!e.value)),n.filter((e=>e.unique&&e.value))];var n;const[a,l]=(e=>[e.filter((e=>!e.title.trim())),e.filter((e=>e.title))])(x);A(e,t,w,"string",E),A(a,l,x,"number",E),v(!1),y(!1)},l().createElement(Ee.Z,{show:T,onClose:I,onConfirm:O},l().createElement(B.Z,{msgId:"widgets.builder.wizard.classAttributes.confirmModalMessage"}))),d.showLegend?l().createElement(Y.FormGroup,{controlId:"displayLegend"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:ht("displayLegend",r)})),l().createElement(Y.Col,{sm:6},l().createElement(we.Z,{checked:r.legend,onChange:e=>{s("legend",e)}}))):null,!d.advancedOptions||"chart"!==r.widgetType||"bar"!==r.type&&"line"!==r.type?null:l().createElement(Ye,{data:r,classificationAttribute:f,onChange:s}))));var T,I,O},Ct=e=>{let{data:t={},onChange:n=(()=>{}),sampleChart:a}=e;return l().createElement(Y.Row,null,l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"widgets.widgetOptionsTitle"})}),l().createElement(Y.Col,{key:"sample",xs:12},l().createElement("div",{style:{marginBottom:"30px"}},a)),l().createElement(Y.Col,{key:"form",xs:12},l().createElement(Y.Form,{className:"widget-options-form",horizontal:!0},l().createElement(Y.FormGroup,{controlId:"groupByAttributes"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.title"})),l().createElement(Y.Col,{sm:6},l().createElement(Y.FormControl,{value:t.title,type:"text",onChange:e=>n("title",e.target.value)}))),l().createElement(Y.FormGroup,{controlId:"aggregationAttribute"},l().createElement(Y.Col,{componentClass:Y.ControlLabel,sm:6},l().createElement(B.Z,{msgId:"widgets.description"})),l().createElement(Y.Col,{sm:6},l().createElement(Y.FormControl,{value:t.description,type:"text",onChange:e=>n("description",e.target.value)}))))))};var ft=n(107319),Et=n(281673),wt=n(719573),xt=n(179635),St=n(92723),Pt=n(706020);function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zt.apply(this,arguments)}const At=(0,p.Z)((e=>{let{loading:t,data:n}=e;return t||!n}),{width:500,height:200}),Tt=(0,J.Z)((e=>{let{featureTypeProperties:t=[]}=e;return 0===t.filter((function(){let{type:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0!==e.indexOf("gml:")})).length}))(se),It=he(vt),Ot=(0,s.compose)(Et.Z,wt.Z,xt.Z,ft.Z,At,Pt.Z,St.Z)(te.Z),kt=ee(te.Z),Lt={width:430,height:200},zt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hasAggregateProcess:t}=arguments.length>1?arguments[1]:void 0;return e.aggregationAttribute&&e.groupByAttributes&&(!t||t&&e.aggregateFunction)||e.classificationAttribute},Nt=K(_),Mt=e=>{let{data:t={},layer:n,dependencies:a={},setValid:o=(()=>{}),hasAggregateProcess:r}=e;return zt(t.options,{hasAggregateProcess:r})?l().createElement(Ot,Zt({key:"preview-chart",onLoad:()=>o(!0),onLoadError:()=>o(!1),isAnimationActive:!1,dependencies:a,dependenciesMap:t.dependenciesMap},Lt,{type:t.type,xAxisOpts:t.xAxisOpts,yAxisOpts:t.yAxisOpts,barChartType:t.barChartType,formula:t.formula,legend:t.legend,cartesian:t.cartesian,layer:t.layer||n,filter:t.filter,geomProp:t.geomProp,mapSync:t.mapSync,autoColorOptions:t.autoColorOptions,options:t.options,yAxis:t.yAxis,xAxisAngle:t.xAxisAngle,yAxisLabel:t.yAxisLabel})):l().createElement(kt,Zt({hasAggregateProcess:r,key:"sample-chart",isAnimationActive:!1},Lt,{type:t.type,autoColorOptions:t.autoColorOptions,legend:t.legend,cartesian:t.cartesian,layer:t.layer||n,yAxis:t.yAxis}))},Ft=(0,s.compose)((0,s.lifecycle)({UNSAFE_componentWillReceiveProps:function(){let{data:e={},valid:t,setValid:n=(()=>{}),hasAggregateProcess:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&!zt(e.options,{hasAggregateProcess:a})&&n(!1)}}),(0,s.setDisplayName)("ChartWizard"))((e=>{let{onChange:t=(()=>{}),onFinish:n=(()=>{}),setPage:a=(()=>{}),setValid:o=(()=>{}),data:r={},layer:s={},step:i=0,types:c,featureTypeProperties:d,dependencies:p,hasAggregateProcess:m}=e;return l().createElement(Nt,{step:i,setPage:a,onFinish:n,isStepValid:e=>0===e?r.chartType:1!==e||zt(r.options,{hasAggregateProcess:m}),hideButtons:!0},l().createElement(Tt,{key:"type",featureTypeProperties:d,type:r.type,onSelect:e=>{t("type",e)}}),l().createElement(It,{hasAggregateProcess:m,dependencies:p,key:"chart-options",featureTypeProperties:d,types:c,data:r,onChange:t,layer:r.layer||s,sampleChart:Mt({hasAggregateProcess:m,data:r,layer:r.layer||s,dependencies:p,setValid:e=>o(e&&zt(r.options,{hasAggregateProcess:m}))})}),l().createElement(Ct,{key:"widget-options",data:r,onChange:t,layer:r.layer||s,sampleChart:Mt({hasAggregateProcess:m,data:r,layer:r.layer||s,dependencies:p,setValid:e=>o(e&&zt(r.options,{hasAggregateProcess:m}))})}))}));var Dt=n(8204);const Rt=function(){let{canProceed:e,selected:t,stepButtons:n=[],onProceed:a=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[...n,{onClick:a,disabled:!e,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:t,glyph:"arrow-right"}]})};var Bt=n(134479);const Wt=function(){let{onClose:e=(()=>{}),children:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement("div",{className:"mapstore-flex-container"},l().createElement("div",{className:"m-header bg-body widgets-builder-header"},l().createElement(Y.Row,null,l().createElement(Y.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},l().createElement($.Z,{onClick:()=>e(),className:"pull-left on-close-btn square-button no-border "},l().createElement(Y.Glyphicon,{glyph:"1-close"})),l().createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},l().createElement(B.Z,{msgId:"widgets.builder.header.title"})),l().createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},l().createElement(Y.Glyphicon,{glyph:"stats",className:"text-primary"})))),l().createElement(Y.Row,{className:"text-center"},l().createElement("div",{className:"m-padding-md"},t))))},jt=Wt;var Gt=n(513218),Ut=n.n(Gt),Vt=n(441609),qt=n.n(Vt),Yt=n(185936),$t=n(274869),Ht=n(281563),Qt=n(52713);const _t=(0,ie.Z)(["placeholder","clearValueText","noResultsText"])(n(743129).ZP),Kt=e=>{let{services:t,selectedService:n,onChangeSelectedService:a=(()=>{}),onChangeCatalogMode:o=(()=>{}),isValidServiceSelected:r}=e;return l().createElement(Y.InputGroup,null,l().createElement(_t,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:t,value:n,onChange:e=>a(e&&e.value?e.value:""),placeholder:"catalog.servicePlaceholder"}),r?l().createElement(Y.InputGroup.Addon,{className:"btn",onClick:()=>o("edit",!1)},l().createElement(Y.Glyphicon,{glyph:"pencil"})):null,l().createElement(Y.InputGroup.Addon,{className:"btn",onClick:()=>o("edit",!0)},l().createElement(Y.Glyphicon,{glyph:"plus"})))},Jt=(0,ie.Z)("placeholder")(Y.FormControl),Xt=e=>{let{onSearchTextChange:t=(()=>{}),onChangeSelectedService:n=(()=>{}),searchText:a,title:o=l().createElement(B.Z,{msgId:"catalog.title"}),services:r,showCatalogSelector:s,selectedService:i,onChangeCatalogMode:c}=e;return l().createElement(Y.Grid,{className:"catalog-form",fluid:!0},l().createElement(Y.Row,null,l().createElement(Y.Col,{xs:12},l().createElement("h4",{className:"text-center"},o),s?l().createElement(Y.FormGroup,null,l().createElement(Kt,{onChangeCatalogMode:c,services:r,onChangeSelectedService:n,selectedService:{label:(null==i?void 0:i.title)??"",value:i??{}},isValidServiceSelected:i})):null,l().createElement(Y.FormGroup,{controlId:"catalog-form"},l().createElement(Jt,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:a,onChange:e=>t(e.currentTarget.value)})))))},en=l().createElement(Ht.Z,{glyph:"geoserver",padding:20}),tn=(0,s.compose)((0,p.Z)((e=>{let{loading:t,items:n=[]}=e;return 0===n.length&&t})),(0,m.Z)((e=>{let{loading:t,error:n}=e;return!t&&n}),{title:l().createElement(B.Z,{msgId:"catalog.error"}),style:{transform:"translateY(50%)"}}),(0,m.Z)((e=>{let{loading:t,items:n=[]}=e;return 0===n.length&&!t}),{title:l().createElement(B.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(X.Z),nn=e=>e.identifier?e.identifier:e.provider?e.provider+(e.variant??""):e.tileMapUrl||e.url+rt()(),an=e=>{let{records:t,result:n={},catalog:a={}}=e;return{items:(t||[]).map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title&&Ut()(e.title)&&e.title.default||e.title,caption:nn(e),description:e.description,preview:a.hideThumbnail?null:e.thumbnail?l().createElement("img",{src:e.thumbnail}):en,record:{...e,identifier:nn(e)}}})),total:n&&n.numberOfRecordsMatched}},ln=(0,s.compose)((0,$t.Z)("searchText","setSearchText",""),(0,Yt.Z)({loadPage:function(e){let{text:t,catalog:n={}}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const l=n.type,o={options:{service:n}};let r={};return"csw"===l?r={...o,filter:n.filter}:"tms"===l&&(r=o),b().Observable.fromPromise(I.Z[l].textSearch(n.url,10*a+("csw"===l?1:0),10,t,r)).map((e=>({result:e,records:I.Z[l].getCatalogRecords(e||[],{url:n&&n.url,service:n})}))).map((e=>{let{records:t,result:a}=e;return an({records:t,result:a,catalog:n})}))},scrollSpyOptions:{querySelector:".ms2-border-layout-body .ms2-border-layout-content",pageSize:10}}),(0,s.mapPropsStream)((e=>e.merge(e.take(1).switchMap((t=>{let{loadFirst:n=(()=>{}),services:a}=t;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText").do((function(){let{searchText:e,selectedService:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!qt()(a[t])&&n({text:e,catalog:a[t]})})).ignoreElements()}))))),(0,s.withPropsOnChange)(["selectedService"],(e=>{const t=e.services[e.selectedService];qt()(t)||e.loadFirst({text:e.searchText||"",catalog:t})})))((e=>{let{setSearchText:t=(()=>{}),selected:n,onRecordSelected:a,loading:o,searchText:r,items:s=[],total:i,catalog:d,services:p,title:m,showCatalogSelector:g=!0,error:u,onChangeSelectedService:h=(()=>{}),selectedService:y,onChangeCatalogMode:b=(()=>{})}=e;return l().createElement(c.Z,{className:"compat-catalog",header:l().createElement(Xt,{onChangeCatalogMode:b,onChangeSelectedService:h,services:Object.keys(p).map((e=>{var t;return{label:null===(t=p[e])||void 0===t?void 0:t.title,value:{...p[e],key:e}}})),selectedService:p[y],showCatalogSelector:g,title:m,searchText:r,onSearchTextChange:t}),footer:l().createElement("div",{className:"catalog-footer"},o?l().createElement(Qt.Z,null):null,Se()(i)?null:l().createElement("span",{className:"res-info"},l().createElement(B.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:s.length,total:i}})))},l().createElement(tn,{items:s.map((e=>e===n||n&&e&&e.record&&n.identifier===e.record.identifier?{...e,selected:!0}:e)),loading:o,error:u,onItemClick:function(){let{record:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(e,d)}}))})),on=(0,s.defaultProps)({title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.selectALayer"})})(ln),rn=(0,s.compose)((0,s.branch)((function(){let{catalog:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,o.connect)((0,r.P1)(Bt.R7,(e=>({catalog:e}))))))(on),sn=function(){let{onClose:e=(()=>{}),setSelected:t=(()=>{}),onLayerChoice:n=(()=>{}),stepButtons:a,selected:o,error:r,canProceed:s,layer:i,catalog:d,defaultServices:p,onChangeSelectedService:m,defaultSelectedService:g,onChangeCatalogMode:u,dashboardServices:h,dashboardSelectedService:y}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{className:"bg-body layer-selector",header:l().createElement(jt,{onClose:e},l().createElement(Rt,{stepButtons:a,canProceed:s&&o,onProceed:()=>n(i)}),o&&!s&&r?l().createElement(Ae.Z,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:l().createElement(E.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:l().createElement(E.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},l().createElement(rn,{onChangeCatalogMode:u,selectedService:""===y?y:void 0===y?g:y,onChangeSelectedService:e=>m(e,h||p),services:h||p,selected:o,catalog:d,onRecordSelected:e=>t(e)}))},cn=e=>{switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},dn=e=>{switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},pn=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};var mn=n(851719),gn=n(641259),un=n(504518),hn=n(521923),yn=n(522296),bn=n(723027);function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vn.apply(this,arguments)}const Cn={url:"",type:"wms",title:"",isNew:!0,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>",excludeShowTemplate:!0},fn=(0,s.compose)((0,s.defaultProps)({id:"dashboard-catalog-selector",buttonStyle:{marginBottom:"10px",marginRight:"5px"}}),(0,o.connect)((e=>({mode:(0,gn.Yl)(e),dashboardServices:(0,gn.CN)(e),dashboardSelectedService:(0,gn.fd)(e),isNew:(0,gn.Ip)(e)})),{onChangeSelectedService:mn.tH,onChangeCatalogMode:mn.ak,onDeleteService:mn.qY,onAddService:mn.kk,error:un.vU}),(0,s.branch)((function(){let{mode:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"edit"===e}),(0,s.renderComponent)((e=>{let{service:t,catalogServices:n,error:o=(()=>{}),onAddService:r=(()=>{}),isNew:s,dashboardServices:i,defaultServices:c,defaultSelectedService:d,dashboardSelectedService:p,...m}=e;const[g,u]=(0,a.useState)(s?Cn:qt()(p)?{...c[d],old:c[d],key:d,excludeShowTemplate:!0}:{...i[p],old:i[p],key:p,excludeShowTemplate:!0}),h=qt()(i)?c:i;return l().createElement("div",{style:{padding:"1rem",height:"100%"}},l().createElement(yn.Z,vn({onChangeUrl:e=>u({...g,url:e}),onChangeType:e=>u({...g,type:e}),onChangeTitle:e=>u({...g,title:e}),service:g,onChangeServiceFormat:e=>u({...g,format:e}),onToggleAdvancedSettings:()=>u({...g,showAdvancedSettings:!g.showAdvancedSettings}),onAddService:()=>{if(!("tms"===g.type||g.title&&g.url))return void o({title:"catalog.notification.errorTitle",message:"catalog.notification.warningAddCatalogService"});const e=s?g.title+rt()():g.key,t={...g,key:e};r(t,h,s)},onChangeServiceProperty:(e,t)=>{let n=g;"provider"===e&&(n.provider=t),n[e]?n[e]="boolean"==typeof t?!n[e]:t:n=(0,hn.t8)(`${e}`,t,n),u(n)},onToggleTemplate:()=>u({...g,showTemplate:!g.showTemplate}),onToggleThumbnail:()=>u({...g,hideThumbnail:!g.hideThumbnail}),serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:bn.DEFAULT_ALLOWED_PROVIDERS},{name:"wfs",label:"WFS"}],onChangeMetadataTemplate:e=>u({...g,metadataTemplate:e}),services:h},m)))}))));function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},En.apply(this,arguments)}const wn=(0,o.connect)(U.e3,{setPage:d.YA,setValid:e=>(0,d.t4)("valid",e),onEditorChange:d.Rz,insertWidget:d.Qe},U.eF)((0,s.compose)(S({needWPS:!1}),(0,s.renameProps)({editorData:"data",onEditorChange:"onChange"}))(Ft)),xn=(0,s.compose)((0,o.connect)(U.e3,{openFilterEditor:d.fy,setPage:d.YA,onChange:d.Rz,insertWidget:d.Qe},U.eF),D,j(),G((e=>{let{step:t}=e;return 1===t})))((function(){let{step:e=0,editorData:t={},valid:n,setPage:a=(()=>{}),onFinish:o=(()=>{}),stepButtons:r=[],openFilterEditor:s=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:()=>a(Math.max(0,e-1)),visible:e>0,glyph:"arrow-left",tooltipId:cn(e)},...r,{visible:e>0,onClick:s,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:()=>a(Math.min(e+1,2)),visible:!(1!==e),disabled:1===e&&!n,glyph:"arrow-right",tooltipId:dn(e)},{onClick:()=>o(Math.min(e+1,1)),visible:2===e,glyph:"floppy-disk",tooltipId:pn(e,t)}]})})),Sn=(0,s.compose)((0,o.connect)(U.e3),W,fn,(0,s.branch)((function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,s.renderComponent)(N(sn))))((function(){let{enabled:e,onClose:t=(()=>{}),exitButton:n,editorData:a,toggleConnection:o,availableDependencies:r=[],dependencies:s,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement("div",{className:"mapstore-chart-advance-options"},l().createElement(c.Z,{header:l().createElement(jt,{onClose:t},l().createElement(xn,{exitButton:n,editorData:a,toggleConnection:o,availableDependencies:r,onClose:t}))},e?l().createElement(wn,En({dependencies:s},i)):null))})),Pn=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};var Zn=n(173581);const An=(0,ie.Z)("placeholder")(Y.FormControl),Tn=(0,ie.Z)("placeholder")(Zn.Z),In=e=>{let{data:t={},onChange:n=(()=>{})}=e;return l().createElement("div",null,l().createElement(Y.Col,{key:"form",xs:12},l().createElement(Y.Form,null,l().createElement(Y.FormGroup,{controlId:"title"},l().createElement(Y.Col,{sm:12},l().createElement(An,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:t.title,type:"text",onChange:e=>n("title",e.target.value)}))))),l().createElement(Tn,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:t&&t.text||"",onChange:e=>n("text",e)}))},On=K(_),kn=(0,s.compose)((0,o.connect)(U.e3,{setPage:d.YA,insertWidget:d.Qe,onResetChange:d.Rz},U.eF),(0,s.withProps)((e=>{let{onResetChange:t=(()=>{})}=e;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:()=>t("widgetType",void 0)}}})),j())((function(){let{step:e=0,editorData:t={},stepButtons:n=[],onFinish:a=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[...n,{onClick:()=>a(Math.min(e+1,1)),visible:0===e,glyph:"floppy-disk",tooltipId:Pn(e,t)}]})})),Ln=(0,o.connect)(U.e3,{onChange:d.Rz},U.eF)((function(){let{onChange:e=(()=>{}),onFinish:t=(()=>{}),setPage:n=(()=>{}),step:a=0,editorData:o={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(On,{step:a,setPage:n,onFinish:t,hideButtons:!0},l().createElement(In,{key:"widget-options",data:o,onChange:e}))})),zn=(0,n(297977).Z)()((0,a.lazy)((()=>Promise.all([n.e(3370),n.e(8156)]).then(n.bind(n,188156))))),Nn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},Mn=K(_),Fn=(0,s.compose)((0,s.lifecycle)({UNSAFE_componentWillReceiveProps:function(){let{data:e={},valid:t,setValid:n=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&!Nn(e.options)&&n(!1)}}))((e=>{let{onChange:t=(()=>{}),onFinish:n=(()=>{}),setPage:a=(()=>{}),data:o={},layer:r={},step:s=0,types:i,featureTypeProperties:c,dependencies:d}=e;return l().createElement(Mn,{step:s,setPage:a,onFinish:n,isStepValid:e=>1!==e||Nn(o.options),hideButtons:!0},l().createElement(zn,{dependencies:d,key:"chart-options",featureTypeProperties:c,types:i,data:o,onChange:t,layer:o.layer||r}),l().createElement(Ct,{key:"widget-options",data:o,onChange:t,layer:o.layer||r}))})),Dn=e=>e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length,Rn=e=>{switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},Bn=(e,t)=>t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute",Wn=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jn.apply(this,arguments)}const Gn=(0,o.connect)(U.e3,{setPage:d.YA,setValid:e=>(0,d.t4)("valid",e),onEditorChange:d.Rz,insertWidget:d.Qe},U.eF)((0,s.compose)(S(),(0,s.renameProps)({editorData:"data",onEditorChange:"onChange"}),(0,s.mapPropsStream)((e=>e.merge(e.distinctUntilChanged((function(){let{featureTypeProperties:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{featureTypeProperties:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e===t})).do((function(){let{featureTypeProperties:e=[],onChange:t=(()=>{}),data:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&e.length>0&&!h()(n,"options.propertyName")&&t("options.propertyName",e.filter((e=>!(0,w.isGeometryType)(e))).map((e=>e.name)))})).ignoreElements()))))(Fn)),Un=(0,s.compose)((0,o.connect)(U.e3,{openFilterEditor:d.fy,setPage:d.YA,onChange:d.Rz,insertWidget:d.Qe},U.eF),D,j(),G((e=>{let{step:t}=e;return 0===t})))((function(){let{openFilterEditor:e=(()=>{}),step:t=0,stepButtons:n=[],editorData:a={},setPage:o=(()=>{}),onFinish:r=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:()=>o(Math.max(0,t-1)),visible:t>0,glyph:"arrow-left",tooltipId:Rn(t)},...n,{visible:t>=0,onClick:e,disabled:!Dn(a),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:()=>o(Math.min(t+1,2)),visible:0===t,disabled:0===t&&!Dn(a),glyph:"arrow-right",tooltipId:Bn(0,Dn(a))},{onClick:()=>r(Math.min(t+1,1)),visible:1===t,glyph:"floppy-disk",tooltipId:Wn(t,a)}]})})),Vn=(0,s.compose)((0,o.connect)(U.e3),W,fn,(0,s.branch)((function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,s.renderComponent)(N(sn))))((function(){let{enabled:e,onClose:t=(()=>{}),editorData:n={},exitButton:a,toggleConnection:o,availableDependencies:r=[],dependencies:s,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{header:l().createElement(jt,{onClose:t},l().createElement(Un,{editorData:n,exitButton:a,toggleConnection:o,availableDependencies:r,onClose:t}),0===h()(n,"options.propertyName.length")?l().createElement(Ae.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:l().createElement(B.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},e?l().createElement(Gn,jn({editorData:n,dependencies:s},i)):null)}));var qn=n(643378);const Yn=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};var $n=n(360445),Hn=n(885461),Qn=n(374891),_n=n(293333);const Kn=(0,m.Z)((function(){let{map:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e.layers||0===(e.layers||[]).filter((e=>"background"!==e.group)).length}),(()=>({glyph:"1-layer",title:l().createElement(B.Z,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:l().createElement(B.Z,{msgId:"widgets.selectMap.TOC.noLayerDescription"})})))(_n.Z),Jn=(0,Hn.Z)(Qn.Z),Xn=(0,s.compose)(Hn.Z,(0,s.withProps)((e=>{let{selectedNode:t}=e;return{title:t&&t.title}})),(0,$n.Z)("title"))(ne.Z),ea=e=>{let{preview:t,map:n={},onChange:a=(()=>{}),selectedNodes:o=[],onNodeSelect:r=(()=>{}),editNode:s,closeNodeEditor:i=(()=>{}),isLocalizedLayerStylesEnabled:c}=e;return l().createElement("div",null,l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.configureMapOptions"})}),l().createElement("div",{key:"sample",style:{marginTop:10}},l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.preview"})}),l().createElement("div",{style:{width:"100%",height:"200px"}},t)),s?[l().createElement(Xn,{map:n,editNode:s}),l().createElement(Jn,{closeNodeEditor:i,editNode:s,map:n,onChange:a,isLocalizedLayerStylesEnabled:c})]:[l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"layers"})}),l().createElement(Kn,{selectedNodes:o,onSelect:r,onChange:a,map:n})])};var ta=n(500023),na=n(688132),aa=n(747119);const la=K(_),oa=(0,s.compose)((0,o.connect)((0,r.P1)(i.xI,(e=>({widgetSelectionActive:e})))),(0,R.Z)((e=>{let{widgetSelectionActive:t}=e;return t}),(()=>l().createElement("div",{style:{margin:"auto"}},l().createElement(B.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))),{alwaysWrap:!0})),ra=(0,o.connect)((0,r.P1)(i.E2,(function(){let{editNode:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{editNode:e}})),{setEditNode:e=>(0,d.t4)("editNode",e),closeNodeEditor:()=>(0,d.t4)("editNode",void 0)});var sa=n(984596),ia=n.n(sa),ca=n(399790);const da=(0,s.compose)((0,s.withProps)((e=>{var t;let{editorData:n={}}=e;return{layers:n.maps&&(null===(t=n.maps.find((e=>e.mapId===n.selectedMapId)))||void 0===t?void 0:t.layers)||[],selectedMapId:n.selectedMapId}})),(0,o.connect)((()=>({})),{setLayers:(e,t)=>(0,d.Rz)(`maps[${t}].layers`,e)}),(0,s.withHandlers)({addLayer:e=>{let{layers:t=[],setLayers:n=(()=>{}),catalog:a={},selectedMapId:l}=e;return e=>a.localizedLayerStyles?n([...t,(0,ca.Cx)({...e,localizedLayerStyles:a.localizedLayerStyles})],l):n([...t,(0,ca.Cx)(e)],l)},removeLayersById:e=>{let{layers:t=[],setLayers:n=(()=>{}),selectedMapId:a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(t.filter((t=>!pe()(ia()(e),(e=>e===t.id)))),a)}}})),pa=(0,s.withHandlers)({onRemoveSelected:e=>{let{selectedLayers:t=[],removeLayersById:n=(()=>{}),onNodeSelect:a=(()=>{})}=e;return()=>{n(t),t.forEach((e=>a(e,"layer",!1)))}}});var ma=n(701469),ga=n.n(ma),ua=n(66604),ha=n.n(ua),ya=n(159398),ba=n(351546),va=n(835516);const Ca=(0,s.compose)((0,o.connect)((()=>({})),{setMap:e=>(0,d.Rz)("maps",e)}),(0,s.withHandlers)({isEpsgSupported:e=>{let{editorData:t={},selectedNodes:n=[]}=e;return()=>{var e,a;const l=(null===(e=t.maps)||void 0===e||null===(a=e.find((e=>e.mapId===t.selectedMapId)))||void 0===a?void 0:a.layers)||[],o=n.map((e=>l.find((t=>t.id===e)))).filter((e=>e)).filter((e=>e.bbox)).map((e=>e.bbox)),r=o.length>0?o.reduce(((e,t)=>e.crs===t.crs?e:{crs:"differentCRS"})):{crs:"differentCRS"},s=!!be()(o)&&"differentCRS"!==r.crs&&r.crs;return s&&ya.default.defs(s)}},zoomTo:e=>{let{editorData:t={},setMap:n=(()=>{})}=e;return e=>{var a;const l=(null===(a=t.maps)||void 0===a?void 0:a.find((e=>e.mapId===t.selectedMapId)))||{},o=l.layers||[],r=e.map((e=>o.find((t=>t.id===e)))).filter((e=>e)).filter((e=>e.bbox)).map((e=>e.bbox)),s=r.length>1?r.reduce(((e,t)=>({bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs})),r[0]):r[0];let i=0,c=(e=>{if(ga()(e))return e.map((e=>"string"==typeof e||e instanceof String?Number(e):e));if(Ut()(e)){const t=ha()(e,(e=>"string"==typeof e||e instanceof String?Number(e):e));return[t.minx,t.miny,t.maxx,t.maxy]}return null})(s.bounds),d=ba.default.reprojectBbox(c,s.crs,l.bbox&&l.bbox.crs||"EPSG:4326");if(d){let e=ba.default.reproject(va.default.getCenterForExtent(c,s.crs),s.crs,"EPSG:4326");if("EPSG:4326"===s.crs&&c&&c[0]<=-180&&c[1]<=-90&&c[2]>=180&&c[3]>=90)i=1;else{let e=ba.default.reprojectBbox(c,s.crs,l.projection||"EPSG:4326");i=va.default.getZoomForExtent(e,l.size,0,21,null)}let t={minx:d[0],miny:d[1],maxx:d[2],maxy:d[3]},a={...l.bbox,bounds:t};n({...l,center:e,zoom:i,bbox:a,mapStateSource:"tool"})}}}}),(0,s.withProps)((e=>{let{isEpsgSupported:t=(()=>{})}=e;return{epsgSupported:t()}}))),fa=(0,s.compose)((0,s.withProps)((function(){let{availableDependencies:e=[],editorData:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{availableDependencies:e.filter((e=>!(t.id&&e.indexOf(t.id)>=0)))}})),(0,s.withProps)((e=>{let{editorData:t={}}=e;return{canConnect:!0,connected:!!t.mapSync}})),M({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),Ea=(0,s.compose)((0,o.connect)(U.e3,{setPage:d.YA,onChange:d.Rz,insertWidget:d.Qe},U.eF),da,ra,pa,Ca,(0,s.branch)((e=>{let{editNode:t}=e;return!!t}),(0,s.withProps)((e=>{let{selectedNodes:t=[],setEditNode:n=(()=>{})}=e;return{buttons:[{visible:1===t.length,tooltipId:"close",glyph:"1-close",onClick:()=>n(!1)}]}})),(0,s.withProps)((e=>{let{selectedNodes:t=[],epsgSupported:n=!1,onRemoveSelected:a=(()=>{}),setEditNode:l=(()=>{}),zoomTo:o=(()=>{})}=e;return{tocButtons:[{visible:t.length>0,glyph:"zoom-to",tooltipId:1===t.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!n,onClick:n?()=>o(t):()=>{}},{visible:1===t.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:()=>l(t[0])},{onClick:()=>a(),visible:t.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),fa,j(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),G((e=>{var t;let{step:n,editorData:a}=e;const l=null==a||null===(t=a.maps)||void 0===t?void 0:t.some((e=>e.name===va.EMPTY_MAP));return 0===n&&!l}))),wa=(0,s.compose)((0,s.branch)((function(){let{catalog:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,o.connect)((0,r.P1)(Bt.R7,(e=>({catalog:e}))))))(on);var xa=n(679426);const Sa=l().createElement(Ht.Z,{glyph:"geoserver",padding:20}),Pa=e=>{let{results:t,totalCount:n}=e;return{items:(""!==t&&ia()(t)||[]).map((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?l().createElement("img",{src:decodeURIComponent(e.thumbnail)}):Sa,map:e}})),total:n}},Za=function(e){let{text:t="*",options:n={}}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,xa.jh)({category:"MAP",query:t,options:{params:{start:10*a,limit:10},...n}}).map(Pa).catch((e=>b().Observable.of({error:e,items:[],total:0})))},Aa={querySelector:".ms2-border-layout-body .ms2-border-layout-content",pageSize:10},Ta=(0,s.compose)((0,Yt.Z)((e=>{let{loadPage:t,scrollSpyOptions:n,...a}=e;return{...a,scrollSpyOptions:{skip:1,...n},loadPage:(o=t,(e,t)=>e.disableEmptyMap||0!==t||!e||e.text?o(e,t):o(e,t).map((e=>{let{items:t,total:n,...a}=e;return{...a,total:n,items:[{id:va.EMPTY_MAP,title:l().createElement(B.Z,{msgId:"widgets.selectMap.emptyMap.title"}),description:l().createElement(B.Z,{msgId:"widgets.selectMap.emptyMap.description"}),preview:Sa,map:{id:"configs/new.json"}},...t]}}))),hasMore:e=>{let{total:t,items:n}=e;return n&&n.length>=1&&n[0].id===va.EMPTY_MAP?t>n.length-1:t>n.length}};var o})({loadPage:Za,scrollSpyOptions:Aa,hasMore:function(){let{total:e,items:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e>t.length}})),(0,s.withProps)((e=>{let{items:t}=e;return{skip:t&&t[0]&&t[0].id===va.EMPTY_MAP?1:0}}))),Ia=(0,$t.Z)("searchText","setSearchText",""),Oa=((0,Yt.Z)({loadPage:Za,scrollSpyOptions:Aa,hasMore:function(){let{total:e,items:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e>t.length}}),(0,s.mapPropsStream)((e=>e.merge(e.take(1).switchMap((t=>{let{loadFirst:n=(()=>{}),disableEmptyMap:a}=t;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",((e,t)=>e===t)).do((function(){let{searchText:e,options:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n({text:e,options:t,disableEmptyMap:a})})).ignoreElements()})))))),ka=(0,s.compose)(Ia,Ta,Oa);var La=n(52855);const za=(0,n(36549).Z)($.Z),Na=(0,s.compose)((0,p.Z)((e=>{let{loading:t,items:n=[]}=e;return 0===n.length&&t})),(0,m.Z)((e=>{let{loading:t,items:n=[]}=e;return 0===n.length&&!t}),{title:l().createElement(B.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(X.Z),Ma=e=>{let{title:t=""}=e;return l().createElement(l().Fragment,null,t,l().createElement(za,{style:{marginLeft:4},tooltipPosition:"right",tooltip:l().createElement(Pe.Z,{msgId:"widgets.mapSwitcher.subTitle"}),className:"maps-subtitle square-button-md no-border",key:"info-sign"},l().createElement(Y.Glyphicon,{glyph:"info-sign"})))};var Fa=n(470509),Da=n.n(Fa),Ra=n(234228),Ba=n(828878);(0,s.setObservableConfig)(Ba.Z);var Wa=n(423570),ja=n.n(Wa);const Ga=(0,s.compose)((0,s.withState)("selected","setSelected",null),(0,s.withState)("mapLoading","setMapLoading",!1),(0,s.withHandlers)({onMapChoice:function(){let{onMapSelected:e=(()=>{}),selectedSource:t={},includeMapId:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Da().all(ia()(a).map((e=>("string"==typeof e.id?Da().get(e.id).then((e=>e.data)):(0,xa.RX)(e.id,{baseURL:t.baseURL,includeAttributes:!1}).toPromise().then((e=>{let{data:t}=e;return t}))).then((t=>{let a=t.version||"string"==typeof e.id?Ra.ZP.normalizeConfig(t.map):Ra.ZP.convertFromLegacy(t);return{mapId:ja()(),name:"string"==typeof e.id?va.EMPTY_MAP:e.name,...a&&a.map||{},...n?{id:e.id}:{},groups:a&&a.groups||[],layers:(0,ca.IK)(a.layers.map((e=>("background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e))))}})).then((e=>(e.layers=e.sources?e.layers.map((t=>{const n=(0,ca.gv)(e.sources,t);return{...t,...n}})):e.layers,{...e,mapInfoControl:!0})))))).then((t=>e({maps:t})))}}}),(0,s.mapPropsStream)((e=>e.distinctUntilKeyChanged("selected").filter((function(){let{selected:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})).startWith({}).combineLatest(e,(function(){let{canProceed:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{canProceed:e,...t}}))))),Ua=ka((e=>{let{setSearchText:t=(()=>{}),selected:n,skip:a=0,onSelected:o,loading:r,searchText:s,items:i=[],loaderProps:d={},total:p,header:m,title:g=l().createElement(B.Z,{msgId:"maps.title"})}=e;return l().createElement(c.Z,{className:"map-catalog",header:m||l().createElement(La.Z,{title:l().createElement(Ma,{title:g}),searchText:s,onSearchTextChange:t}),footer:l().createElement("div",{className:"catalog-footer"},r&&i.length>0?l().createElement(Qt.Z,null):null,Se()(p)?null:l().createElement("span",{className:"res-info"},l().createElement(B.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:i.length-a,total:p}})))},l().createElement(Na,{loaderProps:d,items:i.map((e=>!qt()(n)&&e&&e.map&&n.some((t=>t.id===e.map.id))?{...e,selected:!0}:e)),loading:r,onItemClick:function(){let{map:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;return t.ctrlKey?o(qt()(n)?ia()(e):ia()(n).concat(e)):o(ia()(e))}}))})),Va=Ga((function(){let{onClose:e=(()=>{}),setSelected:t=(()=>{}),onMapChoice:n=(()=>{}),stepButtons:a=[],selected:o,disableEmptyMap:r,mapLoading:s,setMapLoading:i=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{className:"bg-body layer-selector",header:l().createElement(Wt,{onClose:e},l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[...a,{tooltipId:"widgets.builder.wizard."+((null==o?void 0:o.length)>1?"useTheseMap":"useThisMap"),onClick:()=>{n(o),i(!0)},visible:!0,disabled:!o||s,glyph:"arrow-right"}]}))},l().createElement(Ua,{title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.selectAMap"}),selected:o,onSelected:e=>{t(e),i(!1)},disableEmptyMap:r}))})),qa=(0,s.compose)((0,o.connect)((()=>({})),{onMapSelected:e=>{let{maps:t}=e;return(0,d.Rz)("maps",t)},onResetChange:d.Rz}),(0,s.withProps)((e=>{let{onResetChange:t=(()=>{})}=e;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:()=>{t("maps",void 0),t("selectedMapId",void 0),t("widgetType",void 0)}}]}})))(Va);function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ya.apply(this,arguments)}const $a=Ea((function(){let{step:e=0,buttons:t,tocButtons:n=[],stepButtons:a=[],dashBoardEditing:o=!1,editorData:r={},setPage:s=(()=>{}),onFinish:i=(()=>{}),toggleLayerSelector:c=(()=>{}),onChange:d=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const p=((null==r?void 0:r.maps)||[]).find((e=>e.mapId===(null==r?void 0:r.selectedMapId)))||{},m="map"===(null==r?void 0:r.widgetType)&&qt()(p);return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:t||[...0===e?n:[],{onClick:()=>s(Math.max(e-1,0)),visible:1===e,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"},...a,{onClick:()=>d(`maps[${null==r?void 0:r.selectedMapId}].mapInfoControl`,!(null!=p&&p.mapInfoControl)),visible:!m&&o&&"map"===(null==r?void 0:r.widgetType),glyph:"info-sign",bsStyle:null!=p&&p.mapInfoControl?"success":"primary",tooltipId:null!=p&&p.mapInfoControl?"widgets.builder.wizard.disableIdentifyTool":"widgets.builder.wizard.enableIdentifyTool"},{onClick:()=>c(!0),visible:!m&&0===e,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:()=>s(Math.min(e+1,2)),visible:!m&&0===e,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:()=>i(Math.min(e+1,1)),visible:1===e,glyph:"floppy-disk",tooltipId:Yn(e,r)}]})})),Ha=(0,s.compose)((0,o.connect)(U.e3,{onResetChange:d.Rz}),(0,s.branch)((function(){let{editorData:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e.maps}),(0,s.renderComponent)(qa)),(0,s.withState)("layerSelectorOpen","toggleLayerSelector",!1),fn,(0,s.branch)((function(){let{layerSelectorOpen:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(0,s.renderComponent)((0,s.compose)(da,(0,s.withHandlers)({onLayerChoice:e=>{let{toggleLayerSelector:t=(()=>{}),addLayer:n=(()=>{})}=e;return e=>{n(e),t(!1)}}}),L)((function(){let{onClose:e=(()=>{}),setSelected:t=(()=>{}),onLayerChoice:n=(()=>{}),toggleLayerSelector:a=(()=>{}),selected:o,canProceed:r,layer:s,catalog:i,onChangeSelectedService:d,defaultServices:p,defaultSelectedService:m,onChangeCatalogMode:g,dashboardServices:u,dashboardSelectedService:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{className:"bg-body layer-selector",header:l().createElement(jt,{onClose:e},l().createElement(Dt.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:()=>a(!1),tooltipId:"close",glyph:"1-close"},{onClick:()=>n(s),disabled:!o||!r,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),o&&!r?l().createElement(Ae.Z,{glyph:"exclamation-mark",bsStyle:"warning",title:l().createElement(E.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:l().createElement(E.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},l().createElement(wa,{onChangeCatalogMode:g,selectedService:""===h?h:void 0===h?m:h,onChangeSelectedService:e=>d(e,u||p),services:u||p,catalog:i,selected:o,onRecordSelected:e=>t(e)}))})))),(0,s.withProps)((e=>{let{onResetChange:t=(()=>{})}=e;return{exitButton:{glyph:"arrow-left",onClick:()=>{t("maps",void 0),t("selectedMapId",void 0)}}}}))),Qa=(0,o.connect)(U.e3,{onChange:d.Rz},U.eF)((function(){let{onChange:e=(()=>{}),onFinish:t=(()=>{}),setPage:n=(()=>{}),step:o=0,selectedNodes:r=[],onNodeSelect:s=(()=>{}),editorData:i={},editNode:c,setEditNode:d=(()=>{}),closeNodeEditor:p=(()=>{}),isLocalizedLayerStylesEnabled:m,env:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[u,h]=(0,a.useState)({}),[y,b]=(0,a.useState)(!1);return l().createElement(la,{step:o,setPage:n,onFinish:t,hideButtons:!0},l().createElement("div",null,y&&l().createElement(aa.Z,{glyph:"1-map",title:l().createElement(B.Z,{msgId:"widgets.selectMap.emptyMap.title"}),description:l().createElement(B.Z,{msgId:"widgets.selectMap.emptyMap.noNameDescription"})}),l().createElement(na.Z,{editorData:i,onChange:e,value:i.selectedMapId,setSelectedMap:h,selectedMap:u,setEmptyMap:b,emptyMap:y,withContainer:!0}),!y&&l().createElement(ea,{editNode:c,setEditNode:d,closeNodeEditor:p,onNodeSelect:s,selectedNodes:r,onChange:e,isLocalizedLayerStylesEnabled:m,preview:l().createElement(ta.Z,{key:i.selectedMapId,onChange:e,layers:u&&u.layers,map:u,env:g,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:u})),l().createElement(Ct,{key:"widget-options",data:i,onChange:e}))})),_a=(0,s.compose)(Ha,(0,s.withProps)((e=>{let{editorData:t={}}=e;return{map:pe()(t.maps,(e=>{let{mapId:n}=e;return n===t.selectedMapId}))||{}}})),oa,qn.Z,ra)((function(){let{enabled:e,onClose:t=(()=>{}),toggleLayerSelector:n=(()=>{}),editorData:a={},editNode:o,setEditNode:r,closeNodeEditor:s,isLocalizedLayerStylesEnabled:i,env:d,selectedGroups:p=[],exitButton:m,selectedLayers:g=[],selectedNodes:u,onNodeSelect:h=(()=>{}),availableDependencies:y=[],toggleConnection:b=(()=>{}),...v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{className:"map-selector",header:l().createElement(jt,{onClose:t},l().createElement($a,{exitButton:m,editorData:a,availableDependencies:y,toggleConnection:b,selectedNodes:u,selectedLayers:g,selectedGroups:p,onNodeSelect:h,toggleLayerSelector:n}))},e?l().createElement(Qa,Ya({setEditNode:r,editNode:o,closeNodeEditor:s,onNodeSelect:h,isLocalizedLayerStylesEnabled:i,env:d,selectedNodes:u},v)):null)})),Ka=(0,s.compose)((0,s.setDisplayName)("CounterLayerSelector"),z,(0,s.defaultProps)({layerValidationStream:e=>e.switchMap((e=>(e=>y.Observable.forkJoin((0,v.v$)({layer:e}),f(e)))(e)))}),P,L);var Ja=n(580328),Xa=n(677902);function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},el.apply(this,arguments)}const tl=(0,p.Z)((e=>{let{loading:t,data:n}=e;return t||!n}),{width:500,height:200}),nl=(0,s.compose)((0,s.lifecycle)({componentDidMount(){this.props.onChange&&this.props.onChange("options.groupByAttributes",void 0)}}),he,(0,J.Z)((e=>{let{options:t=[]}=e;return 0===t.length})))(vt),al=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hasAggregateProcess:t}=arguments.length>1?arguments[1]:void 0;return e.aggregateFunction&&e.aggregationAttribute&&t},ll=(0,s.compose)((0,s.lifecycle)({UNSAFE_componentWillReceiveProps:function(){let{valid:e,data:t=[],options:n={},setValid:a=(()=>{}),error:l,hasAggregateProcess:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=!Se()(t[0])&&!l;!!e!=!!r&&al(n,{hasAggregateProcess:o})&&a(r)}})),ol=(0,s.compose)(Et.Z,wt.Z,xt.Z,Ja.Z,ll,tl,Pt.Z,St.Z),rl={style:{width:450,height:100}},sl=K(_),il=ol(Xa.Z),cl=e=>{let{data:t={},layer:n,dependencies:a={},valid:o,setValid:r=(()=>{}),hasAggregateProcess:s}=e;return al(t.options,{hasAggregateProcess:s})?l().createElement(il,el({hasAggregateProcess:s},rl,{valid:o,dependenciesMap:t.dependenciesMap,dependencies:a,setValid:r,type:t.type,legend:t.legend,layer:t.layer||n,filter:t.filter,geomProp:t.geomProp,mapSync:t.mapSync,options:t.options})):l().createElement(Xa.Z,el({},rl,{data:[{data:42}],options:t.options,series:[{dataKey:"data"}]}))},dl=(0,s.compose)((0,s.lifecycle)({UNSAFE_componentWillReceiveProps:function(){let{data:e={},valid:t,setValid:n=(()=>{}),hasAggregateProcess:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&!al(e.options,{hasAggregateProcess:a})&&n(!1)}}))((e=>{let{onChange:t=(()=>{}),onFinish:n=(()=>{}),setPage:a=(()=>{}),setValid:o=(()=>{}),valid:r,formOptions:s,data:i={},layer:c={},step:d=0,types:p,featureTypeProperties:m,dependencies:g,hasAggregateProcess:u}=e;return l().createElement(sl,{step:d,setPage:a,onFinish:n,isStepValid:e=>1!==e||al(i.options,{hasAggregateProcess:u}),hideButtons:!0},l().createElement(nl,{hasAggregateProcess:u,dependencies:g,key:"chart-options",formOptions:s,featureTypeProperties:m,types:p,data:i,onChange:t,layer:i.layer||c,sampleChart:l().createElement(cl,{hasAggregateProcess:u,data:i,valid:r,layer:i.layer||c,dependencies:g,setValid:e=>o(e&&al(i.options,{hasAggregateProcess:u}))})}),l().createElement(Ct,{key:"widget-options",data:i,onChange:t,layer:i.layer||c,sampleChart:l().createElement(cl,{hasAggregateProcess:u,data:i,valid:r,layer:i.layer||c,dependencies:g,setValid:e=>o(e&&al(i.options,{hasAggregateProcess:u}))})}))})),pl=e=>{switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},ml=e=>0===e?"widgets.builder.wizard.configureWidgetOptions":"next",gl=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ul.apply(this,arguments)}const hl=(0,o.connect)(U.e3,{setPage:d.YA,setValid:e=>(0,d.t4)("valid",e),onEditorChange:d.Rz,insertWidget:d.Qe},U.eF)((0,s.compose)(S({needsWPS:!0}),(0,s.renameProps)({editorData:"data",onEditorChange:"onChange"}))(dl)),yl=(0,s.compose)((0,o.connect)(U.e3,{openFilterEditor:d.fy,setPage:d.YA,onChange:d.Rz,insertWidget:d.Qe},U.eF),D,j(),G((e=>{let{step:t}=e;return 0===t})))((function(){let{openFilterEditor:e=(()=>{}),step:t=0,stepButtons:n=[],editorData:a={},valid:o,setPage:r=(()=>{}),onFinish:s=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:()=>r(Math.max(0,t-1)),visible:t>0,glyph:"arrow-left",tooltipId:pl(t)},...n,{visible:0===t,onClick:e,disabled:!o,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:()=>r(Math.min(t+1,2)),visible:0===t,disabled:0===t&&!o,glyph:"arrow-right",tooltipId:ml(t)},{onClick:()=>s(Math.min(t+1,1)),visible:1===t,glyph:"floppy-disk",tooltipId:gl(t,a)}]})})),bl=(0,s.compose)((0,o.connect)(U.e3),W,fn,(0,s.branch)((function(){let{layer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,s.renderComponent)(Ka(sn))))((function(){let{enabled:e,onClose:t=(()=>{}),exitButton:n,editorData:a,toggleConnection:o,availableDependencies:r=[],dependencies:s,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{header:l().createElement(jt,{onClose:t},l().createElement(yl,{exitButton:n,editorData:a,toggleConnection:o,availableDependencies:r,onClose:t}))},e?l().createElement(hl,ul({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:s},i)):null)})),vl=e=>{switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},Cl=(e,t)=>t?"widgets.builder.wizard.configureWidgetOptions":void 0,fl=e=>{let{mapSync:t}=e;return t},El=function(e){let{id:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};var wl=n(526214),xl=n(819369),Sl=n(657461);const Pl=K(_),Zl=(0,s.compose)(xl.Z,(0,m.Z)((e=>{let{valid:t}=e;return!t}),{title:l().createElement(B.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:l().createElement(B.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),(0,wl.Z)(!1))(Sl.Z);var Al=n(707366);const Tl=(0,s.compose)((0,s.withProps)((function(){let{availableDependencies:e=[],editorData:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{availableDependencies:e.filter((e=>!(t.id&&e.indexOf(t.id)>=0)))}})),(0,s.withProps)((e=>{let{editorData:t={},availableDependencies:n=[]}=e;return{canConnect:n.length>0,connected:!!t.mapSync}})));function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Il.apply(this,arguments)}const Ol=(0,s.withProps)((e=>{let{availableDependencies:t=[],editorData:n}=e;return{valid:t.length>0&&n.mapSync}})),kl=(0,r.P1)(Al.Pz,(e=>({currentLocale:e}))),Ll=(0,s.compose)((0,o.connect)(U.e3,{setPage:d.YA,onEditorChange:d.Rz,insertWidget:d.Qe,updateWidgetProperty:d.Ij},U.eF),(0,o.connect)(kl),Ol,(0,s.renameProps)({editorData:"data",onEditorChange:"onChange",updateWidgetProperty:"updateProperty"}))((function(){let{onChange:e=(()=>{}),onFinish:t=(()=>{}),setPage:n=(()=>{}),step:a=0,dependencies:o,valid:r,data:s={},currentLocale:i,language:c,updateProperty:d=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Pl,{step:a,setPage:n,onFinish:t,hideButtons:!0},l().createElement(Y.Row,null,l().createElement(ne.Z,{title:l().createElement(B.Z,{msgId:"widgets.builder.wizard.preview"})}),l().createElement(Y.Col,{xs:12},l().createElement("div",{style:{marginBottom:"30px"}},l().createElement(Zl,{valid:r,dependencies:o,dependenciesMap:s.dependenciesMap,key:"widget-options",currentLocale:i,language:c,updateProperty:d,disableVisibility:!0,disableOpacitySlider:!0,legendExpanded:!0})))),l().createElement(Ct,{key:"widget-options",onChange:e}))})),zl=(0,s.compose)((0,o.connect)(U.e3,{openFilterEditor:d.fy,setPage:d.YA,onChange:d.Rz,insertWidget:d.Qe},U.eF),Tl,Ol,(0,o.connect)((()=>({})),{onLayerChoice:e=>(0,d.Rz)("layer",e),onResetChange:d.Rz}),(0,s.withProps)((e=>{let{onResetChange:t=(()=>{})}=e;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:()=>t("widgetType",void 0)}}})),j((e=>{let{step:t}=e;return 0===t})),G((e=>{let{step:t}=e;return 0===t})))((function(){let{step:e=0,editorData:t={},valid:n,stepButtons:a=[],onFinish:o=(()=>{}),setPage:r=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(Dt.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:()=>r(Math.max(0,e-1)),visible:e>0,glyph:"arrow-left",tooltipId:vl(e)},...a,{onClick:()=>r(Math.min(e+1,1)),visible:0===e,disabled:0===e&&!fl(t)||!n,glyph:"arrow-right",tooltipId:Cl(0,n)},{onClick:()=>o(Math.min(e+1,1)),visible:1===e,glyph:"floppy-disk",tooltipId:El(e,t)}]})})),Nl=(0,s.compose)((0,o.connect)(U.e3),W,Tl,M({layers:"layers",zoom:"zoom",viewport:"viewport"}),(0,s.mapPropsStream)((e=>e.merge(e.filter((e=>{let{editorData:t={}}=e;return!t.mapSync})).take(1).distinctUntilChanged().do((e=>{let{toggleConnection:t=(()=>{}),availableDependencies:n,widgets:a}=e;return t(n,a)})).ignoreElements())))),Ml=Nl((function(){let{enabled:e,onClose:t=(()=>{}),editorData:n={},exitButton:a,toggleConnection:o,availableDependencies:r=[],dependencies:s,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{header:l().createElement(jt,{onClose:t},l().createElement(zl,{editorData:n,exitButton:a,toggleConnection:o,availableDependencies:r,onClose:t}),0===h()(n,"options.propertyName.length")?l().createElement(Ae.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:l().createElement(B.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},e?l().createElement(Ll,Il({availableDependencies:r,editorData:n,dependencies:s},i)):null)})),Fl=[{title:l().createElement(B.Z,{msgId:"widgets.types.chart.title"}),type:"chart",caption:l().createElement(B.Z,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:l().createElement(B.Z,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:l().createElement(B.Z,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:l().createElement(B.Z,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:l().createElement(B.Z,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:l().createElement(B.Z,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:l().createElement(B.Z,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:l().createElement(B.Z,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:l().createElement(B.Z,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:l().createElement(B.Z,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:l().createElement(B.Z,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}],Dl=(0,o.connect)((()=>({})),{onSelect:e=>(0,d.Rz)("widgetType",e)})((e=>{let{widgetTypes:t=Fl,typeFilter:n=(()=>!0),onSelect:a=(()=>{})}=e;return l().createElement(X.Z,{key:"content",onItemClick:e=>{a(e.type)},items:t&&t.filter(n).map((e=>({...e,preview:l().createElement(Ht.Z,{glyph:e.glyph,padding:20})})))})}));function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rl.apply(this,arguments)}const Bl=(0,r.P1)(i.YI,(e=>({widgetType:e&&e.widgetType}))),Wl={chart:Sn,text:function(){let{enabled:e,onClose:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{header:l().createElement(jt,{onClose:t},l().createElement(kn,null))},e?l().createElement(Ln,null):null)},table:Vn,map:_a,counter:bl,legend:Ml},jl=(0,s.compose)((0,o.connect)(Bl),(0,s.withProps)((e=>{let{typeFilter:t=(()=>!0),availableDependencies:n=[]}=e;return{typeFilter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e)&&!("legend"===e.type&&0===n.length)}}})),(0,s.branch)((function(){let{widgetType:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e}),(0,s.renderComponent)((function(){let{enabled:e,onClose:t=(()=>{}),typeFilter:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l().createElement(c.Z,{className:"bg-body",header:l().createElement(jt,{onClose:t},l().createElement(B.Z,{msgId:"widgets.selectWidgetType"}))},e?l().createElement(Dl,{typeFilter:n}):null)})),(()=>function(){let{widgetType:e,onClose:t=(()=>{}),...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=Wl[e];return l().createElement(a,Rl({},n,{onClose:t,widgetType:e}))})))()},366907:(e,t,n)=>{"use strict";n.d(t,{eF:()=>d,e3:()=>p,Nb:()=>m,Tw:()=>g});var a=n(414293),l=n.n(a),o=n(22222),r=n(641259),s=n(707366),i=n(665529),c=n(952273);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{...n,...e,...t,step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:()=>t.insertWidget&&t.insertWidget({layer:e.layer,url:e.layer&&e.layer.url,...e.editorData||{}},n.target)}},p=(0,o.P1)(c.GW,c.YI,c.E2,c.zm,r.i$,((e,t,n,a,l)=>({layer:t&&t.layer||e,editorData:t,settings:n,widgets:a,dashBoardEditing:l}))),m=(0,o.P1)(c.YI,r.P0,c.h9,c.zA,((e,t,n,a)=>{let{layer:l}=e;return{layer:l,showConnections:t,dependencies:n,...a}})),g=(0,o.P1)(i.Yf,s.KV,i.fY,((e,t,n)=>({isLocalizedLayerStylesEnabled:!l()(e),language:t,env:n})));c.GW,c.zA}}]);