(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[6854],{116854:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>fe});var r=i(237001),a=i(624089),n=i(470326),o=i(234228),l=i(331655);function s(e){this.proxy=e}function u(){}s.prototype.getURL=function(e){let{url:t,queryString:i}=function(e){let t=e,i="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),i=e.substring(e.indexOf("?")+1)),{url:t,queryString:i}}(e);return 0===t.indexOf("//")&&(t=location.protocol+t),(0,l.b)()+encodeURIComponent(t+i)},u.prototype.getURL=e=>e,r.default.registerType("tileprovider",(e=>{let t,[i,r]=n.Z.getLayerConfig(e.provider,e),h=o.ZP.getProxyUrl({});h&&(t=r.noCors||(0,l.$)(i));const d=r.credits,c=d?new a.Credit(d.text,d.imageUrl,d.link):r.attribution;return new a.UrlTemplateImageryProvider({url:(f=i,g=r,f.replace(/(?!(\{?[zyxs]?\}))\{*([\w_]+)*\}/g,(function(){let e=arguments[0],t=arguments[1]?arguments[1]:arguments[2],i=g[t];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(g)),i}))),enablePickFeatures:!1,subdomains:r.subdomains,maximumLevel:r.maxZoom,minimumLevel:r.minZoom,credit:c,proxy:t?new s(h):new u});var f,g}));var h=i(399790);const d=function(e){var t={};t.CRS=[{name:"CRS:84",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.GeographicTilingScheme,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:e.GeographicTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:e.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:e.WebMercatorTilingScheme,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],t.FormatImage=[],t.FormatArray=[{format:"image/bil",postProcessArray:function(e,t,i,r,a,n){var o,l=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),u=new DataView(s);if(s.byteLength===e.byteLength){for(var h,d=0;d<s.byteLength;d+=2)(h=l.getInt16(d,n)-a)>r&&h<i?u.setInt16(d,h,!0):u.setInt16(d,0,!0);o=new Int16Array(s)}return o}}],t.WMSParser={},t.TMSParser={},t.WMTSParser={},t.parser=function(i){var r;switch((i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).service){case"TMS":r=t.TMSParser.generate(i);break;case"WMTS":r=t.WMTSParser.generate(i);break;default:r=t.WMSParser.generate(i)}return r},t.WMSParser.generate=function(i){var r;if(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT),t.WMSParser.isDescriptionHasMetaData(i))r=t.WMSParser.getMetaDataDescription(i);else if(e.defined(i.url)){var a=i.url,n=a.lastIndexOf("?");n>-1&&(a=a.substring(0,n));var o=a+"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true",l=(0,h.Fh)({url:o,name:i.layerName});e.defined(i.proxy)&&(l=i.proxy.getURL(l));var s=l!==o;r=e.when(e.Resource.fetchXML(l),(function(e){return t.WMSParser.getMetaDatafromXML(e,{...i,urlModified:s})}))}else{if(!e.defined(i.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMSParser.getMetaDatafromXML(i.xml,i)}return r},t.WMSParser.isDescriptionHasMetaData=function(t){return e.defined(t.url)&&e.defined(t.layerName)&&e.defined(t.version)&&e.defined(t.format)&&e.defined(t.crs)},t.WMSParser.getMetaDataDescription=function(i){if(!e.defined(i.layerName))throw new e.DeveloperError("description.layerName is required.");var r,a={},n=i.layerName;e.defaultValue(i.maxLevel,11),a.heightMapWidth=e.defaultValue(i.heightMapWidth,65),a.heightMapHeight=e.defaultValue(i.heightMapHeight,a.heightMapWidth);var o=void 0;a.littleEndian=i.littleEndian,a.formatImage=i.formatImage,a.formatArray=i.formatArray,a.tilingScheme=void 0;var l=void 0,s=void 0;a.ready=!1,a.levelZeroMaximumGeometricError=void 0,a.waterMask=e.defaultValue(i.waterMask,!1),"boolean"!=typeof a.waterMask&&(a.waterMask=!1),a.offset=e.defaultValue(i.offset,0),a.highest=e.defaultValue(i.highest,12e3),a.lowest=e.defaultValue(i.lowest,-500),i.styleName,a.hasStyledImage=e.defaultValue(i.hasStyledImage,"string"==typeof i.styleName),null!==(r=i.version)&&(s=/^1\.[3-9]\./.test(r));var u=i.url,h=u.indexOf("?");h>-1&&(u=u.substring(0,h));var d=i.format;if(!e.defined(a.formatImage)){var c=t.FormatArray.filter((function(e){return e.format===d}));c.length>0&&(a.formatArray=c[0])}e.defined(a.formatArray)&&"string"==typeof a.formatArray.format&&"function"==typeof a.formatArray.postProcessArray?a.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}:a.formatArray=void 0;var f=i.fixedHeight,g=i.fixedWidth;if(e.defined(f)&&e.defined(g)&&(f=parseInt(f),a.heightMapHeight=f>0&&f<a.heightMapHeight?f:a.heightMapHeight,g=parseInt(g),a.heightMapWidth=g>0&&g<a.heightMapWidth?g:a.heightMapWidth),e.defined(i.crs)&&e.defined(r)){for(var m=!1,p=0;p<t.CRS.length&&!m;p++){var y=t.CRS[p],v=y.name;v===i.crs&&(o=v,l=y.firstAxeIsLatitude,a.tilingScheme=new y.tilingScheme({ellipsoid:y.ellipsoid}),a.getTileDataAvailable=function(e,t,i){return!0},m=!0)}a.ready=m&&e.defined(a.formatArray)&&e.defined(r)}if(a.ready){var S=u+"?SERVICE=WMS&REQUEST=GetMap&layers="+n+"&version="+r+"&bbox=";if(S+=s&&l?"{south},{west},{north},{east}":"{west},{south},{east},{north}",S+="&crs="+o+"&srs="+o,a.formatArray){var M=S+"&format="+a.formatArray.format+"&width="+a.heightMapWidth+"&height="+a.heightMapHeight;a.URLtemplateArray=function(){return M}}}return a.proxy=i.proxy,a},t.WMSParser.getMetaDatafromXML=function(i,r){if(!(i instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");if(!e.defined(r.layerName))throw new e.DeveloperError("description.layerName is required.");var a={},n=r.urlModified,o=r.layerName,l=null;if(n&&e.defined(o)){var s=o.split(":")||[];l=s[1]||s[0]}e.defaultValue(r.maxLevel,11);var u=void 0;a.heightMapWidth=e.defaultValue(r.heightMapWidth,65),a.heightMapHeight=e.defaultValue(r.heightMapHeight,a.heightMapWidth);var h={width:65,height:65},d=void 0;a.littleEndian=r.littleEndian,a.formatImage=r.formatImage,a.formatArray=r.formatArray,a.tilingScheme=void 0;var c=void 0,f=void 0;a.ready=!1,a.levelZeroMaximumGeometricError=void 0,a.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof a.waterMask&&(a.waterMask=!1),a.offset=e.defaultValue(r.offset,0),a.highest=e.defaultValue(r.highest,12e3),a.lowest=e.defaultValue(r.lowest,-500);var g=r.styleName;a.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName);var m=i.querySelector("[version]");null!==m&&(u=m.getAttribute("version"),f=/^1\.[3-9]\./.test(u));var p=i.querySelector("Request>GetMap OnlineResource").getAttribute("xlink:href");e.defined(n)&&(p=r.url);var y=p.indexOf("?");y>-1&&(p=p.substring(0,y));var v=i.querySelectorAll("Request>GetMap>Format");if(!e.defined(a.formatImage))for(var S=0;S<v.length&&!e.defined(a.formatArray);S++)(M=t.FormatArray.filter((function(e){return e.format===v[S].textContent}))).length>0&&(a.formatArray=M[0]);for(e.defined(a.formatArray)&&"string"==typeof a.formatArray.format&&"function"==typeof a.formatArray.postProcessArray?a.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}:a.formatArray=void 0,S=0;S<v.length&&!e.defined(a.formatImage);S++){var M;(M=t.FormatImage.filter((function(e){return e.format===v[S].textContent}))).length>0&&(a.formatImage=M[0])}e.defined(a.formatImage)&&"string"==typeof a.formatImage.format?a.formatImage.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:2,stride:4,elementMultiplier:256,isBigEndian:!0}:a.formatImage=void 0;var w=o;e.defined(l)&&(w=l);for(var x,T=i.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']"),b=0;b<T.length&&!e.defined(x);b++)if(T[b].querySelector("Name").textContent===w){var C=(x=T[b]).getAttribute("fixedHeight"),A=x.getAttribute("fixedWidth");e.defined(C)&&(C=parseInt(C),a.heightMapHeight=C>0&&C<a.heightMapHeight?C:a.heightMapHeight,h.height=C>0?C:h.height),e.defined(A)&&(A=parseInt(A),a.heightMapWidth=A>0&&A<a.heightMapWidth?A:a.heightMapWidth,h.width=A>0?A:h.width)}if(e.defined(x)&&e.defined(u)){for(var I=!1,_=0;_<t.CRS.length&&!I;_++){var P,R,E,L,D=t.CRS[_],W=D.name,q=x.querySelector("BoundingBox[SRS='"+W+"'],BoundingBox[CRS='"+W+"']");if(null!==q)d=W,c=D.firstAxeIsLatitude,a.tilingScheme=new D.tilingScheme({ellipsoid:D.ellipsoid}),c&&f?(P=parseFloat(q.getAttribute("miny")),R=parseFloat(q.getAttribute("maxy")),E=parseFloat(q.getAttribute("minx")),L=parseFloat(q.getAttribute("maxx"))):(P=parseFloat(q.getAttribute("minx")),R=parseFloat(q.getAttribute("maxx")),E=parseFloat(q.getAttribute("miny")),L=parseFloat(q.getAttribute("maxy"))),new e.Rectangle(P,E,R,L),a.getTileDataAvailable=function(e,t,i){return!0},I=!0}if(e.defined(g)){for(var k=x.querySelectorAll("Style>Name"),V=!1,H=0;H<k.length&&!V;H++)g===k[H].textContent&&(V=!0);V||(g=void 0)}for(var O=i.querySelectorAll("VendorSpecificCapabilities>TileSet"),U=!1,N=0;N<O.length&&!U;N++){var G=null!==O[N].querySelector("BoundingBox[SRS='"+d+"'],BoundingBox[CRS='"+d+"']");O[N].querySelector("Layers").textContent===w&&G&&(h.width=parseInt(O[N].querySelector("Width").textContent),h.height=parseInt(O[N].querySelector("Height").textContent),U=!0)}a.ready=I&&(e.defined(a.formatImage)||e.defined(a.formatArray))&&e.defined(u)}if(a.ready){var F=p+"?SERVICE=WMS&REQUEST=GetMap&layers="+o+"&version="+u+"&bbox=";if(F+=f&&c?"{south},{west},{north},{east}":"{west},{south},{east},{north}",F+="&crs="+d+"&srs="+d,a.formatImage){var B=F+"&format="+a.formatImage.format+"&width="+h.width+"&height="+h.height;e.defined(g)&&(B+="&styles="+g+"&style="+g),a.URLtemplateImage=function(){return B},a.imageSize=h}if(a.formatArray){var z=F+"&format="+a.formatArray.format+"&width="+a.heightMapWidth+"&height="+a.heightMapHeight;a.URLtemplateArray=function(){return z}}}return a.proxy=r.proxy,a},t.TMSParser.generate=function(i){var r;if(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT),e.defined(i.url))r=e.loadXML(i.url).then((function(e){return t.TMSParser.parseXML(e,i)}));else{if(!e.defined(i.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.TMSParser.parseXML(i.xml,i)}return r},t.TMSParser.parseXML=function(i,r){if(!(i instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var a;if(null!=i.querySelector("TileMapService")){if(!e.defined(r.layerName))throw new e.DeveloperError("layerName is required.");var n=[].slice.apply(i.querySelectorAll("TileMap[title='"+r.layerName+"']")).map((function(i){var a=i.getAttribute("href");return e.when(e.loadXML(a),(function(e){return t.TMSParser.getMetaDatafromXML(e,r)}))}));a=e.when.all(n).then((function(t){for(var i,r=0;r<t.length&&!e.defined(i);r++)e.defined(t[r])&&(i=t[r]);return i})).then((function(e){return e}))}else a=t.TMSParser.getMetaDatafromXML(i,r);return a},t.TMSParser.getMetaDatafromXML=function(i,r){var a={ready:!1};a.heightMapWidth=e.defaultValue(r.heightMapWidth,65),a.heightMapHeight=e.defaultValue(r.heightMapHeight,a.heightMapWidth);var n=e.defaultValue(r.maxLevel,11);r.proxy,a.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),a.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof a.waterMask&&(a.waterMask=!1),a.offset=e.defaultValue(r.offset,0),a.highest=e.defaultValue(r.highest,12e3),a.lowest=e.defaultValue(r.lowest,-500);var o=i.querySelector("SRS").textContent,l=t.CRS.filter((function(e){return e.name===o}));l.length>0&&(a.tilingScheme=new l[0].tilingScheme({ellipsoid:l[0].ellipsoid}));var s=i.querySelector("TileFormat"),u=t.FormatImage.filter((function(e){return e.extension==s.getAttribute("extension")}));u.length>0&&(a.formatImage=u[0],a.imageSize={},a.imageSize.width=parseInt(s.getAttribute("width")),a.imageSize.height=parseInt(s.getAttribute("height")));var h=[].slice.call(i.querySelectorAll("TileSets>TileSet")),d=[];if(e.defined(a.formatImage)&&((d=h.map((function(e){return{url:e.getAttribute("href")+"/{x}/{tmsY}."+a.formatImage.extension,level:parseInt(e.getAttribute("order"))}}))).sort((function(e,t){return e.level-t.level})),d.length>0&&(a.tileSets=d)),e.defined(a.tileSets)&&e.defined(a.formatImage)&&e.defined(a.tilingScheme)){a.URLtemplateImage=function(e,t,i){var r="";return i<d.length&&(r=d[i].url),r};var c=i.querySelector("BoundingBox"),f=parseFloat(c.getAttribute("miny")),g=parseFloat(c.getAttribute("maxy")),m=parseFloat(c.getAttribute("minx")),p=parseFloat(c.getAttribute("maxx")),y=new e.Rectangle(m,f,p,g);a.getTileDataAvailable=function(t,i,r){var o,l,s,u,h,c,f=a.tilingScheme.tileXYToNativeRectangle(t,i,r),g=(o=y,l=f,s=Math.max(o.west,l.west),u=Math.min(o.east,l.east),h=Math.max(o.south,l.south),c=Math.min(o.north,l.north),u<=s||h>=c?void 0:new e.Rectangle(s,h,u,c));return e.defined(g)&&r<n&&r<d.length},a.ready=!0}else a=void 0;return a.proxy=r.proxy,a},t.WMTSParser.generate=function(i){var r;if(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT),e.defined(i.url)){var a=i.url,n=a.lastIndexOf("?");n>-1&&(a=a.substring(0,n));var o=a+"?REQUEST=GetCapabilities";e.defined(i.proxy)&&(o=i.proxy.getURL(o)),r=e.loadXML(o).then((function(e){return t.WMTSParser.getMetaDatafromXML(e,i)}))}else{if(!e.defined(i.xml))throw new e.DeveloperError("either description.url or description.xml are required.");r=t.WMTSParser.getMetaDatafromXML(i.xml,i)}return r},t.WMTSParser.getMetaDatafromXML=function(i,r){if(!(i instanceof XMLDocument))throw new e.DeveloperError("xml must be a XMLDocument");var a={},n=r.layerName;a.ready=!1,a.heightMapWidth=e.defaultValue(r.heightMapWidth,65),a.heightMapHeight=e.defaultValue(r.heightMapHeight,a.heightMapWidth);var o,l=e.defaultValue(r.maxLevel,12),s=(r.proxy,r.styleName);a.hasStyledImage=e.defaultValue(r.hasStyledImage,"string"==typeof r.styleName),a.waterMask=e.defaultValue(r.waterMask,!1),"boolean"!=typeof a.waterMask&&(a.waterMask=!1),a.offset=e.defaultValue(r.offset,0),a.highest=e.defaultValue(r.highest,12e3),a.lowest=e.defaultValue(r.lowest,-500);for(var u,h,d,c=[],f=[].slice.call(i.querySelectorAll('Operation[name="GetTile"] HTTP Get')).map((function(e){var t,i=e.querySelector("Value").textContent;return"KVP"===i&&(t={node:e,type:"KVP"}),"RESTful"===i&&(t={node:e,type:"RESTful"}),t})).filter((function(t){return e.defined(t)})),g=0;g<f.length;g++){var m=f[g];"RESTful"!==m.type||e.defined(h)||(h=m.node.getAttribute("xlink:href")),"KVP"!==m.type||e.defined(u)||(u=m.node.getAttribute("xlink:href"))}var p,y=i.querySelectorAll("Contents>Layer>Identifier");for(g=0;g<y.length&&!e.defined(p);g++)n===y[g].textContent&&(p=y[g].parentNode);if(e.defined(p)){var v,S,M=p.querySelectorAll("Style");for(g=0;g<M.length;g++){var w=M[g].querySelector("Identifier").textContent;null!=M[g].getAttribute("isDefault")&&(v=w),w===s&&(S=w)}e.defined(s)&&s==S||(s=e.defaultValue(v,""));for(var x=[].slice.call(p.querySelectorAll("Format")),T=0;T<t.FormatImage.length&&!e.defined(d);T++)x.filter((function(e){return e.textContent===t.FormatImage[T].format})).length>0&&(d=t.FormatImage[T]);c=p.querySelectorAll("TileMatrixSetLink")}for(var b=[].slice.call(i.querySelectorAll("TileMatrixSet>Identifier")),C=0;C<c.length&&!a.ready;C++){var A,I,_=c[C],P=_.querySelector("TileMatrixSet").textContent;for(g=0;g<b.length&&!e.defined(A);g++)b[g].textContent===P&&(A=b[g].parentNode);for(var R=A.querySelector("SupportedCRS").textContent,E=0;E<t.CRS.length&&!e.defined(I);E++)t.CRS[E].SupportedCRS===R&&(I=t.CRS[E]);if(e.defined(I)){var L,D=[].slice.call(A.querySelectorAll("TileMatrix"));(L=D.map((function(e){var t=e.querySelector("Identifier").textContent,i=parseInt(e.querySelector("MatrixWidth").textContent),r=parseInt(e.querySelector("MatrixHeight").textContent),a=parseInt(e.querySelector("TileWidth").textContent),n=parseInt(e.querySelector("TileHeight").textContent);return{id:t,maxWidth:i,maxHeight:r,scaleDenominator:parseFloat(e.querySelector("ScaleDenominator").textContent),complete:!1,tileWidth:a,tileHeight:n}}))).sort((function(e,t){return t.scaleDenominator-e.scaleDenominator})),listTileMatrixLimits=_.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits");for(var W=0;W<L.length;W++)for(var q=L[W],k=0;k<listTileMatrixLimits.length;k++){var V=listTileMatrixLimits[k];q.id===V.querySelector("TileMatrix").textContent&&(q.minTileRow=parseInt(V.querySelector("MinTileRow").textContent),q.maxTileRow=parseInt(V.querySelector("MaxTileRow").textContent),q.minTileCol=parseInt(V.querySelector("MinTileCol").textContent),q.maxTileCol=parseInt(V.querySelector("MaxTileCol").textContent),q.complete=!0,L[W]=q)}if(L.length>0){a.tilingScheme=new I.tilingScheme({ellipsoid:I.ellipsoid,numberOfLevelZeroTilesX:L[0].maxWidth,numberOfLevelZeroTilesY:L[0].maxHeight});var H=p.querySelector("ResourceURL[format='"+d.format+"']");if(null!=H?o=H.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{Style}",s).replace("{TileMatrixSet}",P).replace("{layer}",n).replace("{infoFormatExtension}",d.extension):e.defined(u)&&(o=u+"service=WMTS&request=GetTile&version=1.0.0&layer="+n+"&style=&"+s+"format="+d.format+"&TileMatrixSet="+P+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),e.defined(o)){a.getTileDataAvailable=function(e,t,i){var r=!1;if(i<l&&i<L.length){var a=L[i];r=a.complete?t<=a.maxTileRow&&t>=a.minTileRow&&e<=a.maxTileCol&&e>=a.minTileCol:e<a.maxWidth&&t<a.maxHeight}return r},a.URLtemplateImage=function(e,t,i){var r="";if(a.getTileDataAvailable(e,t,i)){var n=L[i];r=o.replace("{TileMatrix}",n.id)}return r};var O={width:L[0].tileWidth,height:L[0].tileHeight};0==L.filter((function(e){return e.tileWidth!=O.width||e.tileHeight!=O.height})).length&&(a.imageSize=O),a.ready=!0}}}}return a.proxy=r.proxy,a};var i=function(n){if(!e.defined(n))throw new e.DeveloperError("description is required.");var o,l,s=new e.Event,u=n.credit;"string"==typeof u&&(u=new e.Credit(u)),this.ready=!1,this._options=n||{},Object.defineProperties(this,{errorEvent:{get:function(){return s}},credit:{get:function(){return u}},hasVertexNormals:{get:function(){return!1}}}),o=t.parser(n),l=this,e.when(o,(function(t){e.defined(t)&&t.ready&&(t.levelZeroMaximumGeometricError=e.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(t.tilingScheme.ellipsoid,t.heightMapWidth,t.tilingScheme.getNumberOfXTilesAtLevel(0)),e.defined(t.URLtemplateImage)&&(t.getHeightmapTerrainDataImage=function(n,o,s){var u;if(!isNaN(n+o+s)){var h=r(t.URLtemplateImage(n,o,s),n,o,s,l),d={highest:t.highest,lowest:t.lowest,offset:t.offset},c=t.proxy||{getURL:e=>e},f=a(n,o,s,l),g=e.Resource.fetchImage({url:c.getURL(h),headers:l._options.headers,request:new e.Request({throttleByServer:!0})});e.defined(g)&&(u=e.when(g,(function(e){return i.imageToHeightmapTerrainData(e,d,{width:t.heightMapWidth,height:t.heightMapHeight},t.waterMask,f,t.hasStyledImage)})).otherwise((function(){return new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:f,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return u}),e.defined(t.URLtemplateArray)&&(t.getHeightmapTerrainDataArray=function(n,o,s){var u;if(!isNaN(n+o+s)){var h=r(t.URLtemplateArray(n,o,s),n,o,s,l),d={highest:t.highest,lowest:t.lowest,offset:t.offset},c=a(n,o,s,l),f=t.proxy||{getURL:e=>e},g=e.Resource.fetchArrayBuffer({url:f.getURL(h),headers:l._options.headers,request:new e.Request({throttleByServer:!0})});e.defined(g)&&(u=e.when(g,(function(e){return i.arrayToHeightmapTerrainData(e,d,{width:t.heightMapWidth,height:t.heightMapHeight},t.formatArray,t.waterMask,t.littleEndian,c)})).otherwise((function(){return e.defined(t.getHeightmapTerrainDataImage)?t.getHeightmapTerrainDataImage(n,o,s):new e.HeightmapTerrainData({buffer:new Uint16Array(t.heightMapWidth*t.heightMapHeight),width:t.heightMapWidth,height:t.heightMapHeight,childTileMask:c,waterMask:new Uint8Array(t.heightMapWidth*t.heightMapHeight),structure:t.formatImage.terrainDataStructure})})))}return u}),l.getLevelMaximumGeometricError=function(e){return t.levelZeroMaximumGeometricError/(1<<e)},l.requestTileGeometry=function(i,r,a){var n;return e.defined(t.getHeightmapTerrainDataArray)?n=t.getHeightmapTerrainDataArray(i,r,a):e.defined(t.getHeightmapTerrainDataImage)&&(n=t.getHeightmapTerrainDataImage(i,r,a)),n},Object.defineProperties(l,{tilingScheme:{get:function(){return t.tilingScheme}},ready:{get:function(){return t.ready}},hasWaterMask:{get:function(){return t.waterMask}},heightMapHeight:{get:function(){return t.heightMapHeight}},heightMapWidth:{get:function(){return t.heightMapWidth}},getTileDataAvailable:{get:function(){return t.getTileDataAvailable}}}))}))};function r(e,t,i,r,a){let{getURL:n=(e=>e)}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var o=a.tilingScheme.tileXYToNativeRectangle(t,i,r),l=(o.east-o.west)/(a.heightMapWidth-1),s=(o.north-o.south)/(a.heightMapHeight-1);o.west-=.5*l,o.east+=.5*l,o.south-=.5*s,o.north+=.5*s;var u=a.tilingScheme.getNumberOfYTilesAtLevel(r),h=u-i-1;return e.replace("{south}",o.south).replace("{north}",o.north).replace("{west}",o.west).replace("{east}",o.east).replace("{x}",t).replace("{y}",i).replace("{tmsY}",h)}function a(e,t,i,r){var a=0,n=i+1;return a|=r.getTileDataAvailable(2*e,2*t,n)?1:0,a|=r.getTileDataAvailable(2*e+1,2*t,n)?2:0,(a|=r.getTileDataAvailable(2*e,2*t+1,n)?4:0)|(r.getTileDataAvailable(2*e+1,2*t+1,n)?8:0)}return i.arrayToHeightmapTerrainData=function(t,i,r,a,n,o,l){"number"==typeof r&&(r={width:r,height:r});var s=a.postProcessArray(t,r,i.highest,i.lowest,i.offset,o);if(!e.defined(s))throw new e.DeveloperError("no good size");var u={buffer:s,width:r.width,height:r.height,childTileMask:l,structure:a.terrainDataStructure};if(n){for(var h=new Uint8Array(s.length),d=0;d<s.length;d++)s[d]<=0&&(h[d]=255);u.waterMask=h}return new e.HeightmapTerrainData(u)},i.imageToHeightmapTerrainData=function(t,i,r,a,n,o){"number"==typeof r&&(r={width:r,height:r});for(var l=e.getImagePixels(t,r.width,r.height),s=new Uint8Array(l.length/4),u=new Int16Array(l.length/4),h=0,d=0,c=0;c<l.length;c+=4){var f=l[c],g=l[c+1],m=l[c+2]>128,p=(f<<8|g)-i.offset-32768;p>i.lowest&&p<i.highest&&(m||o)?(u[c/4]=p,d+=p,h++):u[c/4]=0==h?0:d/h}var y={buffer:u,width:r.width,height:r.height,childTileMask:n,structure:{heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}};if(a){for(s=new Uint8Array(heightBuffer.length),c=0;c<heightBuffer.length;c++)heightBuffer[c]<=0&&(s[c]=255);y.waterMask=s}return new e.HeightmapTerrainData(y)},i};var c=i(727418),f=i.n(c),g=i(701469),m=i.n(g),p=i(618446),y=i.n(p),v=i(555363);function S(e){let t=e,i="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),i=e.substring(e.indexOf("?")+1)),{url:t,queryString:i}}function M(e){this.proxy=e}function w(){}M.prototype.getURL=function(e){let{url:t,queryString:i}=S(e);return(0,l.b)()+encodeURIComponent(t+i)},w.prototype.getURL=function(e){const{url:t,queryString:i}=S(e);return t+i};const x=e=>{let t,i=o.ZP.getProxyUrl({});return i&&(t=e.noCors||(0,l.$)(e.url)),t?new M(i):new w},T={PARAM_OPTIONS:["layers","styles","style","format","transparent","version","tiled","opacity","zindex","srs","singletile","_v_","filterobj"],wmsToCesiumOptionsBIL:e=>{let t=e.url;return{url:t,headers:(0,v.getAuthenticationHeaders)(t,e.securityToken),proxy:x(e),littleEndian:e.littleendian||!1,layerName:e.name,version:e.version,fixedHeight:e.fixedHeight,fixedWidth:e.fixedWidth,crs:e.crs,format:"image/bil"}},getProxy:x};var b=i(676794),C=i(40649);const A=d(a);const I=e=>{let t;return e.useForElevation?new A(T.wmsToCesiumOptionsBIL(e)):(t=e.singleTile?new a.SingleTileImageryProvider(function(e){const t=void 0!==e.opacity?e.opacity:1,i=(0,b.v)(e),r=f()({styles:e.style||"",format:((0,C.z)(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:t,tiled:void 0===e.tiled||e.tiled,layers:e.name,width:e.size||2e3,height:e.size||2e3,bbox:"-180.0,-90,180.0,90",srs:"EPSG:4326"},i||{},(0,h.QW)(e)),n=(m()(e.url)?e.url[Math.round(Math.random()*(e.url.length-1))]:e.url)+"?service=WMS&version=1.1.0&request=GetMap&"+function(e){return Object.keys(e).map((t=>t+"="+encodeURIComponent(e[t]))).join("&")}((0,v.addAuthenticationToSLD)(r,e)),o=(0,v.getAuthenticationHeaders)(n,e.securityToken);return{url:new a.Resource({url:n,headers:o,proxy:T.getProxy(e)})}}(e)):new a.WebMapServiceImageryProvider(function(e){var t=void 0!==e.opacity?e.opacity:1;const i=(0,b.v)(e),r=e.credits,n=r?new a.Credit(r.text||r.title,r.imageUrl,r.link):e.attribution,o=(0,h.D$)(m()(e.url)?e.url:[e.url]),l=(0,v.getAuthenticationHeaders)(o[0],e.securityToken);return f()({url:new a.Resource({url:"{s}",headers:l,proxy:T.getProxy(e)}),tileDiscardPolicy:"none"===e.tileDiscardPolicy?void 0:e.tileDiscardPolicy??new a.NeverTileDiscardPolicy,credit:n,subdomains:o,layers:e.name,enablePickFeatures:!1,parameters:f()({styles:e.style||"",format:((0,C.z)(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:t,tiled:void 0===e.tiled||e.tiled,width:e.tileSize||256,height:e.tileSize||256},f()({},e._v_?{_v_:e._v_}:{},i||{},(0,h.QW)(e)))})}(e)),t.updateParams=t=>{const i=f()({},e,{params:f()({},e.params||{},t)});return I(i)},t)};r.default.registerType("wms",{create:I,update:(e,t,i)=>{const r=t&&t.params,a=i&&i.params,n={...r,...a};return Object.keys({...t,...i,...n}).filter((e=>T.PARAM_OPTIONS.indexOf(e.toLowerCase())>=0)).filter((e=>{const n=void 0===i[e]?a&&a[e]:i[e],o=void 0===t[e]?r&&r[e]:t[e];return!y()(n,o)})).length>0||t.securityToken!==i.securityToken||!y()(t.layerFilter,i.layerFilter)||t.tileSize!==i.tileSize?I(t):null}});var _=i(276570),P=i(513218),R=i.n(P),E=i(512571),L=i.n(E),D=i(227361),W=i.n(D),q=i(91175),k=i.n(q),V=i(472500),H=i.n(V);function O(e){let t=e,i="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),i=e.substring(e.indexOf("?")+1)),{url:t,queryString:i}}function U(e){this.proxy=e}function N(){}U.prototype.getURL=function(e){let{url:t,queryString:i}=O(e);return(0,l.b)()+encodeURIComponent(t+i)},N.prototype.getURL=function(e){let{url:t,queryString:i}=O(e);return t+i};const G=e=>e.indexOf("EPSG:4326")>=0?new a.GeographicTilingScheme:e.indexOf("EPSG:3857")>=0?new a.WebMercatorTilingScheme:null,F=(e,t)=>{const i=_.C2(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),r=(a=e.matrixIds&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(R()(e)&&e[t]||m()(e)&&e||[]).map((e=>e.identifier))}(e.matrixIds,i)||function(e){let t=new Array(30);for(let i=0;i<30;++i)t[i]=e.tileMatrixPrefix+i;return t}(e),a.length>n?L()(a,0,n):a.length<n?a.concat(new Array(n-a.length)):a);var a,n;return{tileMatrixSet:i,matrixIds:r}};const B=e=>{let t;const i=function(e){let t="EPSG:4326",{tileMatrixSet:i,matrixIds:r}=F(e,t);if(0===r.length){t="EPSG:3857";const a=F(e,t);i=a.tileMatrixSet,r=a.matrixIds}let n,s=o.ZP.getProxyUrl({});s&&(n=(0,l.$)(e.url)&&s);const u=(d=e.matrixIds&&e.matrixIds[i],(e,t,i)=>d&&d[i]&&!d[i].ranges||e<=parseInt(W()(d[i],"ranges.cols.max"),10)&&e>=parseInt(W()(d[i],"ranges.cols.min"),10)&&t<=parseInt(W()(d[i],"ranges.rows.max"),10)&&t>=parseInt(W()(d[i],"ranges.rows.min"),10));var d;const c=H().format({query:{...(0,h.QW)(e)}}),g=e.credits,p=g?new a.Credit(g.text||g.title,g.imageUrl,g.link):"";return f()({url:new a.Resource({url:k()((0,h.D$)(m()(e.url)?e.url:[e.url],c)),proxy:n&&new U(n)||new N}),format:((0,C.z)(e.format)?"image/png":e.format)||"image/png",isValid:u,credit:p,layer:e.name,style:e.style||"",tileMatrixLabels:r,tilingScheme:G(t,e.matrixIds[i]),enablePickFeatures:!1,tileWidth:e.tileWidth||e.tileSize||256,tileHeight:e.tileHeight||e.tileSize||256,tileMatrixSetID:i,maximumLevel:30,parameters:{...(0,h.QW)(e)}})}(e);t=new a.WebMapTileServiceImageryProvider(i);const r=t.requestImage;return t.requestImage=(e,a,n)=>i.isValid(e,a,n)?r.bind(t)(e,a,n):new Promise((()=>{})),t.updateParams=t=>{const i=f()({},e,{params:f()({},e.params||{},t)});return B(i)},t};function z(){let{color:e="#ffffff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._tilingScheme=new a.GeographicTilingScheme,this._readyPromise=a.when.resolve(!0),this._canvas=document.createElement("canvas"),this._canvas.width=1,this._canvas.height=1;const t=this._canvas.getContext("2d");t.fillStyle=e,t.fillRect(0,0,this._canvas.width,this._canvas.height)}r.default.registerType("wmts",{create:B,update:(e,t,i)=>t.securityToken!==i.securityToken||i.format!==t.format||i.credits!==t.credits?B(t):null}),r.default.registerType("marker",{create:(e,t)=>{const i={point:{pixelSize:5,color:a.Color.RED,outlineColor:a.Color.WHITE,outlineWidth:2},...e.style},r=t.entities.add({position:a.Cartesian3.fromDegrees(e.point.lng,e.point.lat),...i});return{detached:!0,point:r,remove:()=>{t.entities.remove(r)}}},update:function(e,t,i,r){return y()(t.point,i.point)&&t.visibility===i.visibility?null:(e.remove(),t.visibility?this.create(t,r):null)}}),Object.defineProperties(z.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){}},tileHeight:{get:function(){}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),z.prototype.getTileCredits=function(){},z.prototype.requestImage=function(){return this._canvas},z.prototype.pickFeatures=function(){},r.default.registerType("empty",(()=>new z({color:"#ffffff"}))),r.default.registerType("bing",(e=>{const t=e.apiKey;return new a.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:a.BingMapsStyle[e.name.toUpperCase()]})}));const X=function(){let e=[a.Math.toRadians(.05),a.Math.toRadians(.1),a.Math.toRadians(.2),a.Math.toRadians(.5),a.Math.toRadians(1),a.Math.toRadians(2),a.Math.toRadians(5),a.Math.toRadians(10)];function t(e,t){let i=e||{};this._tilingScheme=i.tilingScheme||new a.GeographicTilingScheme,this._color=i.color&&new a.Color(i.color[0],i.color[1],i.color[2],i.color[3])||new a.Color(1,1,1,.4),this._tileWidth=i.tileWidth||256,this._tileHeight=i.tileHeight||256,this._ready=!0,this._sexagesimal=i.sexagesimal||!1,this._numLines=i.numLines||50,this._scene=t,this._labels=new a.LabelCollection,t.primitives.add(this._labels),this._polylines=new a.PolylineCollection,t.primitives.add(this._polylines),this._ellipsoid=t.globe.ellipsoid;let r=document.createElement("canvas");r.width=256,r.height=256,this._canvas=r}let i=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),r=Object.defineProperties;function n(e){return e<.01?3:e<.1?2:e<1?1:0}return i&&r||(r=function(e){return e}),r(t.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),t.prototype.makeLabel=function(e,t,i,r){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new a.Cartographic(e,t,10)),text:i,font:"normal",fillColor:this._color,outlineColor:this._color,style:a.LabelStyle.FILL,pixelOffset:new a.Cartesian2(5,r?5:-5),eyeOffset:a.Cartesian3.ZERO,horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:r?a.VerticalOrigin.BOTTOM:a.VerticalOrigin.TOP,scale:1})},t.prototype._drawGrid=function(t){if(this._currentExtent&&this._currentExtent.equals(t))return;this._currentExtent=t,this._polylines.removeAll(),this._labels.removeAll();let i=0,r=0;for(let r=0;r<e.length&&i<(t.north-t.south)/10;r++)i=e[r];for(let i=0;i<e.length&&r<(t.east-t.west)/10;i++)r=e[i];let o=(t.west<0?Math.ceil(t.west/r):Math.floor(t.west/r))*r,l=(t.south<0?Math.ceil(t.south/i):Math.floor(t.south/i))*i,s=(t.east<0?Math.ceil(t.east/i):Math.floor(t.east/i))*i,u=(t.north<0?Math.ceil(t.north/r):Math.floor(t.north/r))*r;o=Math.max(o-2*r,-Math.PI),s=Math.min(s+2*r,Math.PI),l=Math.max(l-2*i,-Math.PI/2),u=Math.min(u+2*r,Math.PI/2);let h=this._ellipsoid,d=a.Math.toRadians(1),c=l+Math.floor((u-l)/i/2)*i;for(let e=o;e<s;e+=r){let t=[];for(let i=l;i<u;i+=d)t.push(new a.Cartographic(e,i));t.push(new a.Cartographic(e,u)),this._polylines.add({positions:h.cartographicArrayToCartesianArray(t),width:.75,material:new a.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});let i=a.Math.toDegrees(e);this.makeLabel(e,c,this._sexagesimal?this._decToSex(i):i.toFixed(n(r)),!1)}let f=o+Math.floor((s-o)/r/2)*r;for(let e=l;e<u;e+=i){let t=[];for(let i=o;i<s;i+=d)t.push(new a.Cartographic(i,e));t.push(new a.Cartographic(s,e)),this._polylines.add({positions:h.cartographicArrayToCartesianArray(t),width:1,material:new a.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});let r=a.Math.toDegrees(e);this.makeLabel(f,e,this._sexagesimal?this._decToSex(r):r.toFixed(n(i)),!0)}},t.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},t.prototype.setVisible=function(e){this._show=e,e?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},t.prototype.isVisible=function(){return this._show},t.prototype._decToSex=function(t){let i=Math.floor(t),r=(60*(Math.abs(t)-i)).toFixed(2);return"60.00"===r&&(i+=1,e="0.00"),[i,":",r].join("")},t.prototype._getExtentView=function(){const e=this._scene.camera,t=this._scene.canvas,i=[e.pickEllipsoid(new a.Cartesian2(0,0),this._ellipsoid),e.pickEllipsoid(new a.Cartesian2(t.width,0),this._ellipsoid),e.pickEllipsoid(new a.Cartesian2(0,t.height),this._ellipsoid),e.pickEllipsoid(new a.Cartesian2(t.width,t.height),this._ellipsoid)];for(let e=0;e<4;e++)if(void 0===i[e])return a.Rectangle.MAX_VALUE;return a.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(i))},t.prototype.destroy=function(){this._show=!1,this._polylines&&this._scene.primitives.remove(this._polylines),this._labels&&this._scene.primitives.remove(this._labels)},t}(),Z=(e,t)=>{const i=t.scene,r=new X({tileWidth:512,tileHeight:512,numLines:10,...e},i);return e.visibility&&r.setVisible(!0),r};r.default.registerType("graticule",{create:Z,update:(e,t,i,r)=>t.visibility!==i.visibility&&(e.setVisible(!1),t.visibility)?Z(t,r):null}),r.default.registerType("osm",(()=>new a.OpenStreetMapImageryProvider({url:"//a.tile.openstreetmap.org/"})));var j=i(798143),Y=i.n(j);const Q=function(){function e(e){this._scene=e.scene;let t=document.createElement("div");t.className="infoWindow",this._div=t;let i=document.createElement("div");i.className="frame",this._div.appendChild(i);let r=document.createElement("div");r.className="content",i.appendChild(r),e.container.appendChild(t),this._content=r,this.setVisible(!0),this._div.style.position="absolute"}return e.prototype.setVisible=function(e){this._visible=e,this._div.style.display=e?"block":"none"},e.prototype.setContent=function(e){if("string"==typeof e)this._content.innerHTML=e;else{for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._content.appendChild(e)}},e.prototype.setPosition=function(e,t){this._position=this._scene.globe.ellipsoid.cartographicToCartesian(a.Cartographic.fromDegrees(t,e,0))},e.prototype.showAt=function(e,t,i){this.setPosition(e,t),this.setContent(i),this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e.prototype.computeVisible=function(){const e=6378137,t=6378137,i=6356752.314245179,r=this._scene.camera.position,a=r.x/e,n=r.y/t,o=r.z/i,l=a*a+n*n+o*o-1,s=this._position,u=s.x/e-a,h=s.y/t-n,d=s.z/i-o,c=-(u*a+h*n+d*o);c>l&&c*c/(u*u+h*h+d*d)>l?this.setVisible(!1):this.setVisible(!0)},e.prototype.update=function(){if(this.computeVisible(),!this._visible||!this._position)return;let e=a.SceneTransforms.wgs84ToWindowCoordinates(this._scene,this._position);if(e){let t=Math.floor(e.x)-this._div.clientWidth/2+"px",i=Math.floor(e.y)-this._div.clientHeight+"px";this._div.tabIndex=5,this._div.style.left=t,this._div.style.top=i}},e.prototype.destroy=function(){this._div.parentNode.removeChild(this._div)},e}(),$=e=>{if(0!==e.length)for(let t=0;t<e.length;t++){let i=e.item(t);i.removeAttribute("data-reactid"),$(i.children||[])}};r.default.registerType("overlay",{create:(e,t)=>{const i=((e,t)=>{let i=e.cloneNode(!0);i.id=t.id+"-overlay",i.className=(t.className||e.className)+"-overlay",i.removeAttribute("data-reactid"),$(i.children||[]);const r=t.closeClass||"close";if(t.onClose&&1===i.getElementsByClassName(r).length){const e=i.getElementsByClassName(r)[0],a=e=>{t.onClose(e.target.getAttribute("data-overlayid"))};Y().add(e,"click",a)}return i})(document.getElementById(e.id),e);let r=new Q(t);r.showAt(e.position.y,e.position.x,i),r.setVisible(!0);let a=t.scene.primitives.add(r);return{detached:!0,info:a,remove:()=>{t.scene.primitives.remove(a)}}},update:function(e,t,i,r){return y()(t.position,i.position)&&t.visibility===i.visibility?null:(e.remove(),t.visibility?this.create(t,r):null)}});var J=i(281763),K=i.n(J),ee=i(807654),te=i.n(ee),ie=i(119950);function re(e){let{style:t}=e;const{format:i,body:r}=t||{};return i&&r?"3dtiles"===i?Promise.resolve(r):"geostyler"===i?(0,ie.getStyleParser)("3dtiles").then((e=>e.writeStyle(r))):Promise.all([(0,ie.getStyleParser)(i),(0,ie.getStyleParser)("3dtiles")]).then((e=>{let[t,i]=e;return t.readStyle(r).then((e=>i.writeStyle(e)))})):Promise.resolve(null)}function ae(e,t){let{heightOffset:i}=t;if(!te()(i)&&K()(i)){const t=e.boundingSphere,r=a.Cartographic.fromCartesian(t.center),n=a.Cartesian3.fromRadians(r.longitude,r.latitude,0),o=a.Cartesian3.fromRadians(r.longitude,r.latitude,i),l=a.Cartesian3.subtract(o,n,new a.Cartesian3);e.modelMatrix=a.Matrix4.fromTranslation(l)}}r.default.registerType("3dtiles",{create:(e,t)=>{if(e.visibility&&e.url){const i=t.scene.primitives.add(new a.Cesium3DTileset({url:new a.Resource({url:e.url,proxy:(0,l.$)(e.url)?new a.DefaultProxy((0,l.b)()):void 0})}));return i.msId=e.id,i.ready?ae(i,e):i.readyPromise.then((()=>{ae(i,e)})),re(e).then((e=>{e&&(i.style=new a.Cesium3DTileStyle(e))})),{detached:!0,tileSet:i,remove:()=>{t.scene.primitives.remove(i)},setVisible:e=>{i.show=!!e}}}return{detached:!0,remove:()=>{},setVisible:()=>{}}},update:function(e,t,i,r){return t.visibility&&!i.visibility?this.create(t,r):!t.visibility&&i.visibility&&null!=e&&e.remove?(e.remove(),null):(!y()(t.style,i.style)&&null!=e&&e.tileSet&&re(t).then((t=>{t&&null!=e&&e.tileSet&&(e.tileSet.makeStyleDirty(),e.tileSet.style=new a.Cesium3DTileStyle(t))})),null!=e&&e.tileSet&&t.heightOffset!==i.heightOffset&&(e.tileSet.ready?ae(e.tileSet,t):e.tileSet.readyPromise.then((()=>{ae(e.tileSet,t)}))),null)}});const ne=(e,t)=>{let i=new a.GeoJsonDataSource;const r={type:"FeatureCollection",features:(0,ie.flattenFeatures)((null==e?void 0:e.features)||[],(e=>{let{style:t,...i}=e;return i}))};return e.visibility&&i.load(r,{stroke:new a.Color(0,0,0,0),fill:new a.Color(0,0,0,0),markerColor:new a.Color(0,0,0,0),strokeWidth:0,markerSize:0}).then((()=>{t.dataSources.add(i),(0,ie.layerToGeoStylerStyle)(e).then((r=>{(0,ie.getStyle)((0,ie.applyDefaultStyleToLayer)({...e,style:r}),"cesium").then((r=>{var a,n;r&&(r({entities:null===(a=i)||void 0===a||null===(n=a.entities)||void 0===n?void 0:n.values,map:t,opacity:e.opacity??1}),t.scene.requestRender())}))}))})),i.show=!!e.visibility,{detached:!0,dataSource:i,remove:()=>{i&&t&&(t.dataSources.remove(i),i=void 0)},setVisible:()=>{}}};r.default.registerType("vector",{create:ne,update:(e,t,i,r)=>{var a,n;return y()(t.features,i.features)&&t.visibility===i.visibility?(null==e||null===(a=e.dataSource)||void 0===a||null===(n=a.entities)||void 0===n||!n.values||y()(t.style,i.style)&&t.opacity===i.opacity||(0,ie.layerToGeoStylerStyle)(t).then((i=>{(0,ie.getStyle)((0,ie.applyDefaultStyleToLayer)({...t,style:i}),"cesium").then((i=>{i&&(i({entities:e.dataSource.entities.values,map:r,opacity:t.opacity??1}),r.scene.requestRender())}))})),null):ne(t,r)}});var oe=i(470509),le=i.n(oe),se=i(487758),ue=i(988594);const he=(e,t)=>{let i=new a.GeoJsonDataSource;const r=(0,b.v)(e),n=le().CancelToken.source();return e.visibility&&((e,t,i)=>(0,se.Bm)(e.url,e.name,{outputFormat:"application/json",srsname:"EPSG:4326",...t},{cancelToken:i}))(e,r,n.token).then((r=>{let{data:n}=r;i.load(n,{stroke:new a.Color(0,0,0,0),fill:new a.Color(0,0,0,0),markerColor:new a.Color(0,0,0,0),strokeWidth:0,markerSize:0}).then((()=>{t.dataSources.add(i),(0,ie.layerToGeoStylerStyle)(e).then((r=>{(0,ie.getStyle)((0,ie.applyDefaultStyleToLayer)({...e,style:r}),"cesium").then((r=>{var a,n;r&&(r({entities:null===(a=i)||void 0===a||null===(n=a.entities)||void 0===n?void 0:n.values,map:t,opacity:e.opacity??1}),t.scene.requestRender())}))}))}))})),i.show=!!e.visibility,{detached:!0,dataSource:i,remove:()=>{null!=n&&n.cancel&&n.cancel(),i&&t&&(t.dataSources.remove(i),i=void 0)},setVisible:()=>{}}};r.default.registerType("wfs",{create:he,update:(e,t,i,r)=>{var a,n;return(0,ue.Es)(i,t)||t.visibility!==i.visibility?he(t,r):(null==e||null===(a=e.dataSource)||void 0===a||null===(n=a.entities)||void 0===n||!n.values||y()(t.style,i.style)&&t.opacity===i.opacity||(0,ie.layerToGeoStylerStyle)(t).then((i=>{(0,ie.getStyle)((0,ie.applyDefaultStyleToLayer)({...t,style:i}),"cesium").then((i=>{i&&(i({entities:e.dataSource.entities.values,map:r,opacity:t.opacity??1}),r.scene.requestRender())}))})),null)}});const de=d(a),ce=(e,t)=>{let i;switch(t.terrainProvider=void 0,e.provider){case"wms":i=new de(T.wmsToCesiumOptionsBIL(e));break;case"cesium":i=new a.CesiumTerrainProvider(function(e){var t,i,r,a,n;return{url:e.url,credit:null==e||null===(t=e.options)||void 0===t?void 0:t.credit,ellipsoid:null==e||null===(i=e.options)||void 0===i?void 0:i.ellipsoid,requestMetadata:null==e||null===(r=e.options)||void 0===r?void 0:r.requestMetadata,requestWaterMask:null==e||null===(a=e.options)||void 0===a?void 0:a.requestWaterMask,requestVertexNormals:null==e||null===(n=e.options)||void 0===n?void 0:n.requestVertexNormals}}(e));break;default:i=new a.EllipsoidTerrainProvider}return t.terrainProvider=i,{detached:!0,terrainProvider:i,remove:()=>{t.terrainProvider=new a.EllipsoidTerrainProvider},setVisible:()=>{}}};r.default.registerType("terrain",{create:ce,update:(e,t,i,r)=>t.securityToken!==i.securityToken||i.credits!==t.credits||i.provider!==t.provider?ce(t,r):null});const fe={}},331655:(e,t,i)=>{"use strict";i.d(t,{$:()=>s,b:()=>u});var r=i(234228),a=i(701469),n=i.n(a),o=i(513218),l=i.n(o);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n()(e))return e.reduce(((e,t)=>s(t)&&e),!0);let i=!1,a=!(0===e.indexOf("http")),o=!a&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(o){let e=window.location;a=o[1]===e.protocol&&o[3]===e.hostname;let t=o[4],i=e.port;(80!==t&&""!==t||"80"!==i&&""!==i)&&(a=a&&t===i)}if(!a){let a=r.ZP.getProxyUrl(t);if(a){let t=[];l()(a)&&(t=a.useCORS||[],a=a.url),t.reduce(((t,i)=>t||0===e.indexOf(i)),!1)||(i=!0)}}return i},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.ZP.getProxyUrl(e);return t&&l()(t)&&(t=t.url),t}},40649:(e,t,i)=>{"use strict";i.d(t,{z:()=>a});const r=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],a=e=>-1!==r.indexOf(e)},798143:function(e,t,i){var r,a;void 0===(a="function"==typeof(r=function(){function e(e,t){return function(i,r,a,n){i[e]?i[e](r,a,n):i[t]&&i[t]("on"+r,a)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})?r.call(t,i,t,e):r)||(e.exports=a)}}]);