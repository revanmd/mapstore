(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[7849],{957043:(e,t,i)=>{var r=i(862488),o=i(121078),n=i(200278),s=i(701469);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return r(s(i)?n(i):[i],o(t,1))}},823493:(e,t,i)=>{var r=i(23279),o=i(513218);e.exports=function(e,t,i){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),r(e,t,{leading:n,maxWait:t,trailing:s})}},869669:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(421915),o=i(28795),n=i(432538),s=i(438667),a=function(e){function t(t,i,r){if(e.call(this),void 0!==r&&void 0===i)this.setFlatCoordinates(r,t);else{var o=i||0;this.setCenterAndRadius(t,o,r)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),void 0,this.layout)},t.prototype.closestPointXY=function(e,t,i,r){var o=this.flatCoordinates,n=e-o[0],s=t-o[1],a=n*n+s*s;if(a<r){if(0===a)for(var h=0;h<this.stride;++h)i[h]=o[h];else{var u=this.getRadius()/Math.sqrt(a);i[0]=o[0]+u*n,i[1]=o[1]+u*s;for(var l=2;l<this.stride;++l)i[l]=o[l]}return i.length=this.stride,a}return r},t.prototype.containsXY=function(e,t){var i=this.flatCoordinates,r=e-i[0],o=t-i[1];return r*r+o*o<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(e){var t=this.flatCoordinates,i=t[this.stride]-t[0];return(0,r.T9)(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},t.prototype.getType=function(){return o.Z.CIRCLE},t.prototype.intersectsExtent=function(e){var t=this.getExtent();if((0,r.kK)(e,t)){var i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||(0,r.H6)(e,this.intersectsCoordinate,this)}return!1},t.prototype.setCenter=function(e){var t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(var o=1;o<t;++o)r[t+o]=e[o];this.setFlatCoordinates(this.layout,r),this.changed()},t.prototype.setCenterAndRadius=function(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,o=(0,s.IG)(r,0,e,this.stride);r[o++]=r[0]+t;for(var n=1,a=this.stride;n<a;++n)r[o++]=r[n];r.length=o,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(e,t){},t.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},t}(n.ZP);a.prototype.transform;const h=a},372445:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>M});var r=i(173381),o=i(623068),n=i(30006),s=i(486968),a=i(558493),h=i(690728),u=i(613002),l=i(9520),_=i(436403),d=i(864011),c=i(869669),p=i(28795),g=i(944538),f=i(525642),y=i(552329),v=i(513987),m=i(468338),C=i(752043),x=i(640353),F=i(938024),E=i(173604),T=i(429902),w=i(973410),P=i(831219),L="Point",S="LineString",I="Polygon",G="Circle",Z="drawstart",k=function(e){function t(t,i){e.call(this,t),this.feature=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(l.ZP);const M=function(e){function t(t){var i=t;i.stopDown||(i.stopDown=d.Dv),e.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(e){var t;return e===p.Z.POINT||e===p.Z.MULTI_POINT?t=L:e===p.Z.LINE_STRING||e===p.Z.MULTI_LINE_STRING?t=S:e===p.Z.POLYGON||e===p.Z.MULTI_POLYGON?t=I:e===p.Z.CIRCLE&&(t=G),t}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===I?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:d.uX;var r,o=t.geometryFunction;if(!o)if(this.type_===p.Z.CIRCLE)o=function(e,t){var i=t||new c.Z([NaN,NaN]),r=(0,h.bI)(e[0],e[1]);return i.setCenterAndRadius(e[0],Math.sqrt(r)),i};else{var n,s=this.mode_;s===L?n=C.Z:s===S?n=g.Z:s===I&&(n=x.ZP),o=function(e,t){var i=t;return i?s===I?e[0].length?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates([]):i.setCoordinates(e):i=new n(e),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new T.Z({source:new w.Z({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:(r=(0,P.createEditingStyle)(),function(e,t){return r[e.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:_.rM,this.freehandCondition_,t.freehand?this.freehandCondition_=_.Bx:this.freehandCondition_=t.freehandCondition?t.freehandCondition:_.vY,(0,u.oL)(this,(0,a.v_)(E.Z.ACTIVE),this.updateState_,this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===r.Z.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==L&&this.freehandCondition_(t);var i=t.type===n.Z.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&t.type===n.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===n.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),o=!1):this.freehand_&&t.type===n.Z.POINTERDOWN?o=!1:i?(o=t.type===n.Z.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(t):(t.pointerEvent.pointerType==m.T2||t.type===n.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===n.Z.DBLCLICK&&(o=!1),e.prototype.handleEvent.call(this,t)&&o},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):!!this.condition_(e)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.Z(n.Z.POINTERMOVE,e.map,e.pointerEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0)},t.prototype.handleUpEvent=function(e){var t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var i=this.mode_===G;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===L&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t},t.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,r=t[0]-i[0],o=t[1]-i[1],n=r*r+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===S)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===I){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=e.map,s=0,a=r.length;s<a;s++){var h=r[s],u=n.getPixelFromCoordinate(h),l=e.pixel,_=l[0]-u[0],d=l[1]-u[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(_*_+d*d)<=c){this.finishCoordinate_=h;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new o.Z(new C.Z(t)),this.updateSketchFeatures_())},t.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t,this.mode_===L?this.sketchCoords_=t.slice():this.mode_===I?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.Z(new g.Z(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new k(Z,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var t,i,r,n=e.coordinate,s=this.sketchFeature_.getGeometry();if(this.mode_===L?i=this.sketchCoords_:this.mode_===I?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(e)&&(n=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(n),s.getType()==p.Z.POLYGON&&this.mode_!==I){this.sketchLine_||(this.sketchLine_=new o.Z);var a=s.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),r.changed()):(r=new g.Z(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,i,r=e.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===S?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(r.slice()),this.geometryFunction_(i,o)):this.mode_===I&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(r.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===S?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===I&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry();this.mode_===S?(t.pop(),this.geometryFunction_(t,i)):this.mode_===I&&(t[0].pop(),this.geometryFunction_(t,i),t=i.getCoordinates()),this.type_===p.Z.MULTI_POINT?e.setGeometry(new y.Z([t])):this.type_===p.Z.MULTI_LINE_STRING?e.setGeometry(new f.Z([t])):this.type_===p.Z.MULTI_POLYGON&&e.setGeometry(new v.Z([t])),this.dispatchEvent(new k("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new k(Z,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},t}(F.Z)},701577:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var r=i(949179),o=i(378426),n=i(919629),s=i(623068),a=i(30006),h=i(179682),u=i(690728),l=i(613002),_=i(9520),d=i(173381),c=i(436403),p=i(421915),g=i(28795),f=i(752043),y=i(938024),v=i(429902),m=i(973410),C=i(925753),x=i(273101),F=i(831219),E="modifyend",T=function(e){function t(t,i,r){e.call(this,t),this.features=i,this.mapBrowserEvent=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(_.ZP);function w(e,t){return e.index-t.index}function P(e,t){var i=t.geometry;if(i.getType()===g.Z.CIRCLE){var r=i;if(1===t.index){var o=(0,u.bI)(r.getCenter(),e),n=Math.sqrt(o)-r.getRadius();return n*n}}return(0,u.Bs)(e,t.segment)}function L(e,t){var i=t.geometry;return i.getType()===g.Z.CIRCLE&&1===t.index?i.getClosestPoint(e):(0,u.oL)(e,t.segment)}const S=function(e){function t(t){var i,r;if(e.call(this,t),this.condition_=t.condition?t.condition:c.Xp,this.defaultDeleteCondition_=function(e){return(0,c.Ko)(e)&&(0,c.Kf)(e)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:c.Bx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new x.Z,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new v.Z({source:new m.Z({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:(i=(0,F.createEditingStyle)(),function(e,t){return i[g.Z.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,r=new o.Z(this.source_.getFeatures()),(0,l.oL)(this.source_,C.Z.ADDFEATURE,this.handleSourceAdd_,this),(0,l.oL)(this.source_,C.Z.REMOVEFEATURE,this.handleSourceRemove_,this)):r=t.features,!r)throw new Error("The modify interaction requires features or a source");this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),(0,l.oL)(this.features_,n.Z.ADD,this.handleFeatureAdd_,this),(0,l.oL)(this.features_,n.Z.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),(0,l.oL)(e,d.Z.CHANGE,this.handleFeatureChange_,this)},t.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new T("modifystart",this.features_,e)))},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,l.Ev)(e,d.Z.CHANGE,this.handleFeatureChange_,this)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,i=[];t.forEach((function(t){e===t.feature&&i.push(t)}));for(var r=i.length-1;r>=0;--r)t.remove(i[r])},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r){var n=i[r],s={feature:e,geometry:t,depth:[r],index:r,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:e,geometry:t,index:r,segment:n};this.rBush_.insert((0,p.hI)(n),s)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:e,geometry:t,depth:[r],index:s,segment:h};this.rBush_.insert((0,p.hI)(h),u)}},t.prototype.writePolygonGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:e,geometry:t,depth:[r],index:s,segment:h};this.rBush_.insert((0,p.hI)(h),u)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length;s<a;++s)for(var h=n[s],u=0,l=h.length-1;u<l;++u){var _=h.slice(u,u+2),d={feature:e,geometry:t,depth:[s,r],index:u,segment:_};this.rBush_.insert((0,p.hI)(_),d)}},t.prototype.writeCircleGeometry_=function(e,t){var i=t.getCenter(),r={feature:e,geometry:t,index:0,segment:[i,i]},o={feature:e,geometry:t,index:1,segment:[i,i]},n=[r,o];r.featureSegments=o.featureSegments=n,this.rBush_.insert((0,p.HK)(i),r),this.rBush_.insert(t.getExtent(),o)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var i=t.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,e,i[r])},t.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;return t?t.getGeometry().setCoordinates(e):(t=new s.Z(new f.Z(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t)),t},t.prototype.handleEvent=function(t){return!t.pointerEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=a.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(i=!(t.type!=a.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==a.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!i);var i},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var o=this.dragSegments_[i],n=o[0],s=n.depth,a=n.geometry,h=void 0,l=n.segment,_=o[1];t.length<a.getStride();)t.push(l[_][t.length]);switch(a.getType()){case g.Z.POINT:h=t,l[0]=l[1]=t;break;case g.Z.MULTI_POINT:(h=a.getCoordinates())[n.index]=t,l[0]=l[1]=t;break;case g.Z.LINE_STRING:(h=a.getCoordinates())[n.index+_]=t,l[_]=t;break;case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(h=a.getCoordinates())[s[0]][n.index+_]=t,l[_]=t;break;case g.Z.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][n.index+_]=t,l[_]=t;break;case g.Z.CIRCLE:l[0]=l[1]=t,0===n.index?(this.changingFeature_=!0,a.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius((0,u.TE)(a.getCenter(),t)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(t)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var o=[],n=i.getGeometry().getCoordinates(),s=(0,p.hI)([n]),a=this.rBush_.getInExtent(s),h={};a.sort(w);for(var l=0,_=a.length;l<_;++l){var d=a[l],c=d.segment,f=(0,r.sq)(d.feature),y=d.depth;if(y&&(f+="-"+y.join("-")),h[f]||(h[f]=new Array(2)),d.geometry.getType()===g.Z.CIRCLE&&1===d.index){var v=L(t,d);(0,u.fS)(v,n)&&!h[f][0]&&(this.dragSegments_.push([d,0]),h[f][0]=d)}else if((0,u.fS)(c[0],n)&&!h[f][0])this.dragSegments_.push([d,0]),h[f][0]=d;else if((0,u.fS)(c[1],n)&&!h[f][1]){if((d.geometry.getType()===g.Z.LINE_STRING||d.geometry.getType()===g.Z.MULTI_LINE_STRING)&&h[f][0]&&0===h[f][0].index)continue;this.dragSegments_.push([d,1]),h[f][1]=d}else this.insertVertexCondition_(e)&&(0,r.sq)(c)in this.vertexSegments_&&!h[f][0]&&!h[f][1]&&o.push([d,n])}o.length&&this.willModifyFeatures_(e);for(var m=o.length-1;m>=0;--m)this.insertVertex_.apply(this,o[m])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var i=this.dragSegments_[t][0],r=i.geometry;if(r.getType()===g.Z.CIRCLE){var o=r.getCenter(),n=i.featureSegments[0],s=i.featureSegments[1];n.segment[0]=n.segment[1]=o,s.segment[0]=s.segment[1]=o,this.rBush_.update((0,p.HK)(o),n),this.rBush_.update(r.getExtent(),s)}else this.rBush_.update((0,p.hI)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new T(E,this.features_,e)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},t.prototype.handlePointerAtPixel_=function(e,t){var i=t.getCoordinateFromPixel(e),o=(0,p.f3)((0,p.HK)(i),t.getView().getResolution()*this.pixelTolerance_),n=this.rBush_.getInExtent(o);if(n.length>0){n.sort((function(e,t){return P(i,e)-P(i,t)}));var s=n[0],a=s.segment,h=L(i,s),l=t.getPixelFromCoordinate(h),_=(0,u.TE)(e,l);if(_<=this.pixelTolerance_){var d={};if(s.geometry.getType()===g.Z.CIRCLE&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var c=t.getPixelFromCoordinate(a[0]),f=t.getPixelFromCoordinate(a[1]),y=(0,u.bI)(l,c),v=(0,u.bI)(l,f);_=Math.sqrt(Math.min(y,v)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(h=y>v?a[1]:a[0]),this.createOrUpdateVertexFeature_(h);for(var m=1,C=n.length;m<C;++m){var x=n[m].segment;if(!((0,u.fS)(a[0],x[0])&&(0,u.fS)(a[1],x[1])||(0,u.fS)(a[0],x[1])&&(0,u.fS)(a[1],x[0])))break;d[(0,r.sq)(x)]=!0}}return d[(0,r.sq)(a)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var i,r=e.segment,o=e.feature,n=e.geometry,s=e.depth,a=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(i=n.getCoordinates())[s[0]].splice(a+1,0,t);break;case g.Z.MULTI_POLYGON:(i=n.getCoordinates())[s[1]][s[0]].splice(a+1,0,t);break;case g.Z.LINE_STRING:(i=n.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(n,i);var h=this.rBush_;h.remove(e),this.updateSegmentIndices_(n,a,s,1);var u={segment:[r[0],t],feature:o,geometry:n,depth:s,index:a};h.insert((0,p.hI)(u.segment),u),this.dragSegments_.push([u,1]);var l={segment:[t,r[1]],feature:o,geometry:n,depth:s,index:a+1};h.insert((0,p.hI)(l.segment),l),this.dragSegments_.push([l,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.Z.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new T(E,this.features_,e)),this.modified_=!1,!0}return!1},t.prototype.removeVertex_=function(){var e,t,i,o,n,s,a,h,u,l,_,d=this.dragSegments_,c={},f=!1;for(n=d.length-1;n>=0;--n)l=(i=d[n])[0],_=(0,r.sq)(l.feature),l.depth&&(_+="-"+l.depth.join("-")),_ in c||(c[_]={}),0===i[1]?(c[_].right=l,c[_].index=l.index):1==i[1]&&(c[_].left=l,c[_].index=l.index+1);for(_ in c){switch(u=c[_].right,a=c[_].left,(h=(s=c[_].index)-1)<0&&(h=0),e=t=(o=(l=void 0!==a?a:u).geometry).getCoordinates(),f=!1,o.getType()){case g.Z.MULTI_LINE_STRING:t[l.depth[0]].length>2&&(t[l.depth[0]].splice(s,1),f=!0);break;case g.Z.LINE_STRING:t.length>2&&(t.splice(s,1),f=!0);break;case g.Z.MULTI_POLYGON:e=e[l.depth[1]];case g.Z.POLYGON:(e=e[l.depth[0]]).length>4&&(s==e.length-1&&(s=0),e.splice(s,1),f=!0,0===s&&(e.pop(),e.push(e[0]),h=e.length-1))}if(f){this.setGeometryCoordinates_(o,t);var y=[];if(void 0!==a&&(this.rBush_.remove(a),y.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[1])),void 0!==a&&void 0!==u){var v={depth:l.depth,feature:l.feature,geometry:l.geometry,index:h,segment:y};this.rBush_.insert((0,p.hI)(v.segment),v)}this.updateSegmentIndices_(o,s,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return f},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),(function(o){o.geometry===e&&(void 0===i||void 0===o.depth||(0,h.fS)(o.depth,i))&&o.index>t&&(o.index+=r)}))},t}(y.Z)},51273:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var r=i(949179),o=i(919629),n=i(179682),s=i(613002),a=i(9520),h=i(436403),u=i(864011),l=i(28795),_=i(247588),d=i(429902),c=i(913580),p=i(973410),g=i(831219),f=function(e){function t(t,i,r,o){e.call(this,t),this.selected=i,this.deselected=r,this.mapBrowserEvent=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(a.ZP);function y(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),o=!t&&!i&&!r,s=e.map,a=this.getFeatures(),u=[],l=[];if(o){(0,c.ZH)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return l.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var _=a.getLength()-1;_>=0;--_){var d=a.item(_),p=l.indexOf(d);p>-1?l.splice(p,1):(a.remove(d),u.push(d))}0!==l.length&&a.extend(l)}else{s.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!r||(0,n.q9)(a.getArray(),e)?(i||r)&&(0,n.q9)(a.getArray(),e)&&(u.push(e),this.removeFeatureLayerAssociation_(e)):(l.push(e),this.addFeatureLayerAssociation_(e,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=u.length-1;g>=0;--g)a.remove(u[g]);a.extend(l)}return(l.length>0||u.length>0)&&this.dispatchEvent(new f("select",l,u,e)),(0,h.MJ)(e)}const v=function(e){function t(t){e.call(this,{handleEvent:y});var i=t||{};this.condition_=i.condition?i.condition:h.Kf,this.addCondition_=i.addCondition?i.addCondition:h.Fi,this.removeCondition_=i.removeCondition?i.removeCondition:h.Fi,this.toggleCondition_=i.toggleCondition?i.toggleCondition:h.vY,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:u.uX,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,a,_=new d.Z({source:new p.Z({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(a=(0,g.createEditingStyle)(),(0,n.l7)(a[l.Z.POLYGON],a[l.Z.LINE_STRING]),(0,n.l7)(a[l.Z.GEOMETRY_COLLECTION],a[l.Z.LINE_STRING]),function(e,t){return e.getGeometry()?a[e.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=_,i.layers)if("function"==typeof i.layers)r=i.layers;else{var c=i.layers;r=function(e){return(0,n.q9)(c,e)}}else r=u.uX;this.layerFilter_=r,this.featureLayerAssociation_={};var f=this.getFeatures();(0,s.oL)(f,o.Z.ADD,this.addFeature_,this),(0,s.oL)(f,o.Z.REMOVE,this.removeFeature_,this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[(0,r.sq)(e)]=t},t.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[(0,r.sq)(e)]},t.prototype.getOverlay=function(){return this.featureOverlay_},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),e.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&r.forEach(t.skipFeature.bind(t))},t.prototype.addFeature_=function(e){var t=this.getMap();t&&t.skipFeature(e.element)},t.prototype.removeFeature_=function(e){var t=this.getMap();t&&t.unskipFeature(e.element)},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[(0,r.sq)(e)]},t}(_.ZP)},650141:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var r=i(949179),o=i(919629),n=i(690728),s=i(613002),a=i(173381),h=i(421915),u=i(864011),l=i(28795),_=i(640353),d=i(938024),c=i(913580),p=i(925753),g=i(273101);function f(e){return e.feature?e.feature:e.element?e.element:void 0}function y(e,t){return(0,n.Bs)(this.pixelCoordinate_,e.segment)-(0,n.Bs)(this.pixelCoordinate_,t.segment)}const v=function(e){function t(t){var i=t||{},r=i;r.handleDownEvent||(r.handleDownEvent=u.uX),r.stopDown||(r.stopDown=u.Dv),e.call(this,r),this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=y.bind(this),this.rBush_=new g.Z,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e,t){var i=void 0===t||t,o=(0,r.sq)(e),n=e.getGeometry();if(n){var u=this.SEGMENT_WRITERS_[n.getType()];u&&(this.indexedFeaturesExtents_[o]=n.getExtent((0,h.lJ)()),u.call(this,e,n))}i&&(this.featureChangeListenerKeys_[o]=(0,s.oL)(e,a.Z.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var i=this.snapTo(t.pixel,t.coordinate,t.map);return i.snapped&&(t.coordinate=i.vertex.slice(0,2),t.pixel=i.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=f(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=f(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var i=(0,r.sq)(t);i in this.pendingFeatures_||(this.pendingFeatures_[i]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=(0,c.KX)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var i=void 0===t||t,o=(0,r.sq)(e),n=this.indexedFeaturesExtents_[o];if(n){var a=this.rBush_,h=[];a.forEachInExtent(n,(function(t){e===t.feature&&h.push(t)}));for(var u=h.length-1;u>=0;--u)a.remove(h[u])}i&&((0,s.bN)(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])},t.prototype.setMap=function(t){var i=this.getMap(),r=this.featuresListenerKeys_,n=this.getFeatures_();i&&(r.forEach(s.bN),r.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?r.push((0,s.oL)(this.features_,o.Z.ADD,this.handleFeatureAdd_,this),(0,s.oL)(this.features_,o.Z.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push((0,s.oL)(this.source_,p.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,s.oL)(this.source_,p.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,i){var r=i.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=i.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),s=(0,h.hI)([r,o]),a=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(a=a.filter((function(e){return e.feature.getGeometry().getType()!==l.Z.CIRCLE})));var u,_,d,c,p=!1,g=null,f=null;if(a.length>0){this.pixelCoordinate_=t,a.sort(this.sortByDistance_);var y=a[0].segment,v=a[0].feature.getGeometry().getType()===l.Z.CIRCLE;this.vertex_&&!this.edge_?(u=i.getPixelFromCoordinate(y[0]),_=i.getPixelFromCoordinate(y[1]),d=(0,n.bI)(e,u),c=(0,n.bI)(e,_),Math.sqrt(Math.min(d,c))<=this.pixelTolerance_&&(p=!0,g=d>c?y[1]:y[0],f=i.getPixelFromCoordinate(g))):this.edge_&&(g=v?(0,n.Ed)(t,a[0].feature.getGeometry()):(0,n.oL)(t,y),f=i.getPixelFromCoordinate(g),(0,n.TE)(e,f)<=this.pixelTolerance_&&(p=!0,this.vertex_&&!v&&(u=i.getPixelFromCoordinate(y[0]),_=i.getPixelFromCoordinate(y[1]),d=(0,n.bI)(f,u),c=(0,n.bI)(f,_),Math.sqrt(Math.min(d,c))<=this.pixelTolerance_&&(g=d>c?y[1]:y[0],f=i.getPixelFromCoordinate(g))))),p&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:p,vertex:g,vertexPixel:f}},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.writeCircleGeometry_=function(e,t){for(var i=(0,_.Bb)(t).getCoordinates()[0],r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:e,segment:n};this.rBush_.insert((0,h.hI)(n),s)}},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var i=t.getGeometriesArray(),r=0;r<i.length;++r){var o=this.SEGMENT_WRITERS_[i[r].getType()];o&&o.call(this,e,i[r])}},t.prototype.writeLineStringGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:e,segment:n};this.rBush_.insert((0,h.hI)(n),s)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var u=n.slice(s,s+2),l={feature:e,segment:u};this.rBush_.insert((0,h.hI)(u),l)}},t.prototype.writeMultiPointGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r){var n=i[r],s={feature:e,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length;s<a;++s)for(var u=n[s],l=0,_=u.length-1;l<_;++l){var d=u.slice(l,l+2),c={feature:e,segment:d};this.rBush_.insert((0,h.hI)(d),c)}},t.prototype.writePointGeometry_=function(e,t){var i=t.getCoordinates(),r={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)},t.prototype.writePolygonGeometry_=function(e,t){for(var i=t.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var u=n.slice(s,s+2),l={feature:e,segment:u};this.rBush_.insert((0,h.hI)(u),l)}},t}(d.Z)},829194:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(378426),o=i(558493),n=i(613002),s=i(9520),a=i(864011),h=i(179682),u=i(938024),l=i(173604),_=function(e){function t(t,i,r){e.call(this,t),this.features=i,this.coordinate=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(s.ZP);const d=function(e){function t(t){var i,r=t||{};if(e.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var s=r.layers;i=function(e){return(0,h.q9)(s,e)}}else i=a.uX;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,(0,n.oL)(this,(0,o.v_)(l.Z.ACTIVE),this.handleActiveChanged_,this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.handleDownEvent=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var t=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new _("translatestart",t,e.coordinate)),!0}return!1},t.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var t=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new _("translateend",t,e.coordinate)),!0}return!1},t.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var t=e.coordinate,i=t[0]-this.lastCoordinate_[0],o=t[1]-this.lastCoordinate_[1],n=this.features_||new r.Z([this.lastFeature_]);n.forEach((function(e){var t=e.getGeometry();t.translate(i,o),e.setGeometry(t)})),this.lastCoordinate_=t,this.dispatchEvent(new _("translating",n,t))}},t.prototype.handleMoveEvent=function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")},t.prototype.featuresAtPixel_=function(e,t){return t.forEachFeatureAtPixel(e,function(e){if(!this.features_||(0,h.q9)(this.features_.getArray(),e))return e}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){var i=this.getMap();e.prototype.setMap.call(this,t),this.updateState_(i)},t.prototype.handleActiveChanged_=function(){this.updateState_(null)},t.prototype.updateState_=function(e){var t=this.getMap(),i=this.getActive();t&&i||(t=t||e)&&t.getViewport().classList.remove("ol-grab","ol-grabbing")},t}(u.Z)}}]);