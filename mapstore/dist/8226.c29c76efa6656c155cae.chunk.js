(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8226],{940711:(e,t,r)=>{"use strict";r.d(t,{b:()=>c});var a=r(727418),s=r.n(a);const n=e=>null===e?[]:e.map((e=>({properties:{...e},id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((e=>parseFloat(e))).reduce(((e,t,r)=>(e[(e=>{switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}})(r)]=t,e)),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}})));var o=r(348660),l=r(487758);const i=e=>{let{searchText:t,staticFilter:r,blacklist:a,item:s,queriableAttributes:n,predicate:l}=e;const i=(0,o.generateTemplateString)(r||"")(s);let u,p=t.split(" ").filter((e=>e)).filter((e=>a.indexOf(e.toLowerCase())<0));return 0===p.length&&(p=t?[t]:[]),p.length>0&&(u="(".concat(p.map((e=>n.map((t=>`${t} ${l} '%${e.replace("'","''")}%'`)).join(" OR "))).join(") AND (")).concat(")")),u=u?u.concat(i):i||null,u};let u={nominatim:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(61427).Z.geocode(e,t).then((e=>t.returnFullData?e:n(e.data)))},wfs:(e,t)=>{let{url:r,typeName:a,queriableAttributes:n=[],outputFormat:o="application/json",predicate:u="ILIKE",staticFilter:p="",blacklist:c=[],item:d,fromTextToFilter:h=i,returnFullData:g=!1,...m}=t;const f=h({searchText:e,staticFilter:p,blacklist:c,item:d,queriableAttributes:n,predicate:u});return l.DH(r,s()({maxFeatures:10,typeName:a,outputFormat:o,cql_filter:f},m)).then((e=>g?e:e.features))}};const p={setService:(e,t)=>{u[e]=t},getService:e=>u[e]?u[e]:null},c={Services:u,Utils:p}},218226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var a=r(45697),s=r.n(a),n=r(124852),o=r.n(n),l=r(112008),i=r(496259),u=r(626824),p=r(867076),c=r(49977),d=r.n(c);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},h.apply(this,arguments)}const g=(0,p.branch)((e=>{let{virtualScroll:t}=e;return t}),(0,p.compose)((0,p.mapPropsStream)((e=>{const{handler:t,stream:r}=(0,p.createEventHandler)();return e.combineLatest(r.throttle((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d().Observable.timer(e)})).scan((e=>e+1),0).map((e=>({scrollToTopCounter:e}))).startWith({}),((e,r)=>({...e,...r,scrollToTop:t})))})),(0,p.withHandlers)({onGridSort:e=>{let{onGridSort:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){return r(0),t(...arguments)}},onAddFilter:e=>{let{onAddFilter:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){r(1e3),t(...arguments)}}})))(u.Z);var m=r(414293),f=r.n(m),w=r(56784),v=r.n(w),b=r(509978),y=r(940721),P=r(825079),x=r(556382),T=r(234228),F=r(208232);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},O.apply(this,arguments)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class E extends y.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValue=()=>super.getValue()}render(){return o().createElement(F.Q,O({},this.props,{url:T.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:x.Vd}))}}C(E,"propTypes",{column:s().object,dataType:s().string,inputProps:s().object,isValid:s().func,onBlur:s().func,autocompleteStreamFactory:s().func,url:s().string,typeName:s().string,value:s().string}),C(E,"defaultProps",{isValid:()=>!0,dataType:"string"});const S=E;var j=r(703476);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D.apply(this,arguments)}const V={defaultEditor:e=>o().createElement(y.Z,e),int:e=>o().createElement(P.Z,D({dataType:"int",inputProps:{step:1,type:"number"}},e)),number:e=>o().createElement(P.Z,D({dataType:"number",inputProps:{step:1,type:"number"}},e)),string:e=>e.autocompleteEnabled?o().createElement(S,D({dataType:"string"},e)):o().createElement(y.Z,D({dataType:"string"},e)),boolean:e=>o().createElement(j.Z,D({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))},N=(0,p.withState)("value","onValueChange",(e=>e.value));var R=r(428200),I=r(659632),k=r.n(I),L=r(913186);const A=(0,p.compose)((0,p.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:()=>{},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:(e,t)=>V[e]?V[e](t):V.defaultEditor(t),dataStreamFactory:e=>{const{handler:t,stream:r}=(0,p.createEventHandler)();return(e=>e.distinctUntilChanged(((e,t)=>{let{features:r,pages:a,isFocused:s}=e,{features:n,pages:o,isFocused:l}=t;return r===n&&s===l&&a===o})).switchMap((e=>{let{size:t,pageEvents:r,isFocused:a,pages:s,pagination:n,vsOverScan:o=20,scrollDebounce:i=50,onGridScroll$:u}=e;return u.debounceTime(i).filter((()=>!a)).map((e=>{let{firstRowIdx:r,lastRowIdx:a}=e;const i=r-o<0?0:r-o,u=a+o>n.totalFeatures-1?n.totalFeatures-1:a+o,p=Math.floor(i/t),c=Math.floor(u/t);let d=!1;for(let e=p;e<=c&&!d;e++)-1===(0,l.t3)(e*t,s,t)&&(d=!0);return d&&{startPage:p,endPage:c}})).filter((e=>e)).do((e=>r.moreFeatures(e)))})))(e.filter((e=>{let{virtualScroll:t}=e;return t})).map((e=>({...e,onGridScroll$:r})))).startWith({}).map((e=>({...e,onGridScroll:t})))},virtualScroll:!0}),(0,p.withPropsOnChange)("showDragHandle",(function(){let{showDragHandle:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:e?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,p.withPropsOnChange)(["enableColumnFilters"],(e=>({displayFilters:e.enableColumnFilters}))),(0,p.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(e=>({editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}))),(0,p.withPropsOnChange)(["autocompleteEnabled"],(e=>({autocompleteEnabled:e.autocompleteEnabled}))),(0,p.withPropsOnChange)(["url"],(e=>({url:e.url}))),(0,p.withPropsOnChange)(["typeName"],(e=>({typeName:e.typeName}))),(0,p.withPropsOnChange)(["features","newFeatures","changes"],(e=>({rows:(e.newFeatures?[...e.newFeatures,...e.features]:e.features).filter(e.focusOnEdit?(0,l.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):()=>!0).map((t=>(0,l.Qc)(t,e.changes))).map((e=>({...e,"_!_id_!_":e.id,get:t=>"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]})))}))),(0,p.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(e=>({isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}))),(0,p.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(e=>({rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}))),(0,p.withHandlers)({rowGetter:e=>e.virtualScroll&&(t=>(0,l.WQ)(t,e.rows,e.pages,e.size))||(t=>(0,l.dM)(t,e.rows))}),(0,p.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(e=>{const t=function(){let{localType:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[r]?e.filterRenderers[r]:N((0,R.Q)(t))},r={columns:(0,l.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,l.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:t=>{const r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},a={attribute:t.name,url:e.url,typeName:e.typeName},s=e.customEditorsOptions&&e.customEditorsOptions.rules||[],n={type:t.localType,generalProps:r,props:e},o=v().getCustomEditor(a,s,n);return f()(o)?e.editors(t.localType,r):o},getFilterRenderer:t,getFormatter:e=>(e=>"boolean"===e.localType?function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:o().createElement("span",null,e.toString())}:["int","number"].includes(e.localType)?function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:o().createElement(L.Z,{value:e,numberParams:{maximumFractionDigits:17}})}:"string"===e.localType?function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:k()(e,/(https?:\/\/\S+)/g,((e,t)=>o().createElement("a",{key:e+t,href:e,target:"_blank"},e)))}:"Geometry"===e.localType?()=>null:null)(e)}))};return r})),(0,p.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns","showCheckbox"],(e=>{let{onRowsSelected:t=(()=>{}),onRowsDeselected:r=(()=>{}),onRowsToggled:a=(()=>{}),...s}=(0,l.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),n=e.gridOpts;return n={...n,enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:e.showCheckbox||"EDIT"===e.mode,selectBy:{keys:{rowKey:"_!_id_!_",values:e.select.map((e=>e.id))}},onRowsSelected:t,onRowsDeselected:r}},s.onRowClick=(e,t)=>{e>=0&&a([{rowIdx:e,row:t}])},{...s,...n}})),b.Z),Z=A;var M=r(753370);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U.apply(this,arguments)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W extends o().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.cell.setScrollLeft(e)}render(){const e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),a=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return o().createElement(M.Cell,U({},this.props,{ref:"cell",className:a}))}}H(W,"propTypes",{value:s().any,rowData:s().object,column:s().object}),H(W,"contextTypes",{isModified:s().func,isProperty:s().func,isValid:s().func}),H(W,"defaultProps",{value:null,rowData:{},column:{}});const q=W;class G extends o().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.row.setScrollLeft(e)}render(){return this.props.renderBaseRow({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:q,...this.props})}}var _,B,$;_=G,B="propTypes",$={columns:s().array,row:s().object,renderBaseRow:s().func.isRequired},B in _?Object.defineProperty(_,B,{value:$,enumerable:!0,configurable:!0,writable:!0}):_[B]=$;const z=G;function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q.apply(this,arguments)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class X extends o().PureComponent{constructor(e){super(e)}getChildContext(){return{isModified:(e,t)=>this.props.changes.hasOwnProperty(e)&&this.props.changes[e].hasOwnProperty(t),isProperty:e=>"geometry"===e||(0,l.IC)(e,this.props.describeFeatureType),isValid:(e,t)=>!this.props.describeFeatureType||(0,l.wT)(e,t,this.props.describeFeatureType)}}render(){const e=this.props.gridComponent;return o().createElement(e,Q({rowRenderer:z},this.props))}}K(X,"propTypes",{autocompleteEnabled:s().bool,editingAllowedRoles:s().array,gridOpts:s().object,changes:s().object,selectBy:s().object,customEditorsOptions:s().object,features:s().array,showDragHandle:s().bool,gridComponent:s().func,describeFeatureType:s().object,columnSettings:s().object,gridOptions:s().object,actionOpts:s().object,tools:s().array,gridEvents:s().object,virtualScroll:s().bool,maxStoredPages:s().number}),K(X,"childContextTypes",{isModified:s().func,isValid:s().func,isProperty:s().func}),K(X,"defaultProps",{editingAllowedRoles:["ADMIN"],autocompleteEnabled:!1,gridComponent:e=>o().createElement(i.Z,null,(t=>{let{width:r,height:a}=t;return o().createElement("div",{className:e.className},o().createElement(g,h({},e,{minHeight:a,minWidth:r,enableCellAutoFocus:!1})))})),changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const Y=Z(X)},940721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(45697),s=r.n(a),n=r(753370);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends n.editors.SimpleTextEditor{componentDidMount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}componentWillUnmount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}}o(l,"propTypes",{onTemporaryChanges:s().func}),o(l,"defaultProps",{onTemporaryChanges:()=>{}});const i=l},703476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var a=r(124852),s=r.n(a),n=r(45697),o=r.n(n),l=r(940721),i=r(727437),u=r(867076);const p=(0,u.compose)((0,u.withStateHandlers)((e=>({open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return{...e,selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,currentPage:1,isToggled:!1,open:!0}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open})}))((e=>{let{toggle:t,select:r,focus:a,change:n,value:o,busy:l,data:u,loading:p=!1,filter:c,open:d}=e;return s().createElement(i.Z,{pagination:{paginated:!1},onFocus:a,onToggle:t,onChange:n,onSelect:r,selectedValue:o,dropUp:!1,busy:l,data:u,open:d,loading:p,filter:c})})),c=e=>{let{oldValue:t,changedValue:r,data:a,allowEmpty:s}=e;return s&&""===r?"":-1!==a.indexOf(r)?r:t};var d=r(91175),h=r.n(d),g=r(727418),m=r.n(g);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f.apply(this,arguments)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends l.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValueByLabel=e=>{try{return this.props.values[this.props.labels.indexOf(e)]}catch(t){return e}},this.getValue=()=>{const e=super.getValue();return this.props.forceSelection?{[this.props.column.key]:c({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty})}:this.props.allowEmpty?e:{[this.props.column.key]:c({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty})}}}render(){const e=this;var t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,a){t.push({label:e.props.labels[a],value:r})})):t=this.props.values.map((e=>({label:e,value:e})));const r=m()({},{...this.props},{data:t,defaultOption:this.props.defaultOption||h()(this.props.values)});return s().createElement(p,f({},r,{filter:this.props.filter}))}}w(v,"propTypes",{column:o().object,dataType:o().string,defaultOption:o().string,forceSelection:o().bool,allowEmpty:o().bool,inputProps:o().object,isValid:o().func,onBlur:o().func,typeName:o().string,value:o().string,filter:o().string,values:o().array,labels:o().array}),w(v,"defaultProps",{isValid:()=>!0,dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0});const b=v},825079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(124852),s=r.n(a),n=r(45697),o=r.n(n),l=r(281763),i=r.n(l),u=r(481330);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p.apply(this,arguments)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={int:e=>parseInt(e,10),number:e=>parseFloat(e,10)};class h extends s().Component{constructor(e){var t,r;super(e),c(this,"state",{inputText:""}),c(this,"validateTextValue",(e=>{if(!d[this.props.dataType])return!1;try{const t=d[this.props.dataType](e);return this.validateNumberValue(t)}catch(e){return!1}})),c(this,"validateNumberValue",(e=>i()(e)&&!isNaN(e)&&(!i()(this.props.minValue)||this.props.minValue<=e)&&(!i()(this.props.maxValue)||this.props.maxValue>=e))),this.state={inputText:(null===(t=e.value)||void 0===t||null===(r=t.toString)||void 0===r?void 0:r.call(t))??""},this.inputRef=s().createRef()}componentDidMount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}componentWillUnmount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}getValue(){try{const e=d[this.props.dataType](this.state.inputText);return{[this.props.column.key]:this.validateNumberValue(e)?e:this.props.value}}catch(e){return{[this.props.column.key]:this.props.value}}}getInputNode(){return this.inputRef.current}render(){return s().createElement(u.Z,p({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:e=>{this.inputRef=e},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e,isValid:this.validateTextValue(e),validated:!0})}}))}}c(h,"propTypes",{value:o().oneOfType([o().string,o().number]),inputProps:o().object,dataType:o().string,minValue:o().number,maxValue:o().number,column:o().object,onTemporaryChanges:o().func}),c(h,"defaultProps",{dataType:"number",column:{}})},770321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r(124852),s=r.n(a),n=r(703476),o=r(825079),l=r(45697),i=r.n(l);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u.apply(this,arguments)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends s().Component{constructor(e){super(e),p(this,"state",{inputText:""}),p(this,"validateValue",(e=>!this.props.formatRegex||new RegExp(this.props.formatRegex).test(e))),this.state={inputText:e.value},this.inputRef=s().createRef()}componentDidMount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}componentWillUnmount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}getValue(){return{[this.props.column.key]:this.validateValue(this.state.inputText)?this.state.inputText:this.props.value}}getInputNode(){return this.inputRef.current}render(){return s().createElement("input",u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e.target.value,isValid:this.validateValue(e.target.value),validated:!0})}}))}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(this,arguments)}p(c,"propTypes",{value:i().string,inputProps:i().object,dataType:i().string,column:i().object,formatRegex:i().string,onTemporaryChanges:i().func}),p(c,"defaultProps",{dataType:"string",column:{}});const h={DropDownEditor:{string:e=>s().createElement(n.Z,d({dataType:"string"},e))},NumberEditor:{int:e=>s().createElement(o.Z,d({dataType:"int"},e)),number:e=>s().createElement(o.Z,d({dataType:"number"},e))},FormatEditor:{string:e=>s().createElement(c,d({dataType:"string"},e))}}},626824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(45697),s=r.n(a),n=r(753370),o=r.n(n),l=r(180307),i=r.n(l);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends(o()){constructor(e){super(e),u(this,"scrollListener",(()=>{this.props.isFocused||(this.scroll=this.canvas.scrollTop);const e=Math.ceil(this.canvas.clientHeight/this.props.rowHeight),t=Math.floor(this.canvas.scrollTop/this.props.rowHeight),r=t+e;this.props.onGridScroll&&this.props.onGridScroll({firstRowIdx:t,lastRowIdx:r})})),u(this,"setCanvasListener",(()=>{this.canvas=i().findDOMNode(this).querySelector(".react-grid-Canvas"),this.header=i().findDOMNode(this).querySelector(".react-grid-HeaderRow"),this.canvas&&this.canvas.addEventListener("scroll",this.scrollListener)}))}componentDidMount(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}componentWillUnmount(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}componentDidUpdate(e){const{virtualScroll:t,displayFilters:r,scrollToTopCounter:a}=this.props;e.displayFilters!==r&&this.onToggleFilter(),t&&(this.canvas&&this.canvas!==i().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),a!==e.scrollToTopCounter&&this.canvas?this.canvas.scrollTop=0:this.canvas&&this.header&&(this.canvas.scrollLeft=this.header.scrollLeft))}}u(p,"propTypes",{displayFilters:s().bool});const c=p},208232:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c});var a=r(701469),s=r.n(a),n=r(124852),o=r.n(n),l=r(867076),i=r(828878),u=r(727437);(0,l.setObservableConfig)(i.Z);const p=(0,l.mapPropsStreamWithConfig)(i.Z)((e=>e.take(1).switchMap((t=>t.autocompleteStreamFactory(e))).combineLatest(e,((e,t)=>({data:s()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((e=>({label:e,value:e}))):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy,dropUp:t.dropUp,attribute:t.column&&t.column.key,changeAttribute:t.changeAttribute})))))((e=>{let{open:t,toggle:r,select:a,focus:s,change:n,value:l,valuesCount:i,loadNextPage:p,loadPrevPage:c,maxFeatures:d,currentPage:h,busy:g,data:m,loading:f=!1,dropUp:w=!1,attribute:v,changeAttribute:b}=e;const y=Math.ceil(i/d);return o().createElement(u.Z,{pagination:{firstPage:1===h,lastPage:h===y,paginated:!0,loadPrevPage:c,loadNextPage:p},busy:g,dropUp:w,data:m,attribute:v,open:t,onFocus:s,onToggle:r,onChange:n,onSelect:a,onChangeAttribute:b,selectedValue:l,loading:f})})),c=(0,l.compose)((0,l.withStateHandlers)((e=>({delayDebounce:0,performFetch:!1,open:!1,openOnFocus:e.openOnFocus,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory,onChange:e.onChange})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return e.onChange&&e.onChange(r),{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,...e.openOnFocus?{open:!0}:{}}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open}),loadNextPage:e=>()=>({...e,currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),loadPrevPage:e=>()=>({...e,currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),changeAttribute:e=>t=>({...e,attribute:t})}))(p)},556382:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>y,Vj:()=>P});var a=r(472500),s=r.n(a),n=r(666654),o=r.n(n),l=r(91175),i=r.n(l),u=r(414293),p=r.n(u),c=r(727418),d=r.n(c),h=r(49977),g=r.n(h),m=r(940711),f=r(470509),w=r.n(f),v=r(69090);const b=e=>{let{searchText:t="",queriableAttributes:r=[],predicate:a="ILIKE"}=e;const s=i()(r);let n=`strToLowerCase(${s}) ${a} '%${t.toLowerCase()}%'`;return p()(s)?"":"("+n+")"},y=e=>e.distinctUntilChanged((function(e){let{value:t,currentPage:r,attribute:a}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(s.value!==t||s.currentPage!==r||s.attribute!==a)})).throttle((e=>g().Observable.timer(e.delayDebounce||0))).merge(e.debounce((e=>g().Observable.timer(e.delayDebounce||0)))).distinctUntilChanged().switchMap((e=>{if(e.performFetch){const t=(0,v.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return g().Observable.fromPromise(w().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((e=>({fetchedData:e.data,busy:!1})))).catch((()=>g().Observable.of({fetchedData:{values:[],size:0},busy:!1}))).startWith({busy:!0})}return g().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({}),P=e=>g().Observable.merge(e.distinctUntilChanged((function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e===t})).debounce((e=>g().Observable.timer(e.delayDebounce||0))),e.distinctUntilChanged((function(){let{filterProps:e,currentPage:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{filterProps:r,currentPage:a}=arguments.length>1?arguments[1]:void 0;return e===r&&t===a}))).switchMap((e=>{if(e.performFetch){let t=s().parse(e.url,!0),r="";(o()(t.pathname,"wfs")||o()(t.pathname,"wms")||o()(t.pathname,"ows")||o()(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;const a=s().format(d()({},t,{search:null,pathname:r}));let n=d()({},{url:a,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:b,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326",...t.query});return g().Observable.fromPromise(m.b.Utils.getService("wfs")(e.value,n).then((t=>({fetchedData:{values:t.features.map((e=>e.properties)),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1})))).catch((()=>g().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1}))).startWith({busy:!0})}return g().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})},56784:(e,t,r)=>{const a=r(313311);let s=r(727418)({},r(770321).Z);const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce(((r,a)=>{const s=new RegExp(e[a]);return r&&s.test(t[a])}),!0)},o=(e,t,r)=>{if(s[t]){if(s[t][e])return s[t][e](r);if(s[t].defaultEditor)return s[t].defaultEditor(r)}return null};e.exports={get:()=>s,set:e=>{s=e},register:e=>{let{name:t,editors:r}=e;r&&(s[t]=r)},remove:e=>{if(t=e,-1!==Object.keys(s).indexOf(t))try{return delete s[e],!0}catch(e){return!1}var t;return!1},clean:()=>{s={}},getCustomEditor:function(e){let{attribute:t,url:r,typeName:s}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{type:i,generalProps:u={},props:p}=arguments.length>2?arguments[2]:void 0;const c=a(l,(e=>n(e.regex,{attribute:t,url:r,typeName:s})));return c?o(i,c.editor,{...p,...u,...c.editorProps||{}}):null}}},69090:(e,t,r)=>{const{isFilterValid:a,toOGCFilterParts:s}=r(191332),n=r(883796),{and:o}=n({});e.exports={getWpsPayload:e=>{let{layerName:t,layerFilter:r,attribute:n,maxFeatures:l,startIndex:i,value:u}=e;const p=u?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+n+"</ogc:PropertyName>   <ogc:Literal>*"+u+"*</ogc:Literal></ogc:PropertyIsLike>":"",c=r&&!r.disabled&&a(r)?s(r,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+t+'">'+(p.length>0||c.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+o(...c,p)+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+n+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+n+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+l+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+i+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},659632:e=>{var t=function(e){return"string"==typeof e};e.exports=function(e,r,a){return Array.isArray(e)||(e=[e]),s=e.map((function(e){return t(e)?function(e,r,a){var s=0,n=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var o,l,i,u=r;(function(e){return e instanceof RegExp})(u)||(u=new RegExp("("+(o=u,l=/[\\^$.*+?()[\]{}|]/g,i=RegExp(l.source),(o&&i.test(o)?o.replace(l,"\\$&"):o)+")"),"gi"));for(var p=e.split(u),c=1,d=p.length;c<d;c+=2)void 0!==p[c]&&void 0!==p[c-1]?(n=p[c].length,s+=p[c-1].length,p[c]=a(p[c],c,s),s+=n):console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");return p}(e,r,a):e})),n=[],s.forEach((function(e){Array.isArray(e)?n=n.concat(e):n.push(e)})),n;var s,n}}}]);