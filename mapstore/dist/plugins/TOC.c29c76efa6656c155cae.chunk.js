(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[2362],{16075:(e,t,o)=>{"use strict";o.d(t,{H:()=>f,k:()=>L});var a=o(333101),r=o(467763),s=o(487758),l=o(470509),i=o.n(l),n=o(472500),p=o.n(n),c=o(727418),d=o.n(c),m=o(505055),h=o.n(m);const u=function(e,t){const o=p().parse(e,!0),a=p().format(d()({},o,{query:d()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},o.query)}));return i().get(a).then((e=>{let t;return h().parseString(e.data,{explicitArray:!1},((e,o)=>{t=o})),t}))};var y=o(399790),g=o(227361),T=o.n(g),v=o(988594);function f(e,t,o){return l=>r.ZP.describeLayer(e,t.name,o).then((o=>o&&"WFS"===o.owsType?s.v$(e,o.name).then((e=>(o.geometryType=(0,v.mI)(e),l((0,a.tV)(t.id,"id",{describeLayer:o,describeFeatureType:e}))))).catch((()=>l((0,a.tV)(t.id,"id",{describeLayer:o||{error:"no describe feature found"}})))):(o&&"WCS"===o.owsType&&u(e,o.name).then((e=>{let r=T()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");o.bands=r&&"string"==typeof r?["1"]:r.map(((e,t)=>t+1+"")),l((0,a.tV)(t.id,"id",{describeLayer:o,describeCoverage:e}))})).catch((()=>l((0,a.tV)(t.id,"id",{describeLayer:o||{error:"no describe coverage found"}})))),l((0,a.tV)(t.id,"id",{describeLayer:o||{error:"no describe Layer found"}}))))).catch((e=>l((0,a.tV)(t.id,"id",{describeLayer:{error:e.status}}))))}function L(e,t){const o=(0,y.Fh)(e);return s=>(s((0,a.tV)(e.id,"id",{capabilitiesLoading:!0})),r.ZP.getCapabilities(o,t).then((t=>{const o=r.ZP.parseLayerCapabilities(t,e);s(o?(0,a.tV)(e.id,"id",(0,y.IA)(o)):(0,a.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((t=>{s((0,a.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))})))}},289496:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const Bootstrap=__webpack_require__(630294),Message=__webpack_require__(804504).Z,React=__webpack_require__(124852),RenderTemplate=function(comp,props){let model=props.model;return eval(comp)},__WEBPACK_DEFAULT_EXPORT__=RenderTemplate},977873:(module,__unused_webpack_exports,__webpack_require__)=>{function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const React=__webpack_require__(124852),PropTypes=__webpack_require__(45697),isEqual=__webpack_require__(618446),{parseTemplate}=__webpack_require__(348660);class Template extends React.Component{constructor(){super(...arguments),_defineProperty(this,"renderContent",(()=>{let model=this.props.model,props=this.props;return eval(this.comp)})),_defineProperty(this,"parseTemplate",(e=>{parseTemplate(e,((e,t)=>{t?this.props.onError(t.message):(this.comp=e,this.forceUpdate())}))}))}UNSAFE_componentWillMount(){this.parseTemplate(this.props.template)}UNSAFE_componentWillReceiveProps(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}shouldComponentUpdate(e){return!isEqual(e,this.props)}render(){if(this.comp){let e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:()=>{}}),module.exports=Template},446937:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Fe});var a=o(45697),r=o.n(a),s=o(124852),l=o.n(s),i=o(171703),n=o(22222),p=o(867076),c=o(630294),d=o(333101),m=o(564864),h=o(16075),u=o(859518),y=o(504518),g=o(612912),T=o(744448),v=o(274363),f=o(707366),L=o(119008),E=o(975872),b=o(510644),x=o(665529),A=o(399790),w=o(835516),R=o(719648),S=o(804504),G=o(727418),C=o.n(G),D=o(829626),O=o.n(D),Z=o(513218),P=o.n(Z),M=o(91175),_=o.n(M),I=o(313311),N=o.n(I),k=o(59854),F=o.n(k),B=o(687753),j=o(492838),Y=o(546952),U=o(134479),q=o(101092),W=o(888307),H=o(603754);function V(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Q extends l().Component{constructor(){super(...arguments),V(this,"renderTitle",(()=>l().createElement(c.Row,null,l().createElement(c.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},l().createElement("div",{className:"mapstore-toc-head-title",title:this.props.title},l().createElement(c.Glyphicon,{glyph:"1-map"}),"  ",this.props.title))))),V(this,"renderFilter",(()=>l().createElement(c.Row,null,l().createElement(c.Col,{xs:12,className:"text-center"},l().createElement(H.Z,{onFocus:this.props.onClear,filterPlaceholder:this.props.filterPlaceholder,tooltipClear:this.props.filterTooltipClear,filterText:this.props.filterText,onFilter:this.props.onFilter}))))),V(this,"renderTools",(()=>l().createElement(c.Row,null,l().createElement(c.Col,{xs:12,className:"text-center"},this.props.toolbar))))}render(){const e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((e=>e)),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return l().createElement("div",{className:"mapstore-toc-head"+t},l().createElement(c.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}V(Q,"propTypes",{title:r().string,filterText:r().string,filterPlaceholder:r().oneOfType([r().object,r().string]),showTitle:r().bool,showFilter:r().oneOfType([r().bool,r().number]),showTools:r().bool,toolbar:r().object,onFilter:r().func,onClear:r().func,filterTooltipClear:r().oneOfType([r().object,r().string])}),V(Q,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:()=>{},onClear:()=>{},filterTooltipClear:"Clear"});const z=Q;var $=o(159398),K=o(401811),J=o(913460),X=o(893379),ee=o.n(X),te=o(505386);ee()(te.Z,{insert:"head",singleton:!1}),te.Z.locals;var oe=o(701469),ae=o.n(oe),re=o(747037),se=o.n(re),le=o(977873),ie=o.n(le),ne=o(590504),pe=o(466737),ce=o(289496),de=o(3674),me=o.n(de),he=o(473071),ue=o(959956),ye=o(23888);function ge(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Te extends l().Component{constructor(e){var t;super(e),t=this,ge(this,"renderMetadata",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=(e,o)=>{t.setState({collapsed:{...t.state.collapsed,[e]:o}})},s=(e,o)=>l().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,l().createElement(ye.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:()=>r(o,!t.state.collapsed[o])},l().createElement(c.Glyphicon,{glyph:t.state.collapsed[o]?"plus":"minus"}))),i=(e,t)=>`${e}@item_${t}`,n=me()(e).filter((e=>"references"!==e)).map((o=>{const r=e[o],n=`${a}.${o}`;let p;const c=`toc.layerMetadata.${o}`,d=(0,R.S$)(t.context.messages,c)===c?l().createElement(S.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:o}}):l().createElement(S.Z,{msgId:c}),m=e=>l().createElement("tr",null,l().createElement("td",null,d),l().createElement("td",null,e));if(ae()(r))if(r.length){const e=`toc.layerMetadata.itemTitles.${o}`,a=(0,R.S$)(t.context.messages,e),c=a===e?(0,R.S$)(t.context.messages,"toc.layerMetadata.itemTitles.default"):a,u=r.map(((e,o)=>{const a=i(n,o);return P()(e)?t.renderMetadata(e,r.length>1?s(l().createElement("h4",null,`${c} #${o+1}`),a):null,a):l().createElement("li",{key:o},e)}));p=P()(r[0])?(h=l().createElement("div",null,s(l().createElement("h4",null,d),n),t.state.collapsed[n]?null:l().createElement("div",null,u)),l().createElement("tr",null,l().createElement("td",{colSpan:"2"},h))):m(l().createElement("ul",null,u))}else p=null;else if(se()(r)){const e=(0,he.v)(r),t=(0,ue.K2)(r);p=m(e||t?l().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t?r:`mailto:${r}`},r):r)}var h;return p})).filter((e=>!!e));return l().createElement("div",{style:a?{padding:"8px"}:{}},o,t.state.collapsed[a]?null:l().createElement(c.Table,null,l().createElement("tbody",null,n)))})),this.state={collapsed:{}}}renderEmpty(){return l().createElement("div",null,l().createElement(S.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}render(){const e=this.props.model;return me()(e).length?l().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}ge(Te,"propTypes",{model:r().object}),ge(Te,"contextTypes",{messages:r().object}),ge(Te,"defaultProps",{model:{}});const ve=Te;function fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Le extends l().Component{constructor(){super(...arguments),fe(this,"onDelete",(()=>{this.props.hideLayerMetadata()})),fe(this,"onClose",(()=>{this.props.hideLayerMetadata()})),fe(this,"getTemplate",(()=>{const e=this.props.metadataTemplate||ve;if(ae()(e)||se()(e)){const t=ae()(e)?e.join("\n"):e;return l().createElement(ie(),{model:this.props.layerMetadata.metadataRecord,template:t,renderContent:ce.Z})}const t=e;return l().createElement(t,{model:this.props.layerMetadata.metadataRecord})})),fe(this,"renderBodyTemplate",(()=>this.props.layerMetadata.maskLoading?null:this.getTemplate()))}render(){const e=l().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?l().createElement(pe.Z,null,l().createElement(ne.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},l().createElement("span",{role:"header"},l().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),l().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?l().createElement(c.Glyphicon,{glyph:this.props.closeGlyph}):l().createElement("span",null,"×"))),l().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}fe(Le,"propTypes",{id:r().string,layerMetadata:r().object,metadataTemplate:r().oneOfType([r().string,r().array,r().object,r().func]),hideLayerMetadata:r().func,closeGlyph:r().string,panelStyle:r().object,panelClassName:r().string,maskLoading:r().bool,layerMetadataPanelTitle:r().oneOfType([r().string,r().object])}),fe(Le,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const Ee=Le;function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},be.apply(this,arguments)}function xe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Ae extends l().Component{constructor(){super(...arguments),xe(this,"state",{showDeleteDialog:!1}),xe(this,"isNestedGroup",(()=>{const e=this.props.selectedGroups.map((e=>e.id.split(".")));return _()(e.reduce(((e,t)=>e[0]===t[0]?t:[!1]),e[0]))})),xe(this,"isLoading",(()=>_()(this.props.selectedLayers.filter((e=>e.loading))))),xe(this,"getStatus",(()=>{const{selectedLayers:e,selectedGroups:t}=this.props,o=this.isNestedGroup();let a=0===e.length&0===t.length?"DESELECT":"";return a=1===e.length&0===t.length?"LAYER":a,a=o?"GROUP":a,a=e.length>1&0===t.length?"LAYERS":a,a=t.length>1&&!o?"GROUPS":a,a=this.props.selectedLayers.length>0&&this.props.selectedLayers.filter((e=>"Error"===e.loadingError)).length===this.props.selectedLayers.length?`${a}_LOAD_ERROR`:a,a})),xe(this,"getSelectedGroup",(()=>this.props.selectedGroups.length>0&&this.props.selectedGroups[this.props.selectedGroups.length-1])),xe(this,"getSelectedNodeDepth",(()=>"DESELECT"===this.getStatus()?0:this.getSelectedGroup().id.split(".").length+1)),xe(this,"addLayer",(()=>{const e=this.getSelectedGroup();this.props.onToolsActions.onAddLayer(e&&e.id)})),xe(this,"addGroup",(()=>{const e=this.getSelectedGroup();this.props.onToolsActions.onAddGroup(e&&e.id)})),xe(this,"browseData",(()=>{this.props.onToolsActions.onBrowseData({url:this.props.selectedLayers[0].search.url||this.props.selectedLayers[0].url,name:this.props.selectedLayers[0].name,id:this.props.selectedLayers[0].id})})),xe(this,"download",(()=>{var e;this.props.onToolsActions.onDownload({url:(null===(e=this.props.selectedLayers[0].search)||void 0===e?void 0:e.url)||this.props.selectedLayers[0].url,name:this.props.selectedLayers[0].name,id:this.props.selectedLayers[0].id})})),xe(this,"checkBbox",(()=>{const e=this.props.selectedLayers.filter((e=>e.bbox)).map((e=>e.bbox)),t=e.length>0?e.reduce(((e,t)=>e.crs===t.crs?e:{crs:"differentCRS"})):{crs:"differentCRS"};return!!_()(e)&&"differentCRS"!==t.crs&&t.crs})),xe(this,"zoomTo",(()=>{const e=this.props.selectedLayers.filter((e=>e.bbox)).map((e=>e.bbox)),t=e.length>1?e.reduce(((e,t)=>({bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs})),e[0]):e[0];this.props.onToolsActions.onZoom(t.bounds,t.crs)})),xe(this,"showSettings",(e=>{this.props.settings.expanded?this.props.onToolsActions.onHideSettings():"LAYER"===e||"LAYER_LOAD_ERROR"===e?this.props.onToolsActions.onSettings(this.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==this.props.selectedLayers[0].opacity?this.props.selectedLayers[0].opacity:1)}):"GROUP"===e&&this.props.onToolsActions.onSettings(this.props.selectedGroups[this.props.selectedGroups.length-1].id,"groups",{})})),xe(this,"showMetadata",(()=>{this.props.layerMetadata.expanded?this.props.onToolsActions.onHideLayerMetadata():this.props.onToolsActions.onGetMetadataRecord(this.props.options.metadataOptions)})),xe(this,"removeNodes",(()=>{this.props.selectedLayers.forEach((e=>{this.props.onToolsActions.onRemove(e.id,"layers")})),this.props.selectedGroups.forEach((e=>{this.props.onToolsActions.onRemove(e.id,"groups")})),this.props.onToolsActions.onClear(),this.closeDeleteDialog()})),xe(this,"reload",(()=>{this.props.selectedLayers.forEach((e=>{this.props.onToolsActions.onShow(e.id,{visibility:!0}),this.props.onToolsActions.onReload(e.id)}))})),xe(this,"closeDeleteDialog",(()=>{this.setState({showDeleteDialog:!1})})),xe(this,"displayDeleteDialog",(()=>{this.setState({showDeleteDialog:!0})}))}render(){const e=this.getStatus(),t=this.checkBbox(),o=t&&$.default.defs(t),a=l().createElement(Ee,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?l().createElement(c.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===e?l().createElement(K.Z,{key:"layerInfo",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},l().createElement(ye.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},l().createElement(c.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==e&&"GROUP"!==e?null:l().createElement(K.Z,{key:"addLayer",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===e?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},l().createElement(ye.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},l().createElement(c.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===e||"GROUP"===e)&&this.getSelectedNodeDepth()<=this.props.maxDepth?l().createElement(K.Z,{key:"addGroup",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===e?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},l().createElement(ye.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},l().createElement(c.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===e||"GROUP"===e||"LAYERS"===e||"GROUPS"===e)&&t?l().createElement(K.Z,{key:"zoomTo",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-zoomTo"},o?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:l().createElement(S.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:t||" "}}))},l().createElement(ye.Z,{bsStyle:"primary",className:"square-button-md",style:o?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:o?this.zoomTo:()=>{}},l().createElement(c.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==e&&"GROUP"!==e&&"LAYER_LOAD_ERROR"!==e||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"settings",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===e?"LAYER":e])},l().createElement(ye.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:()=>{this.showSettings(e)}},l().createElement(c.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==e&&"LAYER_LOAD_ERROR"!==e||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"queryPanel",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},l().createElement(ye.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},l().createElement(c.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==e||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"featuresGrid",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},l().createElement(ye.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},l().createElement(c.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==e&&"LAYERS"!==e&&"LAYER_LOAD_ERROR"!==e&&"LAYERS_LOAD_ERROR"!==e)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==e&&"GROUPS"!==e&&"GROUP_LOAD_ERROR"!==e&&"GROUPS_LOAD_ERROR"!==e)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"removeNode",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},l().createElement(ye.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},l().createElement(c.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===e||"LAYERS_LOAD_ERROR"===e?l().createElement(K.Z,{key:"reload",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},l().createElement(ye.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},l().createElement(c.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==e||1!==this.props.selectedLayers.length||!this.props.selectedLayers[0].search||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"widgets",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},l().createElement(ye.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},l().createElement(c.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==e||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:l().createElement(K.Z,{key:"downloadTool",placement:"top",overlay:l().createElement(c.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},l().createElement(ye.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},l().createElement(c.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==e||this.props.settings.expanded||this.props.layerdownload.expanded?null:l().createElement(K.Z,{key:"layerMetadata",placement:"top",overlay:l().createElement(c.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},l().createElement(ye.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:()=>this.showMetadata()},l().createElement(c.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((t=>{let{selector:o=(()=>!0)}=t;return o({...this.props,status:e})})).map((t=>{let{Component:o}=t;return l().createElement(o,be({},this.props,{status:e}))})),l().createElement(J.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),a):null}}xe(Ae,"propTypes",{groups:r().array,items:r().array,layers:r().array,selectedLayers:r().array,generalInfoFormat:r().string,selectedGroups:r().array,onToolsActions:r().object,text:r().object,activateTool:r().object,options:r().object,style:r().object,settings:r().object,layerMetadata:r().object,layerdownload:r().object,maxDepth:r().number,metadataTemplate:r().oneOfType([r().string,r().array,r().object,r().func])}),xe(Ae,"defaultProps",{groups:[],items:[],layers:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:()=>{},onNewWidget:()=>{},onBrowseData:()=>{},onQueryBuilder:()=>{},onUpdate:()=>{},onRemove:()=>{},onClear:()=>{},onSettings:()=>{},onUpdateSettings:()=>{},onRetrieveLayerData:()=>{},onHideSettings:()=>{},onReload:()=>{},onAddLayer:()=>{},onAddGroup:()=>{},onDownload:()=>{},onGetMetadataRecord:()=>{},onHideLayerMetadata:()=>{},onShow:()=>{},onLayerInfo:()=>{}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const we=Ae;var Re=o(900226),Se=o(22387),Ge=o(231010),Ce=o(964091);function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},De.apply(this,arguments)}function Oe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const Ze=(e,t)=>e.reduce(((e,o)=>{let a=C()({},o);return a.nodes&&(a=C()({},a,{nodes:Ze(a.nodes,t)})),t.forEach((e=>{a=e.func(a)?C()({},a,e.options):C()({},a)})),e.push(a),e}),[]),Pe=(e,t,o)=>-1!==((P()(e.title)?e.title[o]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase()),Me=(0,n.P1)([e=>e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active,g.Bt,g.jN,T.yn,g.yj,g.lI,v.Od,f.Pz,f.KV,g.NP,g.wA,g.l2,v.Zs,U.JF,L.PJ,E.us,q.c0,b.np,x.wk],((e,t,o,a,r,s,l,i,n,p,c,d,m,h,u,y,g,T,v)=>({enabled:e,groups:t,settings:o,swipeSettings:a,layerMetadata:r,layerdownload:s,currentZoomLvl:l&&l.zoom,scales:(0,w.getScales)(l&&l.projection||"EPSG:3857",l&&l.mapOptions&&l.mapOptions.view&&l.mapOptions.view.DPI||null),currentLocale:i,currentLocaleLanguage:n,selectedNodes:p,filterText:c,generalInfoFormat:y,layers:d,selectedLayers:d.filter((e=>_()(p.filter((t=>t===e.id))))),noFilterResults:0===d.filter((e=>Pe(e,c,i))).length,updatableLayersCount:d.filter((e=>"background"!==e.group&&("wms"===e.type||"wmts"===e.type))).length,selectedGroups:p.map((e=>(0,A.Mk)(t,e))).filter((e=>e&&e.nodes)),mapName:m,filteredGroups:Ze(t,[{options:{showComponent:!0},func:()=>!c},{options:{loadingError:!0},func:e=>_()((e.nodes||[]).filter((e=>e.loadingError&&"Warning"!==e.loadingError)))},{options:{expanded:!0,showComponent:!0},func:e=>c&&_()((e.nodes||[]).filter((t=>Pe(t,c,i)||t.nodes&&_()(e.nodes.filter((e=>e.showComponent))))))},{options:{showComponent:!1},func:e=>_()((e.nodes||[]).filter((e=>e.hidden)))&&1===e.nodes.length},{options:{exclusiveMapType:!0},func:e=>"3dtiles"===e.type&&!g}]),catalogActive:h,activateWidgetTool:u,user:T,isLocalizedLayerStylesEnabled:v})));class _e extends l().Component{constructor(){super(...arguments),Oe(this,"getNoBackgroundLayers",(e=>"background"!==e.name)),Oe(this,"getDefaultGroup",(()=>{const e=this.props.groupNodeComponent||Re.Z;return l().createElement(e,De({onSort:!this.props.filterText&&this.props.activateSortLayer?this.props.onSort:null},this.props.groupOptions,{titleTooltip:this.props.activateTitleTooltip,propertiesChangeHandler:this.props.groupPropertiesChangeHandler,onToggle:this.props.onToggleGroup,style:this.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:this.props.visibilityCheckType,currentLocale:this.props.currentLocale,selectedNodes:this.props.selectedNodes,onSelect:this.props.activateToolsContainer?this.props.onSelectNode:null}))})),Oe(this,"getDefaultLayer",(()=>{const e=this.props.layerNodeComponent||Se.Z,t=(this.props.resolutions||(0,w.getResolutions)())[F()(this.props.currentZoomLvl)];return l().createElement(e,De({},this.props.layerOptions,{titleTooltip:this.props.activateTitleTooltip,showFullTitleOnExpand:this.props.showFullTitleOnExpand,onToggle:this.props.onToggleLayer,activateOpacityTool:this.props.activateOpacityTool,onContextMenu:this.props.onContextMenu,propertiesChangeHandler:this.props.layerPropertiesChangeHandler,onSelect:this.props.activateToolsContainer?this.props.onSelectNode:null,visibilityCheckType:this.props.visibilityCheckType,activateLegendTool:this.props.activateLegendTool,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,currentLocale:this.props.currentLocale,selectedNodes:this.props.selectedNodes,filterText:this.props.filterText,onUpdateNode:this.props.updateNode,hideOpacityTooltip:this.props.hideOpacityTooltip,language:this.props.isLocalizedLayerStylesEnabled?this.props.currentLocaleLanguage:null,resolution:t}))})),Oe(this,"renderTOC",(()=>{const e=this.getDefaultGroup(),t=this.getDefaultLayer(),o=[this.props.activateToolsContainer,this.props.activateFilterLayer,this.props.activateMapTitle].filter((e=>e)),a=o.length>0?" toc-body-sections-"+o.length:" toc-body-sections";return l().createElement("div",null,l().createElement(z,{title:this.props.mapName,showTitle:this.props.activateMapTitle,showFilter:this.props.activateFilterLayer&&(this.props.groups.filter((e=>(e.nodes||[]).length))||[]).length,showTools:this.props.activateToolsContainer,onClear:()=>{this.props.onSelectNode()},onFilter:this.props.onFilter,filterTooltipClear:l().createElement(S.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,R.S$)(this.context.messages,"toc.filterPlaceholder"),filterText:this.props.filterText,toolbar:l().createElement(we,{items:this.props.items.filter((e=>{let{target:t}=e;return"toolbar"===t})),groups:this.props.groups,layers:this.props.layers,selectedLayers:this.props.selectedLayers,selectedGroups:this.props.selectedGroups,generalInfoFormat:this.props.generalInfoFormat,settings:this.props.settings,swipeSettings:this.props.swipeSettings,layerMetadata:this.props.layerMetadata,layerdownload:this.props.layerdownload,metadataTemplate:this.props.metadataTemplate,maxDepth:this.props.maxDepth,activateTool:{activateToolsContainer:this.props.activateToolsContainer,activateRemoveLayer:this.props.activateRemoveLayer,activateRemoveGroup:this.props.activateRemoveGroup,activateZoomTool:this.props.activateZoomTool,activateQueryTool:this.props.activateQueryTool,activateDownloadTool:this.props.activateDownloadTool,activateSettingsTool:this.props.activateSettingsTool,activateAddLayer:this.props.activateAddLayerButton&&!this.props.catalogActive,activateAddGroup:this.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:this.props.activateMetedataTool,activateWidgetTool:this.props.activateWidgetTool,activateLayerFilterTool:this.props.activateLayerFilterTool,activateLayerInfoTool:this.props.updatableLayersCount>0&&this.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:this.props.metadataOptions,settingsOptions:this.props.settingsOptions},style:{chartStyle:this.props.chartStyle},text:{settingsText:l().createElement(S.Z,{msgId:"layerProperties.windowTitle"}),opacityText:l().createElement(S.Z,{msgId:"opacity"}),elevationText:l().createElement(S.Z,{msgId:"elevation"}),saveText:l().createElement(S.Z,{msgId:"save"}),closeText:l().createElement(S.Z,{msgId:"close"}),confirmDeleteText:l().createElement(S.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:l().createElement(S.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:l().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:l().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:l().createElement(S.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:l().createElement(S.Z,{msgId:"cancel"}),addLayer:l().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerTooltip:l().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:l().createElement(S.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:l().createElement(S.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:l().createElement(S.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:l().createElement(S.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:l().createElement(S.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:l().createElement(S.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:l().createElement(S.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:l().createElement(S.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:l().createElement(S.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:l().createElement(S.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:l().createElement(S.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:l().createElement(S.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:l().createElement(S.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:l().createElement(S.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:l().createElement(S.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:l().createElement(S.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:l().createElement(S.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:l().createElement(S.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:l().createElement(S.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:this.props.onZoomToExtent,onNewWidget:this.props.onNewWidget,onBrowseData:this.props.onBrowseData,onQueryBuilder:this.props.onQueryBuilder,onDownload:this.props.onDownload,onUpdate:this.props.updateNode,onRemove:this.props.removeNode,onClear:this.props.onSelectNode,onSettings:this.props.onSettings,onUpdateSettings:this.props.updateSettings,onRetrieveLayerData:this.props.retrieveLayerData,onHideSettings:this.props.hideSettings,onReload:this.props.refreshLayerVersion,onAddLayer:this.props.onAddLayer,onAddGroup:this.props.onAddGroup,onGetMetadataRecord:this.props.onGetMetadataRecord,onHideLayerMetadata:this.props.hideLayerMetadata,onShow:this.props.layerPropertiesChangeHandler,onLayerInfo:this.props.onLayerInfo}})}),l().createElement("div",{className:"mapstore-toc"+a},this.props.noFilterResults&&this.props.filterText?l().createElement("div",null,l().createElement("div",{className:"toc-filter-no-results"},l().createElement(S.Z,{msgId:"toc.noFilteredResults"}))):l().createElement(W.Z,{onError:this.props.onError,onSort:!this.props.filterText&&this.props.activateSortLayer?this.props.onSort:null,filter:this.getNoBackgroundLayers,nodes:this.props.filteredGroups},l().createElement(Ge.Z,{groupElement:e,layerElement:t}))))}))}render(){return this.props.groups?this.renderTOC():l().createElement("div",null)}}Oe(_e,"propTypes",{id:r().number,items:r().array,layers:r().array,buttonContent:r().node,groups:r().array,settings:r().object,swipeSettings:r().object,layerMetadata:r().object,layerdownload:r().object,metadataTemplate:r().oneOfType([r().string,r().array,r().object,r().func]),refreshMapEnabled:r().bool,groupStyle:r().object,groupPropertiesChangeHandler:r().func,layerPropertiesChangeHandler:r().func,onToggleGroup:r().func,onToggleLayer:r().func,onContextMenu:r().func,onBrowseData:r().func,onQueryBuilder:r().func,onDownload:r().func,onSelectNode:r().func,selectedNodes:r().array,onZoomToExtent:r().func,retrieveLayerData:r().func,onSort:r().func,onSettings:r().func,onRefreshLayer:r().func,onNewWidget:r().func,hideSettings:r().func,updateSettings:r().func,updateNode:r().func,removeNode:r().func,activateTitleTooltip:r().bool,showFullTitleOnExpand:r().bool,activateOpacityTool:r().bool,activateSortLayer:r().bool,activateFilterLayer:r().bool,activateMapTitle:r().bool,activateToolsContainer:r().bool,activateRemoveLayer:r().bool,activateRemoveGroup:r().bool,activateLegendTool:r().bool,activateZoomTool:r().bool,activateQueryTool:r().bool,activateDownloadTool:r().bool,activateSettingsTool:r().bool,activateMetedataTool:r().bool,activateWidgetTool:r().bool,activateLayerInfoTool:r().bool,maxDepth:r().number,visibilityCheckType:r().string,settingsOptions:r().object,chartStyle:r().object,currentZoomLvl:r().number,scales:r().array,layerOptions:r().object,metadataOptions:r().object,spatialOperations:r().array,spatialMethodOptions:r().array,groupOptions:r().object,currentLocale:r().string,currentLocaleLanguage:r().string,onFilter:r().func,filterText:r().string,generalInfoFormat:r().string,selectedLayers:r().array,selectedGroups:r().array,mapName:r().string,filteredGroups:r().array,noFilterResults:r().bool,onAddLayer:r().func,onAddGroup:r().func,onError:r().func,onGetMetadataRecord:r().func,hideLayerMetadata:r().func,activateAddLayerButton:r().bool,activateAddGroupButton:r().bool,activateLayerFilterTool:r().bool,catalogActive:r().bool,refreshLayerVersion:r().func,hideOpacityTooltip:r().bool,layerNodeComponent:r().func,groupNodeComponent:r().func,isLocalizedLayerStylesEnabled:r().bool,onLayerInfo:r().func,onSetSwipeActive:r().func,updatableLayersCount:r().number,onSetSwipeMode:r().func,resolutions:r().func}),Oe(_e,"contextTypes",{messages:r().object}),Oe(_e,"defaultProps",{items:[],layers:[],groupPropertiesChangeHandler:()=>{},layerPropertiesChangeHandler:()=>{},retrieveLayerData:()=>{},onToggleGroup:()=>{},onToggleLayer:()=>{},onContextMenu:()=>{},onToggleQuery:()=>{},onZoomToExtent:()=>{},onSettings:()=>{},onRefreshLayer:()=>{},onNewWidget:()=>{},updateNode:()=>{},removeNode:()=>{},onSelectNode:()=>{},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:()=>{},onAddGroup:()=>{},onError:()=>{},onGetMetadataRecord:()=>{},hideLayerMetadata:()=>{},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:()=>{},metadataTemplate:null,onLayerInfo:()=>{},onSetSwipeMode:()=>{}});const Ie=(0,p.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(e=>{const{addLayersPermissions:t=!0,removeLayersPermissions:o=!0,sortingPermissions:a=!0,addGroupsPermissions:r=!0,removeGroupsPermissions:s=!0,layerInfoToolPermissions:l=!1,activateAddLayerButton:i,activateRemoveLayer:n,activateSortLayer:p,activateAddGroupButton:c,activateRemoveGroup:d,activateLayerInfoTool:m,user:h}=e,u=(e,t)=>{const o=h&&"ADMIN"===h.role||!1;return!(!e&&!o)&&t};return{activateAddLayerButton:u(t,i),activateRemoveLayer:u(o,n),activateSortLayer:u(a,p),activateAddGroupButton:u(r,c),activateRemoveGroup:u(s,d),activateLayerInfoTool:u(l,m)}})),Ne=(0,p.branch)((e=>{let{checkPlugins:t=!0}=e;return t}),(0,p.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(e=>{let{items:t=[],activateAddLayerButton:o=!0,activateAddGroupButton:a=!0,activateQueryTool:r=!0,activateSettingsTool:s=!0,activateLayerFilterTool:l=!0,activateWidgetTool:i=!0,activateLayerInfoTool:n=!0,activateDownloadTool:p=!0}=e;return{activateAddLayerButton:o&&!!N()(t,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!N()(t,{name:"AddGroup"})||!1,activateSettingsTool:s&&!!N()(t,{name:"TOCItemsSettings"})||!1,activateQueryTool:r&&!!N()(t,{name:"FeatureEditor"})||!1,activateLayerFilterTool:l&&!!N()(t,{name:"FilterLayer"})||!1,activateWidgetTool:i&&!!N()(t,{name:"WidgetBuilder"})&&!!N()(t,{name:"Widgets"}),activateLayerInfoTool:n&&!!N()(t,{name:"LayerInfo"})||!1,activateDownloadTool:p&&!!N()(t,{name:"LayerDownload"})||!1}}))),ke=(0,i.connect)(Me,{groupPropertiesChangeHandler:d.WO,layerPropertiesChangeHandler:d.He,retrieveLayerData:h.k,onToggleGroup:(0,A.$0)("groups",d.bh),onToggleLayer:(0,A.$0)("layers",d.bh),onContextMenu:d.pV,onBrowseData:d.Qr,onQueryBuilder:m.Zq,onDownload:d.LR,onSort:d.Dv,onSettings:d.RP,onZoomToExtent:u.Px,hideSettings:d.sF,updateSettings:d.VP,updateNode:d.tV,removeNode:d.ZF,onSelectNode:d.UG,onFilter:d.F5,onAddLayer:B.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:B.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:Y.ky,onError:y.vU,hideLayerMetadata:d.Jh,onNewWidget:()=>(0,j.A4)(),refreshLayerVersion:d.ct,onLayerInfo:B.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,p.compose)(Ie,Ne)(_e)),Fe={TOCPlugin:C()(ke,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:l().createElement(S.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:l().createElement(c.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:l().createElement("img",{src:O()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:o(13316).Z,query:o(698183).Z},epics:o(23939).Z(Ce.Z)}},744448:(e,t,o)=>{"use strict";o.d(t,{yn:()=>a,IY:()=>r,wQ:()=>s});const a=e=>e.swipe&&e.swipe||{active:!1},r=e=>{var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},s=e=>{var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}}},505386:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var a=o(923645),r=o.n(a)()((function(e){return e[1]}));r.push([e.id,"\n.ms2 #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.ms2 .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .ms2 .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .ms2 .portal-dialog {\n        width: 100%;\n    }\n}\n",""]);const s=r},829626:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="}}]);