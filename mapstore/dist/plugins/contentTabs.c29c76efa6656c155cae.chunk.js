(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[3655],{956611:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(747037),o=s.n(n),l=s(45697),r=s.n(l),a=s(124852),i=s.n(a),p=s(630294),c=s(719648);function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends i().Component{constructor(){super(...arguments),d(this,"onMouseOver",(()=>{const e=o()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return i().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}d(h,"propTypes",{id:r().string,helpText:r().oneOfType([r().string,r().element]),isVisible:r().bool,changeHelpText:r().func,changeHelpwinVisibility:r().func,className:r().string}),d(h,"contextTypes",{messages:r().object}),d(h,"defaultProps",{helpText:"",isVisible:!1});const m=h},12824:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z});var n=s(727418),o=s.n(n),l=s(45697),r=s.n(l),a=s(124852),i=s.n(a),p=s(630294),c=s(171703),d=s(22222),h=s(930363),m=s(804504),u=s(49977),g=s.n(u),y=s(3674),b=s.n(y),f=s(630998),T=s.n(f),v=s(291966),S=s.n(v),E=s(371714),C=s(933468),x=s(237490),N=s(372492);const k={updateMapsDashboardTabs:(e,t)=>{let{getState:s=(()=>{})}=t;return e.ofType(E.qy).switchMap((()=>g().Observable.forkJoin(e.ofType(E.IL).take(1),e.ofType(C.tv).take(1),e.ofType(x.En).take(1),e.ofType(N.gx).take(1)).switchMap((e=>{const t={maps:e[0].maps,dashboards:e[1],geostories:e[2]},{contenttabs:n={}}=s()||{},{selected:o,hiddenTabs:l={}}=n;if(t[o]&&0===t[o].totalCount){const e=b()(t).filter((e=>(t[e]||{}).totalCount>0&&!l[e]))[0];if(e)return g().Observable.of((0,h.NS)(e))}return g().Observable.empty()}))))},updateSelectedOnHiddenTabs:(e,t)=>e.ofType(h.QH).switchMap((()=>{const e=t.getState(),{selected:s,hiddenTabs:n={}}=e.contenttabs,o=b()(n).filter((e=>!!n[e]));return T()(o,(e=>e===s))>-1?g().Observable.of((0,h.NS)(S()(["dashboards","geostories","maps","contexts"],o)[0])):g().Observable.empty()}))};var P=s(638510);function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=(0,d.P1)((e=>e&&e.contenttabs&&e.contenttabs.selected),(e=>e&&e.contenttabs&&e.contenttabs.hiddenTabs),((e,t)=>({selected:e,hiddenTabs:t}))),w=e=>{let{item:t={},index:s}=e;return i().createElement("span",null,t.title||`Tab ${s}`)};class H extends i().Component{constructor(){super(...arguments),O(this,"handleSelect",(()=>{}))}render(){return i().createElement(p.Grid,{id:this.props.id},i().createElement(p.Row,null,i().createElement(p.Col,null,i().createElement("h2",null,i().createElement(m.Z,{msgId:"resources.contents.title"})),i().createElement(P.Z,{id:"content-tabs-container",style:this.props.style,className:this.props.className,toolCfg:{title:""},container:e=>i().createElement("div",e,i().createElement("div",{style:{marginTop:"10px"}},i().createElement(p.Nav,{bsStyle:"tabs",activeKey:"1",onSelect:e=>this.props.onSelect(e)},[...this.props.items].filter((e=>!this.props.hiddenTabs[e.name])).sort(((e,t)=>e.position-t.position)).map(((e,t)=>{let{TitleComponent:s=w,...n}=e;return i().createElement(p.NavItem,{key:n.key||t,active:(n.key||t)===this.props.selected,eventKey:n.key||t},i().createElement(s,{index:t,item:n}))})))),e.children),toolStyle:"primary",stateSelector:"contentTabs",activeStyle:"default",tools:[...this.props.items].sort(((e,t)=>e.position-t.position)).filter(((e,t)=>{let{key:s}=e;return(s||t)===this.props.selected})),panels:[]}))))}}O(H,"propTypes",{selected:r().oneOfType([r().number,r().string]),className:r().string,style:r().object,items:r().array,hiddenTabs:r().object,id:r().string,onSelect:r().func}),O(H,"defaultProps",{selected:0,items:[],hiddenTabs:{},className:"content-tabs",style:{},id:"content-tabs",onSelect:()=>{}});const Z={ContentTabsPlugin:o()((0,c.connect)(j,{onSelect:h.NS})(H),{NavMenu:{position:2,label:i().createElement(m.Z,{msgId:"resources.contents.title"}),linkId:"#content-tabs",glyph:"dashboard"}}),reducers:{contenttabs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selected:"maps"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.Qp:return{...e,selected:t.id||"maps"};case h.QH:return{...e,hiddenTabs:{...e.hiddenTabs||{},...t.tabs}};default:return e}}},epics:k}},638510:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var n=s(353131),o=s.n(n),l=s(727418),r=s.n(l),a=s(45697),i=s.n(a),p=s(124852),c=s.n(p),d=s(630294),h=s(171703),m=s(12838),u=s(687753),g=s(723813),y=s(956611),b=s(804504),f=s(401811),T=s(23888);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},v.apply(this,arguments)}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=(0,h.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:g.n2,changeHelpwinVisibility:g.SA})(y.Z);class C extends c().Component{constructor(){super(...arguments),S(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),S(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const s={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),s[this.props.eventSelector]=u.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),s[this.props.eventSelector]=u.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(s[this.props.eventSelector]=o()(e.action,this.context),t=e.selector||t),(0,h.connect)(t,s,((e,t,s)=>this.mergeHandlers({...s,...e},t)))(this.props.tool)})),S(this,"renderTool",((e,t)=>{if(e.element)return e.element;const s=e.help?c().createElement(E,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),n=e.tooltip?c().createElement(b.Z,{msgId:e.tooltip}):null,o=this.getTool(e),l=this.getToolConfig(e),r=e.childTools||[];return this.addTooltip(c().createElement(o,v({},l,{pluginCfg:e.cfg,tooltip:n,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:s,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(d.Glyphicon,{glyph:e.cfg.glyph}):e.icon,s," ",e.text,r.length>0&&c().createElement(C,v({},e.innerProps,{mapType:this.props.mapType,tools:r,panels:e.childPanels}))),e)})),S(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),S(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,s=c().createElement(t,v({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),n=e.title?c().createElement(b.Z,{msgId:e.title}):null;return e.wrap?c().createElement(d.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(d.Panel,{header:n,style:this.props.panelStyle,className:this.props.panelClassName},s)):s})))),S(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((s,n)=>r()(s,{[n]:e[n]?(0,m.qC)(e[n],t[n]):t[n]})),e))),S(this,"addTooltip",((e,t)=>{if(t.tooltip){let s=c().createElement(d.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(b.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:s},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}S(C,"propTypes",{id:i().string.isRequired,container:i().func,containerWrapperStyle:i().object,tool:i().oneOfType([i().object,i().func]),className:i().string,style:i().object,tools:i().array,panels:i().array,mapType:i().string,toolStyle:i().string,activeStyle:i().string,toolSize:i().string,stateSelector:i().string.isRequired,eventSelector:i().string,panelStyle:i().object,panelClassName:i().string,activePanel:i().string,toolCfg:i().object}),S(C,"contextTypes",{messages:i().object,router:i().object}),S(C,"defaultProps",{container:d.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:T.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const x=C}}]);