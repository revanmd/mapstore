(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8541],{874097:(o,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>D});var n=t(124852),i=t.n(n),s=t(867076),r=t(22222),d=t(171703),a=t(45697),l=t.n(a),c=t(152543),p=t(952273),b=t(641259),u=t(366907),h=t(492838),g=t(851719);const m=(0,s.compose)((0,d.connect)((()=>({})),{backFromWizard:()=>(0,h.Rz)("layer",void 0)}),(0,s.withProps)((o=>{let{backFromWizard:e=(()=>{})}=o;return{exitButton:{onClick:e,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var f=t(52713),C=t(736465),y=t(374072),v=t(644517),w=t(8204);function E(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}const k=(0,s.compose)((0,d.connect)(u.Nb,{toggleConnection:h.w2,triggerShowConnections:g.G9}),(0,d.connect)(u.Tw),(0,s.withProps)((o=>{let{availableDependencies:e=[]}=o;return{availableDependencies:e.filter((o=>"map"!==o))}})),m)(C.Z),P=(0,s.compose)((0,d.connect)((0,r.P1)(b.P0,p.HU,b.DZ,p.ie,(function(o,e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{showConnections:o,hasConnections:n.length>0,hasWidgets:e,canEdit:t}})),{onShowConnections:g.G9,onAddWidget:h.A4}),(0,s.withProps)((o=>{let{onAddWidget:e=(()=>{}),hasWidgets:t,canEdit:n,hasConnections:i,showConnections:s,onShowConnections:r=(()=>{})}=o;return{buttons:[{glyph:"plus",tooltipId:"dashboard.editor.addACardToTheDashboard",bsStyle:"primary",visible:n,id:"ms-add-card-dashboard",onClick:()=>e()},{glyph:s?"bulb-on":"bulb-off",tooltipId:s?"dashboard.editor.hideConnections":"dashboard.editor.showConnections",bsStyle:s?"success":"primary",visible:!!t&&!!i||!n,onClick:()=>r(!s)}]}})))(w.Z);class S extends i().Component{componentDidMount(){this.props.onMount()}componentWillUnmount(){this.props.onUnmount()}render(){const o=this.props.pluginCfg.selectedService||"",e=this.props.pluginCfg.services||{};return this.props.editing?i().createElement("div",{className:"dashboard-editor de-builder"},i().createElement(k,{disableEmptyMap:this.props.disableEmptyMap,defaultSelectedService:o,defaultServices:e,enabled:this.props.editing,onClose:()=>this.props.setEditing(!1),catalog:this.props.catalog})):i().createElement("div",{className:"ms-vertical-toolbar dashboard-editor de-toolbar",id:this.props.id},i().createElement(P,{transitionProps:!1,btnGroupProps:{vertical:!0},btnDefaultProps:{tooltipPosition:"right",className:"square-button-md",bsStyle:"primary"}}),this.props.loading?i().createElement(f.Z,{style:{position:"fixed",bottom:0}}):null)}}E(S,"propTypes",{id:l().string,editing:l().bool,loading:l().bool,limitDockHeight:l().bool,fluid:l().bool,zIndex:l().number,dockSize:l().number,position:l().string,onMount:l().func,onUnmount:l().func,setEditing:l().func,dimMode:l().string,src:l().string,style:l().object,pluginCfg:l().object,catalog:l().object,disableEmptyMap:l().bool}),E(S,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,loading:!0,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:()=>{},onUnmount:()=>{},setEditing:()=>{}});const M=(0,d.connect)((0,r.P1)(b.i$,b.MZ,((o,e)=>({editing:o,loading:e}))),{setEditing:g.D_,onMount:()=>(0,g.Nl)(!0),onUnmount:()=>(0,g.Nl)(!1)})(S),D=(0,c.rx)("DashboardEditor",{component:M,reducers:{dashboard:v.Z},epics:y.ZP})}}]);