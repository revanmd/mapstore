(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[4995],{141832:(e,t,l)=>{"use strict";l.d(t,{Z:()=>m});var s=l(124852),n=l.n(s),a=l(732833),r=l(756435),o=l(867076),i=l(630294),c=l(23888);const d={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}},p=e=>{let{position:t="right",onClose:l,bsStyle:s="default",title:a="",fullscreen:r=!1,showFullscreen:o=!1,glyph:p="info-sign",additionalRows:m,onFullscreen:h=(()=>{})}=e;const u=l?n().createElement(c.Z,{key:"ms-header-close",className:"square-button ms-close",onClick:l,bsStyle:s},n().createElement(i.Glyphicon,{glyph:"1-close"})):null,y=o?n().createElement(c.Z,{key:"ms-header-glyph",className:"square-button",bsStyle:s,onClick:()=>h(!r)},n().createElement(i.Glyphicon,{glyph:d[t]&&d[t][r]||"resize-full"})):n().createElement("div",{key:"ms-header-glyph",className:"square-button bg-"+s,style:{display:"flex"}},n().createElement(i.Glyphicon,{glyph:p,className:"default"===s?"text-primary":""})),b="left"===t?[u,y]:[y,u];return n().createElement(i.Grid,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+s},n().createElement(i.Row,null,n().createElement(i.Col,{xs:2},b[0]),n().createElement(i.Col,{xs:8},n().createElement("h4",null,a)),n().createElement(i.Col,{xs:2},b[1])),m)},m=(0,o.withState)("fullscreen","onFullscreen",!1)((e=>{let{fluid:t,className:l="",fullscreen:s=!1,position:o,open:i,size:c=550,style:d={},zIndex:m=1030,onClose:h,bsStyle:u,title:y,showFullscreen:b=!1,glyph:v,header:f,footer:g,children:E,onFullscreen:w=(()=>{}),fixed:S=!1,resizable:C=!1,hideHeader:k}=e;return n().createElement("div",{className:"ms-side-panel "+(S?"":"ms-absolute-dock ")+(C?"":"react-dock-no-resize ")+l},n().createElement(a.default,{fluid:t||s,position:o,dimMode:"none",isVisible:i,size:s?1:c,dockStyle:d,zIndex:m},n().createElement(r.Z,{header:!k&&i&&n().createElement(p,{position:o,onClose:h,bsStyle:u,title:y,fullscreen:s,showFullscreen:b,glyph:v,additionalRows:f,onFullscreen:w}),footer:i&&g},i&&E)))}))},688472:(e,t,l)=>{"use strict";l.d(t,{Z:()=>d});var s=l(124852),n=l.n(s),a=l(867076),r=l(756435),o=l(141832),i=l(283604);const c=(0,a.renameProps)({open:"show"})((e=>{let{children:t,header:l,...s}=e;return n().createElement(i.Z,s,n().createElement(r.Z,{header:n().createElement("div",{className:"ms-header"},l)},t))})),d=(0,a.branch)((e=>{let{dock:t}=e;return!t}),(()=>e=>n().createElement(c,e)))(o.Z)},908316:(e,t,l)=>{"use strict";l.d(t,{Z:()=>p});var s=l(124852),n=l.n(s),a=l(294184),r=l.n(a);const o=e=>{let{id:t,children:l,dockStyle:s,className:a,style:o={}}=e;const i={width:`calc(100% - ${((null==s?void 0:s.right)??0)+((null==s?void 0:s.left)??0)}px)`,transform:`translateX(-${(null==s?void 0:s.right)??0}px)`,pointerEvents:"none"};return n().createElement("div",{id:t,className:r()({...a?{[a]:!0}:{},"dock-container":!0}),style:{...i,...o}},l)};var i=l(496259),c=l(688472);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s])}return e},d.apply(this,arguments)}const p=e=>{let{children:t,containerClassName:l,containerId:s,containerStyle:a,dock:r=!0,siblings:p,size:m,...h}=e;return n().createElement(o,{dockStyle:a,id:s,className:l},n().createElement(i.Z,null,(e=>{let{width:l}=e;return n().createElement(n().Fragment,null,n().createElement(c.Z,d({dock:r,size:m/l>1?l:m},h),t),p)})))}},178813:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>D});var s={};l.r(s),l.d(s,{closeDetailsPanelEpic:()=>J,fetchDataForDetailsPanel:()=>I,storeDetailsInfoEpic:()=>P});var n=l(124852),a=l.n(n),r=l(171703),o=l(227361),i=l.n(o),c=l(630294),d=l(345366),p=l(274363),m=l(350126),h=l(419637),u=l(45697),y=l.n(u),b=l(804504),v=l(756435),f=l(908316);function g(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class E extends a().Component{render(){return a().createElement(f.Z,{containerId:"details-container",containerClassName:"dock-container",containerStyle:this.props.dockStyle,open:this.props.active,size:this.props.width,position:"right",bsStyle:"primary",title:a().createElement(b.Z,{msgId:"details.title"}),onClose:()=>this.props.onClose(),glyph:"sheet",style:this.props.dockStyle},a().createElement(c.Panel,{id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},a().createElement(v.Z,null,this.props.children)))}}g(E,"propTypes",{id:y().string,active:y().bool,panelStyle:y().object,dockStyle:y().object,panelClassName:y().string,style:y().object,onClose:y().func,width:y().number}),g(E,"contextTypes",{messages:y().object}),g(E,"defaultProps",{id:"mapstore-details",panelStyle:{zIndex:100,marginBottom:0,minHeight:"100%"},style:{},onClose:()=>{},active:!1,panelClassName:"details-panel",width:550});const w=E;var S=l(283604),C=l(152543);var k=l(49977),N=l.n(k),x=l(313311),Z=l.n(x),O=l(926854),z=l(687753),T=l(288287),F=l(726598),M=l(835516),G=l(425589);const I=(e,t)=>e.ofType(d.eR).switchMap((()=>{const e=t.getState(),l=(0,p.Gi)(e),s=(0,M.getIdFromUri)(l);return N().Observable.fromPromise(T.Z.getData(s).then((e=>e))).switchMap((e=>N().Observable.of((0,d.bR)(e)))).startWith((0,z.Xi)("details","enabled")).catch((()=>N().Observable.of((0,G.d)({message:"maps.feedback.errorFetchingDetailsOfMap"}),(0,d.bR)(d.hi))))})),J=e=>e.ofType(d.f8).switchMap((()=>N().Observable.from([(0,z.Xg)("details","enabled",!1)]))),P=(e,t)=>e.ofType(O.KS).switchMap((()=>{var e,l;const s=(0,p.J9)(t.getState()),n=null===(e=t.getState())||void 0===e||null===(l=e.tutorial)||void 0===l?void 0:l.run;return s?N().Observable.fromPromise(T.Z.getResourceAttributes(s)).switchMap((e=>{let t=Z()(e,{name:"details"});const l=Z()(e,{name:"detailsSettings"});let a={};if(!t||t.value===F.Sp)return N().Observable.empty();try{a=JSON.parse(l.value)}catch(e){a={}}return N().Observable.of((0,d.XT)(s,t.value,a),...a.showAtStartup&&!n?[(0,d.UJ)()]:[])})):N().Observable.empty()}));var j=l(22222);const D=(0,C.rx)("Details",{component:(0,r.connect)((0,j.zB)({active:e=>i()(e,"controls.details.enabled"),dockStyle:e=>(0,m.ic)(e,{height:!0,right:!0},!0),detailsText:e=>{var t;return null==e||null===(t=e.details)||void 0===t?void 0:t.detailsText},showAsModal:e=>{var t;return null===(t=(0,p.qH)(e))||void 0===t?void 0:t.showAsModal}}),{onClose:d.nf})((e=>{let{active:t=!1,dockStyle:l,detailsText:s,showAsModal:n=!1,onClose:r=(()=>{})}=e;const o=a().createElement(h.Z,{className:"ms-details-preview-container",textContainerClassName:"ms-details-preview",loading:!s,detailsText:s===d.hi?null:s});return n?a().createElement(S.Z,{bodyClassName:"details-viewer-modal",fitContent:!0,showFullscreen:!0,show:t,size:"lg",title:a().createElement(b.Z,{msgId:"details.title"}),onClose:r},o):a().createElement(w,{width:550,dockStyle:l,active:t,onClose:r},o)})),containers:{BurgerMenu:{name:"details",position:1e3,priority:2,doNotHide:!0,text:a().createElement(b.Z,{msgId:"details.title"}),tooltip:"details.tooltip",icon:a().createElement(c.Glyphicon,{glyph:"sheet"}),action:d.UJ,selector:e=>{const t=(0,p.J9)(e);return t&&(0,p.Gi)(e,t)?{}:{style:{display:"none"}}}},Toolbar:{name:"details",position:2,priority:0,tooltip:"details.title",alwaysVisible:!0,doNotHide:!0,icon:a().createElement(c.Glyphicon,{glyph:"sheet"}),action:d.UJ,selector:e=>{const t=(0,p.J9)(e);return t&&(0,p.Gi)(e,t)?{}:{style:{display:"none"}}}},SidebarMenu:{name:"details",position:4,text:a().createElement(b.Z,{msgId:"details.title"}),tooltip:"details.tooltip",alwaysVisible:!0,icon:a().createElement(c.Glyphicon,{glyph:"sheet"}),action:d.UJ,selector:e=>{const t=(0,p.J9)(e);return t&&(0,p.Gi)(e,t)?{bsStyle:e.controls.details&&e.controls.details.enabled?"primary":"tray",active:e.controls.details&&e.controls.details.enabled||!1}:{style:{display:"none"}}},doNotHide:!0,priority:1}},epics:s,reducers:{details:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===d.UD?{...e,detailsText:t.detailsText}:e}}})}}]);