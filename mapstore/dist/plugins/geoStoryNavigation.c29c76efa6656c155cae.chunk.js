(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[227],{346731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(124852),s=n.n(o),a=n(8204),r=n(24703),l=n(267152),i=n(959956),c=n(513218),m=n.n(c);const d=e=>{var t;let{settings:n,scrollTo:o=(()=>{}),navigableItems:c=[],currentPage:d={},totalItems:u=1,currentPosition:g=0,router:p,buttons:h=[]}=e;const v=null==n||null===(t=n.theme)||void 0===t?void 0:t.general,{fontFamily:b,borderColor:y,color:E,backgroundColor:C}=m()(v)&&v||{},{isTitleEnabled:f,isLogoEnabled:I,isNavbarEnabled:P}=n||{},k=h.length>0,N=p&&p.pathname&&p.search&&"true"===(0,i.vl)(p.search).showHome&&p.pathname.includes("/geostory/shared"),Z=P&&(null==c?void 0:c.length)>0,S=f||I||Z||k||N;return s().createElement("div",{className:"ms-geostory-navigation-bar",style:{color:E,backgroundColor:C,...y&&{borderBottom:`1px solid ${y}`},fontFamily:b}},s().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:y}},s().createElement("div",{className:"progress-percent",style:{width:(g+1)/u*100+"%",backgroundColor:E}})),S&&s().createElement("div",{className:"ms-geostory-navigation-tools"},s().createElement("div",{className:"ms-geostory-navigation-toolbar"},s().createElement(a.Z,{buttons:h}),N&&s().createElement(l.Z,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),s().createElement("div",{className:"ms-geostory-navigation-elements"},Z?s().createElement("div",{className:"ms-geostory-navigation-navigable-items"},s().createElement(r.Z,{items:c,currentPage:d,scrollTo:o,getItemStyle:e=>e?{color:C,backgroundColor:E}:{outlineColor:E,borderColor:E}})):null,s().createElement("div",{className:"ms-geostory-navigation-metadata"},f&&s().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:n.storyTitleFontSize||"14px"}},n.storyTitle),I&&s().createElement("div",{className:"ms-geostory-navigation-logo"},s().createElement("img",{src:n.thumbnail&&(n.thumbnail.data||n.thumbnail.url)||"",height:32}))))))}},24703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(124852),s=n.n(o),a=n(630294),r=n(23279),l=n.n(r),i=n(276614),c=n(580628),m=n(400043),d=n(23888);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const g=e=>{let{tabindex:t,text:n,selected:o,style:a}=e;return s().createElement(d.Z,{tabindex:t,className:(o?"active":"btn-tray")+" btn-xs btn-default",style:a},n)},p=(0,c.Z)((e=>{let{currentPage:t,items:n,scrollTo:r=(()=>{}),width:c,height:p,deltaSwipeSize:h=200,transition:v=300,updateTimeDebounceTime:b=500,getItemStyle:y=(()=>({}))}=e;const{isStartControlActive:E,isEndControlActive:C,containerPropsHandlers:f,contentPropsHandlers:I,itemPropsHandlers:P,moveToDeltaSize:k,moveItemInViewById:N}=(0,i.Z)({direction:"horizontal",width:c,height:p,transition:v,deltaScroll:h}),Z=t&&t.columns&&t.sectionId&&t.columns[t.sectionId]||t&&t.sectionId,S=(e,n,o)=>o===m.ID.CAROUSEL?t&&t.sectionId===e:n===e,T=(0,o.useRef)(null);return(0,o.useEffect)((()=>(T.current=l()((e=>{N(e,{margin:32})}),b),()=>{T.current&&(T.current.cancel(),T.current=null)})),[]),(0,o.useEffect)((()=>{T.current&&(T.current.cancel(),T.current(Z))}),[Z]),s().createElement("div",u({},f(),{className:"ms-horizontal-menu"}),s().createElement("div",I(),n.map((e=>{let{title:n,id:o,type:a}=e;const l=P({id:o,onClick:()=>{t&&t.sectionId!==o&&r(o)}});return s().createElement("div",u({},l,{className:"ms-menu-item"}),s().createElement(g,{tabindex:"-1",id:o,text:n||"title",selected:S(o,Z,a),style:y(S(o,Z,a))}))}))),E&&s().createElement(d.Z,{className:"square-button-md no-border",style:{position:"absolute"},onClick:()=>k(h)},s().createElement(a.Glyphicon,{glyph:"chevron-left"})),C&&s().createElement(d.Z,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:()=>k(-h)},s().createElement(a.Glyphicon,{glyph:"chevron-right"})))}))},267152:(e,t,n)=>{"use strict";n.d(t,{D:()=>E,Z:()=>f});var o=n(124852),s=n.n(o),a=n(23888),r=n(45697),l=n.n(r),i=n(630294),c=n(401811),m=n(804504),d=n(283604),u=n(227361),g=n.n(u),p=n(478718),h=n.n(p),v=n(234228);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=()=>{const e=v.ZP.getConfigProp("miscSettings");return g()(e,["homePath"],"/")};class C extends s().Component{constructor(){super(...arguments),y(this,"checkUnsavedChanges",(()=>{this.props.renderUnsavedMapChangesDialog?this.props.onCheckMapChanges(this.goHome):(this.props.onCloseUnsavedDialog(),this.goHome())})),y(this,"goHome",(()=>{this.context.router.history.push(E())}))}render(){const{tooltipPosition:e,hidden:t,...n}=this.props;let o=s().createElement(i.Tooltip,{id:"toolbar-home-button"},s().createElement(m.Z,{msgId:"gohome"}));return!t&&s().createElement(s().Fragment,null,s().createElement(c.Z,{overlay:o,placement:e},s().createElement(a.Z,b({id:"home-button",className:"square-button",bsStyle:this.props.bsStyle,onClick:this.checkUnsavedChanges,tooltip:o},h()(n,["disabled","active","block","componentClass","href","children","icon","bsStyle","className"])),s().createElement(i.Glyphicon,{glyph:this.props.icon}))),s().createElement(d.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},s().createElement("div",{className:"ms-detail-body"},s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}y(C,"propTypes",{icon:l().string,onCheckMapChanges:l().func,onCloseUnsavedDialog:l().func,displayUnsavedDialog:l().bool,renderUnsavedMapChangesDialog:l().bool,tooltipPosition:l().string,bsStyle:l().string,hidden:l().bool}),y(C,"contextTypes",{router:l().object,messages:l().object}),y(C,"defaultProps",{icon:"home",onCheckMapChanges:()=>{},onCloseUnsavedDialog:()=>{},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left",bsStyle:"primary",hidden:!1});const f=C},351980:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var o=n(124852),s=n.n(o),a=n(171703),r=n(22222),l=n(152543),i=n(400043),c=n(796205),m=n(243023),d=n(468181),u=n(346731);const g=(0,l.rx)("GeoStoryNavigation",{component:(0,a.connect)((0,r.zB)({mode:c.eK,settings:c.TQ,currentPage:c.PR,currentPosition:c.u5,totalItems:c.CK,navigableItems:(0,c.w)({includeAlways:!1}),pathname:m.F,search:m.y}))((e=>{let{mode:t=i.nl.VIEW,currentPage:n,currentPosition:o,totalItems:a,settings:r,navigableItems:l=[],pathname:c,search:m,items:d=[]}=e;const g=d.filter((e=>{let{tool:t}=e;return t})).map((e=>{let{tool:t}=e;return{Element:t}}));return t===i.nl.VIEW?s().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},s().createElement(u.Z,{settings:r,currentPage:n,currentPosition:o,totalItems:a,scrollTo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,i.M1)(e,t)},navigableItems:l,router:{pathname:c,search:m},buttons:g})):null})),reducers:{geostory:d.Z}})}}]);