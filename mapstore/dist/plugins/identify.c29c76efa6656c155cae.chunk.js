(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[55,2619],{492619:(e,t,o)=>{"use strict";o.r(t),o.d(t,{IDENTIFY_POPUP:()=>I,default:()=>M});var n=o(124852),r=o.n(n),a=o(554155),l=o(306637),s=o(867076),i=o(171703),c=o(22222),d=o(975872),u=o(917450),p=o(765963),m=o(701469),g=o.n(m),f=o(352353),h=o.n(f),y=o(105198),b=o(274363);const v=(0,s.compose)((0,i.connect)((0,c.P1)(d.Qf,(e=>({index:e}))),{setIndex:u.oO}),(0,s.defaultProps)({index:0,responses:[]})),E=(0,c.P1)([d.q7,d.o9,d.OK,d.us,d.x0,b.hp,d.vR],((e,t,o,n,r,a,l)=>({responses:e,validResponses:t,requests:o,format:n,showEmptyMessageGFI:r,missingResponses:(o||[]).length-(e||[]).length,renderValidOnly:a,loaded:l}))),w=(0,s.compose)((0,i.connect)(E),(0,s.defaultProps)({responses:[],container:e=>{let{index:t,children:o}=e;return r().createElement(r().Fragment,null,g()(o)&&o[t]||o)},header:y.Z}),v,l.Yy,l.mI,(0,a.Z)((e=>{let{loaded:t}=e;return h()(t)})))(p.Z),I="identify",M={identify:w}},141832:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var n=o(124852),r=o.n(n),a=o(732833),l=o(756435),s=o(867076),i=o(630294),c=o(23888);const d={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}},u=e=>{let{position:t="right",onClose:o,bsStyle:n="default",title:a="",fullscreen:l=!1,showFullscreen:s=!1,glyph:u="info-sign",additionalRows:p,onFullscreen:m=(()=>{})}=e;const g=o?r().createElement(c.Z,{key:"ms-header-close",className:"square-button ms-close",onClick:o,bsStyle:n},r().createElement(i.Glyphicon,{glyph:"1-close"})):null,f=s?r().createElement(c.Z,{key:"ms-header-glyph",className:"square-button",bsStyle:n,onClick:()=>m(!l)},r().createElement(i.Glyphicon,{glyph:d[t]&&d[t][l]||"resize-full"})):r().createElement("div",{key:"ms-header-glyph",className:"square-button bg-"+n,style:{display:"flex"}},r().createElement(i.Glyphicon,{glyph:u,className:"default"===n?"text-primary":""})),h="left"===t?[g,f]:[f,g];return r().createElement(i.Grid,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+n},r().createElement(i.Row,null,r().createElement(i.Col,{xs:2},h[0]),r().createElement(i.Col,{xs:8},r().createElement("h4",null,a)),r().createElement(i.Col,{xs:2},h[1])),p)},p=(0,s.withState)("fullscreen","onFullscreen",!1)((e=>{let{fluid:t,className:o="",fullscreen:n=!1,position:s,open:i,size:c=550,style:d={},zIndex:p=1030,onClose:m,bsStyle:g,title:f,showFullscreen:h=!1,glyph:y,header:b,footer:v,children:E,onFullscreen:w=(()=>{}),fixed:I=!1,resizable:M=!1,hideHeader:C}=e;return r().createElement("div",{className:"ms-side-panel "+(I?"":"ms-absolute-dock ")+(M?"":"react-dock-no-resize ")+o},r().createElement(a.default,{fluid:t||n,position:s,dimMode:"none",isVisible:i,size:n?1:c,dockStyle:d,zIndex:p},r().createElement(l.Z,{header:!C&&i&&r().createElement(u,{position:s,onClose:m,bsStyle:g,title:f,fullscreen:n,showFullscreen:h,glyph:y,additionalRows:b,onFullscreen:w}),footer:i&&v},i&&E)))}))},688472:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var n=o(124852),r=o.n(n),a=o(867076),l=o(756435),s=o(141832),i=o(283604);const c=(0,a.renameProps)({open:"show"})((e=>{let{children:t,header:o,...n}=e;return r().createElement(i.Z,n,r().createElement(l.Z,{header:r().createElement("div",{className:"ms-header"},o)},t))})),d=(0,a.branch)((e=>{let{dock:t}=e;return!t}),(()=>e=>r().createElement(c,e)))(s.Z)},908316:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var n=o(124852),r=o.n(n),a=o(294184),l=o.n(a);const s=e=>{let{id:t,children:o,dockStyle:n,className:a,style:s={}}=e;const i={width:`calc(100% - ${((null==n?void 0:n.right)??0)+((null==n?void 0:n.left)??0)}px)`,transform:`translateX(-${(null==n?void 0:n.right)??0}px)`,pointerEvents:"none"};return r().createElement("div",{id:t,className:l()({...a?{[a]:!0}:{},"dock-container":!0}),style:{...i,...s}},o)};var i=o(496259),c=o(688472);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}const u=e=>{let{children:t,containerClassName:o,containerId:n,containerStyle:a,dock:l=!0,siblings:u,size:p,...m}=e;return r().createElement(s,{dockStyle:a,id:n,className:o},r().createElement(i.Z,null,(e=>{let{width:o}=e;return r().createElement(r().Fragment,null,r().createElement(c.Z,d({dock:l,size:p/o>1?o:p},m),t),u)})))}},15546:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Qe});var n=o(893379),r=o.n(n),a=o(110676);r()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;var l=o(352353),s=o.n(l),i=o(727418),c=o.n(i),d=o(124852),u=o.n(d),p=o(630294),m=o(171703),g=o(867076),f=o(22222),h=o(859518),y=o(917450),b=o(765963),v=o(306637),E=o(807654),w=o.n(E),I=o(414293),M=o.n(I),C=o(521923);const F=(0,g.withHandlers)({needsRefresh:()=>(e,t)=>{if(t.enabled&&t.point&&t.point.pixel){if(!e.point||!e.point.pixel||e.point.pixel.x!==t.point.pixel.x||e.point.latlng!==t.point.latlng||e.point.pixel.y!==t.point.pixel.y)return!0;if(!e.point||!e.point.pixel||t.point.pixel&&e.format!==t.format)return!0}return!1},onClose:e=>{let{purgeResults:t=(()=>{}),closeIdentify:o=(()=>{})}=e;return()=>{t(),o()}},onSubmitClickPoint:e=>{let{onSubmitClickPoint:t=(()=>{}),point:o}=e;return e=>{const n=M()(e.lat)||w()(e.lat)?0:parseFloat(e.lat),r=M()(e.lon)||w()(e.lon)?0:parseFloat(e.lon);let a=(0,C.t8)("latlng.lng",r,(0,C.t8)("latlng.lat",n,o));t(a)}},onChangeFormat:e=>{let{onChangeFormat:t=(()=>{})}=e;return e=>{t(e)}}}),P=(0,g.compose)(F,(0,g.lifecycle)({componentDidMount(){const{enabled:e,showInMapPopup:t,changeMousePointer:o=(()=>{}),disableCenterToMarker:n,enableInfoForSelectedLayers:r=!0,onEnableCenterToMarker:a=(()=>{}),setShowInMapPopup:l=(()=>{}),checkIdentifyIsMounted:s=(()=>{}),onInitPlugin:i=(()=>{})}=this.props;i({enableInfoForSelectedLayers:r}),e||t?(o("pointer"),s(!0)):s(!1),n||a(),l(t)},componentWillUnmount(){const{hideMarker:e=(()=>{}),purgeResults:t=(()=>{}),changeMousePointer:o=(()=>{}),checkIdentifyIsMounted:n=(()=>{})}=this.props;o("auto"),n(!1),e(),t()},componentWillReceiveProps(e){const{hideMarker:t=(()=>{}),purgeResults:o=(()=>{}),changeMousePointer:n=(()=>{}),enabled:r}=this.props;var a;e.enabled&&!r?n("pointer"):!e.enabled&&r&&(n("auto"),t(),o()),this.props.showInMapPopup!==e.showInMapPopup&&(null===(a=e.setShowInMapPopup)||void 0===a||a.call(e,e.showInMapPopup))}}));var x=o(813292),k=o.n(x);const S=(0,g.withHandlers)({zoomToFeature:e=>{let{zoomToExtent:t=(()=>{}),currentFeature:o=[],currentFeatureCrs:n}=e;return()=>{const e=o.filter((e=>{let{geometry:t}=e;return!!t}));if(e.length>0){const o=k()({type:"FeatureCollection",features:e});o&&t(o,n)}}}});var T=o(227361),O=o.n(T),R=o(8204),q=o(804504),N=o(283604),Z=o(466737);const z=e=>{let{latlng:t,enableRevGeocode:o,hideRevGeocode:n=(()=>{}),showModalReverse:r,revGeocodeDisplayName:a}=e;return o&&t?u().createElement(Z.Z,null,u().createElement(N.Z,{fade:!0,title:u().createElement("span",null,u().createElement(p.Glyphicon,{glyph:"map-marker"})," ",u().createElement(q.Z,{msgId:"identifyRevGeocodeModalTitle"})),size:"xs",show:r,onClose:n,buttons:[{text:u().createElement(q.Z,{msgId:"close"}),onClick:n,bsStyle:"primary"}]},u().createElement("div",{className:"ms-alert",style:{padding:15}},u().createElement("div",{className:"ms-alert-center text-center"},u().createElement("div",null,a))))):null};var G=o(474396),L=o(913186);const B=(0,o(279897).Z)((e=>{let{degrees:t=0,minutes:o=0,seconds:n=0,direction:r,integerFormat:a,decimalFormat:l}=e;return u().createElement("span",{className:"coordinate-dms"},u().createElement(L.Z,{key:"latD",numberParams:a,value:t}),u().createElement("span",null,"° "),u().createElement(L.Z,{key:"latM",numberParams:a,value:o}),u().createElement("span",null,"' "),u().createElement(L.Z,{key:"latS",numberParams:l,value:n}),u().createElement("span",null,"'' ")," ",u().createElement("span",null,r))})),D=e=>{let{integerFormat:t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},decimalFormat:o={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:4,minimumFractionDigits:4},coordinate:n={},formatCoord:r="decimal",className:a}=e;return u().createElement(p.Row,{className:a},u().createElement(p.Col,{xs:12},M()(n.lat)||M()(n.lon)?null:"decimal"===r?u().createElement("div",{className:"ms-coordinates-decimal"},"Lat: ",u().createElement(L.Z,{value:Math.round(1e5*n.lat)/1e5})," - Long: ",u().createElement(L.Z,{value:n.lon})):u().createElement("div",{className:"ms-coordinates-aeronautical"},u().createElement("span",null,"Lat: ",u().createElement(B,{integerFormat:t,decimalFormat:o,value:n.lat})),u().createElement("span",null," - "),u().createElement("span",null," Long: ",u().createElement(B,{coordinate:"lon",integerFormat:t,decimalFormat:o,value:n.lon})))))},H=e=>{let{coordinate:t={},formatCoord:o,edit:n,onSubmit:r=(()=>{}),onChangeFormat:a=(()=>{})}=e;return n?u().createElement(G.Z,{removeVisible:!1,formatCoord:o,coordinate:t||{lat:"",lon:""},onSubmit:r,onChangeFormat:a}):u().createElement(D,{className:"coordinates-text",formatCoord:o,coordinate:t||{lat:"",lon:""}})};var A=o(576189),V=o(45697),j=o.n(V),U=o(743129),W=o(441609),K=o.n(W);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},Y.apply(this,arguments)}const X=(0,o(486234).Z)(["placeholder","clearValueText","noResultsText"])(U.ZP),_=e=>{let{responses:t,index:o,loaded:n,setIndex:r,missingResponses:a,emptyResponses:l,validator:s,format:i}=e;const[c,p]=(0,d.useState)([]),[m,g]=(0,d.useState)("");return(0,d.useEffect)((()=>{K()(t)||p(t.map(((e,t)=>{var o,n;const r=null==e||null===(o=e.layerMetadata)||void 0===o?void 0:o.title;return{label:r,value:r,idx:t,style:{display:null!==(n=s(i))&&void 0!==n&&n.getValidResponses([e]).length?"block":"none"}}})))}),[t]),(0,d.useEffect)((()=>{var e,r;n&&g((null===(e=t[o])||void 0===e||null===(r=e.layerMetadata)||void 0===r?void 0:r.title)||"")}),[t,o,n]),u().createElement("div",{id:"identify-layer-select",style:{flex:"1 1 0%",padding:"0px 4px"}},u().createElement(X,Y({},{clearable:!1,isSearchable:!0},{onChange:e=>{const t=(null==e?void 0:e.idx)||0;r(t)},value:m||"",options:c,disabled:0!==a||0===t.length||l,noResultsText:"identifyLayerSelectNoResult"})))};_.defaultProps={responses:[],index:0,loaded:!1,setIndex:()=>{},missingResponses:0,emptyResponses:!1,validator:()=>{},format:""},_.propTypes={responses:j().array,setIndex:j().func,index:j().number,emptyResponses:j().bool,validator:j().func,format:j().string};const Q=_;var $=o(908316);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},J.apply(this,arguments)}var ee=o(554155),te=o(290003),oe=o(488400);function ne(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class re extends u().Component{constructor(){super(...arguments),ne(this,"onChange",(e=>{this.props.onSetMapTrigger(e.target.value),this.props.onPurgeMapInfoResults(),this.props.onHideMapinfoMarker()}))}render(){return u().createElement(p.FormGroup,{bsSize:"small"},u().createElement(p.ControlLabel,null,u().createElement(oe.Z,{msgId:"infoTriggerLabel"})),u().createElement(p.FormControl,{value:this.props.hoverEnabled?this.props.trigger:"click",componentClass:"select",onChange:this.onChange},u().createElement("option",{value:"click",key:"click"},"Click"),u().createElement("option",{disabled:!this.props.hoverEnabled,value:"hover",key:"hover"},"Hover")))}}ne(re,"propTypes",{trigger:j().string,onSetMapTrigger:j().func,onPurgeMapInfoResults:j().func,onHideMapinfoMarker:j().func,hoverEnabled:j().bool}),ne(re,"defaultProps",{hoverEnabled:!0,onSetMapTrigger:()=>{},onPurgeMapInfoResults:()=>{},onHideMapinfoMarker:()=>{}});const ae=re;var le=o(49977),se=o.n(le),ie=o(313311),ce=o.n(ie),de=o(531351),ue=o.n(de),pe=o(455877),me=o.n(pe),ge=o(275982),fe=o(687753),he=o(306692),ye=o(612132),be=o(333101),ve=o(172768),Ee=o(926854),we=o(387305),Ie=o(596974),Me=o(975872),Ce=o(612912),Fe=o(820709),Pe=o(127608),xe=o(274363),ke=o(350126),Se=o(351546),Te=o(108469),Oe=o(119008),Re=o(665529),qe=o(835516),Ne=o(726598),Ze=o(492619),ze=o(401269),Ge=o(710187);const Le={getFeatureInfoOnFeatureInfoClick:(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(y.xy).switchMap((e=>{let{point:t,filterNameList:n=[],overrideParams:r={}}=e,a=ue()((0,Ce.OX)(o()));const l=(0,Ce.$z)(o());(0,Me.Bh)(o())&&l.length&&(a=l);const s=(0,Ce.NP)(o());if(0===a.length||0===l.length&&0!==s.length)return se().Observable.of((0,y.g)(),(0,y.LU)());const i=["SLD_BODY"],c=["buffer","cql_filter","filter","propertyName"],d=se().Observable.from(a.filter((e=>!n.length||n.filter((t=>-1!==t.indexOf(e.name))).length>0))).mergeMap((e=>{let t=(0,Re.fY)(o()),{url:n,request:l,metadata:s}=(0,Ne.Fm)(e,{...(0,Me.oq)(o()),env:t});if((0,Me.A4)(o())&&(0,Me.Ap)(o())&&(l={...l,...(0,Me.Ap)(o())[e.name]}),r[e.name]&&(l={...l,...r[e.name]}),n){const t=n,r=l,a=s,d=(0,Ne.K7)(e,c,i),u=(0,Me.hs)(o()),p=(0,Me.A4)(o()),m=me().v1(),g={...d,...r};return(0,ze.y)(t,g,e,{attachJSON:u,itemId:p}).map((t=>t.data.exceptions?(0,y.Mn)(m,t.data.exceptions,r,a):(0,y.Fm)(m,t.data,r,{...a,features:t.features,featuresCrs:t.featuresCrs},e))).catch((e=>se().Observable.of((0,y.sV)(m,e.data||e.statusText||e.status,r,a)))).startWith((0,y.WU)(m,g))}return se().Observable.of((0,y.JB)(e,l,s,a))}));return t&&t.modifiers&&!0===t.modifiers.ctrl&&t.multiSelection?d:d.startWith((0,y.g)())}))},handleMapInfoMarker:(e,t)=>{let{getState:o}=t;return e.ofType(y.xy).filter((()=>!(0,Me.xt)(o()))).map((e=>{let{layer:t}=e;return t?(0,y.aN)():(0,y.HP)()}))},closeFeatureGridFromIdentifyEpic:e=>e.ofType(y.XL,y.qb).switchMap((()=>se().Observable.of((0,he.YV)()))),closeFeatureAndAnnotationEditing:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(y.cb).switchMap((()=>O()(t(),"annotations.editing")?se().Observable.of((0,ve.g)()):se().Observable.of((0,y.g)())))},hideMarkerOnIdentifyCloseOrClearWarning:e=>e.ofType(y.cb,y.ih).flatMap((()=>se().Observable.of((0,y.aN)()))),changeMapPointer:(e,t)=>e.ofType(h.N7).filter((()=>!t.getState().map)).switchMap((t=>e.ofType(Ee.ok).mapTo(t))),onMapClick:(e,t)=>e.ofType(h.TR).filter((()=>{const{disableAlwaysOn:e=!1}=t.getState().mapInfo;return!(0,xe.Mc)(t.getState())&&(e||(o=t.getState()||{},!((0,Me.lN)(o)||(0,Fe.Rd)(o)&&((e=>"EDIT"===(0,Fe.eK)(e))(o)||(e=>O()(ce()((0,Fe.M0)(e),(e=>"geometry"===e.type)),"enabled"))(o)))));var o})).switchMap((e=>{let{point:o,layer:n}=e;const r=(0,xe.uy)(t.getState());return se().Observable.of((0,y.lK)((0,A.oH)(o,r),n),(0,Ie.KG)()).merge(se().Observable.of((0,we.i8)(me()(),{component:Ze.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:o?o.rawPos:[]}})).filter((()=>(0,Me.xt)(t.getState()))))})),onUpdateFeatureInfoClickPoint:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(y.jL).map((e=>{let{point:o}=e;const n=(0,xe.uy)(t());return{point:(0,A.oH)(o,n)}})).withLatestFrom(e.ofType(y.xy),((e,t)=>{let{point:o}=e;return{...t,point:o}}))},featureInfoClickOnHighligh:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(y.oz).filter((e=>{let{enabled:o}=e;return o&&(0,Me.Bz)(t())})).switchMap((()=>se().Observable.from([(0,y.lK)((0,Me.Bz)(t()),(0,Me.H_)(t()),(0,Me.ij)(t()),(0,Me.Ap)(t()),(0,Me.A4)(t())),(0,y.HP)()])))},zoomToVisibleAreaEpic:(e,t)=>e.ofType(y.xy).filter((()=>(0,Ce._$)(t.getState()))).switchMap((o=>e.ofType(y.XL,y.km).mergeMap((()=>{const n=t.getState(),r=(0,xe.Od)(n),a=(0,xe.uy)(n),l=(0,xe.pb)(n),s=ce()(l,{code:a}),i=s&&s.extent,c=i&&(0,Se.reprojectBbox)(i,a,"EPSG:4326"),d=(0,ke.Nr)(n),u=o.point&&o.point&&o.point.latlng,p=(0,qe.getCurrentResolution)(Math.round(r.zoom),0,21,96),m=d&&r&&r.size&&{left:(0,qe.parseLayoutValue)(d.left,r.size.width),bottom:(0,qe.parseLayoutValue)(d.bottom,r.size.height),right:(0,qe.parseLayoutValue)(d.right,r.size.width),top:(0,qe.parseLayoutValue)(d.top,r.size.height)};if(!r||!m||!u||o.point.cartographic||(0,Se.isInsideVisibleArea)(u,r,m,p)||(0,xe.Mc)(n))return se().Observable.of((0,y.PM)("disabled"));if(c&&!(0,Se.isPointInsideExtent)(u,c))return se().Observable.empty();const g=(0,Se.centerToVisibleArea)(u,r,m,p);return se().Observable.of((0,y.PM)("enabled"),(0,h.xy)(g.pos,g.zoom,g.crs)).concat(e.ofType(y.cb).switchMap((()=>{const e=r&&(0,qe.getBbox)(r.center,r.zoom);return se().Observable.of((0,h.o6)(r.center,r.zoom,e,r.size,null,r.projection))})).takeUntil(e.ofType(h.pP).skip(1)))})))),closeFeatureInfoOnCatalogOpenEpic:(e,t)=>e.ofType(fe.dc).filter((e=>"metadataexplorer"===e.control&&e.properties&&e.properties.enabled)).switchMap((()=>se().Observable.of((0,y.g)(),(0,y.aN)()).merge(se().Observable.of((0,we.UK)()).filter((()=>(0,Me.xt)(t.getState())))))),closeFeatureInfoOnAnnotationOpenEpic:(e,t)=>{let{getState:o}=t;return e.ofType(fe.kM).filter((function(){let{control:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"annotations"===e&&O()(o(),"controls.annotations.enabled",!1)})).mapTo((0,y.g)())},closeFeatureInfoOnMeasureOpenEpic:e=>e.ofType(fe.At).filter((function(){let{control:e,value:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"measure"===e&&t})).mapTo((0,y.g)()),cleanPopupsEpicOnPurge:(e,t)=>{let{getState:o}=t;return e.ofType(y.DZ).filter((()=>(0,Me.xt)(o()))).mapTo((0,we.UK)())},identifyEditLayerFeaturesEpic:(e,t)=>e.ofType(y.fv).exhaustMap((e=>{var o;let{layer:n}=e;return se().Observable.of((0,y.ZM)(null===(o=(0,Me.Bz)(t.getState()))||void 0===o?void 0:o.geometricFilter),(0,be.Qr)(n))})),switchFeatureGridToEdit:(e,t)=>e.ofType(ye.Yx).switchMap((()=>{const e=(0,Me.AO)(t.getState()),o=(ce()((0,Fe.M0)(t.getState()),(e=>"geometry"===e.type))||{}).attribute||O()((0,Pe.vE)(t.getState()),"attribute");return e?se().Observable.of((0,y.ZM)(),(0,he.lg)(),(0,he.a8)({...e,attribute:o,value:{...e.value,attribute:o}})):se().Observable.empty()})),resetCurrentEditFeatureQuery:e=>e.ofType(he.sF,ge.nk).mapTo((0,y.ZM)()),mouseMoveMapEventEpic:(e,t)=>{let{getState:o}=t;return e.ofType(h.Jb).debounceTime((0,Te.nR)(o())).switchMap((e=>{let{position:t,layer:n}=e;const r=(0,Oe.Yq)("annotations")(o()),a=(0,Oe.QF)(o()),l=(s=o(),O()(s,"mousePosition.mouseOut"));var s;return!(0,xe.Mc)(o())||r||a||l?se().Observable.empty():se().Observable.of((0,y.lK)(t,n)).merge(se().Observable.of((0,we.i8)(me()(),{component:Ze.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:t?t.rawPos:[]},autoPanMargin:70,autoPan:!0})))}))},removePopupOnUnregister:(e,t)=>{let{getState:o}=t;return e.ofType(h.GI).switchMap((()=>{var e,t;let n=se().Observable.empty();const r=(null===(e=o())||void 0===e||null===(t=e.mapPopups)||void 0===t?void 0:t.popups)||[];if(r.length&&!(0,xe.Mc)(o())){const e=r[0].id;n=se().Observable.of((0,we.hC)(e))}return n}))},removePopupOnLocationChangeEpic:(e,t)=>{let{getState:o}=t;return e.ofType(ge.nk,y.DZ,y.ih).switchMap((()=>{var e,t;let n=se().Observable.empty();const r=(null===(e=o())||void 0===e||null===(t=e.mapPopups)||void 0===t?void 0:t.popups)||[];if(r.length){const e=r[0].id;n=se().Observable.of((0,we.hC)(e))}return n}))},removeMapInfoMarkerOnRemoveMapPopupEpic:(e,t)=>{let{getState:o}=t;return e.ofType(we.HH).switchMap((()=>(0,xe.Mc)(o())?se().Observable.of((0,y.aN)()):se().Observable.empty()))},setMapTriggerEpic:(e,t)=>e.ofType(y.zX,Ee.ok,Ge.Wz).switchMap((()=>se().Observable.of("hover"===(0,Me.EI)(t.getState())?(0,h.H0)("mousemove","identifyFloatingTool"):(0,h.$X)("mousemove","identifyFloatingTool"))))};var Be=o(988737),De=o(854455),He=o(707366),Ae=o(101092),Ve=o(234228);const je=(0,f.zB)({enabled:e=>(0,Me.yg)(e)||e.controls&&e.controls.info&&e.controls.info.enabled||!1,responses:Me.q7,validResponses:Me.o9,requests:Me.OK,format:Me.us,map:xe.Od,layers:Ce.l2,point:Me.Bz,showModalReverse:e=>e.mapInfo&&e.mapInfo.showModalReverse,reverseGeocodeData:e=>e.mapInfo&&e.mapInfo.reverseGeocodeData,warning:e=>e.mapInfo&&e.mapInfo.warning,currentLocale:He.Pz,dockStyle:e=>(0,ke.ic)(e,{height:!0,right:!0},!0),formatCoord:e=>e.mapInfo&&e.mapInfo.formatCoord||Ve.ZP.getConfigProp("defaultCoordinateFormat"),showCoordinateEditor:e=>e.mapInfo&&e.mapInfo.showCoordinateEditor,showEmptyMessageGFI:e=>(0,Me.x0)(e),isEditingAllowed:Fe.nq,isCesium:Ae.c0,floatingIdentifyEnabled:e=>(0,xe.Mc)(e)}),Ue=(0,g.compose)((0,m.connect)((0,f.P1)(Me.Qf,Me.vR,(e=>e.browser&&e.browser.mobile),((e,t,o)=>({index:e,loaded:t,isMobile:o}))),{setIndex:y.oO})),We=(0,g.compose)(Ue,v.Yy,v.mI,(0,ee.Z)((e=>{let{loaded:t}=e;return s()(t)})))(b.Z),Ke=(0,g.defaultProps)({formatCoord:"decimal",enabled:!1,draggable:!0,collapsible:!1,format:(0,Ne.wR)(),requests:[],responses:[],viewerOptions:{},viewer:We,purgeResults:()=>{},hideMarker:()=>{},clearWarning:()=>{},changeMousePointer:()=>{},showRevGeocode:()=>{},checkIdentifyIsMounted:()=>{},hideRevGeocode:()=>{},containerProps:{continuous:!1},enabledCoordEditorButton:!0,showCoordinateEditor:!1,showModalReverse:!1,reverseGeocodeData:{},enableRevGeocode:!0,wrapRevGeocode:!1,style:{},point:{},layer:null,map:{},layers:[],panelClassName:"modal-dialog info-panel modal-content",headerClassName:"modal-header",bodyClassName:"modal-body info-wrap",dock:!0,headerGlyph:"",closeGlyph:"1-close",className:"square-button",currentLocale:"en-US",fullscreen:!1,showTabs:!0,showCoords:!0,showLayerTitle:!0,showMoreInfo:!0,showEdit:!1,position:"right",size:550,getToolButtons:e=>{let{showHighlightFeatureButton:t,currentFeature:o,highlight:n,onEdit:r=(()=>{}),...a}=e;return[{glyph:"info-sign",tooltipId:"identifyRevGeocodeSubmitText",visible:a.latlng&&a.enableRevGeocode&&a.lngCorrected&&a.showMoreInfo,onClick:()=>{a.showRevGeocode({lat:a.latlng.lat,lng:a.lngCorrected})}},{glyph:"search-coords",tooltipId:a.showCoordinateEditor?"identifyHideCoordinateEditor":"identifyShowCoordinateEditor",visible:a.enabledCoordEditorButton,bsStyle:a.showCoordinateEditor?"success":"primary",onClick:()=>{a.onToggleShowCoordinateEditor(a.showCoordinateEditor)}},{glyph:"pencil",visible:a.showEdit,tooltipId:"identifyEdit",onClick:()=>r()}].filter((e=>e&&e.visible))},getFeatureButtons:e=>{let{showHighlightFeatureButton:t,currentFeature:o,highlight:n,toggleHighlightFeature:r=(()=>{}),zoomToFeature:a=(()=>{})}=e;return[{glyph:"map-filter",visible:t,tooltipId:n?"identifyStopHighlightingFeatures":"identifyHighlightFeatures",bsStyle:n?"success":"primary",onClick:()=>r(!n)},{glyph:"zoom-to",visible:n&&!!o&&o.length>0&&o.reduce((function(e){let{geometry:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e||!!t}),!1)||!1,tooltipId:"identifyZoomToFeature",onClick:a}]},showFullscreen:!1,validResponses:[],validator:Ne.Te,zIndex:1050}),Ye=(0,g.compose)((0,m.connect)(je,{onInitPlugin:y.kT,purgeResults:y.g,closeIdentify:y.Mc,onSubmitClickPoint:y.sv,onToggleShowCoordinateEditor:y.RA,onChangeFormat:y.Zw,changeMousePointer:h.Mo,clearWarning:y.XP,hideMarker:y.aN,showRevGeocode:y.Pg,hideRevGeocode:y.u0,onEnableCenterToMarker:y.PM.bind(null,"enabled"),onEdit:y.am,checkIdentifyIsMounted:y.Qu},((e,t,o)=>({...o,...e,...t,enabled:e.enabled&&(e.isCesium||!o.showInMapPopup)&&!e.floatingIdentifyEnabled}))),(0,g.compose)((0,m.connect)((0,f.zB)({highlight:Me.hs,currentFeature:Me.IA,currentFeatureCrs:Me.Kc}),{toggleHighlightFeature:y.MO,zoomToExtent:h.Px}),S),(0,m.connect)((0,f.P1)(Ae.$v,(e=>({mapType:e}))),{},((e,t,o)=>{let{mapType:n}=e,{showHighlightFeatureButton:r,...a}=o;return{...a,showHighlightFeatureButton:"openlayers"===n&&r}})),Ke,Ue,v.mI,(0,m.connect)((()=>({})),{setShowInMapPopup:y.Y$}),P)((e=>{var t,o;const{enabled:n,requests:r=[],onClose:a=(()=>{}),responses:l=[],index:s,viewerOptions:i={},format:c,dock:d=!0,position:m,size:g,fluid:f,validResponses:h=[],viewer:y=(()=>null),getToolButtons:b=(()=>[]),getFeatureButtons:v=(()=>[]),showFullscreen:E,reverseGeocodeData:w={},point:I,dockStyle:M={},draggable:C,setIndex:F,warning:P,clearWarning:x,zIndex:k,showEmptyMessageGFI:S,showEdit:T,isEditingAllowed:G,onEdit:L=(()=>{}),enabledCoordEditorButton:B,showCoordinateEditor:D,onSubmitClickPoint:V,onChangeFormat:j,formatCoord:U,loaded:W,validator:K=(()=>null),toggleHighlightFeature:Y=(()=>{}),disableCoordinatesRow:X,disableInfoAlert:_}=e,ee=I&&I.latlng||null,te=l[s],{layer:oe}=te||{};let ne=null;ee&&(ne=ee&&Math.round(1e17*ee.lng)/1e17,ne-=360*Math.floor(ne/360+.5));const re=y,ae=b({...e,lngCorrected:ne,validResponses:h,latlng:ee,showEdit:T&&G&&!!te&&(0,A.jg)(te),onEdit:L.bind(null,oe&&{id:oe.id,name:oe.name,url:O()(oe,"search.url")})}),le=r.length===(null===(t=K(c))||void 0===t||null===(o=t.getNoValidResponses(l))||void 0===o?void 0:o.length)||0,se=r.length-l.length,ie=w.error?u().createElement(q.Z,{msgId:"identifyRevGeocodeError"}):w.display_name;return u().createElement($.Z,{containerStyle:M,containerId:"identify-container",containerClassName:n&&0!==r.length?"identify-active":"",bsStyle:"primary",glyph:"map-marker",open:n&&0!==r.length,size:g,fluid:f,position:m,draggable:C,onClose:()=>{a(),Y(!1)},dock:d,style:M,showFullscreen:E,zIndex:k,header:[u().createElement(p.Row,{className:"layer-select-row"},u().createElement("div",{className:"layer-col"},u().createElement("span",{className:"identify-icon glyphicon glyphicon-1-layer"}),u().createElement(Q,{responses:l,index:s,loaded:W,setIndex:F,missingResponses:se,emptyResponses:le,validator:K,format:c}),u().createElement(R.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:v(e),transitionProps:null}))),!X&&u().createElement(p.Row,{className:"coordinates-edit-row"},u().createElement("span",{className:"identify-icon glyphicon glyphicon-point"}),u().createElement("div",{style:D?{zIndex:1}:{},className:"coordinate-editor"},u().createElement(H,{key:"coordinate-editor",formatCoord:U,enabledCoordEditorButton:B,onSubmit:V,onChangeFormat:j,edit:D,coordinate:{lat:ee&&ee.lat,lon:ne}})),u().createElement(z,J({latlng:ee,revGeocodeDisplayName:ie},e)),u().createElement(R.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:ae,transitionProps:null}))].filter((e=>e)),siblings:u().createElement(Z.Z,null,u().createElement(N.Z,{fade:!0,title:u().createElement(q.Z,{msgId:"warning"}),size:"xs",show:P,onClose:x,buttons:[{text:u().createElement(q.Z,{msgId:"close"}),onClick:x,bsStyle:"primary"}]},u().createElement("div",{className:"ms-alert",style:{padding:15}},u().createElement("div",{className:"ms-alert-center text-center"},u().createElement(q.Z,{msgId:"identifyNoQueryableLayers"})))))},u().createElement(re,J({index:s,setIndex:F,format:c,missingResponses:se,responses:l,requests:r,showEmptyMessageGFI:S,disableInfoAlert:_},i)))})),Xe=(0,m.connect)((e=>({infoFormat:(0,Me.us)(e)})),{onInfoFormatChange:y.ws})(te.Z),_e=(0,m.connect)((e=>({trigger:(0,xe.Mc)(e)?"hover":"click",hoverEnabled:(0,Me.qK)(e)})),{onSetMapTrigger:y.wm,onPurgeMapInfoResults:y.g,onHideMapinfoMarker:y.aN})(ae),Qe={IdentifyPlugin:c()(Ye,{Toolbar:{name:"info",position:6,tooltip:"info.tooltip",icon:u().createElement(p.Glyphicon,{glyph:"map-marker"}),help:u().createElement(oe.Z,{msgId:"helptexts.infoButton"}),action:y.TM,selector:e=>({bsStyle:e.mapInfo&&e.mapInfo.enabled?"success":"primary",active:!(!e.mapInfo||!e.mapInfo.enabled)})},Settings:{tool:[u().createElement(Xe,{key:"featureinfoformat",label:u().createElement(oe.Z,{msgId:"infoFormatLbl"})}),u().createElement(_e,{key:"featureinfotrigger"})],position:3}}),reducers:{mapInfo:Be.Z,mapPopups:De.Z},epics:Le}},488400:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var n=o(171703),r=o(804504);const a=(0,n.connect)((e=>({locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]})))(r.Z)},988737:(e,t,o)=>{"use strict";o.d(t,{Z:()=>I});var n=o(727418),r=o.n(n),a=o(630998),l=o.n(a),s=o(352353),i=o.n(s),c=o(441609),d=o.n(c),u=o(755745),p=o.n(u),m=o(165442),g=o.n(m),f=o(917450),h=o(926854),y=o(687753),b=o(710187),v=o(726598);function E(e,t,o){const n="vector"===o,a=n?t.reqId:l()(e.requests||[],(e=>e.reqId===t.reqId));if(-1!==a){var s;if(["exceptions","error"].includes(o)){const t=e.requests.filter(((e,t)=>t!==a)),o=e.responses.filter(((e,t)=>t!==a));return{...e,responses:o,requests:t}}const{configuration:l,requests:c}=e;let u=e.responses||[];const p="hover"===(null==l?void 0:l.trigger)||(null==e?void 0:e.showInMapPopup);if(!n){const e={response:t[o],queryParams:t.requestParams,layerMetadata:t.layerMetadata,layer:t.layer};p?u=[...u,e]:u[a]=e}let m;return p?m={loaded:!0,index:0}:!p&&((e,t,o,n)=>{var r,a;const{configuration:l,requests:s,queryableLayers:c=[],index:u}=e,{infoFormat:p}=l||{},m=null===(r=(0,v.Te)(p))||void 0===r?void 0:r.getValidResponses([t[o]]),g=null===(a=(0,v.Te)(p))||void 0===a?void 0:a.getNoValidResponses(t),f=i()(u)&&!!m.length,h=!n&&s.length===g.filter((e=>e)).length,y=i()(u)&&n&&s.filter((e=>d()(e))).length===c.length;return f||h||y})(e,u,a,n)?m={loaded:!0,index:a}:u.length!==c.length||null!==(s=m)&&void 0!==s&&s.loaded||(m={loaded:!0}),r()({},e,{...n&&{requests:c},...!i()(m)&&m,responses:[...u]})}return e}const w={enabled:!0,configuration:{}},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.Re:return r()({},e,{warning:"NO_QUERYABLE_LAYERS"});case f.ih:return r()({},e,{warning:null});case f.Xw:return r()({},e,{enabled:t.enabled});case f.ph:return r()({},e,{enabled:!e.enabled});case f.gG:return r()({},e,{index:t.index});case f.oz:return r()({},e,{highlight:t.enabled});case f.Pn:{const{reqId:o,request:n}=t,a=e.requests||[];return r()({},e,{requests:[...a,{request:n,reqId:o}]})}case f.DZ:const{index:n,loaded:a,...l}=e;return{...l,queryableLayers:[],responses:[],requests:[]};case f.XL:return E(e,t,"data");case f.Ih:return E(e,t,"exceptions");case f.km:return E(e,t,"error");case f.xy:return r()({},e,{clickPoint:t.point,clickLayer:t.layer||null,itemId:t.itemId||null,overrideParams:t.overrideParams||null,filterNameList:t.filterNameList||null});case f.e8:return{...e,configuration:{...e.configuration,infoFormat:t.infoFormat}};case f.E0:return r()({},e,{showMarker:!0});case f.F9:return r()({},e,{showMarker:!1});case f.X_:return r()({},e,{showModalReverse:!0,reverseGeocodeData:t.reverseGeocodeData});case f.pb:return r()({},e,{showModalReverse:!1,reverseGeocodeData:void 0});case y.l:return r()({},e,{showMarker:!1,responses:[],requests:[],configuration:{...e.configuration,trigger:"click"}});case f.qb:{var o;const n={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.request.lng,t.request.lat]}};let a=t.metadata&&t.metadata.units;switch(a){case"m":default:a="meters";break;case"deg":a="degrees";break;case"mi":a="miles"}let l=t.metadata&&t.metadata.resolution||1,s=p()(n,(t.metadata.buffer||1)*l,a);const i=(t.layer.features||[]).filter((e=>{try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce(((e,o)=>{let n=o.properties.useGeodesicLines&&o.properties.geometryGeodesic?{...o,geometry:o.properties.geometryGeodesic}:o;return e||g()(s,l&&t.metadata.buffer&&a?p()(n,1,"meters"):n)}),!1):g()(s,l&&t.metadata.buffer&&a?p()(e,1,"meters"):e)}catch(e){return!1}}));let c=e.responses||[];const d="hover"===(null==e||null===(o=e.configuration)||void 0===o?void 0:o.trigger)||(null==e?void 0:e.showInMapPopup),u={response:{crs:null,features:i,totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t.request,layerMetadata:t.metadata,format:"JSON"};let m;d?(c=[...c,u],m={reqId:0}):(c[e.requests.length]=u,m={reqId:e.requests.length});const f=[...e.requests,{}];return E(r()({},e,{requests:f,queryableLayers:t.queryableLayers,responses:[...c]}),m,"vector")}case f.lF:return r()({},e,{centerToMarker:t.status});case f.ZF:return{...e,configuration:{...e.configuration,showEmptyMessageGFI:!e.configuration.showEmptyMessageGFI}};case h.ok:return{...e,configuration:t.config.mapInfoConfiguration||e.configuration||{}};case f.GI:return{...e,formatCoord:t.format};case f.B1:return{...e,showCoordinateEditor:!t.showCoordinateEditor};case f.gc:return{...e,currentEditFeatureQuery:t.query};case f.zX:return{...e,configuration:{...e.configuration,trigger:t.trigger}};case f.Zb:return{...e,showInMapPopup:t.value};case b.Wz:return"cesium"===t.mapType?{...e,configuration:{...e.configuration,trigger:"click"}}:e;case f.Xp:return{...e,...t.cfg};default:return e}}},127608:(e,t,o)=>{"use strict";o.d(t,{qh:()=>c,GK:()=>d,Nl:()=>u,vE:()=>p,gC:()=>m,hI:()=>g,Vc:()=>f,BU:()=>h,Vx:()=>y,a8:()=>b,IM:()=>v,G$:()=>E});var n=o(227361),r=o.n(n),a=o(22222),l=o(612912),s=o(707366),i=o(719648);const c=e=>r()(e,"queryform.crossLayerFilter"),d=e=>((0,l.l2)(e)||[]).filter((function(){let{type:e,group:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"wms"===e&&"background"!==t})).map((t=>{let{title:o,...n}=t;return{...n,title:(0,i.MZ)((0,s.Pz)(e),o)}})),u=e=>r()(e,"queryform.spatialField.geometry"),p=e=>r()(e,"queryform.spatialField"),m=(0,a.P1)((e=>r()(e,"queryform.attributePanelExpanded")),(e=>r()(e,"queryform.spatialPanelExpanded")),(e=>r()(e,"queryform.crossLayerExpanded")),((e,t,o)=>({attributePanelExpanded:e,spatialPanelExpanded:t,crossLayerExpanded:o}))),g=e=>r()(e,"layerFilter.persisted"),f=e=>r()(e,"layerFilter.applied"),h=e=>r()(e,"queryform.spatialField.method"),y=e=>r()(e,"queryform.maxFeaturesWPS"),b=e=>u(e)&&u(e).type||"Polygon",v=e=>u(e)&&u(e).projection||"EPSG =4326",E=e=>u(e)&&u(e).coordinates||[]},110676:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var n=o(923645),r=o.n(n)()((function(e){return e[1]}));r.push([e.id,".ms2 .swipe-header-left-button {\n    float: left;\n}\n\n.ms2 .swipe-header-right-button {\n    float: right;\n}\n",""]);const a=r}}]);