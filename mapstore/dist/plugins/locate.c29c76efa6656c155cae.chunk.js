(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8443],{507633:(e,t,o)=>{"use strict";o.d(t,{X:()=>s,e:()=>r});const s="SAVE:CHECK_PENDING_CHANGES",r=(e,t)=>({type:s,action:e,source:t})},409442:(e,t,o)=>{"use strict";o.d(t,{c:()=>S});var s=o(49977),r=o.n(s),n=o(687753),a=o(945395),l=o(618446),i=o.n(l),c=o(500711),u=o.n(c),p=o(313311),d=o.n(p),h=o(957557),g=o.n(h),m=o(22222),b=o(952273),f=o(641259);const y=(0,m.P1)(f.NB,f.hS,b.hF,b.nA,((e,t,o,s)=>{const r=(null==t?void 0:t.widgets)||[],n=(null==t?void 0:t.layouts)||{};return!e||e.canEdit&&(!i()(n,s)||r.length!==o.length||!u()(o,(e=>{const t=d()(r,{id:e.id}),o=null==t?void 0:t.map,s=e.map,n=null==o?void 0:o.center,a=null==s?void 0:s.center;return!!t&&i()(g()(e,"dependenciesMap","map"),g()(t,"dependenciesMap","map"))&&(!s&&!o||i()(g()(s,"center","bbox","size"),g()(o,"center","bbox","size")))&&(!s&&!o||!n&&!a||!!n&&!!a&&n.crs===a.crs&&Math.abs(n.x-a.x)<1e-12&&Math.abs(n.y-a.y)<1e-12)})))}));var v=o(796205),w=o(943476),E=o(412961),A=o(507633),C=o(275982);const S=(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(A.X).switchMap((t=>{let{action:s,source:l}=t;const i=o(),{currentPage:c}=(0,w.I)(i),u="viewer"===c&&(0,a.In)(i),p="geostory"===c&&(0,v.Pb)(i),d="dashboard"===c&&y(i);return u||p||d?r().Observable.of((0,n.Xg)("unsavedMap","enabled",!0),(0,n.Xg)("unsavedMap","source",l,!1)).merge(e.ofType(C.nk,E.Nv).take(1).switchMap((()=>r().Observable.of((0,n.Xg)("unsavedMap","enabled",!1),(0,n.Xg)("unsavedMap","source",void 0))))):s?r().Observable.of(s):r().Observable.empty()}))}},546997:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>M});var s=o(893379),r=o.n(s),n=o(560691);r()(n.Z,{insert:"head",singleton:!1}),n.Z.locals;var a=o(124852),l=o.n(a),i=o(171703),c=o(630294);const u="CHANGE_LOCATE_STATE",p="LOCATE_ERROR";function d(e){return{type:u,state:e}}var h=o(488400),g=o(45697),m=o.n(g),b=o(804504),f=o(401811),y=o(68390),v=o.n(y),w=o(23888);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},E.apply(this,arguments)}function A(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.e(5593).then(o.bind(o,645593));let C=!1,S=!1;class k extends l().Component{constructor(){super(...arguments),A(this,"onClick",(()=>{let e;switch(this.props.locate){case"FOLLOWING":case"LOCATING":case"PERMISSION_DENIED":e="DISABLED";break;case"ENABLED":e="FOLLOWING";break;case"DISABLED":e="ENABLED"}this.props.onClick(e)})),A(this,"renderButton",(()=>{const e="PERMISSION_DENIED"===this.props.locate;return l().createElement(w.Z,E({id:this.props.id,disabled:e},this.props.btnConfig,{onClick:this.onClick,bsStyle:this.getBtnStyle(),style:this.props.style}),l().createElement(c.Glyphicon,{glyph:this.props.glyph}),this.props.text,this.props.help)})),A(this,"renderLoadingButton",(()=>{let e=l().createElement("img",{src:v(),style:{display:"inline-block",margin:"0px",padding:0,background:"transparent",border:0},alt:"..."});return l().createElement(w.Z,E({id:this.props.id,onClick:this.onClick},this.props.btnConfig,{bsStyle:this.getBtnStyle(),style:this.props.style}),e)})),A(this,"addTooltip",(e=>{const t=l().createElement(c.Tooltip,{id:"locate-tooltip"},l().createElement(b.Z,{msgId:this.props.tooltip}));return l().createElement(f.Z,{placement:this.props.tooltipPlace,key:`{overlay-trigger.${this.props.id}-${this.props.tooltip}}`,overlay:t},e)})),A(this,"getBtnStyle",(()=>{const{locate:e,bsStyle:t}=this.props;let o=t;return"FOLLOWING"!==e&&"ENABLED"!==e||(o="success active"),o}))}UNSAFE_componentWillMount(){var e,t;"PERMISSION_DENIED"===this.props.locate||C||S||(C=!0,null!==(e=navigator)&&void 0!==e&&null!==(t=e.geolocation)&&void 0!==t&&t.getCurrentPosition?navigator.geolocation.getCurrentPosition((()=>{C=!1,S=!0}),(e=>{C=!1,1===e.code&&this.props.onClick("PERMISSION_DENIED")})):(C=!1,this.props.onClick("PERMISSION_DENIED")))}render(){var e="LOCATING"===this.props.locate?this.renderLoadingButton():this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}A(k,"propTypes",{id:m().string,hide:m().bool,btnConfig:m().object,text:m().oneOfType([m().string,m().element]),help:m().oneOfType([m().string,m().element]),locate:m().string,onClick:m().func,tooltip:m().element,tooltipPlace:m().string,style:m().object,bsStyle:m().string,glyph:m().string}),A(k,"defaultProps",{id:"locate-btn",onClick:()=>{},locate:"DISABLED",tooltipPlace:"left",bsStyle:"default",glyph:"1-position-1",btnConfig:{className:"square-button"}});const P=k;var I=o(152543),O=o(727418),T=o.n(O);var L=o(588887);const x=(0,i.connect)((e=>({locate:e.locate&&e.locate.state||"DISABLED",tooltip:e.locate&&"FOLLOWING"===e.locate.state?"locate.tooltipDeactivate":"locate.tooltip"})),{onClick:d})(P),M=(0,I.rx)("Locate",{component:x,options:{disablePluginIf:"{state('mapType') === 'cesium'}"},containers:{Toolbar:{name:"locate",position:2,tool:!0,icon:l().createElement(c.Glyphicon,{glyph:"screenshot"}),help:l().createElement(h.Z,{msgId:"helptexts.locateBtn"}),priority:1},Map:{name:"Locate",Tool:(0,i.connect)((e=>({status:e.locate&&e.locate.state,messages:e.locale&&e.locale.messages?e.locale.messages.locate:void 0})),{changeLocateState:d,onLocateError:function(e){return{type:p,error:e}}})((e=>{let{map:t,mapType:o,speedThreshold:s,status:r,messages:n,maxZoom:l,changeLocateState:i,onLocateError:c,rateControl:u}=e;const p=(0,a.useRef)(),[d,h,g]=(0,L.default)(o,"locate");(0,a.useEffect)((()=>{g&&c(g)}),[g]);const m=e=>{r!==e&&i(e)},b=e=>{c(e.message),i("DISABLED")};function f(){return{locateOptions:{...void 0!==l&&{maxZoom:l},...void 0!==u&&{rateControl:u},...void 0!==s&&{speedThreshold:s}}}}return(0,a.useEffect)((()=>{if(d){const e=f();p.current=new h,p.current.start({map:t,options:e,messages:n,status:r,onStateChange:m,onLocationError:b})}return()=>{var e;null===(e=p.current)||void 0===e||e.clear()}}),[d]),(0,a.useEffect)((()=>{var e;const t=f();null===(e=p.current)||void 0===e||e.update({status:r,messages:n,options:t})}),[r,n,d,l]),null})),priority:1}},reducers:{locate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:"DISABLED"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return T()({},e,{state:t.state});case p:return T()({},e,{error:t.error});default:return e}}}})},78417:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>$e});var s=o(893379),r=o.n(s),n=o(259437);r()(n.Z,{insert:"head",singleton:!1}),n.Z.locals;var a=o(727418),l=o.n(a),i=o(45697),c=o.n(i),u=o(124852),p=o.n(u),d=o(412961),h=o(926854),g=o(274363),m=o(424040),b=o(546952),f=o(687753),y=o(49977),v=o.n(y),w=o(234228),E=o(288287);function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{window.location.href=e};return()=>{t((null==e?void 0:e.url)??`${w.ZP.getConfigProp("geoStoreUrl")}openid/${null==e?void 0:e.provider}/login`)}}function C(){return(0,f.Xg)("LoginForm","enabled",!0)}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{type:"basic",provider:"geostore"}];if((null==e?void 0:e.length)>1)return C();const t=null==e?void 0:e[0];switch(null==t?void 0:t.type){case"openID":return A(t);case"basic":return C();default:return console.warn(`login provider not configured correctly, authentication provider of type ${null==t?void 0:t.type} has not been recognized`),C()}}function k(){return e=>{E.Z.logout().then((()=>e((0,d.Lc)()))).catch((()=>e((0,d.Lc)())))}}var P=o(555363),I=o(510644);function O(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function T(e){var t;return(null===(t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))||void 0===t?void 0:t.pop())||""}const L=e=>{e.clearToken(),e.sessionId&&(e.sessionId="")};let x={};const M=(e,t)=>(0,I.jl)(e.getState())&&(0,I.Ti)(e.getState())===t.provider;var Z=o(243023),j=o(275982),B=o(472500),N=o.n(B),D=o(227361),F=o.n(D),U=o(82411);const G={checkSSO:(e,t)=>e.ofType(U.Vn).take(1).switchMap((()=>{var o;const s=null===(o=(w.ZP.getConfigProp("authenticationProviders")??[]).filter((e=>{let{sso:t}=e;return t})))||void 0===o?void 0:o[0];if(s){const{sso:o}=s;return"keycloak"!==o.type?v().Observable.empty():(e=>(t,o)=>{const s=new(v().Subject);return v().Observable.of(e).merge(t.ofType(d.XP).filter((t=>{let{authProvider:o}=t;return o===e.provider}))).merge(t.ofType(d.UM)).merge(s.asObservable().filter((t=>{var o,s;return"retry"===t&&((null==e||null===(o=e.sso)||void 0===o?void 0:o.autoRetry)??!0)||"syncToken"===t&&((null==e||null===(s=e.sso)||void 0===s?void 0:s.autoSyncToken)??!0)}))).map((t=>({...e,cause:t}))).combineLatest(v().Observable.defer((()=>{return x[(t=e).provider]?Promise.resolve(x[t.provider]):(o=t.jsURL??t.config["auth-server-url"]?`${t.config["auth-server-url"]}js/keycloak.js`:"/js/keycloak.js",new Promise(((e,t)=>{const s=document.createElement("script");s.setAttribute("id","keycloak-script"),s.onload=function(){e(window.Keycloak)},s.onerror=function(e){t(new Error(`Error loading script at URL ${o}`,{cause:e}))},s.src=o,document.head.appendChild(s)}))).then((e=>{var o,s;return x[t.provider]=new e({...t.config,url:null==t||null===(o=t.config)||void 0===o?void 0:o["auth-server-url"],clientId:null==t||null===(s=t.config)||void 0===s?void 0:s.resource}),x[t.provider]}));var t,o})).catch((e=>(console.error("Cannot load keycloak JS API for Single sign on support",e),v().Observable.empty()))),((e,t)=>({provider:e,keycloak:t}))).debounceTime(e.debounceTime??1e3).switchMap((r=>{let{provider:n,keycloak:a}=r;return(e=>(t,o)=>{var s;const r=new(v().Subject),n=(0,P.getToken)(),a=(0,P.getRefreshToken)();return(null===(s=t.cause)||void 0===s?void 0:s.type)??t.cause.toString(),e.init({token:n,refreshToken:a,onLoad:"check-sso",adapter:{login:()=>((0,I.jl)(o.getState())||T("authProvider")?!e.authenticated&&M(o,t)&&r.next("syncToken"):r.next("login"),Promise.resolve()),logout:()=>(M(o,t)&&(L(e),r.next("logout")),Promise.resolve()),redirectUri:t=>t&&t.redirectUri?t.redirectUri:e.redirectUri?e.redirectUri:location.href}}).then((()=>{var s,n;e.authenticated?M(o,t)&&null!=e&&null!==(s=e.tokenParsed)&&void 0!==s&&s.exp&&null!=e&&null!==(n=e.refreshTokenParsed)&&void 0!==n&&n.exp&&r.next("scheduleRefresh"):e.authenticated||(0,I.jl)(o.getState())||r.next("noSessionFound")})).catch((t=>{console.error("Error initializing keycloak SSO",t),L(e),r.next("logout")})),e.onAuthLogout=()=>{L(e),r.next("logout")},r.asObservable()})(a)(n,o).switchMap((r=>{switch(r){case"login":return v().Observable.of(A(e,e.goToPage));case"logout":return v().Observable.timer(a.messageReceiveTimeout??1e4).takeUntil(t.ofType(d.XP,d.UM,d.Nv)).subscribe((()=>{s.next("retry")})),M(o,e)?v().Observable.of(k()):v().Observable.empty();case"syncToken":return s.next("syncToken"),v().Observable.empty();case"noSessionFound":return v().Observable.timer(a.messageReceiveTimeout??1e4).takeUntil(t.ofType(d.XP,d.UM,d.Nv)).subscribe((()=>{s.next("retry")})),v().Observable.empty();case"scheduleRefresh":const n=new Date(1e3*a.tokenParsed.exp),l=new Date;if(new Date(1e3*a.refreshTokenParsed.exp)>l){if(n<l)return v().Observable.of((0,d.jb)());const o=e.refreshInterval??Math.max((n-l)/2,10);return v().Observable.timer(o).takeUntil(t.ofType(d.XP,d.UM,d.Nv)).mapTo((0,d.jb)()).do((()=>{}))}return v().Observable.empty();default:return console.error("Unknown command",r),v().Observable.empty()}})).merge(t.ofType(d.Nv).do((()=>{const e=document.createElement("iframe"),t=a.createLoginUrl({prompt:"none"});e.setAttribute("src",t),e.style.display="none",document.body.appendChild(e),setTimeout((()=>{document.body.removeChild(e)}),5e3)})).ignoreElements()).takeUntil(t.ofType("__CLOSE_KEYCLOAK_MONITOR__").do((()=>{s.complete()})))}))})(s)(e,t)}return v().Observable.empty()})),refreshTokenEpic:(e,t)=>e.ofType(j.nk).take(1).switchMap((()=>(F()(t.getState(),"security.user")?v().Observable.fromPromise(E.Z.verifySession()).map((e=>(0,d.vM)(e,E.Z.authProviderName))).catch((()=>v().Observable.of((0,d.jb)()))):v().Observable.empty()).merge(v().Observable.interval(w.ZP.getConfigProp("tokenRefreshInterval")??3e4).filter((()=>F()(t.getState(),"security.user"))).mapTo((0,d.jb)())))),reloadMapConfig:(e,t)=>v().Observable.merge(e.ofType(d.XP,d.Nv).filter((()=>-1!==(0,Z.F)(t.getState()).indexOf("viewer"))).filter((e=>"LOGOUT"!==e.type?(0,m.o)(t.getState()):-1===(0,Z.F)(t.getState()).indexOf("new"))).map((()=>(0,g.J9)(t.getState()))),e.ofType(d.Nv).filter((()=>-1!==(0,Z.F)(t.getState()).indexOf("viewer")&&-1!==(0,Z.F)(t.getState()).indexOf("new"))).map((()=>"new"))).switchMap((e=>{if("new"===e&&!(0,I.jl)(t.getState()))return v().Observable.of((0,h.jW)({status:403}));const o=N().parse(window.location.href,!0).query;let s=o&&o.config||null;const{configUrl:r}=w.ZP.getConfigUrl({mapId:e,config:s});return v().Observable.of((0,h.JZ)(r,"new"!==e?e:null))})).catch((e=>v().Observable.of((0,h.jW)(e)))),promptLoginOnMapError:(e,t)=>e.ofType(d.cc).switchMap((()=>v().Observable.of((0,f.Xg)("LoginForm","enabled",!0)).merge(e.ofType(f.At).filter((e=>"LoginForm"===e.control&&"enabled"===e.property&&!1===e.value&&!(0,I.jl)(t.getState()))).exhaustMap((()=>v().Observable.of((0,d.zC)()))).takeUntil(e.ofType(d.XP,j.nk))))),initCatalogOnLoginOutEpic:e=>e.ofType(d.XP,d.Nv).switchMap((()=>v().Observable.of((0,b.mG)()))),verifyOpenIdSessionCookie:(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(j.nk).take(1).switchMap((()=>{if((0,I.jl)(o()))return v().Observable.empty();const e=T("tokens_key"),t=T("authProvider");return e&&t?v().Observable.defer((()=>E.Z.getTokens(t,e))).switchMap((e=>{let{access_token:o,refresh_token:s,expires:r}=e;return v().Observable.defer((()=>E.Z.getUserDetails({access_token:o}))).switchMap((e=>v().Observable.of((0,d.he)({...e,access_token:o,refresh_token:s,expires:r,authProvider:t}))))})).catch((()=>v().Observable.of((0,d.kS)(null)))).concat(v().Observable.of(1).switchMap((()=>(O("tokens_key"),O("authProvider"),v().Observable.empty())))):v().Observable.empty()}))},redirectOnLogout:e=>e.ofType(d.Nv).filter((e=>{let{redirectUrl:t}=e;return t})).switchMap((e=>{let{redirectUrl:t}=e;return v().Observable.of((0,j.VF)(t))}))};var R=o(409442),z=o(95029),X=o(630294),V=o(507633),_=o(472986),H=o.n(_),Q=o(804504),$=o(719648),W=o(23888);function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class J extends p().Component{constructor(){super(...arguments),q(this,"state",{loading:!1,username:"",password:""}),q(this,"renderError",(()=>{let e=this.props.loginError;return e?p().createElement(X.Alert,{bsStyle:"danger",key:"errorMessage"},p().createElement("strong",null,this.props.loginFailedMessage)," ",this.renderErrorText(e)):null})),q(this,"renderErrorText",(e=>this.props.loginFailedStatusMessages[e.status]||e.status)),q(this,"renderLoading",(()=>this.state.loading?p().createElement(H(),{spinnerName:"circle",key:"loadingSpinner",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null)),q(this,"renderSubmit",(()=>{let e=(0,$.S$)(this.context.messages,"user.signIn");return this.props.showSubmitButton?p().createElement(W.Z,{type:"submit",value:e,bsStyle:"primary",key:"submit",onClick:this.handleSubmit},e):null})),q(this,"setUser",(e=>{this.setState({username:e.target.value})})),q(this,"setPassword",(e=>{this.setState({password:e.target.value})})),q(this,"handleSubmit",(e=>{e.preventDefault(),this.submit()})),q(this,"handleKeyPress",(e=>{13===e.charCode&&this.submit()})),q(this,"submit",(()=>{let e=this.state.username,t=this.state.password;e&&t||this.props.onError({status:0}),this.props.onSubmit(e,t),this.setState({loading:!0})}))}UNSAFE_componentWillReceiveProps(e){let t=e.user,o=this.props.user;t&&t!==o&&this.props.onLoginSuccess(e.user),this.setState({loading:!1})}render(){return p().createElement("form",{ref:"loginForm"},p().createElement(X.FormGroup,null,p().createElement(X.ControlLabel,null,this.props.userNameText),p().createElement(X.FormControl,{ref:"username",key:"username",type:"text",value:this.state.username,placeholder:(0,$.S$)(this.context.messages,"user.username"),onChange:this.setUser})),p().createElement(X.FormGroup,null,p().createElement(X.ControlLabel,null,this.props.passwordText),p().createElement(X.FormControl,{ref:"password",key:"password",type:"password",value:this.state.password,onKeyPress:this.handleKeyPress,placeholder:(0,$.S$)(this.context.messages,"user.password"),onChange:this.setPassword})),this.renderSubmit(),this.renderError(),p().createElement("div",{style:{float:"right"}},this.renderLoading()))}}q(J,"propTypes",{user:c().object,onLoginSuccess:c().func,showSubmitButton:c().bool,loginError:c().object,onSubmit:c().func,onError:c().func,userNameText:c().node,passwordText:c().node,loginFailedStatusMessages:c().object,loginFailedMessage:c().node}),q(J,"contextTypes",{messages:c().object}),q(J,"defaultProps",{onSubmit:()=>{},onLoginError:()=>{},showSubmitButton:!0,userNameText:p().createElement(Q.Z,{msgId:"user.username"}),passwordText:p().createElement(Q.Z,{msgId:"user.password"}),loginFailedMessage:p().createElement(Q.Z,{msgId:"user.loginFail"}),loginFailedStatusMessages:{0:p().createElement(Q.Z,{msgId:"user.loginFailedStatusMessages.usernamePwdInsert"}),401:p().createElement(Q.Z,{msgId:"user.loginFailedStatusMessages.usernamePwdIncorrect"})}});const K=J;var Y=o(697350),ee=o(261498);r()(ee.Z,{insert:"head",singleton:!1}),ee.Z.locals;var te=o(671947),oe=o.n(te),se=o(358328),re=o.n(se),ne=o(36549);function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},ae.apply(this,arguments)}function le(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const ie={google:oe(),keycloak:re()},ce=e=>{let{children:t}=e;return p().createElement("div",{style:{width:"100%",textAlign:"center",padding:10}},t)},ue=(0,ne.Z)((e=>{let{provider:t,onLogin:o}=e;const{title:s,provider:r,imageURL:n}=t,a=n??ie[r],l=s;return p().createElement("a",{style:{margin:20},onClick:()=>o(t)},a?p().createElement("img",{src:a,alt:l,style:{minHeight:50}}):l??r)}));class pe extends p().Component{constructor(){super(...arguments),le(this,"getForm",(()=>this.props.providers.filter((e=>{let{type:t}=e;return"basic"===t})).length>0?p().createElement(K,{role:"body",ref:"loginForm",showSubmitButton:!1,user:this.props.user,loginError:this.props.loginError,onLoginSuccess:this.props.onLoginSuccess,onSubmit:this.props.onSubmit,onError:this.props.onError}):null)),le(this,"getOpenIDProviders",(()=>{const e=this.props.providers.filter((e=>{let{type:t}=e;return"basic"===t})),t=this.props.providers.filter((e=>{let{type:t}=e;return"openID"===t}));return t.length>0?p().createElement(p().Fragment,null,p().createElement(ce,null,p().createElement(Q.Z,{msgId:e.length>0?"user.orSignInWith":"user.signInWith"})),p().createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},t.map((e=>p().createElement(ue,{key:e.provider,provider:e,tooltip:(null==e?void 0:e.tooltip)??(null==e?void 0:e.provider),onLogin:this.props.openIDLogin}))))):null})),le(this,"getFooter",(()=>p().createElement("span",{role:"footer"},p().createElement(W.Z,{ref:"submit",value:(0,$.S$)(this.context.messages,"user.signIn"),bsStyle:"primary",bsSize:this.props.buttonSize,className:"pull-left",onClick:this.loginSubmit,key:"submit"},(0,$.S$)(this.context.messages,"user.signIn")),this.props.includeCloseButton?p().createElement(W.Z,{key:"closeButton",ref:"closeButton",bsSize:this.props.buttonSize,onClick:this.handleOnHide},p().createElement(Q.Z,{msgId:"close"})):p().createElement("span",null)))),le(this,"handleOnHide",(e=>{e&&this.props.onClose()})),le(this,"loginSubmit",(()=>{this.refs.loginForm.submit()}))}render(){return p().createElement(Y.Z,ae({},this.props.options,{backdrop:"static",show:this.props.show,onHide:this.handleOnHide}),p().createElement(Y.Z.Header,{key:"passwordChange",closeButton:!0},p().createElement(Y.Z.Title,null,p().createElement(Q.Z,{msgId:"user.login"}))),p().createElement(Y.Z.Body,null,p().createElement(p().Fragment,null,this.getForm(),this.getOpenIDProviders())),p().createElement(Y.Z.Footer,null,this.getFooter()))}}le(pe,"propTypes",{providers:c().array,user:c().object,loginError:c().object,show:c().bool,options:c().object,onLoginSuccess:c().func,openIDLogin:c().func,onSubmit:c().func,onError:c().func,onClose:c().func,closeGlyph:c().string,style:c().object,buttonSize:c().string,includeCloseButton:c().bool}),le(pe,"contextTypes",{messages:c().object}),le(pe,"defaultProps",{providers:[{type:"basic",provider:"geostore"}],onLoginSuccess:()=>{},openIDLogin:()=>{},onSubmit:()=>{},onError:()=>{},onClose:()=>{},options:{},closeGlyph:"",style:{},buttonSize:"large",includeCloseButton:!0});const de=pe;function he(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ge extends p().Component{constructor(){super(...arguments),he(this,"state",{password:"",passwordcheck:""}),he(this,"getPwStyle",(()=>this.state.password?0===this.state.password.length?null:this.isMainPasswordValid()?"success":"error":null)),he(this,"renderWarning",(()=>{if(!this.state.password)return null;let e=this.state.password;return null!==e&&e.length<this.props.minPasswordSize&&e.length>0?p().createElement(X.Alert,{bsStyle:"danger"},p().createElement(Q.Z,{msgId:"user.passwordMinlenght",msgParams:{data:this.props.minPasswordSize}})):this.isMainPasswordValid()?null!==e&&e!==this.state.passwordcheck?p().createElement(X.Alert,{bsStyle:"danger"},p().createElement(Q.Z,{msgId:"user.passwordCheckFail"})):null:p().createElement(X.Alert,{bsStyle:"danger"},p().createElement(Q.Z,{msgId:"user.passwordInvalid"}))})),he(this,"renderStatus",(()=>this.props.changed?p().createElement(X.Alert,{bsStyle:"success"},p().createElement(Q.Z,{msgId:"user.passwordChanged"})):this.props.error?p().createElement(X.Alert,{bsStyle:"danger"},p().createElement(Q.Z,{msgId:"user.passwordError"})):null)),he(this,"isMainPasswordValid",(e=>(e||this.state.password).length>=this.props.minPasswordSize)),he(this,"isValid",((e,t)=>{let o=e||this.state.password,s=t||this.state.passwordcheck;return!!o&&null!==o&&this.isMainPasswordValid(o)&&o===s})),he(this,"changePassword",(e=>{this.setState({password:e.target.value}),this.props.onChange(e.target.value,this.isValid(e.target.value,this.state.passwordcheck))})),he(this,"changePasswordCheck",(e=>{this.setState({passwordcheck:e.target.value}),this.props.onChange(this.state.password,this.isValid(this.state.password,e.target.value))}))}render(){return p().createElement("form",{ref:"loginForm",onSubmit:this.handleSubmit},p().createElement(X.FormGroup,{validationState:this.getPwStyle()},p().createElement(X.ControlLabel,null,this.props.newPasswordText),p().createElement(X.FormControl,{ref:"password",key:"password",type:"password",hasFeedback:!0,onChange:this.changePassword,placeholder:(0,$.S$)(this.context.messages,"user.newPwd")})),p().createElement(X.FormGroup,{validationState:this.isValid(this.state.password,this.state.passwordcheck)&&this.getPwStyle()?"success":"error"},p().createElement(X.ControlLabel,null,this.props.passwordCheckText),p().createElement(X.FormControl,{ref:"passwordcheck",key:"passwordcheck",hasFeedback:!0,type:"password",label:this.props.passwordCheckText,onChange:this.changePasswordCheck,placeholder:(0,$.S$)(this.context.messages,"user.retypePwd")})),this.renderWarning(),this.renderStatus())}}he(ge,"propTypes",{minPasswordSize:c().number,onChange:c().func,newPasswordText:c().node,passwordCheckText:c().node,changed:c().bool,error:c().object}),he(ge,"contextTypes",{messages:c().object}),he(ge,"defaultProps",{minPasswordSize:6,onChange:()=>{},newPasswordText:p().createElement(Q.Z,{msgId:"user.newPwd"}),passwordCheckText:p().createElement(Q.Z,{msgId:"user.retypePwd"})});const me=ge;function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},be.apply(this,arguments)}function fe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class ye extends p().Component{constructor(){super(...arguments),fe(this,"state",{passwordValid:!1,loading:!1,password:""}),fe(this,"onPasswordChange",(()=>{this.props.onPasswordChange(this.props.user,this.state.password)})),fe(this,"getFooter",(()=>p().createElement("span",{role:"footer"},p().createElement("div",{style:{float:"left"}},this.renderLoading()),p().createElement(W.Z,{ref:"passwordChangeButton",key:"passwordChangeButton",bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.state.passwordValid||this.props.loading,onClick:()=>{this.setState({loading:!0}),this.onPasswordChange()}},p().createElement(Q.Z,{msgId:"user.changePwd"})),this.props.includeCloseButton?p().createElement(W.Z,{key:"closeButton",ref:"closeButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},p().createElement(Q.Z,{msgId:"close"})):p().createElement("span",null)))),fe(this,"getBody",(()=>p().createElement(me,{error:this.props.error,role:"body",ref:"passwordResetForm",changed:this.props.changed,onChange:(e,t)=>{this.setState({passwordValid:t,password:e})}}))),fe(this,"renderLoading",(()=>this.props.loading?p().createElement(H(),{spinnerName:"circle",key:"loadingSpinner",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null))}UNSAFE_componentWillReceiveProps(e){let t=e.user,o=this.props.user;t&&t!==o&&(this.props.onPasswordChanged(e.user),this.setState({loading:!1}))}render(){return p().createElement(Y.Z,be({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),p().createElement(Y.Z.Header,{key:"passwordChange",closeButton:!0},p().createElement(Y.Z.Title,null,p().createElement(Q.Z,{msgId:"user.changePwd"}))),p().createElement(Y.Z.Body,null,this.getBody()),p().createElement(Y.Z.Footer,null,this.getFooter()))}}fe(ye,"propTypes",{user:c().object,authHeader:c().string,show:c().bool,options:c().object,onPasswordChange:c().func,onPasswordChanged:c().func,onClose:c().func,closeGlyph:c().string,style:c().object,buttonSize:c().string,includeCloseButton:c().bool,changed:c().bool,error:c().object,loading:c().bool}),fe(ye,"defaultProps",{user:{name:"Guest"},onPasswordChange:()=>{},onPasswordChanged:()=>{},onClose:()=>{},options:{},closeGlyph:"",style:{},buttonSize:"small",includeCloseButton:!0,loading:!1});const ve=ye;var we=o(283604),Ee=o(466737),Ae=o(701469),Ce=o.n(Ae),Se=o(513218),ke=o.n(Se),Pe=o(747037),Ie=o.n(Pe);function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Oe.apply(this,arguments)}function Te(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Le extends p().Component{constructor(){super(...arguments),Te(this,"getUserInfo",(()=>({name:e=>p().createElement("strong",null,e),role:e=>p().createElement("strong",null,this.capitalCase(e)),email:e=>p().createElement("strong",null,e),company:e=>p().createElement("strong",null,e),notes:e=>p().createElement("strong",null,e),groups:e=>{const t=Ce()(e)&&[...e]||e.group&&Ce()(e.group)&&[...e.group]||e.group&&ke()(e.group)&&[{...e.group}];return t&&t.map((e=>e.groupName&&p().createElement("div",{key:e.groupName},p().createElement("strong",null,e.groupName))||null)).filter((e=>e))||null}}))),Te(this,"renderAttributes",(()=>{if(this.props.user&&this.props.user.attribute){const e=(0,P.getUserAttributes)(this.props.user);if(e&&e.length>0){const t=this.getUserInfo(),o=e.reduce(((e,t)=>"UUID"!==t.nam?{...e,[t.name]:t.value}:{...e}),{}),s={...this.props.user,...o},r=Object.keys(t).map((e=>{const o=s[e]&&t[e](s[e]);return o&&p().createElement(X.Row,{key:e},p().createElement(X.Col,{sm:6,xs:12},p().createElement(Q.Z,{msgId:"user.details"+this.capitalCase(e)}),":"),p().createElement(X.Col,{sm:6,xs:12},o))})).filter((e=>e));if(r&&r.length>0)return p().createElement("div",{className:"ms-user-details-table"},p().createElement(X.Grid,{fluid:!0},r))}}return p().createElement(X.Alert,{type:"info"},p().createElement(Q.Z,{msgId:"user.noAttributesMessage"}))})),Te(this,"capitalCase",(e=>{if(Ie()(e)){const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return""}))}render(){return p().createElement(Ee.Z,null,p().createElement(we.Z,Oe({title:p().createElement("span",null,p().createElement(X.Glyphicon,{glyph:"user"})," ",p().createElement(Q.Z,{msgId:"user.details"})),clickOutEnabled:!1,size:"sm"},this.props.options,{show:this.props.show,onClose:this.props.onClose,buttons:this.props.includeCloseButton?[{text:p().createElement(Q.Z,{msgId:"close"}),onClick:this.props.onClose,bsStyle:"primary"}]:[]}),this.renderAttributes()))}}Te(Le,"propTypes",{user:c().object,show:c().bool,options:c().object,onClose:c().func,includeCloseButton:c().bool}),Te(Le,"defaultProps",{user:{name:"Guest"},onClose:()=>{},options:{},includeCloseButton:!0});const xe=Le;function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},Me.apply(this,arguments)}function Ze(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const je=(0,ne.Z)(X.NavDropdown),Be=(0,ne.Z)(X.DropdownButton);class Ne extends p().Component{constructor(){super(...arguments),Ze(this,"renderGuestTools",(()=>{let e=this.props.nav?je:Be;return p().createElement(e,Me({className:this.props.className,pullRight:!0,bsStyle:this.props.bsStyle,title:this.renderButtonText(),id:"dropdown-basic-primary",tooltipId:"user.login",tooltipPosition:this.props.tooltipPosition},this.props.menuProps),p().createElement(X.MenuItem,{onClick:()=>this.props.onShowLogin(this.props.providers)},p().createElement(X.Glyphicon,{glyph:"log-in"}),p().createElement(Q.Z,{msgId:"user.login"})))})),Ze(this,"renderLoggedTools",(()=>{let e=this.props.nav?je:Be,t=[];return this.props.showAccountInfo&&t.push(p().createElement(X.MenuItem,{key:"accountInfo",onClick:this.props.onShowAccountInfo}," ",p().createElement(X.Glyphicon,{glyph:"user"}),p().createElement(Q.Z,{msgId:"user.info"}))),this.props.showPasswordChange&&t.push(p().createElement(X.MenuItem,{key:"passwordChange",onClick:this.props.onShowChangePassword}," ",p().createElement(X.Glyphicon,{glyph:"asterisk"})," ",p().createElement(Q.Z,{msgId:"user.changePwd"}))),this.props.showLogout&&(t.length>0&&t.push(p().createElement(X.MenuItem,{key:"divider",divider:!0})),t.push(p().createElement(X.MenuItem,{key:"logout",onClick:this.checkUnsavedChanges},p().createElement(X.Glyphicon,{glyph:"log-out"})," ",p().createElement(Q.Z,{msgId:"user.logout"})))),p().createElement(p().Fragment,null,p().createElement(e,Me({id:"loginButton",className:this.props.className,pullRight:!0,bsStyle:"success",title:this.renderButtonText(),tooltipId:"user.userMenu",tooltipPosition:this.props.tooltipPosition},this.props.menuProps),p().createElement("span",{key:"logged-user"},p().createElement(X.MenuItem,{header:!0},this.props.user.name)),t),p().createElement(we.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:p().createElement(Q.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:p().createElement(Q.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.props.onLogoutConfirm},{text:p().createElement(Q.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},p().createElement("div",{className:"ms-detail-body"},p().createElement(Q.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))})),Ze(this,"renderButtonText",(()=>this.props.renderButtonContent?this.props.renderButtonContent(this.props):[p().createElement(X.Glyphicon,{glyph:"user"}),this.props.renderButtonText?this.props.user&&this.props.user[this.props.displayName]||"Guest":null])),Ze(this,"logout",(()=>{this.props.onCloseUnsavedDialog(),this.props.onLogout()})),Ze(this,"checkUnsavedChanges",(()=>{this.props.renderUnsavedMapChangesDialog?this.props.onCheckMapChanges(this.props.onLogout):this.logout()}))}render(){return!this.props.hidden&&(this.props.user&&this.props.user[this.props.displayName]?this.renderLoggedTools():this.renderGuestTools())}}Ze(Ne,"propTypes",{user:c().object,displayName:c().string,providers:c().array,showAccountInfo:c().bool,showPasswordChange:c().bool,showLogout:c().bool,hidden:c().bool,displayUnsavedDialog:c().bool,displayAttributes:c().func,bsStyle:c().string,tooltipPosition:c().string,renderButtonText:c().bool,nav:c().bool,menuProps:c().object,renderButtonContent:c().func,onShowAccountInfo:c().func,onShowChangePassword:c().func,onShowLogin:c().func,onLogout:c().func,onCheckMapChanges:c().func,className:c().string,renderUnsavedMapChangesDialog:c().bool,onLogoutConfirm:c().func,onCloseUnsavedDialog:c().func}),Ze(Ne,"defaultProps",{user:{},tooltipPosition:"bottom",showAccountInfo:!0,showPasswordChange:!0,showLogout:!0,onLogout:()=>{},onCheckMapChanges:()=>{},onPasswordChange:()=>{},onCloseUnsavedDialog:()=>{},displayName:"name",bsStyle:"primary",displayAttributes:e=>"email"===e.name,className:"user-menu",menuProps:{noCaret:!0},toolsCfg:[{buttonSize:"small",includeCloseButton:!1,useModal:!1,closeGlyph:"1-close"},{buttonSize:"small",includeCloseButton:!1,useModal:!1,closeGlyph:"1-close"},{buttonSize:"small",includeCloseButton:!1,useModal:!1,closeGlyph:"1-close"}],renderUnsavedMapChangesDialog:!0,renderButtonText:!1,hidden:!1,displayUnsavedDialog:!1});const De=Ne;var Fe=o(119008),Ue=o(152543);const Ge=(0,Ue.$j)((e=>({user:(0,I.np)(e)})),{onShowLogin:S,onShowAccountInfo:f.Xg.bind(null,"AccountInfo","enabled",!0,!0),onShowChangePassword:f.Xg.bind(null,"ResetPassword","enabled",!0,!0),onLogout:k})(De),Re=(0,Ue.$j)((e=>({user:(0,I.np)(e),show:e.controls.AccountInfo&&e.controls.AccountInfo.enabled})),{onClose:f.Xg.bind(null,"AccountInfo","enabled",!1,!1)})(xe),ze=(0,Ue.$j)((e=>({user:(0,I.np)(e),show:e.controls.ResetPassword&&e.controls.ResetPassword.enabled,changed:!(!e.security||!e.security.passwordChanged),error:e.security&&e.security.passwordError,loading:e.security&&e.security.changePasswordLoading||!1})),{onPasswordChange:(e,t)=>(0,d.Cp)(e,t),onClose:f.Xg.bind(null,"ResetPassword","enabled",!1,!1)})(ve),Xe=(0,Ue.$j)((e=>({providers:w.ZP.getConfigProp("authenticationProviders"),show:e.controls.LoginForm&&e.controls.LoginForm.enabled,user:(0,I.np)(e),loginError:e.security&&e.security.loginError})),{onLoginSuccess:f.Xg.bind(null,"LoginForm","enabled",!1,!1),openIDLogin:A,onClose:()=>e=>{e((0,f.Xg)("LoginForm","enabled",!1)),e((0,d.q$)())},onSubmit:d.x4,onError:d.KZ})(de),Ve=(0,Ue.$j)((e=>({currentProvider:(0,I.Ti)(e),user:(0,I.np)(e),nav:!1,providers:w.ZP.getConfigProp("authenticationProviders"),renderButtonText:!1,renderButtonContent:()=>p().createElement(X.Glyphicon,{glyph:"user"}),className:"square-button",renderUnsavedMapChangesDialog:w.ZP.getConfigProp("unsavedMapChangesDialog"),displayUnsavedDialog:(0,Fe.Eg)(e)&&"logout"===(0,Fe.nS)(e)})),{onShowLogin:S,onShowAccountInfo:f.Xg.bind(null,"AccountInfo","enabled",!0,!0),onShowChangePassword:f.Xg.bind(null,"ResetPassword","enabled",!0,!0),onLogout:k,onCheckMapChanges:e=>t=>{t((0,V.e)(e,"logout"))},onCloseUnsavedDialog:f.Xg.bind(null,"unsavedMap","enabled",!1),onLogoutConfirm:d.kS.bind(null,void 0)},(function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{currentProvider:r,providers:n=[]}=t,{type:a,showAccountInfo:l=!1,showPasswordChange:i=!1}=(null===(e=(n??[]).filter((e=>{let{provider:t}=e;return t===r})))||void 0===e?void 0:e[0])??{},c="openID"===a;return{...s,...t,...o,showAccountInfo:c?l:s.showAccountInfo,showPasswordChange:c?i:s.showPasswordChange}}))(De);var _e=o(652700);function He(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Qe extends p().Component{render(){return p().createElement("div",{id:this.props.id},p().createElement("div",{style:this.props.menuStyle},p().createElement(Ge,null)),p().createElement(Re,null),p().createElement(ze,null),p().createElement(Xe,null))}}He(Qe,"propTypes",{id:c().string,menuStyle:c().object}),He(Qe,"defaultProps",{id:"mapstore-login-menu",menuStyle:{zIndex:30}});const $e={LoginPlugin:l()(Qe,{OmniBar:{name:"login",position:3,tool:(0,Ue.$j)((e=>({hidden:(0,_e.z)(e),renderButtonContent:()=>p().createElement(X.Glyphicon,{glyph:"user"}),bsStyle:"primary"})))(Ve),tools:[Re,ze,Xe],priority:1},SidebarMenu:{name:"login",position:2,tool:(0,Ue.$j)((()=>({bsStyle:"tray",tooltipPosition:"left",renderButtonContent:e=>[p().createElement(X.Glyphicon,{glyph:"user"}),e.renderButtonText?e.user&&p().createElement("span",null,"props.user[props.displayName]")||p().createElement("span",null,'"Guest"'):null],renderButtonText:!0,menuProps:{noCaret:!0}})))(Ve),selector:e=>({style:{display:(0,Fe.$)(e)?"none":null}}),tools:[Re,ze,Xe],priority:1}}),reducers:{security:z.Z},epics:{...G,comparePendingChanges:R.c}}},488400:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var s=o(171703),r=o(804504);const n=(0,s.connect)((e=>({locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]})))(r.Z)},652700:(e,t,o)=>{"use strict";o.d(t,{T:()=>n,z:()=>a});var s=o(227361),r=o.n(s);const n=e=>r()(e,"sidebarmenu.lastActiveItem",!1),a=e=>r()(e,"controls.sidebarMenu.enabled",!1)},261498:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var s=o(923645),r=o.n(s)()((function(e){return e[1]}));r.push([e.id,".ms2 #mapstore-login-panel {\n    width: 300px;\n}\n.ms2 #mapstore-login-panel button {\n    float: right !important;\n}\n",""]);const n=r},560691:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var s=o(923645),r=o.n(s)()((function(e){return e[1]}));r.push([e.id,".ms2 #locate-btn {\n    position: absolute;\n    z-index: 1000;\n    right: 10px;\n    bottom: 150px;\n}\n\n.ms2 #mapstore-toolbar #locate-btn {\n    position: static;\n}\n",""]);const n=r},259437:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var s=o(923645),r=o.n(s)()((function(e){return e[1]}));r.push([e.id,".ms2 #mapstore-login-menu {\n    text-align: right;\n}\n",""]);const n=r},671947:(e,t,o)=>{e.exports=o.p+"google.svg"},358328:(e,t,o)=>{e.exports=o.p+"keycloak.svg"},68390:e=>{e.exports="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA"},588887:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var s=o(124852);const r=(e,t)=>{const[r,n]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null),i=(0,s.useRef)(),c=(0,s.useRef)();return(0,s.useEffect)((()=>(c.current=!0,()=>{c.current=!1})),[]),(0,s.useEffect)((()=>(e&&!i.current&&(n(!1),l(null),o(78641)("./"+e+"/"+t).then((e=>{c.current&&(i.current=e.default,n(!0))})).catch((e=>{c.current&&l(e)}))),()=>{})),[e]),[r,i.current,a]}},78641:(e,t,o)=>{var s={"./hooks/useMapTool":[588887],"./hooks/useMapTool.js":[588887],"./leaflet/locate":[401419,5243,1419],"./leaflet/locate.js":[401419,5243,1419],"./openlayers/locate":[554712,1001,302,4712],"./openlayers/locate.js":[554712,1001,302,4712]};function r(e){if(!o.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],r=t[0];return Promise.all(t.slice(1).map(o.e)).then((()=>o(r)))}r.keys=()=>Object.keys(s),r.id=78641,e.exports=r}}]);