(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9772],{301698:(e,t,n)=>{"use strict";function o(e){return{type:"MANAGER_ITEM_SELECTED",toolId:e}}n.d(t,{i:()=>o})},956611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(747037),s=n.n(o),r=n(45697),l=n.n(r),a=n(124852),i=n.n(a),p=n(630294),c=n(719648);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i().Component{constructor(){super(...arguments),m(this,"onMouseOver",(()=>{const e=s()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return i().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}m(u,"propTypes",{id:l().string,helpText:l().oneOfType([l().string,l().element]),isVisible:l().bool,changeHelpText:l().func,changeHelpwinVisibility:l().func,className:l().string}),m(u,"contextTypes",{messages:l().object}),m(u,"defaultProps",{helpText:"",isVisible:!1});const g=u},638510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var o=n(353131),s=n.n(o),r=n(727418),l=n.n(r),a=n(45697),i=n.n(a),p=n(124852),c=n.n(p),m=n(630294),u=n(171703),g=n(12838),h=n(687753),d=n(723813),y=n(956611),b=n(804504),f=n(401811),T=n(23888);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S.apply(this,arguments)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=(0,u.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:d.n2,changeHelpwinVisibility:d.SA})(y.Z);class x extends c().Component{constructor(){super(...arguments),v(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),v(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const n={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),n[this.props.eventSelector]=h.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),n[this.props.eventSelector]=h.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(n[this.props.eventSelector]=s()(e.action,this.context),t=e.selector||t),(0,u.connect)(t,n,((e,t,n)=>this.mergeHandlers({...n,...e},t)))(this.props.tool)})),v(this,"renderTool",((e,t)=>{if(e.element)return e.element;const n=e.help?c().createElement(C,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),o=e.tooltip?c().createElement(b.Z,{msgId:e.tooltip}):null,s=this.getTool(e),r=this.getToolConfig(e),l=e.childTools||[];return this.addTooltip(c().createElement(s,S({},r,{pluginCfg:e.cfg,tooltip:o,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:n,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(m.Glyphicon,{glyph:e.cfg.glyph}):e.icon,n," ",e.text,l.length>0&&c().createElement(x,S({},e.innerProps,{mapType:this.props.mapType,tools:l,panels:e.childPanels}))),e)})),v(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),v(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,n=c().createElement(t,S({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),o=e.title?c().createElement(b.Z,{msgId:e.title}):null;return e.wrap?c().createElement(m.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(m.Panel,{header:o,style:this.props.panelStyle,className:this.props.panelClassName},n)):n})))),v(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((n,o)=>l()(n,{[o]:e[o]?(0,g.qC)(e[o],t[o]):t[o]})),e))),v(this,"addTooltip",((e,t)=>{if(t.tooltip){let n=c().createElement(m.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(b.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:n},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}v(x,"propTypes",{id:i().string.isRequired,container:i().func,containerWrapperStyle:i().object,tool:i().oneOfType([i().object,i().func]),className:i().string,style:i().object,tools:i().array,panels:i().array,mapType:i().string,toolStyle:i().string,activeStyle:i().string,toolSize:i().string,stateSelector:i().string.isRequired,eventSelector:i().string,panelStyle:i().object,panelClassName:i().string,activePanel:i().string,toolCfg:i().object}),v(x,"contextTypes",{messages:i().object,router:i().object}),v(x,"defaultProps",{container:m.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:T.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const E=x},488400:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(171703),s=n(804504);const r=(0,o.connect)((e=>({locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]})))(s.Z)},286969:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var o=n(124852),s=n.n(o),r=n(45697),l=n.n(r),a=n(171703),i=n(727418),p=n.n(i);const c=e=>t=>t.localConfig&&t.localConfig.plugins&&!!t.localConfig.plugins[e];var m=n(36549),u=n(630294),g=n(638510),h=n(488400),d=n(301698);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(28604);const b=(0,m.Z)(u.DropdownButton),f=(0,a.connect)((()=>({noCaret:!0,pullRight:!0,bsStyle:"primary",title:s().createElement(u.Glyphicon,{glyph:"1-menu-manage"}),tooltipId:"manager.managerMenu",tooltipPosition:"bottom"})),{})(b);class T extends s().Component{constructor(){super(...arguments),y(this,"getTools",(()=>[{element:s().createElement("span",{key:"burger-menu-title"},this.props.title)},...this.props.entries.filter((e=>this.props.enableRulesManager||"/rules-manager"!==e.path)).filter((e=>this.props.enableImporter||"/importer"!==e.path)).filter((e=>this.props.enableContextManager||"/context-manager"!==e.path)).sort(((e,t)=>e.position-t.position)).map((e=>({action:t=>(t.router.history.push(e.path),this.props.itemSelected(e.id),{type:"@@router/LOCATION_CHANGE",payload:{action:t.router.history.action,isFirstRendering:!1,location:t.router.history.location}}),text:e.msgId?s().createElement(h.Z,{msgId:e.msgId}):e.text,cfg:{...e}})))]))}render(){return"ADMIN"===this.props.role?s().createElement(g.Z,{id:this.props.id,className:"square-button",container:f,mapType:this.props.mapType,toolStyle:"primary",activeStyle:"default",stateSelector:"burgermenu",eventSelector:"onSelect",tool:u.MenuItem,tools:this.getTools(),panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName}):null}}y(T,"propTypes",{id:l().string,dispatch:l().func,role:l().string,entries:l().array,title:l().node,onItemClick:l().func,itemSelected:l().func,controls:l().object,mapType:l().string,panelStyle:l().object,panelClassName:l().string,enableRulesManager:l().bool,enableImporter:l().bool,enableContextManager:l().bool}),y(T,"contextTypes",{messages:l().object,router:l().object}),y(T,"defaultProps",{id:"mapstore-manager-menu",entries:[{msgId:"users.title",glyph:"1-group-mod",path:"/manager/usermanager"},{msgId:"contextManager.title",glyph:"wrench",path:"/context-manager"},{msgId:"rulesmanager.menutitle",glyph:"admin-geofence",path:"/rules-manager"},{msgId:"importer.title",glyph:"upload",path:"/importer"}],role:"",onItemClick:()=>{},itemSelected:()=>{},title:s().createElement(u.MenuItem,{header:!0},"Manager"),controls:[],mapType:"leaflet",panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto"},panelClassName:"toolbar-panel",enableContextManager:!1});const S={ManagerMenuPlugin:p()((0,a.connect)((e=>({enableRulesManager:c("rulesmanager")(e),enableImporter:c("importer")(e),controls:e.controls,role:e.security&&e.security.user&&e.security.user.role})),{itemSelected:d.i})(T),{OmniBar:{name:"managermenu",position:1,tool:!0,priority:1}}),reducers:{}}},665840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(923645),s=n.n(o)()((function(e){return e[1]}));s.push([e.id,".ms2 #mapstore-burger-menu {\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.ms2 .burger-menu-submenu {\n    display: none;\n    position: absolute;\n    left: -160px;\n    top: 0;\n    width: 160px;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n}\n\n.ms2 .burger-menu-submenu li a {\n    display: block;\n    padding: 10px 15px;\n}\n\n.ms2 .burger-menu-submenu li a:hover {\n    text-decoration: none;\n}\n\n.ms2 #mapstore-burger-menu .dropdown-menu>li>a:hover>span>.burger-menu-submenu,\n.ms2 .burger-menu-submenu>li>a:hover>span>.burger-menu-submenu {\n    display: block;\n}\n\n.ms2 .burger-menu-submenu span {\n    overflow: hidden;\n}\n\n.ms2 #mapstore-navbar #mapstore-burger-menu {\n    position: relative;\n    float: right;\n    left: 0;\n}\n",""]);const r=s},28604:(e,t,n)=>{"use strict";var o=n(893379),s=n.n(o),r=n(665840);s()(r.Z,{insert:"head",singleton:!1}),r.Z.locals}}]);