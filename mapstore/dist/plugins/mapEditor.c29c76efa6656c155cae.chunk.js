(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9032],{403410:(e,o,t)=>{"use strict";t.d(o,{hn:()=>n,yg:()=>a,vD:()=>r,jJ:()=>i,oy:()=>s,W:()=>l,B1:()=>c,fU:()=>d,cY:()=>p});const n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",r="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",i="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",s="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",l=function(e,o){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",n=arguments.length>3?arguments[3]:void 0;return{type:i,id:e,owner:o,actionType:t,options:n}},c=(e,o)=>({type:s,owner:e,options:o}),d=function(){let{id:e,owner:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:a,id:e,owner:o}},p=e=>({type:r,owner:e})},733210:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>W});var n={};t.r(n),t.d(n,{mapEditorConfigureMapState:()=>v});var a=t(171703),r=t(22222),i=t(152543),s=t(49977),l=t(545542),c=t(926854),d=t(403410),p=t(333101),m=t(687753),u=t(513218),g=t.n(u),f=t(234228);const v=e=>e.ofType(l.nr).switchMap((e=>{let o,{map:t}=e;if(g()(t)){const e=JSON.parse(JSON.stringify(t.data));o=(0,c.H0)({map:e,version:2},t.id)}else{let e=!!t&&t||"new";const{configUrl:n}=(0,f.cF)({mapId:e,config:null});e="new"===e?null:e,o=(0,c.JZ)(n,e)}return s.Observable.from([(0,d.cY)(),(0,m.fV)(),(0,p.nN)(),o])}));var E=t(521923);const w={};var A=t(124852),h=t.n(A),b=t(793870),T=t(45697),C=t.n(T);const I={desktop:[{name:"Map",cfg:{mapOptions:{openlayers:{interactions:{pinchRotate:!1,altShiftDragRotate:!1},attribution:{container:"#footer-attribution-container"}},leaflet:{attribution:{container:"#footer-attribution-container"}}},toolsOptions:{scalebar:{container:"#footer-scalebar-container"}}}},"DrawerMenu","Annotations","BackgroundSelector",{name:"Identify",cfg:{showHighlightFeatureButton:!0,viewerOptions:{container:"{context.ReactSwipe}"}},override:{Toolbar:{position:11}}},{name:"Locate",override:{Toolbar:{alwaysVisible:!0}}},{name:"TOC",cfg:{activateQueryTool:!1,activateAddLayerButton:!0,activateAddGroupButton:!0,activateMetedataTool:!1,addLayersPermissions:!0,removeLayersPermissions:!0,sortingPermissions:!0,addGroupsPermissions:!0,removeGroupsPermissions:!0,activateLayerFilterTool:!1}},"AddGroup","MapFooter","TOCItemsSettings","MapImport","MapExport",{name:"Settings",cfg:{wrap:!0}},{name:"MetadataExplorer",cfg:{wrap:!0}},{name:"CRSSelector",cfg:{additionalCRS:{},filterAllowedCRS:["EPSG:4326","EPSG:3857"],allowedRoles:["ADMIN"]}},{name:"Search",cfg:{withToggle:["max-width: 768px","min-width: 768px"]}},{name:"Toolbar",id:"NavigationBar",cfg:{id:"navigationBar"}},"ScaleBox",{name:"ZoomAll",override:{Toolbar:{alwaysVisible:!0}}},{name:"MapLoading",override:{Toolbar:{alwaysVisible:!0}}},{name:"ZoomIn",override:{Toolbar:{alwaysVisible:!0}}},{name:"ZoomOut",override:{Toolbar:{alwaysVisible:!0}}},"OmniBar","BurgerMenu","Expander","Undo","Redo",{name:"SearchServicesConfig",cfg:{containerClassName:"map-editor-search-config"}},"FeedbackMask"]};var y=t(867076),O=t(535937),S=t.n(O),D=t(859518),L=t(6760),R=t(804504),k=t(640924),N=t(274363),M=t(612912),x=t(4143),B=t(945395),Z=t(57677),_=t(835516),P=t(389539);const Y=(0,r.P1)(M.l2,M.Bt,x.Mz,B.UC,Z.I,Z._,N.Od,((e,o,t,n,a,r,i)=>({layers:e,groups:o,backgrounds:t,additionalOptions:n,textSearchConfig:a,bookmarkSearchConfig:r,map:i}))),V=(0,y.compose)((0,a.connect)(Y),(0,y.defaultProps)({confirmTitle:h().createElement(R.Z,{msgId:"mapEditor.confirmExitTitle"}),confirmContent:h().createElement(R.Z,{msgId:"mapEditor.confirmExitContent"})}),(0,y.withHandlers)({onClick:e=>{let{hide:o,owner:t}=e;return()=>{o(t)}},save:e=>{let{save:o,owner:t,map:n,layers:a,groups:r,backgrounds:i,textSearchConfig:s,bookmarkSearchConfig:l,additionalOptions:c}=e;return()=>{const e=_.default.saveMapConfiguration(n,a,r,i,s,l,c);return o({...e.map,layers:e.map.layers.map((e=>S()(e,(e=>void 0!==e&&!(0,P.isNull)(e)))))},t)}}}),L.Z,(0,y.withHandlers)({hide:e=>{let{onClick:o}=e;return function(){return o(...arguments)}}})),F=(0,y.compose)((0,a.connect)(null,{onResize:D.Ju}),(0,k.Z)({debounceTime:150}));var z=t(283604),G=t(466737);const U=F(b.Z),J=function(){let{open:e=!1,pluginsConfig:o=I,hide:t=(()=>{}),save:n=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{plugins:a}=arguments.length>1?arguments[1]:void 0;return h().createElement(G.Z,null,h().createElement(z.Z,{title:h().createElement(R.Z,{msgId:"mapEditor.modalTitle"}),show:e,clickOutEnabled:!1,onClose:t,size:"lg",showFullscreen:!0,showClose:!1,bodyClassName:"map-editor-modal-body",initialFullscreenState:"expanded",modalClassName:"map-editor-modal",buttons:[{text:h().createElement(R.Z,{msgId:"cancel"}),bsSize:"sm",onClick:t},{text:h().createElement(R.Z,{msgId:"ok"}),bsSize:"sm",onClick:n}]},h().createElement(U,{pluginsConfig:o,plugins:a})))};J.contextTypes={plugins:C().object};const H=V(J);var j=t(227361),q=t.n(j);const W=(0,i.rx)("MapEditor",{component:(0,a.connect)((0,r.zB)({open:e=>q()(e,"mapEditor.open"),owner:e=>q()(e,"mapEditor.owner")}),{hide:l.Cp,save:l.a1})(H),reducers:{mapEditor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case l.nr:return(0,E.qC)((0,E.t8)("open",!0),(0,E.t8)("owner",o.owner))(e);case l.B8:return(0,E.qC)((0,E.t8)("open",!1),(0,E.t8)("owner",void 0))(e);default:return e}}},epics:n})}}]);