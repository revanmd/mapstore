(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[3610],{956611:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var s=o(747037),l=o.n(s),n=o(45697),r=o.n(n),i=o(124852),p=o.n(i),a=o(630294),c=o(719648);function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class h extends p().Component{constructor(){super(...arguments),m(this,"onMouseOver",(()=>{const e=l()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return p().createElement(a.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}m(h,"propTypes",{id:r().string,helpText:r().oneOfType([r().string,r().element]),isVisible:r().bool,changeHelpText:r().func,changeHelpwinVisibility:r().func,className:r().string}),m(h,"contextTypes",{messages:r().object}),m(h,"defaultProps",{helpText:"",isVisible:!1});const d=h},629079:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>g});var s=o(124852),l=o.n(s),n=o(45697),r=o.n(n),i=o(638510),p=o(867076);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}let c={};const m=(0,p.lifecycle)({componentDidMount(){if(c[this.props.id]){const e=document.getElementById(this.props.id);e&&e.parentNode&&!e.hasChildNodes()&&e.parentNode.replaceChild(c[this.props.id],e)}},shouldComponentUpdate:()=>!1,componentWillUnmount(){c[this.props.id]=document.getElementById(this.props.id)}})((e=>{let{id:t}=e;return l().createElement("div",{id:t})})),h=[{element:l().createElement(m,{key:"attribution",id:"footer-attribution-container"})},{element:l().createElement(m,{key:"scalebar",id:"footer-scalebar-container"})}];class d extends l().Component{constructor(){super(...arguments),a(this,"getPanels",(()=>this.props.items.filter((e=>e.tools)).reduce(((e,t)=>e.concat(t.tools.map(((e,o)=>({name:t.name+o,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[o]:{}}))))),[]))),a(this,"getTools",(()=>[h[0],...this.props.items.sort(((e,t)=>t.position-e.position)),h[1]]))}render(){return l().createElement(i.Z,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:e=>l().createElement("div",e,e.children),toolStyle:"primary",activeStyle:"default",stateSelector:"mapFooter",tool:e=>l().createElement("div",null,e.children),tools:this.getTools(),panels:this.getPanels()})}}a(d,"propTypes",{className:r().string,style:r().object,items:r().array,id:r().string,mapType:r().string}),a(d,"defaultProps",{items:[],className:"mapstore-map-footer",style:{},id:"mapstore-map-footer",mapType:"leaflet"});const g={MapFooterPlugin:d,reducers:{}}},638510:(e,t,o)=>{"use strict";o.d(t,{Z:()=>P});var s=o(353131),l=o.n(s),n=o(727418),r=o.n(n),i=o(45697),p=o.n(i),a=o(124852),c=o.n(a),m=o(630294),h=o(171703),d=o(12838),g=o(687753),u=o(723813),y=o(956611),f=o(804504),b=o(401811),T=o(23888);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},v.apply(this,arguments)}function S(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const C=(0,h.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:u.n2,changeHelpwinVisibility:u.SA})(y.Z);class E extends c().Component{constructor(){super(...arguments),S(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),S(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const o={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),o[this.props.eventSelector]=g.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),o[this.props.eventSelector]=g.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(o[this.props.eventSelector]=l()(e.action,this.context),t=e.selector||t),(0,h.connect)(t,o,((e,t,o)=>this.mergeHandlers({...o,...e},t)))(this.props.tool)})),S(this,"renderTool",((e,t)=>{if(e.element)return e.element;const o=e.help?c().createElement(C,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),s=e.tooltip?c().createElement(f.Z,{msgId:e.tooltip}):null,l=this.getTool(e),n=this.getToolConfig(e),r=e.childTools||[];return this.addTooltip(c().createElement(l,v({},n,{pluginCfg:e.cfg,tooltip:s,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:o,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(m.Glyphicon,{glyph:e.cfg.glyph}):e.icon,o," ",e.text,r.length>0&&c().createElement(E,v({},e.innerProps,{mapType:this.props.mapType,tools:r,panels:e.childPanels}))),e)})),S(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),S(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,o=c().createElement(t,v({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),s=e.title?c().createElement(f.Z,{msgId:e.title}):null;return e.wrap?c().createElement(m.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(m.Panel,{header:s,style:this.props.panelStyle,className:this.props.panelClassName},o)):o})))),S(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((o,s)=>r()(o,{[s]:e[s]?(0,d.qC)(e[s],t[s]):t[s]})),e))),S(this,"addTooltip",((e,t)=>{if(t.tooltip){let o=c().createElement(m.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(f.Z,{msgId:t.tooltip}));return c().createElement(b.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:o},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}S(E,"propTypes",{id:p().string.isRequired,container:p().func,containerWrapperStyle:p().object,tool:p().oneOfType([p().object,p().func]),className:p().string,style:p().object,tools:p().array,panels:p().array,mapType:p().string,toolStyle:p().string,activeStyle:p().string,toolSize:p().string,stateSelector:p().string.isRequired,eventSelector:p().string,panelStyle:p().object,panelClassName:p().string,activePanel:p().string,toolCfg:p().object}),S(E,"contextTypes",{messages:p().object,router:p().object}),S(E,"defaultProps",{container:m.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:T.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const P=E}}]);