(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[6600],{522296:(e,t,r)=>{"use strict";r.d(t,{Z:()=>be});var o=r(124852),a=r.n(o),s=r(472986),n=r.n(s),l=r(630294),i=r(23888),c=r(756435),p=r(804504),d=r(414293),m=r.n(d),A=r(423214);const h=e=>{let{children:t,service:r,onChangeServiceProperty:o=(()=>{}),onToggleThumbnail:s=(()=>{})}=e;return a().createElement("div",null,a().createElement(l.FormGroup,{controlId:"autoload",key:"autoload"},a().createElement(l.Col,{xs:12},void 0!==r.autoload&&a().createElement(l.Checkbox,{value:"autoload",onChange:e=>o("autoload",e.target.checked),checked:!m()(r.autoload)&&r.autoload},a().createElement(p.Z,{msgId:"catalog.autoload"})))),a().createElement(l.FormGroup,{controlId:"thumbnail",key:"thumbnail"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{onChange:()=>s(),checked:!!m()(r.hideThumbnail)||!r.hideThumbnail},a().createElement(p.Z,{msgId:"catalog.showPreview"})))),!m()(r.type)&&"wfs"===r.type&&a().createElement(l.FormGroup,{controlId:"allowUnsecureLayers",key:"allowUnsecureLayers"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{onChange:e=>o("allowUnsecureLayers",e.target.checked),checked:!m()(r.allowUnsecureLayers)&&r.allowUnsecureLayers},a().createElement(p.Z,{msgId:"catalog.allowUnsecureLayers.label"})," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.allowUnsecureLayers.tooltip"})})))),t)};var u=r(569291),S=r(618446),g=r.n(S),y=r(662398);const v=e=>{let{onValid:t,onError:r,json:s={}}=e;const[n,l]=(0,o.useState)(JSON.stringify(s,!0,2)),[i,c]=(0,o.useState)();return(0,o.useEffect)((()=>{try{const e=JSON.parse(n);c(),t(e)}catch(e){c(e),r(e)}}),[n]),a().createElement("div",{className:"code-editor"},a().createElement(y.Z,{value:n,onBeforeChange:(e,t,r)=>{l(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),i&&a().createElement("div",{className:"error-area"},a().createElement("div",{className:"error-area-header"},a().createElement(p.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),a().createElement("div",{className:"error-area-body"},a().createElement(p.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:i.message}},(e=>a().createElement("pre",{className:"error-msg"},e))))))};var b=r(867517);const E={options:{}},f=e=>{let{service:t={},setValid:r=(()=>{}),onToggleThumbnail:o=(()=>{}),onChangeServiceProperty:s=(()=>{})}=e;const n=t.options||t.variants?{options:t.options||{},variants:t.variants}:void 0;return a().createElement("div",null,a().createElement(l.FormGroup,{controlId:"autoload",key:"autoload"},a().createElement(l.Col,{xs:12},void 0!==t.autoload&&a().createElement(l.Checkbox,{key:"autoload",value:"autoload",onChange:e=>s("autoload",e.target.checked),checked:!m()(t.autoload)&&t.autoload},a().createElement(p.Z,{msgId:"catalog.autoload"})),a().createElement(l.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:()=>o(),checked:!!m()(t.hideThumbnail)||!t.hideThumbnail},a().createElement(p.Z,{msgId:"catalog.showPreview"})),"tms"===t.provider?a().createElement(l.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:e=>s("forceDefaultTileGrid",e.target.checked),checked:!m()(t.forceDefaultTileGrid)&&t.forceDefaultTileGrid},a().createElement(p.Z,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),t.provider&&"custom"!==t.provider?null:a().createElement(l.Col,null,a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",a().createElement(A.Z,{text:a().createElement(b.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),a().createElement(v,{json:n||E,onValid:e=>{const{options:o,variants:a}=e;g()(o,t.options)||s("options",o),g()(a,t.variants)||s("variants",a),r(!0)},onError:()=>{t.options&&s("options",void 0),t.variants&&s("variants",void 0),r(!1)}}))))};var C=r(743129),T=r(467763),x=r(486234),k=r(173581),w=r(941106),L=r.n(w),P=r(742178),I=r(401811);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},F.apply(this,arguments)}const B={mode:"xml",theme:"material",lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,indentUnit:2,tabSize:2},Z=e=>{let{glyph:t="info-sign",className:r="",tooltip:o}=e;return a().createElement(I.Z,{placement:"bottom",overlay:o},a().createElement(l.Glyphicon,{style:{marginLeft:4},glyph:t,className:r}))},O=e=>{let t=`catalog.filter.${e}.info`;return"error"===e&&(t="catalog.filter.error"),a().createElement(l.Tooltip,{id:"filter"},a().createElement(p.Z,{msgId:t}))},N=a().createElement(Z,{tooltip:O("error"),glyph:"exclamation-mark",className:"text-danger"}),z=a().createElement(l.HelpBlock,{style:{fontSize:12}},a().createElement(p.Z,{msgId:"catalog.filter.dynamic.helpText"})),j=e=>{let{type:t,code:r,setCode:o,error:s}=e;const n=`${t}Filter`;return a().createElement(l.FormGroup,null,a().createElement(l.Col,{xs:4},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:`catalog.filter.${t}.label`})),a().createElement(Z,{tooltip:O(t)}),s[t]&&N),a().createElement(l.Col,{xs:8,style:{marginBottom:5}},a().createElement(y.Z,{value:r[n],options:B,onBeforeChange:(e,t,a)=>{o({...r,[n]:a})}}),"dynamic"===t&&z))},U=function(){let{onChangeServiceProperty:e=(()=>{}),filter:{staticFilter:t,dynamicFilter:r}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[s,n]=(0,o.useState)({}),[l,i]=(0,o.useState)({staticFilter:t,dynamicFilter:r}),c={code:l,setCode:i,error:s},p=e=>{var t,r;const o=L()(P._b)({filterXml:e,startPosition:1,maxRecords:4});return!(null!==(t=(new DOMParser).parseFromString(o,"application/xml"))&&void 0!==t&&null!==(r=t.getElementsByTagName("parsererror"))&&void 0!==r&&r.length)};return(0,o.useEffect)((()=>{const r=p(l.staticFilter);r&&!g()(l.staticFilter,t)&&e("filter.staticFilter",l.staticFilter),n({...s,static:!r})}),[l.staticFilter]),(0,o.useEffect)((()=>{const t=p(l.dynamicFilter);t&&!g()(l.dynamicFilter,r)&&e("filter.dynamicFilter",l.dynamicFilter),n({...s,dynamic:!t})}),[l.dynamicFilter]),a().createElement("div",{className:"catalog-csw-filters"},a().createElement(j,F({type:"static"},c)),a().createElement(j,F({type:"dynamic"},c)))};var R=r(23279),G=r.n(R),M=r(884238),Q=r.n(M),D=r(435161),V=r.n(D),W=r(957557),$=r.n(W),_=r(640554),H=r.n(_),X=r(36549);const q=e=>{let{onChangeServiceProperty:t=(()=>{}),service:r}=e;const s=(0,X.Z)(l.Button),[n,i]=(0,o.useState)(Q()(r.domainAliases)?r.domainAliases:{0:""}),[c,d]=(0,o.useState)(1),m=(0,o.useCallback)(G()((e=>{t("domainAliases",e)}),300),[]);(0,o.useEffect)((()=>{m(n)}),[n]);const h=e=>t=>{let{target:r}=t;return i((t=>({...t,[e]:r.value})))},u=e=>()=>i((t=>({...$()(t,[e])}))),S=V()(n,((e,t)=>a().createElement(l.Col,{xs:12,className:"form-group alias-item"},a().createElement(l.FormControl,{id:`alias-${t}`,key:`alias-${t}`,type:"text",value:e,onChange:h(t)}),0!==H()(t)&&a().createElement(s,{tooltip:a().createElement(p.Z,{msgId:"catalog.domainAliases.removeAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"left",className:"remove-alias",onClick:u(t)},a().createElement(l.Glyphicon,{glyph:"minus"})))));return a().createElement(l.FormGroup,{controlId:"domain-aliases",key:"domain-aliases",className:"mapstore-catalog-domain-aliases"},a().createElement(l.Col,{xs:12},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.domainAliases.title"}))," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.domainAliases.helpTooltip"})})),S,a().createElement(l.Col,{xs:12},a().createElement(s,{className:"add-alias",tooltip:a().createElement(p.Z,{msgId:"catalog.domainAliases.addAliasTooltip"}),tooltipid:"add-alias-button",tooltipPosition:"right",onClick:()=>{d((e=>e+1)),i((e=>({...e,[c]:""})))}},a().createElement(l.Glyphicon,{glyph:"plus"}))))};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},J.apply(this,arguments)}const Y=(0,x.Z)("noResultsText")(C.ZP),K=e=>e.map((e=>({label:`${e}x${e}`,value:e}))),ee=e=>{var t;let{service:r,formatOptions:s=T.QQ,onChangeServiceFormat:n=(()=>{}),onChangeServiceProperty:i=(()=>{}),currentWMSCatalogLayerSize:c,selectedService:d,onFormatOptionsFetch:u=(()=>{}),advancedRasterSettingsStyles:S={},tileSizeOptions:g=[256,512],isLocalizedLayerStylesEnabled:y,onChangeMetadataTemplate:v=(()=>{}),onToggleTemplate:b=(()=>{}),...E}=e;(0,o.useEffect)((()=>{r.isNew&&i("autoSetVisibilityLimits",E.autoSetVisibilityLimits)}),[E.autoSetVisibilityLimits]);const f=K(g);return a().createElement(h,J({},E,{onChangeServiceProperty:i,service:r}),!(!y||m()(r.type))&&"wms"===r.type&&a().createElement(l.FormGroup,{controlId:"localized-styles",key:"localized-styles"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:e=>i("localizedLayerStyles",e.target.checked),checked:!m()(r.localizedLayerStyles)&&r.localizedLayerStyles},a().createElement(p.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),a().createElement(l.FormGroup,{controlId:"autoSetVisibilityLimits",key:"autoSetVisibilityLimits"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{onChange:e=>i("autoSetVisibilityLimits",e.target.checked),checked:!m()(r.autoSetVisibilityLimits)&&r.autoSetVisibilityLimits},a().createElement(p.Z,{msgId:"catalog.autoSetVisibilityLimits.label"})," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.autoSetVisibilityLimits.tooltip"})})))),!m()(r.type)&&"wms"===r.type&&a().createElement(l.FormGroup,{controlId:"allowUnsecureLayers",key:"allowUnsecureLayers"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{onChange:e=>i("allowUnsecureLayers",e.target.checked),checked:!m()(r.allowUnsecureLayers)&&r.allowUnsecureLayers},a().createElement(p.Z,{msgId:"catalog.allowUnsecureLayers.label"})," ",a().createElement(A.Z,{text:a().createElement(p.Z,{msgId:"catalog.allowUnsecureLayers.tooltip"})})))),!m()(r.type)&&"csw"===r.type&&!r.excludeShowTemplate&&a().createElement(l.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},a().createElement(l.Col,{xs:12},a().createElement(l.Checkbox,{onChange:()=>b(),checked:r&&r.showTemplate},a().createElement(p.Z,{msgId:"catalog.showTemplate"})),a().createElement("br",null)),r&&r.showTemplate&&a().createElement(l.Col,{xs:12},a().createElement("span",null,a().createElement("p",null,a().createElement(p.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),a().createElement("pre",null,a().createElement(p.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),a().createElement(l.Col,{xs:12},r&&r.showTemplate&&a().createElement(k.Z,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:r.metadataTemplate||"",onChange:e=>{v(e&&"<p><br></p>"!==e?e:"")}}))),a().createElement(l.FormGroup,{style:S},a().createElement(l.Col,{xs:6},a().createElement(l.ControlLabel,null,"Format")),a().createElement(l.Col,{xs:6,style:{marginBottom:"5px"}},a().createElement(Y,{isLoading:E.formatsLoading,onOpen:()=>u(r.url),value:r&&r.format,clearable:!0,noResultsText:E.formatsLoading?"catalog.format.loading":"catalog.format.noOption",options:E.formatsLoading?[]:s,onChange:e=>n(e&&e.value)}))),a().createElement(l.FormGroup,{style:S},a().createElement(l.Col,{xs:6},a().createElement(l.ControlLabel,null,"WMS Layer tile size")),a().createElement(l.Col,{xs:6,style:{marginBottom:"5px"}},a().createElement(Y,{value:K([(null===(t=r.layerOptions)||void 0===t?void 0:t.tileSize)||256])[0],options:f,onChange:e=>i("layerOptions",{tileSize:e&&e.value})}))),!m()(r.type)&&"csw"===r.type&&a().createElement(U,{filter:null==r?void 0:r.filter,onChangeServiceProperty:i}),!m()(r.type)&&"wms"===r.type&&a().createElement(q,{service:r,onChangeServiceProperty:i}))},te=e=>{let{onToggleAdvancedSettings:t=(()=>{}),...r}=e;const{service:o={}}=r,s=(e=>{switch(e){case"tms":return f;case"wmts":case"wfs":default:return h;case"wms":case"csw":return ee}})(o.type);return a().createElement(u.Z,{useToolbar:!0,title:a().createElement(p.Z,{msgId:"catalog.advancedSettings"}),expanded:!m()(o.showAdvancedSettings)&&o.showAdvancedSettings,onSwitch:t},a().createElement(s,r))};var re=r(227361),oe=r.n(re),ae=r(313311),se=r.n(ae),ne=r(441609),le=r.n(ne),ie=r(234228),ce=r(472500),pe=r.n(ce);const de=e=>{let t={wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0","3dtiles":"e.g. https://mydomain.com/tileset.json"};for(const[r,o]of Object.entries(t))if(r===e.type)return o;return!0};var me=r(836727);const Ae=(0,x.Z)("placeholder")(l.FormControl),he="custom",ue="tms",Se=e=>{let{service:t={},onChangeUrl:r=(()=>{})}=e;return a().createElement(l.FormGroup,{controlId:"URL"},a().createElement(l.Col,{xs:12},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.url"})),a().createElement(Ae,{type:"text",style:{textOverflow:"ellipsis"},placeholder:de(t),value:t&&t.url,onChange:e=>r(e.target.value)})))},ge=e=>e===ue?"TMS 1.0.0":e,ye=e=>{var t,r,o;let{serviceTypes:s=[],onChangeServiceProperty:n,service:i={},onChangeUrl:c=(()=>{}),onChangeTitle:d=(()=>{})}=e;const m=(0,ie.u8)("allowedProviders")||oe()(se()(s||[],{name:"tms"}),"allowedProviders")||[],h=Object.keys(me.Z).filter((e=>"ALL"===m||m.indexOf(e)>=0)),u=i===ue?i:null==i||null===(t=i.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(o=r.call(t,"."))||void 0===o?void 0:o[0],S=!u||u===he,g=u===ue,y=g||S;return a().createElement(l.FormGroup,null,a().createElement(l.Col,{xs:12,sm:S?3:12,md:y?3:12},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.tms.provider"})),a().createElement(Ae,{onChange:e=>{const t=e.target.value;n("provider",`${t}`),t!==he&&t!==ue?d(t):S||g||d("")},value:u,componentClass:"select"},[he,ue,...h].map((e=>({name:e,label:ge(e)}))).map((e=>a().createElement("option",{value:e.name,key:e.name},e.label))))),a().createElement(l.Col,{xs:12,sm:9,md:9},S?a().createElement(a().Fragment,null,a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.tms.urlTemplate"}),"  ",a().createElement(A.Z,{text:a().createElement(b.Z,{msgId:"catalog.tms.urlTemplateHint"})})),a().createElement(Ae,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:i&&i.url,onChange:e=>c(e.target.value)})):g?a().createElement(a().Fragment,null,a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.url"})),a().createElement(Ae,{type:"text",style:{textOverflow:"ellipsis"},placeholder:de(i),value:i&&i.url,onChange:e=>c(e.target.value)})):null))},ve=e=>{let{service:t={},serviceTypes:r,onChangeTitle:s,onChangeUrl:n,onChangeServiceProperty:i,onChangeType:c,setValid:d=(()=>{})}=e;const[m,A]=(0,o.useState)(!1);function h(e){if(n(e),e){const r=!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const{protocol:o}=pe().parse(t??window.location.href),{protocol:a}=pe().parse(e);return"https:"!==o||!a||o===a||r}(e,null,null==t?void 0:t.allowUnsecureLayers);A(r),d(!r)}}(0,o.useEffect)((()=>{!le()(t.url)&&h(t.url)}),[null==t?void 0:t.allowUnsecureLayers]);const u="tms"===t.type?ye:Se;return a().createElement(l.Form,{horizontal:!0},a().createElement(l.FormGroup,{controlId:"title",key:"type-title-row"},a().createElement(l.Col,{key:"type",xs:12,sm:3,md:3},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.type"})),a().createElement(Ae,{onChange:e=>c(e.target.value),value:t&&t.type,componentClass:"select"},r.map((e=>a().createElement("option",{value:e.name,key:e.name},e.label))))),a().createElement(l.Col,{key:"title",xs:12,sm:9,md:9},a().createElement(l.ControlLabel,null,a().createElement(p.Z,{msgId:"catalog.serviceTitle"})),a().createElement(Ae,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:t&&t.title,onChange:e=>s(e.target.value)}))),a().createElement(u,{key:"url-row",serviceTypes:r,service:t,onChangeUrl:h,onChangeTitle:s,onChangeServiceProperty:i}),m?a().createElement(l.Alert,{bsStyle:"danger"},a().createElement(p.Z,{msgId:"catalog.invalidUrlHttpProtocol"})):null)},be=e=>{let{service:t={title:"",type:"wms",url:"",format:"image/png"},serviceTypes:r=[{name:"csw",label:"CSW"}],onChangeTitle:s=(()=>{}),onChangeUrl:d=(()=>{}),onChangeType:m=(()=>{}),id:A,urlTooltip:h,formatOptions:u,buttonStyle:S,saving:g,onChangeServiceFormat:y=(()=>{}),onChangeMetadataTemplate:v=(()=>{}),onToggleAdvancedSettings:b=(()=>{}),onChangeServiceProperty:E=(()=>{}),onToggleTemplate:f=(()=>{}),onToggleThumbnail:C=(()=>{}),onAddService:T=(()=>{}),onDeleteService:x=(()=>{}),onChangeCatalogMode:k=(()=>{}),onFormatOptionsFetch:w=(()=>{}),selectedService:L,isLocalizedLayerStylesEnabled:P,tileSizeOptions:I=[256,512],formatsLoading:F,layerOptions:B={},services:Z,autoSetVisibilityLimits:O=!1}=e;const[N,z]=(0,o.useState)(!0);return a().createElement(c.Z,{bodyClassName:"ms2-border-layout-body catalog",header:a().createElement(ve,{setValid:z,service:t,serviceTypes:r,onChangeTitle:s,onChangeUrl:d,onChangeType:m,onChangeServiceProperty:E,urlTooltip:h})},a().createElement(l.Form,null,a().createElement(te,{setValid:z,id:A,service:t,formatOptions:u,buttonStyle:S,saving:g,onChangeServiceFormat:y,onChangeMetadataTemplate:v,onToggleAdvancedSettings:b,onChangeServiceProperty:E,onToggleTemplate:f,onToggleThumbnail:C,isLocalizedLayerStylesEnabled:P,tileSizeOptions:I,currentWMSCatalogLayerSize:B.tileSize?B.tileSize:256,selectedService:L,onFormatOptionsFetch:w,formatsLoading:F,autoSetVisibilityLimits:O}),a().createElement(l.FormGroup,{controlId:"buttons",key:"buttons"},a().createElement(l.Col,{xs:12},a().createElement(i.Z,{style:S,disabled:g||!N,onClick:()=>T(),key:"catalog_add_service_button"},g?a().createElement(n(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,a().createElement(p.Z,{msgId:"save"})),t&&!t.isNew?a().createElement(i.Z,{style:S,onClick:()=>x(t,Z),key:"catalog_delete_service_button"},a().createElement(p.Z,{msgId:"catalog.delete"})):null,a().createElement(i.Z,{style:S,disabled:g,onClick:()=>k("view"),key:"catalog_back_view_button"},a().createElement(p.Z,{msgId:"cancel"}))))))}},141832:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var o=r(124852),a=r.n(o),s=r(732833),n=r(756435),l=r(867076),i=r(630294),c=r(23888);const p={bottom:{true:"chevron-down",false:"chevron-up"},top:{true:"chevron-up",false:"chevron-down"},right:{true:"chevron-right",false:"chevron-left"},left:{true:"chevron-left",false:"chevron-right"}},d=e=>{let{position:t="right",onClose:r,bsStyle:o="default",title:s="",fullscreen:n=!1,showFullscreen:l=!1,glyph:d="info-sign",additionalRows:m,onFullscreen:A=(()=>{})}=e;const h=r?a().createElement(c.Z,{key:"ms-header-close",className:"square-button ms-close",onClick:r,bsStyle:o},a().createElement(i.Glyphicon,{glyph:"1-close"})):null,u=l?a().createElement(c.Z,{key:"ms-header-glyph",className:"square-button",bsStyle:o,onClick:()=>A(!n)},a().createElement(i.Glyphicon,{glyph:p[t]&&p[t][n]||"resize-full"})):a().createElement("div",{key:"ms-header-glyph",className:"square-button bg-"+o,style:{display:"flex"}},a().createElement(i.Glyphicon,{glyph:d,className:"default"===o?"text-primary":""})),S="left"===t?[h,u]:[u,h];return a().createElement(i.Grid,{fluid:!0,style:{width:"100%"},className:"ms-header ms-"+o},a().createElement(i.Row,null,a().createElement(i.Col,{xs:2},S[0]),a().createElement(i.Col,{xs:8},a().createElement("h4",null,s)),a().createElement(i.Col,{xs:2},S[1])),m)},m=(0,l.withState)("fullscreen","onFullscreen",!1)((e=>{let{fluid:t,className:r="",fullscreen:o=!1,position:l,open:i,size:c=550,style:p={},zIndex:m=1030,onClose:A,bsStyle:h,title:u,showFullscreen:S=!1,glyph:g,header:y,footer:v,children:b,onFullscreen:E=(()=>{}),fixed:f=!1,resizable:C=!1,hideHeader:T}=e;return a().createElement("div",{className:"ms-side-panel "+(f?"":"ms-absolute-dock ")+(C?"":"react-dock-no-resize ")+r},a().createElement(s.default,{fluid:t||o,position:l,dimMode:"none",isVisible:i,size:o?1:c,dockStyle:p,zIndex:m},a().createElement(n.Z,{header:!T&&i&&a().createElement(d,{position:l,onClose:A,bsStyle:h,title:u,fullscreen:o,showFullscreen:S,glyph:g,additionalRows:y,onFullscreen:E}),footer:i&&v},i&&b)))}))},688472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var o=r(124852),a=r.n(o),s=r(867076),n=r(756435),l=r(141832),i=r(283604);const c=(0,s.renameProps)({open:"show"})((e=>{let{children:t,header:r,...o}=e;return a().createElement(i.Z,o,a().createElement(n.Z,{header:a().createElement("div",{className:"ms-header"},r)},t))})),p=(0,s.branch)((e=>{let{dock:t}=e;return!t}),(()=>e=>a().createElement(c,e)))(l.Z)},908316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var o=r(124852),a=r.n(o),s=r(294184),n=r.n(s);const l=e=>{let{id:t,children:r,dockStyle:o,className:s,style:l={}}=e;const i={width:`calc(100% - ${((null==o?void 0:o.right)??0)+((null==o?void 0:o.left)??0)}px)`,transform:`translateX(-${(null==o?void 0:o.right)??0}px)`,pointerEvents:"none"};return a().createElement("div",{id:t,className:n()({...s?{[s]:!0}:{},"dock-container":!0}),style:{...i,...l}},r)};var i=r(496259),c=r(688472);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},p.apply(this,arguments)}const d=e=>{let{children:t,containerClassName:r,containerId:o,containerStyle:s,dock:n=!0,siblings:d,size:m,...A}=e;return a().createElement(l,{dockStyle:s,id:o,className:r},a().createElement(i.Z,null,(e=>{let{width:r}=e;return a().createElement(a().Fragment,null,a().createElement(c.Z,p({dock:n,size:m/r>1?r:m},A),t),d)})))}},173581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(124852);const a=(0,r(297977).Z)()((0,o.lazy)((()=>Promise.all([r.e(6758),r.e(9715)]).then(r.bind(r,439715)))))},723027:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_ALLOWED_PROVIDERS:()=>Be,default:()=>je});var o=r(893379),a=r.n(o),s=r(177452);a()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;var n=r(727418),l=r.n(n),i=r(45697),c=r.n(i),p=r(124852),d=r.n(p),m=r(630294),A=r(171703),h=r(867076),u=r(22222),S=r(757660),g=r(546952),y=r(687753),v=r(333101),b=r(964091),E=r(414293),f=r.n(E),C=r(23888),T=r(743129),x=r(756435),k=r(719648),w=r(804504),L=r(513218),P=r.n(L),I=r(91175),F=r.n(I),B=r(701469),Z=r.n(B),O=r(92742),N=r.n(O),z=r(175063),j=r(351546),U=r(419622),R=r(348660),G=r(401811),M=r(774855),Q=r.n(M),D=r(555363);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W extends d().Component{constructor(){super(...arguments),V(this,"state",{showCopiedToolTip:!1})}render(){if(!this.props.url)return null;const e=this.props.addAuthentication?(0,D.addAuthenticationToUrl)(this.props.url):this.props.url,t=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",r=d().createElement(m.Tooltip,{id:"tooltip"},d().createElement(w.Z,{msgId:t})),o=d().createElement(Q(),{text:e,onCopy:this.props.onCopy},d().createElement(G.Z,{placement:"right",overlay:r,onExited:()=>this.setState({showCopiedToolTip:!1})},d().createElement(C.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:()=>this.setState({showCopiedToolTip:!0})},d().createElement(m.Glyphicon,{glyph:"paperclip"})," ",this.props.labelId&&d().createElement(w.Z,{msgId:this.props.labelId}))));return d().createElement("div",{className:"link-sharing"},d().createElement(m.FormGroup,{bsSize:this.props.bsSize},d().createElement(m.FormControl,{className:"link-input",type:"text",value:e,onChange:()=>{}}),o))}}V(W,"propTypes",{url:c().string.isRequired,labelId:c().string,onCopy:c().func,bsSize:c().string,addAuthentication:c().bool}),V(W,"defaultProps",{onCopy:()=>{},bsSize:"small",addAuthentication:!1});const $=W;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_.apply(this,arguments)}class H extends d().Component{render(){if(!this.props.links||0===this.props.links.length)return null;const{links:e,buttonSize:t,...r}=this.props,o=e.map(((e,t)=>d().createElement($,_({key:t,url:e.url,labelId:e.labelId},r)))),a=d().createElement(m.Popover,{className:"links-popover",id:"links-popover"},d().createElement("h5",null,d().createElement(w.Z,{msgId:"catalog.share"})),o);return d().createElement(G.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:a},d().createElement(C.Z,{bsSize:t,className:"square-button-md",bsStyle:"primary"},d().createElement(m.Glyphicon,{glyph:"link"})))}}var X,q,J;X=H,q="propTypes",J={links:c().array,onCopy:c().func,messages:c().object,locale:c().string,buttonSize:c().string,popoverContainer:c().object,addAuthentication:c().bool},q in X?Object.defineProperty(X,q,{value:J,enumerable:!0,configurable:!0,writable:!0}):X[q]=J;const Y=H;var K=r(222777),ee=r(8204),te=r(417173),re=r.n(te),oe=r(416202),ae=r(679087),se=r.n(ae),ne=r(835516);function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ie extends d().Component{constructor(){var e;super(...arguments),e=this,le(this,"state",{visibleExpand:!1,loading:!1}),le(this,"getTitle",(e=>P()(e)?e[this.props.currentLocale]||e.default:e||"")),le(this,"renderThumb",((e,t)=>{let r=e||re();return d().createElement(m.Image,{className:"preview",src:r,alt:t&&this.getTitle(t.title)})})),le(this,"getFormats",((e,t)=>{let r;var o,a;return"wms"===e&&(r=(null===(o=this.props)||void 0===o||null===(a=o.service)||void 0===a?void 0:a.format)&&[this.props.service.format]),r||t.format&&[t.format]||t.formats})),le(this,"getButtons",(e=>{var t,r,o,a;const s=this.props.showGetCapLinks?(0,z.F8)(e):[],n=this.getFormats(e.layerType||e.serviceType,e)||[],l=this.props.service&&this.props.service.localizedLayerStyles,i=null===(t=this.props)||void 0===t||null===(r=t.service)||void 0===r?void 0:r.autoSetVisibilityLimits,c=null===(o=this.props)||void 0===o||null===(a=o.service)||void 0===a?void 0:a.allowUnsecureLayers;return[{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",disabled:this.state.loading,loading:this.state.loading,glyph:"plus",onClick:()=>{var t;const r=e.ogcReferences||{SRS:[]},o=(null==r||null===(t=r.SRS)||void 0===t?void 0:t.length)>0&&(0,z.n0)(r.SRS);return o&&!(0,j.isAllowedSRS)(this.props.crs,o)?this.props.onError("catalog.srs_not_allowed"):(this.setState({loading:!0}),b.Z[e.serviceType].getLayerFromRecord(e,{service:this.props.service,layerBaseConfig:this.props.layerBaseConfig,removeParams:this.props.authkeyParamNames,catalogURL:"csw"===this.props.catalogType&&this.props.catalogURL?this.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.identifier:null,format:this.getLayerFormat(n.filter((e=>0===e.indexOf("image/")))),formats:{imageFormats:this.props.formatOptions,infoFormats:this.props.infoFormatOptions},...i&&{map:{projection:this.props.crs,resolutions:(0,ne.getResolutions)()}},localizedLayerStyles:l,allowUnsecureLayers:c},!0).then((t=>{t&&this.addLayer(t,e),this.setState({loading:!1})})))}},...s.length>0?[{Element:()=>d().createElement(Y,{key:"sharing-links",popoverContainer:this,links:s,onCopy:this.props.onCopy,buttonSize:this.props.buttonSize,addAuthentication:this.props.addAuthentication})}]:[]]})),le(this,"renderDescription",(e=>{if(!e)return null;const t=(0,k.S$)(this.context.messages,"catalog.notAvailable");return this.state.fullText&&e.metadataTemplate?d().createElement("div",{className:"catalog-metadata ql-editor"},d().createElement(U.Z,{html:(0,R.parseCustomTemplate)(e.metadataTemplate,e.metadata,(e=>`${N()(e.substring(2,e.length-1))} ${t}`))})):e.metadataTemplate?"":Z()(e.description)?e.description.join(", "):e.description})),le(this,"isLinkCopied",(e=>this.state[e])),le(this,"setLinkCopiedStatus",((e,t)=>{this.setState({[e]:t})})),le(this,"getLayerFormat",(e=>0===e.length||e.filter((e=>e===this.props.defaultFormat)).length>0?this.props.defaultFormat:e[0])),le(this,"addLayer",(function(t){let{background:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("backgroundSelector"===e.props.source)r?(e.props.onLayerAdd({...t,group:"background"},{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{const r=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:r})}})),le(this,"displayExpand",(()=>(this.descriptionRuler?this.descriptionRuler.clientWidth:0)>(this.sideCardDesc?this.sideCardDesc.clientWidth:0)))}componentDidMount(){const e=(0,k.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,R.parseCustomTemplate)(t.metadataTemplate,t.metadata,(t=>`${N()(t.substring(2,t.length-1))} ${e}`))))})}UNSAFE_componentWillMount(){document.addEventListener("click",this.handleClick,!1)}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!1)}render(){const e=this.props.record,t=e&&e.background,r=t&&F()((this.props.layers||[]).filter((e=>e.id===t.name||e.type===t.type&&e.source===t.source&&e.name===t.name)));return e?d().createElement("div",null,d().createElement(K.Z,{style:{transform:"none",opacity:r?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(e&&e.thumbnail||t&&(t.name||t.source?oe.Z[t.source][t.name]:se()),e),title:e&&this.getTitle(e.title),description:d().createElement("span",null,d().createElement("div",{className:!0,ref:e=>{this.sideCardDesc=e}},this.renderDescription(e))),caption:d().createElement("div",null,!this.props.hideIdentifier&&d().createElement("div",{className:"identifier"},e&&e.identifier),d().createElement("div",null,!e.isValid&&d().createElement("small",{className:"text-danger"},d().createElement(w.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&d().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:e=>{this.descriptionRuler=e}},this.renderDescription(e))),tools:d().createElement(ee.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[{visible:!!r,Element:()=>d().createElement(w.Z,{msgId:"catalog.backgroundAlreadyAdded"})},...null!=e&&e.references&&!r?this.getButtons(e):[],{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:()=>this.setState({fullText:!this.state.fullText})}]})})):null}}le(ie,"propTypes",{addAuthentication:c().bool,authkeyParamNames:c().array,buttonSize:c().string,catalogURL:c().string,catalogType:c().string,crs:c().string,currentLocale:c().string,hideThumbnail:c().bool,hideExpand:c().bool,hideIdentifier:c().bool,layerBaseConfig:c().object,onCopy:c().func,onError:c().func,onLayerAdd:c().func,record:c().object,showGetCapLinks:c().bool,zoomToLayer:c().bool,onPropertiesChange:c().func,onLayerChange:c().func,layers:c().array,onAdd:c().func,source:c().string,onAddBackgroundProperties:c().func,deletedId:c().string,clearModal:c().func,service:c().service,showTemplate:c().bool,defaultFormat:c().string,formatOptions:c().array,infoFormatOptions:c().array}),le(ie,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:()=>{},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:()=>{},onError:()=>{},onLayerAdd:()=>{},onPropertiesChange:()=>{},onLayerChange:()=>{},clearModal:()=>{},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:()=>{},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:()=>{},defaultFormat:"image/png"}),le(ie,"contextTypes",{messages:c().object});const ce=ie;function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pe.apply(this,arguments)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class me extends d().Component{constructor(){super(...arguments),de(this,"renderRecordItem",(e=>{let t=this.props.recordItem||ce;return d().createElement(m.Col,pe({},this.props.column,{key:e.identifier}),d().createElement(t,{crs:this.props.crs,clearModal:this.props.clearModal,layers:this.props.layers,modalParams:this.props.modalParams,onAddBackgroundProperties:this.props.onAddBackgroundProperties,onAddBackground:this.props.onAddBackground,source:this.props.source,onLayerAdd:this.props.onLayerAdd,onPropertiesChange:this.props.onPropertiesChange,zoomToLayer:this.props.zoomToLayer,hideThumbnail:this.props.hideThumbnail,hideIdentifier:this.props.hideIdentifier,hideExpand:this.props.hideExpand,onError:this.props.onError,catalogURL:this.props.catalogURL,catalogType:this.props.catalogType,service:this.props.service,showTemplate:this.props.showTemplate,record:e,authkeyParamNames:this.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:this.props.showGetCapLinks,addAuthentication:this.props.addAuthentication,currentLocale:this.props.currentLocale,defaultFormat:this.props.defaultFormat,formatOptions:this.props.formatOptions,infoFormatOptions:this.props.infoFormatOptions,layerBaseConfig:this.props.layerBaseConfig}))}))}render(){if(this.props.records){let e=this.props.records instanceof Array?this.props.records:[this.props.records];return d().createElement(m.Grid,{className:"record-grid",fluid:!0,style:this.props.style},d().createElement(m.Row,null,e.map(this.renderRecordItem)))}return null}}de(me,"propTypes",{crs:c().string,recordItem:c().element,catalogURL:c().string,catalogType:c().string,zoomToLayer:c().bool,onLayerAdd:c().func,onPropertiesChange:c().func,onError:c().func,records:c().array,authkeyParamNames:c().array,style:c().object,showGetCapLinks:c().bool,addAuthentication:c().bool,column:c().object,currentLocale:c().string,hideThumbnail:c().bool,hideIdentifier:c().bool,hideExpand:c().bool,source:c().string,onAddBackgroundProperties:c().func,modalParams:c().object,layers:c().object,clearModal:c().func,onAddBackground:c().func,showTemplate:c().bool,service:c().object,defaultFormat:c().string,formatOptions:c().array,infoFormatOptions:c().array,layerBaseConfig:c().object}),de(me,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:()=>{},onPropertiesChange:()=>{},onError:()=>{},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const Ae=me;var he=r(89518),ue=r(467763);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Se.apply(this,arguments)}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ye extends d().Component{constructor(){var e;super(...arguments),e=this,ge(this,"state",{catalogURL:null}),ge(this,"onSearchTextChange",(e=>{this.props.onChangeText(e.target.value)})),ge(this,"onKeyDown",(e=>{13===e.keyCode&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})})),ge(this,"getServices",(()=>Object.keys(this.props.services).map((e=>{const t=this.props.services[e];return l()({},{label:t.titleMsgId?(0,k.S$)(this.context.messages,t.titleMsgId):t.title,value:e})})))),ge(this,"renderResult",(()=>this.props.result?0===this.props.result.numberOfRecordsMatched?d().createElement("div",null,d().createElement(w.Z,{msgId:"catalog.noRecordsMatched"})):this.renderRecords():this.props.loadingError?this.renderError():null)),ge(this,"renderError",(e=>d().createElement(m.Alert,{bsStyle:"danger"},d().createElement(w.Z,{msgId:e||"catalog.error"})))),ge(this,"renderLoading",(()=>d().createElement("div",{className:"catalog-results loading"},d().createElement(he.Z,{size:176})))),ge(this,"renderPagination",(()=>{if(this.props.result&&!this.props.isNewServiceAdded){let e=this.props.result.numberOfRecordsMatched,t=this.props.result.numberOfRecordsReturned,r=this.props.searchOptions.startPosition,o=this.props.pageSize,a=Math.floor(r/o),s=Math.ceil(e/o);return d().createElement("div",{className:"catalog-pagination"},d().createElement(m.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:s,maxButtons:5,activePage:a+1,onSelect:this.handlePage}),d().createElement("div",{className:"push-right"},d().createElement(w.Z,{msgId:"catalog.pageInfo",msgParams:{start:r,end:r+t-1,total:e}})))}return null})),ge(this,"renderRecords",(()=>{var e,t,r,o;let a="",s=!1,n=!1;if(this.props.services&&this.props.services[this.props.selectedService]){const e=this.props.services[this.props.selectedService];f()(e.metadataTemplate)||f()(e.showTemplate)||(s=e.showTemplate,a=e.metadataTemplate),f()(e.hideThumbnail)||(n=e.hideThumbnail)}const l=this.props.isNewServiceAdded?[]:this.props.records.map((e=>s&&a?{...e,metadataTemplate:a}:e));return d().createElement("div",{className:"catalog-results"},d().createElement(Ae,Se({},this.props.gridOptions,{crs:this.props.crs,key:"records",hideThumbnail:n,records:l,clearModal:this.props.clearModal,layers:this.props.layers,modalParams:this.props.modalParams,onAddBackgroundProperties:this.props.onAddBackgroundProperties,source:this.props.source,authkeyParamNames:this.props.authkeyParamNames,catalogURL:this.isValidServiceSelected()&&this.props.services[this.props.selectedService].url||"",service:this.props.services[this.props.selectedService],catalogType:this.props.services[this.props.selectedService]&&this.props.services[this.props.selectedService].type,showTemplate:this.props.services[this.props.selectedService].showTemplate,onLayerAdd:this.props.onLayerAdd,onPropertiesChange:this.props.onPropertiesChange,zoomToLayer:this.props.zoomToLayer,onError:this.props.onError,showGetCapLinks:this.props.showGetCapLinks,addAuthentication:this.props.addAuthentication,currentLocale:this.props.currentLocale,recordItem:this.props.recordItem,hideIdentifier:this.props.hideIdentifier,hideExpand:this.props.hideExpand,onAddBackground:this.props.onAddBackground,defaultFormat:this.props.services[this.props.selectedService]&&this.props.services[this.props.selectedService].format,formatOptions:(null===(e=this.props.services[this.props.selectedService])||void 0===e?void 0:e.url)===(null===(t=this.props.service)||void 0===t?void 0:t.url)?this.props.formatOptions:ue.QQ,infoFormatOptions:(null===(r=this.props.services[this.props.selectedService])||void 0===r?void 0:r.url)===(null===(o=this.props.service)||void 0===o?void 0:o.url)?this.props.infoFormatOptions:(0,ue.B8)(),layerBaseConfig:this.props.layerBaseConfig,onAdd:()=>{this.search({services:this.props.services,selectedService:this.props.selectedService})}})))})),ge(this,"renderButtons",(()=>{const e=[];return this.props.includeSearchButton&&e.push(d().createElement(C.Z,{bsStyle:"primary",style:this.props.buttonStyle,onClick:()=>this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText}),className:this.props.buttonClassName,key:"catalog_search_button",disabled:this.props.loading||!this.isValidServiceSelected()},d().createElement(w.Z,{msgId:"catalog.search"}))),this.props.includeResetButton&&e.push(d().createElement(C.Z,{style:this.props.buttonStyle,onClick:this.reset,key:"catalog_reset_button"},d().createElement(w.Z,{msgId:"catalog.reset"}))),e})),ge(this,"renderTextSearch",(()=>{const e=d().createElement(m.FormControl,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:this.props.searchText,placeholder:(0,k.S$)(this.context.messages,"catalog.textSearchPlaceholder"),onChange:this.onSearchTextChange,onKeyDown:this.onKeyDown});return this.props.wrapOptions?d().createElement(m.Panel,{collapsible:!0,defaultExpanded:!1,header:(0,k.S$)(this.context.messages,"catalog.options")},e):e})),ge(this,"isValidServiceSelected",(()=>void 0!==this.props.services[this.props.selectedService])),ge(this,"search",(function(){let{services:t,selectedService:r,start:o=1,searchText:a=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,z.p8)(t[r]),n=t[r].type;e.props.isNewServiceAdded&&e.props.setNewServiceStatus(!1),e.props.isNewServiceAdded&&""===a||e.props.onSearch({format:n,url:s,startPosition:o,maxRecords:e.props.pageSize,text:a||"",options:{service:e.props.services[r]}})})),ge(this,"reset",(()=>{this.props.onReset()})),ge(this,"handlePage",(e=>{if(e){let t=(e-1)*this.props.pageSize+1;this.search({services:this.props.services,selectedService:this.props.selectedService,start:t,searchText:this.props.searchText})}}))}componentDidMount(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}UNSAFE_componentWillReceiveProps(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}render(){return d().createElement(x.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:d().createElement(m.Form,null,d().createElement(m.FormGroup,{controlId:"labelService",key:"labelService"},d().createElement(m.ControlLabel,null,d().createElement(w.Z,{msgId:"catalog.service"}))),d().createElement(m.FormGroup,{controlId:"service",key:"service"},d().createElement(m.InputGroup,null,d().createElement(T.ZP,{clearValueText:(0,k.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,k.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:e=>this.props.onChangeSelectedService(e&&e.value?e.value:""),placeholder:(0,k.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&!this.props.services[this.props.selectedService].readOnly?d().createElement(m.InputGroup.Addon,{className:"btn",onClick:()=>this.props.onChangeCatalogMode("edit",!1)},d().createElement(m.Glyphicon,{glyph:"pencil"})):null,d().createElement(m.InputGroup.Addon,{className:"btn",onClick:()=>this.props.onChangeCatalogMode("edit",!0)},d().createElement(m.Glyphicon,{glyph:"plus"})))),d().createElement(m.FormGroup,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),d().createElement(m.FormGroup,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}ge(ye,"propTypes",{active:c().bool,searchText:c().string,addAuthentication:c().bool,buttonClassName:c().string,buttonStyle:c().object,currentLocale:c().string,loading:c().bool,format:c().string,crs:c().string,gridOptions:c().object,includeSearchButton:c().bool,includeResetButton:c().bool,loadingError:c().object,layerError:c().string,mode:c().string,onChangeCatalogMode:c().func,onChangeText:c().func,onChangeFormat:c().func,onChangeSelectedService:c().func,onPropertiesChange:c().func,onError:c().func,onLayerAdd:c().func,onReset:c().func,onSearch:c().func,onAddBackground:c().func,pageSize:c().number,records:c().array,authkeyParamNames:c().array,recordItem:c().element,result:c().object,searchOptions:c().object,selectedService:c().string,services:c().object,showGetCapLinks:c().bool,wrapOptions:c().bool,zoomToLayer:c().bool,hideThumbnail:c().bool,hideIdentifier:c().bool,hideExpand:c().bool,source:c().string,onAddBackgroundProperties:c().func,modalParams:c().object,layers:c().array,clearModal:c().func,formatOptions:c().array,infoFormatOptions:c().array,layerBaseConfig:c().object,service:c().object,isNewServiceAdded:c().bool,setNewServiceStatus:c().func}),ge(ye,"contextTypes",{messages:c().object}),ge(ye,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:()=>{},onChangeFormat:()=>{},onChangeText:()=>{},onChangeSelectedService:()=>{},onPropertiesChange:()=>{},onError:()=>{},onLayerAdd:()=>{},onReset:()=>{},onSearch:()=>{},changeLayerProperties:()=>{},setNewServiceStatus:()=>{},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:ue.QQ,layerBaseConfig:{},crs:"EPSG:3857",service:{}});const ve=ye;var be=r(522296),Ee=r(4143),fe=r(134479),Ce=r(612912),Te=r(707366),xe=r(119008),ke=r(665529),we=r(274363),Le=r(350126),Pe=r(908316);function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ie.apply(this,arguments)}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Be=["OpenStreetMap","OpenSeaMap","Stamen"],Ze=(0,u.zB)({searchOptions:fe.bA,result:fe.SX,loadingError:fe.hm,selectedService:fe.Cb,mode:fe.eK,services:fe.b6,servicesWithBackgrounds:fe.PG,layerError:fe.Im,active:fe.JF,dockStyle:e=>(0,Le.ic)(e,{height:!0,right:!0},!0),searchText:fe.e8,group:fe.Mm,source:Ee.YL,layers:Ce.l2,modalParams:Ee.B0,authkeyParamNames:fe.kS,saving:fe.dP,openCatalogServiceList:fe.ZL,service:fe._S,format:fe.iH,selectedFormat:fe.Q7,options:fe.bA,layerOptions:fe.n7,tileSizeOptions:fe._x,currentLocale:Te.Pz,locales:Te.Ps,pageSize:fe.y,loading:fe.E2,crs:we.uy,isLocalizedLayerStylesEnabled:ke.wk,formatsLoading:fe.BM,formatOptions:fe.am,infoFormatOptions:fe.LV,isNewServiceAdded:fe.jU}),Oe=(0,h.compose)((0,h.withProps)((e=>{let{result:t,selectedFormat:r,options:o,layerOptions:a,services:s,selectedService:n,locales:l}=e;return{records:t&&b.Z[r].getCatalogRecords(t,{...o,layerOptions:a,service:s[n]},l)||[]}})),(0,h.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:ue.QQ,advancedRasterStyles:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}}),(0,h.branch)((e=>{let{mode:t}=e;return"edit"===t}),(0,h.renderComponent)(be.Z)))(ve);class Ne extends d().Component{render(){const e={group:this.props.group||void 0},t=d().createElement(Oe,Ie({layerBaseConfig:e},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return d().createElement(Pe.Z,{containerStyle:this.props.dockStyle,containerId:"catalog-root",containerClassName:this.props.active?"catalog-active":"",open:this.props.active,size:this.props.width,position:"right",bsStyle:"primary",title:d().createElement(w.Z,{msgId:"catalog.title"}),onClose:()=>this.props.closeCatalog(),glyph:"folder-open",style:this.props.dockStyle},d().createElement(m.Panel,{id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},t))}}Fe(Ne,"propTypes",{id:c().string,source:c().string,active:c().bool,searchOnStartup:c().bool,serviceTypes:c().array,wrap:c().bool,wrapWithPanel:c().bool,panelStyle:c().object,panelClassName:c().string,closeCatalog:c().func,closeGlyph:c().string,buttonStyle:c().object,services:c().object,servicesWithBackgrounds:c().object,selectedService:c().string,style:c().object,dockProps:c().object,zoomToLayer:c().bool,isLocalizedLayerStylesEnabled:c().bool,width:c().number,dockStyle:c().object,group:c().string}),Fe(Ne,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:Be},{name:"wfs",label:"WFS"},{name:"3dtiles",label:"3D Tiles"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:()=>{},closeGlyph:"1-close",zoomToLayer:!0,width:550,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});const ze=(0,A.connect)(Ze,{clearModal:S.V3,onSearch:g.tt,onLayerAdd:g.A4,closeCatalog:g.wl,onChangeFormat:g.BG,onChangeServiceFormat:g.i3,onChangeUrl:g.X7,onChangeType:g.XM,onChangeTitle:g.r1,onChangeMetadataTemplate:g.Wf,onChangeText:g.XW,onChangeServiceProperty:g.L8,onChangeSelectedService:g.Dw,onChangeCatalogMode:g.In,onAddService:g.M3,onToggleAdvancedSettings:g.Ts,onToggleThumbnail:g.XS,onToggleTemplate:g.IT,onDeleteService:g.wo,onError:g.vG,onAddBackgroundProperties:S.US,onFocusServicesList:g.dL,onPropertiesChange:v.He,onAddBackground:S.pW,onFormatOptionsFetch:g.tx,onToggle:y.Xi.bind(null,"backgroundSelector",null),onLayerChange:y.Xg.bind(null,"backgroundSelector"),onStartChange:y.Xg.bind(null,"backgroundSelector","start"),setNewServiceStatus:g.zX})(Ne),je={MetadataExplorerPlugin:l()(ze,{BurgerMenu:{name:"metadataexplorer",position:5,text:d().createElement(w.Z,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:d().createElement(m.Glyphicon,{glyph:"folder-open"}),action:y.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0,priority:1},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0,priority:1},TOC:{name:"MetadataExplorer",doNotHide:!0,priority:1},SidebarMenu:{name:"metadataexplorer",position:5,text:d().createElement(w.Z,{msgId:"catalog.title"}),tooltip:"catalog.tooltip",icon:d().createElement(m.Glyphicon,{glyph:"folder-open"}),action:y.Xg.bind(null,"metadataexplorer","enabled",!0,!0),selector:e=>({style:{display:(0,xe.$)(e)?"none":null}}),toggle:!0,doNotHide:!0,priority:1}}),reducers:{catalog:r(287409).Z},epics:r(23939).Z(b.Z)}},416202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var o=r(232580),a=r.n(o),s=r(664094),n=r.n(s),l=r(506952),i=r.n(l),c=r(203494),p=r.n(c),d=r(346654),m=r.n(d),A=r(652695),h=r.n(A),u=r(899031),S=r.n(u),g=r(679087),y=r.n(g),v=r(140119),b=r.n(v),E=r(256108),f=r.n(E),C=r(960289),T=r.n(C),x=r(586338),k=r.n(x),w=r(408637),L=r.n(w);const P={google:{HYBRID:k(),ROADMAP:a(),TERRAIN:n(),SATELLITE:i()},bing:{Aerial:p(),AerialWithLabels:f()},osm:{mapnik:m()},mapquest:{osm:L()},ol:{undefined:S()},nasagibs:{Night2012:b()},OpenTopoMap:{OpenTopoMap:T()},unknown:y(),s2cloudless:{"s2cloudless:s2cloudless":h()}}},177452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r(923645),a=r.n(o)()((function(e){return e[1]}));a.push([e.id,".ms2 div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.ms2 div.record-grid .record-item{\n    height: auto;\n}\n.ms2 div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.ms2 #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.ms2 #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .ms2 div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.ms2 #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""]);const s=a},417173:(e,t,r)=>{e.exports=r.p+"web/client/components/catalog/img/default.jpg"},203494:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/Aerial.jpg"},256108:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/AerialWithLabels.jpg"},586338:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/HYBRID.jpg"},140119:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/NASA_NIGHT.jpg"},960289:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/OpenTopoMap.jpg"},232580:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/ROADMAP.jpg"},506952:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/SATELLITE.jpg"},664094:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/TERRAIN.jpg"},679087:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/dafault.jpg"},346654:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/mapnik.jpg"},408637:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/mapquest-osm.jpg"},899031:e=>{e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAD1APUDAREAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGwgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEAAQUCcH//xAAUEQEAAAAAAAAAAAAAAAAAAACQ/9oACAEDAQE/AXB//8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAgEBPwFwf//EABQQAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQEABj8CcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/IXB//9oADAMBAAIAAwAAABCSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAkP/aAAgBAwEBPxBwf//EABQRAQAAAAAAAAAAAAAAAAAAAJD/2gAIAQIBAT8QcH//xAAUEAEAAAAAAAAAAAAAAAAAAACQ/9oACAEBAAE/EHB//9k="},652695:(e,t,r)=>{e.exports=r.p+"web/client/plugins/background/assets/img/s2cloudless.jpg"}}]);