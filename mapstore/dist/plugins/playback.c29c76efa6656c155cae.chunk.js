(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8177],{481151:(e,t,a)=>{"use strict";a.d(t,{NH:()=>n,E7:()=>r,N7:()=>l,L9:()=>s,hQ:()=>o,NC:()=>i,c9:()=>c,up:()=>p,AN:()=>m,FZ:()=>d,Fi:()=>u,KB:()=>y,E0:()=>g,Q_:()=>b,hY:()=>f,wO:()=>h,sT:()=>v,wR:()=>k,h1:()=>E,hS:()=>P,zK:()=>T,VS:()=>S,oz:()=>A,FH:()=>C,XN:()=>w,Ym:()=>I,RQ:()=>L});const n="PLAYBACK:START",r="PLAYBACK:PAUSE",l="PLAYBACK:STOP",s="PLAYBACK:SET_FRAMES",o="PLAYBACK:APPEND_FRAMES",i="PLAYBACK:FRAMES_LOADING",c="PLAYBACK:SET_CURRENT_FRAME",p="PLAYBACK:SELECT_PLAYBACK_RANGE",m="PLAYBACK:SET_INTERVAL_DATA",d="PLAYBACK:SETTINGS_CHANGE",u="PLAYBACK:TOGGLE_ANIMATION_MODE",y="PLAYBACK:ANIMATION_STEP_MOVE",g="PLAYBACK:UPDATE_METADATA",b={PLAY:"PLAY",STOP:"STOP",PAUSE:"PAUSE"},f=()=>({type:n}),h=()=>({type:r}),v=()=>({type:l}),k=e=>({type:s,frames:e}),E=e=>({type:c,frame:e}),P=e=>({type:o,frames:e}),T=e=>({type:i,loading:e}),S=e=>({type:p,range:e}),A=(e,t)=>({type:d,name:e,value:t}),C=()=>({type:u}),w=e=>({type:y,direction:e}),I=e=>{let{next:t,previous:a,forTime:n}=e;return{type:g,forTime:n,next:t,previous:a}},L=e=>({type:m,timeIntervalData:e})},251820:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var n=a(124852),r=a.n(n),l=a(532475),s=a.n(l),o=a(414293),i=a.n(o),c=a(45697),p=a.n(c),m=a(730381),d=a.n(m),u=a(630294),y=a(36549),g=a(23888);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=(0,y.Z)(u.Glyphicon);class h extends r().Component{constructor(){var e;super(...arguments),e=this,b(this,"onUpdate",((e,t)=>{const a=d()(this.props.date).utc(),n=t?d()(a).add(1,e):d()(a).subtract(1,e);n.isValid()&&!isNaN(n.toDate().getTime())&&this.props.onUpdate(n.toISOString())})),b(this,"onChange",(function(t,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;if(""!==a){const r=d()(e.props.date).utc(),l=r["day"===t?"date":t]&&d()(r)["day"===t?"date":t](n(a));l.isValid()&&!isNaN(l.toDate().getTime())&&e.props.onUpdate(l.toISOString())}})),b(this,"getForm",(()=>{const e=this.props.date&&d()(this.props.date).utc();return[{name:"icon",value:"calendar",type:"icon"},{name:"day",placeholder:"DD",value:e&&e.date()},{name:"month",placeholder:"MM",readOnly:!0,value:e&&e.month(),format:e=>!i()(e)&&""!==e&&d().monthsShort(e),parseValue:e=>e-1},{name:"year",placeholder:"YYYY",value:e&&e.year()},{name:"icon",value:"time",type:"icon"},{name:"hours",placeholder:"hh",value:e&&e.hours()},{name:"separator",value:":",type:"separator"},{name:"minutes",placeholder:"mm",value:e&&e.minutes()},{name:"separator",value:":",type:"separator"},{name:"seconds",placeholder:"ss",value:e&&e.seconds()},{name:"separator",value:e&&e.utcOffset(),type:"separator",format:e=>"UTC "+(e>=0?"+":"-")+s()(e/60,2,0)}]}))}render(){const e=this.getForm();return r().createElement(u.Form,{className:`ms-inline-datetime ${this.props.className}`,style:this.props.style},r().createElement(u.FormGroup,{controlId:"inlineDateTime"},this.props.glyph&&r().createElement("div",{style:this.props.clickable?{cursor:"pointer"}:{},onClick:()=>this.props.clickable&&this.props.onIconClick(this.props.date,this.props.glyph)},r().createElement(f,{tooltip:this.props.clickable?this.props.tooltip:void 0,tooltipId:this.props.clickable?this.props.tooltipId:void 0,className:"ms-inline-datetime-icon",glyph:this.props.glyph})),e.map((e=>"icon"===e.type&&r().createElement("div",{className:`ms-inline-datetime-input ms-dt-${e.name}`},r().createElement(f,{glyph:e.value}))||"separator"===e.type&&r().createElement("div",{className:`ms-inline-datetime-input ms-dt-${e.name}`},e.format&&e.format(e.value)||e.value)||r().createElement("div",{className:`ms-inline-datetime-input ms-dt-${e.name}`},this.props.showButtons&&r().createElement(g.Z,{bsSize:"xs",disabled:!this.props.date,onClick:()=>this.onUpdate(e.name,!0)},r().createElement(f,{glyph:"chevron-up"})),r().createElement(u.FormControl,{type:"text",readOnly:e.readOnly,placeholder:e.placeholder||e.name,disabled:!this.props.date,value:e.format&&e.format(e.value)||e.value,onChange:t=>this.onChange(e.name,t.target.value,e.parseValue)}),this.props.showButtons&&r().createElement(g.Z,{bsSize:"xs",disabled:!this.props.date,onClick:()=>this.onUpdate(e.name)},r().createElement(f,{glyph:"chevron-down"})))))))}}b(h,"propTypes",{date:p().string,clickable:p().bool,onUpdate:p().func,onIconClick:p().func,glyph:p().string,style:p().object,className:p().string,tooltip:p().string,tooltipId:p().string,showButtons:p().bool}),b(h,"defaultProps",{date:"",onIconClick:()=>{},clickable:!1,onUpdate:()=>{},glyph:"time",style:{},className:"",tooltip:""});const v=h},234425:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var n=a(49977),r=a.n(n),l=a(175082),s=a(926244);const o=(e,t,a,n,o)=>r().Observable.forkJoin((0,l.Ci)(...e(a,{sort:"asc",fromValue:t?(0,s.p)(o,1e-4,"remove"):o,..."end"===n?{fromEnd:!0}:{}})).map((e=>e.DomainValues.Domain.split(","))).map((e=>{let[t]=e;return t})).catch((e=>e&&r().Observable.of(null))),(0,l.Ci)(...e(a,{sort:"desc",fromValue:t?(0,s.p)(o,1e-4,"add"):o,..."end"===n?{fromEnd:!0}:{}})).map((e=>e.DomainValues.Domain.split(","))).map((e=>{let[t]=e;return t})).catch((e=>e&&r().Observable.of(null))))},545208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ie});var n=a(727418),r=a.n(n),l=a(124852),s=a.n(l),o=a(171703),i=a(867076),c=a(22222),p=a(481151),m=a(730381),d=a.n(m),u=a(227361),y=a.n(u),g=a(929761),b=a(69371),f=a(333101),h=a(504518),v=a(833517),k=a(275982),E=a(365452),P=a(555994),T=a(926244);const S=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return n=>n.withLatestFrom(e.startWith(t)).filter((e=>{let[,t]=e;return a(t)})).map((e=>{let[t]=e;return t}))};var A=a(426529),C=a(234425),w=a(175082),I=a(49977),L=a.n(I);const N=20,O=(e,t)=>`${e}/${t}`,Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(0,P.Li)(e()),n=(0,P.uy)(e()),r=(0,P.Ry)(e()),{startPlaybackTime:l,endPlaybackTime:s}=(0,E.KC)(e())||{},o=(0,E.dS)(e())===p.Q_.PLAY||(0,E.dS)(e())===p.Q_.PAUSE,i="end"===(0,P.pW)(e());return[r,n,"time",{limit:N,time:l&&s&&o?O(l,s):void 0,fromEnd:i,...t},(0,P.F3)(a)(e())]},Z=(e,t)=>{if((0,P.uy)(e())){const a=(0,v.aK)((0,P.fP)(e()))(e()),n=(0,P.gB)(e());return"multidim-extension"!==y()(n,"source.type")&&a&&a.length>0?function(e,t){let{fromValue:a,limit:n=N}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,E.KC)(t())||{},l=r.startPlaybackTime,s=r.endPlaybackTime;return L().Observable.of(e.filter((e=>!l||!s||d()(e).isSameOrAfter(l)&&d()(e).isSameOrBefore(s))).filter((e=>!a||d()(e).isAfter(a))).slice(0,n))}(a,e,t):(0,w.Ci)(...Y(e,t)).map((t=>{const a=t.DomainValues.Domain.split(","),n=(0,P.Li)(e())?((e,t)=>{let a=t;const n=(0,E.KC)(e())||{},r=(0,P.pW)(e()),l=null==n?void 0:n.endPlaybackTime,s=null==n?void 0:n.startPlaybackTime;return a=r&&"end"===r?t.map((e=>e.split("/")[1])):t.map((e=>e.split("/")[0])),s&&l?(0,T.pC)(a,s,l):a})(e,a):a;return n}))}return function(e){let{fromValue:t,limit:a=N,sort:n="asc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{timeStep:r,stepUnit:l}=(0,E.z2)(e()),s=d().duration(r,l),o=(0,E.KC)(e())||{},i=o.startPlaybackTime,c=o.endPlaybackTime;let p=void 0!==t?t:i||(0,v.WT)(e())||(new Date).toString();const m=[];p!==t&&m.push(d()(p).toISOString());for(let e=0;e<a&&(p=d()(p).add("asc"===n?s:-1*s),!c||p.isBefore(c));e++)m.push(p.toISOString());return L().Observable.of(m)}(e,t)},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>({});return t=>{const a=(0,v.AF)(e());return L().Observable.from(a.map((e=>(0,f.He)(e.id,{singleTile:!0})))).concat(t).concat(L().Observable.from(a.map((e=>(0,f.He)(e.id,{singleTile:e.singleTile})))))}},R=function(e){let{start:t,end:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&a&&(d()(e).isBefore(t)||d()(e).isAfter(a))},D={retrieveFramesForPlayback:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(p.NH).exhaustMap((()=>Z(t,{fromValue:(0,E.KC)(t())&&(0,E.KC)(t()).startPlaybackTime&&(0,E.KC)(t()).endPlaybackTime?void 0:(0,v.WT)(t()),..."end"===(0,P.pW)(t())?{fromEnd:!0}:{}}).map((e=>(0,p.wR)(e))).let((0,A.hP)((0,p.zK)(!0),(0,p.zK)(!1)),(()=>L().Observable.of((0,h.vU)({title:"There was an error retrieving animation",message:"Please contact the administrator"}),(0,p.sT)()))).let((0,A.hP)((0,b.aA)(!1,!0),(0,b.aA)(!1,!1))).concat(e.ofType(p.c9).filter((e=>{let{frame:t}=e;return t%N==N-10})).switchMap((()=>Z(t,{fromValue:(0,E.yt)(t()),..."end"===(0,P.pW)(t())?{fromEnd:!0}:{}}).map(p.hS).let((0,A.hP)((0,p.zK)(!0),(0,p.zK)(!1)))))).takeUntil(e.ofType(p.N7,k.nk)).concat(L().Observable.of((0,b.aA)(!1,!1))).let(F(t))))},updateCurrentTimeFromAnimation:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(p.c9).map((()=>(0,E.Wq)(t()))).map((e=>e?(0,g.PZ)(e):(0,p.sT)()))},timeDimensionPlayback:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(p.L9).exhaustMap((()=>L().Observable.interval(1e3*(0,E.V3)(t())).startWith(0).let(S(e.ofType(p.NH,p.E7).map((e=>e.type===p.NH)))).map((()=>(0,p.h1)((0,E.Np)(t())+1))).merge(e.ofType(p.KB).map((e=>{let{direction:a}=e;return(0,p.h1)(Math.max(0,(0,E.Np)(t())+a))}))).concat(L().Observable.of((0,p.sT)())).takeUntil(e.ofType(p.N7,k.nk))))},playbackToggleGuideLayerToFixedStep:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(p.Fi).exhaustMap((()=>(0,P.uy)(t())?L().Observable.of((0,b.kq)(void 0)):L().Observable.of((0,b.kq)(y()((0,P.rV)(t()),"[0].id")))))},playbackMoveStep:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(p.KB).filter((()=>(0,E.dS)(t())!==p.Q_.PLAY)).switchMap((e=>{let{direction:a=1}=e;const n=(0,E.rp)(t())||{},r=(0,v.WT)(t());return r&&n.forTime===r?L().Observable.of(a>0?n.next:n.previous):Z(t,{limit:1,sort:a>0?"asc":"desc",fromValue:(0,v.WT)(t()),..."end"===(0,P.pW)(t())?{fromEnd:!0}:{}}).map((function(){let[e]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e}))})).filter((e=>!!e)).map((e=>{const a=("end"===(0,P.pW)(t())?e.split("/")[1]:e.split("/")[0])??e;return(0,g.PZ)(a)}))},playbackCacheNextPreviousTimes:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(g.mE,g.mD,b._V,p.N7,b.w,b.lz).filter((()=>(0,E.dS)(t())!==p.Q_.PLAY&&(0,E.dS)(t())!==p.Q_.PAUSE)).filter((()=>(0,P.Li)(t()))).filter((e=>!!e)).switchMap((e=>{let{time:a}=e;const n=a||(0,v.WT)(t()),r=(0,P.pW)(t());return(0,C.w)(Y,!1,t,r,n).map((e=>{let[t,a]=e;return(0,p.Ym)({forTime:n,next:t,previous:a})}))}))},playbackFollowCursor:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(g.mD).filter((e=>{let{type:a}=e;return(a===g.mD||(0,E.dS)(t())===p.Q_.PLAY)&&R((0,v.WT)(t()),(0,P.YK)(t()))})).filter((()=>y()((0,E.z2)(t()),"following"))).switchMap((()=>L().Observable.of((0,b.y3)((()=>{const e=(0,v.WT)(t()),{start:a,end:n}=(0,P.YK)(t()),r=d()(n).diff(d()(a));return{start:e,end:d()(e).add(r).toISOString()}})()))))},playbackStopWhenDeleteLayer:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(f.sb).filter((()=>!(0,P.Li)(t())&&"PLAY"===(0,E.dS)(t()))).switchMap((()=>L().Observable.of((0,p.sT)())))},setIsIntervalData:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(b._V,g.mE).filter((e=>{let{layerId:a}=e;return a||(0,P.Li)(t())})).switchMap((e=>{let{time:a}=e;const n=a||(0,v.WT)(t()),r=(0,P.pW)(t());return(0,C.w)(Y,!0,t,r,n).map((e=>{let[t,a]=e;const n=-1!==t.indexOf("/")||-1!==a.indexOf("/");return(0,p.RQ)(n)}))}))},switchOffSnapToLayer:function(e){let{getState:t=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.ofType(f.yS).filter((e=>{let{newProperties:a,layer:n}=e;const r=(0,P.Li)(t());return void 0!==(null==a?void 0:a.visibility)&&r===n&&(0,P.pn)(t())})).switchMap((()=>L().Observable.of((0,p.FH)())))}};var x=a(811974),U=a(687753),K=a(521923);const M={timeStep:1,stepUnit:"days",frameDuration:2,following:!0};var _=a(804504),B=a(8204),V=a(807654),W=a.n(V),G=a(630294),Q=a(294184),z=a.n(Q),H=a(423214),$=a(251820),q=a(594239),j=a(569291),X=a(481330);const J=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{if(!W()(parseInt(e,10))){const a=parseInt(e,10);return t(a<1?1:a)}return a()}catch(e){return a(e)}},ee=e=>{let{startPlaybackTime:t,endPlaybackTime:a}=e;const n=d()(t).diff(a);return{startPlaybackTime:n>=0?a:t,endPlaybackTime:n>=0?t:a}},te=(0,i.compose)((0,o.connect)((0,c.P1)(E.z2,P.Li,E.KC,P.pW,P.ei,P.Hc,((e,t,a,n,r,l)=>({fixedStep:!t,playbackRange:a,currentSnapType:n,snapRadioButtonEnabled:r,endValuesSupport:l,...e}))),{setPlaybackRange:p.VS,onSettingChange:p.oz,onChangeSnapType:b.m7,toggleAnimationMode:p.FH}),(0,i.withProps)((()=>({snapTypes:[{id:"start",value:"start",label:"timeline.settings.snapToStart"},{id:"end",value:"end",label:"timeline.settings.snapToEnd"}]}))),(0,i.compose)((0,o.connect)((0,c.P1)(P.YK,P.dJ,((e,t)=>({layerRange:t,viewRange:e}))),{moveTo:b.y3}),(0,i.withHandlers)({toggleAnimationRange:e=>{let{fixedStep:t,layerRange:a,viewRange:n={},setPlaybackRange:r=(()=>{})}=e;return e=>{let l=t?n:a;l={startPlaybackTime:d()(l&&l.start||new Date).subtract(1,"days").toISOString(),endPlaybackTime:d()(l&&l.end||new Date).add(1,"days").toISOString()},r(e?l:void 0)}},setPlaybackToCurrentViewRange:e=>{let{viewRange:t={},setPlaybackRange:a=(()=>{})}=e;return()=>{t.start&&t.end&&a({startPlaybackTime:d()(t.start).toISOString(),endPlaybackTime:d()(t.end).toISOString()})}},setPlaybackToCurrentLayerDataRange:e=>{let{setPlaybackRange:t=(()=>{}),layerRange:a}=e;return()=>a&&t({startPlaybackTime:a.start,endPlaybackTime:a.end})}}),(0,i.withProps)((e=>{let{playbackRange:t,fixedStep:a,moveTo:n=(()=>{}),setPlaybackToCurrentViewRange:r=(()=>{}),setPlaybackToCurrentLayerDataRange:l=(()=>{})}=e;return{playbackButtons:[{glyph:"search",tooltipId:"playback.settings.range.zoomToCurrentPlayackRange",onClick:()=>n({start:t.startPlaybackTime,end:t.endPlaybackTime})},{glyph:"resize-horizontal",tooltipId:"playback.settings.range.setToCurrentViewRange",onClick:()=>r()},{glyph:"1-layer",visible:!a,tooltipId:"playback.settings.range.fitToSelectedLayerRange",onClick:()=>l()}]}}))))((e=>{let{following:t,frameDuration:a,timeStep:n,stepUnit:r,onSettingChange:l=(()=>{}),toggleAnimationMode:o=(()=>{}),toggleAnimationRange:i=(()=>{}),fixedStep:c=!1,playbackRange:p={},snapTypes:m=[],currentSnapType:d="start",snapRadioButtonEnabled:u=!1,endValuesSupport:y,onChangeSnapType:g=(()=>{}),setPlaybackRange:b=(()=>{}),playbackButtons:f,dateSelectorStyle:h={padding:0,margin:0,border:"none"},style:v={}}=e;return s().createElement("div",{className:"ms-playback-settings",style:v},s().createElement("h4",null,s().createElement(_.Z,{msgId:"timeline.settings.title"})),s().createElement(G.FormGroup,{controlId:"timelineSettings"},s().createElement(G.Form,{componentClass:"fieldset",inline:!0,className:"snap-guide-form"},s().createElement(G.ControlLabel,null,s().createElement(_.Z,{msgId:"timeline.settings.snapToGuideLayer"})," ",s().createElement(H.Z,{text:s().createElement(_.Z,{msgId:"timeline.settings.snapToGuideLayerTooltip"})})),s().createElement("span",null,s().createElement(q.Z,{checked:!c,onChange:()=>o()}))),!c&&y&&s().createElement(G.Form,{componentClass:"fieldset",inline:!0,className:"snap-type-form",disabled:!u},s().createElement("div",{className:"snap-type-form-title"},s().createElement(G.ControlLabel,null,s().createElement(_.Z,{msgId:"timeline.settings.snapType"})," ",s().createElement(H.Z,{text:s().createElement(_.Z,{msgId:"timeline.settings.snapTypeTooltip"})}))),s().createElement("div",{className:"snap-type-container"},m.map((e=>s().createElement("div",{className:"snap-type-item"},s().createElement("input",{type:"radio",className:z()("snap-type-radio-btn",{disabled:!u}),value:e.value,name:"snapType",checked:d===e.value,onChange:e=>{const{value:t}=e.target;g(t)}}),s().createElement("div",{className:"snap-type-radio-btn-label"},s().createElement(_.Z,{msgId:e.label})))))))),s().createElement("h4",null,s().createElement(_.Z,{msgId:"playback.settings.title"})),s().createElement(G.FormGroup,{controlId:"frameDuration"},s().createElement(G.ControlLabel,null,s().createElement(_.Z,{msgId:"playback.settings.frameDuration"})),s().createElement(G.InputGroup,null,s().createElement(X.Z,{componentClass:"input",type:"number",value:a,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return J(e,(e=>{l("frameDuration",e)}))}}),s().createElement(G.InputGroup.Addon,null,"s"))),s().createElement(G.ControlLabel,null,s().createElement(_.Z,{msgId:"playback.settings.step.label"})," ",s().createElement(H.Z,{text:s().createElement(_.Z,{msgId:"playback.settings.step.tooltip"})})),s().createElement(G.FormGroup,{controlId:"formPlaybackStep"},s().createElement(G.Form,{componentClass:"fieldset",inline:!0},s().createElement(X.Z,{disabled:!c,componentClass:"input",type:"number",style:{input:{maxWidth:120}},value:n,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return J(e,(e=>{l("timeStep",e)}))}}),s().createElement(G.FormControl,{disabled:!c,componentClass:"select",value:r,onChange:e=>{let{target:t={}}=e;return l("stepUnit",t.value)}},s().createElement(_.Z,{msgId:"playback.settings.step.year",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"years"},e))),s().createElement(_.Z,{msgId:"playback.settings.step.week",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"weeks"},e))),s().createElement(_.Z,{msgId:"playback.settings.step.day",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"days"},e))),s().createElement(_.Z,{msgId:"playback.settings.step.hour",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"hour"},e))),s().createElement(_.Z,{msgId:"playback.settings.step.minute",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"minutes"},e))),s().createElement(_.Z,{msgId:"playback.settings.step.second",msgParams:{number:n||1}},(e=>s().createElement("option",{value:"seconds"},e)))))),s().createElement(j.Z,{onSwitch:e=>i(e),expanded:p.startPlaybackTime&&p.endPlaybackTime,title:s().createElement(_.Z,{msgId:"playback.settings.range.title"}),buttons:f},s().createElement(G.FormGroup,{controlId:"formPlaybackMode",style:{margin:10}},s().createElement($.Z,{tooltipId:"playback.settings.range.animationStart",glyph:"play",date:p.startPlaybackTime,onUpdate:e=>b(ee({...p,startPlaybackTime:e})),style:h,showButtons:!0}),s().createElement($.Z,{glyph:"stop",tooltipId:"playback.settings.range.animationEnd",date:p.endPlaybackTime,onUpdate:e=>b(ee({...p,endPlaybackTime:e})),style:h,showButtons:!0}))),s().createElement(G.FormGroup,{controlId:"formPlaybackFollowingMode"},s().createElement(G.Form,{componentClass:"fieldset",inline:!0},s().createElement(G.ControlLabel,null,s().createElement(_.Z,{msgId:"playback.settings.mode.following"})," ",s().createElement(H.Z,{text:s().createElement(_.Z,{msgId:"playback.settings.mode.followingDescription"})})),s().createElement("span",null,s().createElement(q.Z,{checked:t,onChange:e=>l("following",e)})))))})),ae=(0,i.compose)((0,i.withState)("showSettings","onShowSettings",!1),(0,i.withState)("collapsed","setCollapsed",!0),(0,i.withProps)((e=>{let{setCollapsed:t}=e;return{buttons:[{glyph:"minus",onClick:()=>t(!0)}]}}))),ne=(0,c.P1)(E.dS,P.Li,E.rp,E.PF,(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return t?e===p.Q_.PLAY||e===p.Q_.PAUSE?n:{hasNext:!!a.next,hasPrevious:!!a.previous}:{hasNext:!0,hasPrevious:!0}})),re=(0,i.compose)((0,o.connect)(ne,{stepMove:p.XN}),(0,i.withHandlers)({forward:e=>{let{stepMove:t=(()=>{})}=e;return()=>t(1)},backward:e=>{let{stepMove:t=(()=>{})}=e;return()=>t(-1)}})),le=(0,i.compose)(ae,re)((e=>{let{status:t,statusMap:a,play:n=(()=>{}),forward:r=(()=>{}),backward:l=(()=>{}),pause:o=(()=>{}),stop:i=(()=>{}),hasPrevious:c,hasNext:p,showSettings:m,onShowSettings:d=(()=>{}),settingsStyle:u={}}=e;return s().createElement("div",{style:{display:"flex"}},t!==a.PLAY&&t!==a.PAUSE&&m&&s().createElement(te,{style:u}),s().createElement(B.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"step-backward",key:"back",onClick:l,disabled:!c,tooltip:s().createElement(_.Z,{msgId:"playback.backwardStep"})},{glyph:t===a.PLAY?"pause":"play",key:"play",active:t===a.PLAY||t===a.PAUSE,disabled:!p,bsStyle:t===a.PLAY||t===a.PAUSE?"success":"primary",onClick:()=>t===a.PLAY?o():n(),tooltipId:p&&(t===a.PLAY?"playback.pause":t===a.PAUSE?"playback.paused":"playback.play")},{glyph:"stop",key:"stop",disabled:t!==a.PLAY&&t!==a.PAUSE,onClick:i,tooltip:!(t!==a.PLAY&&t!==a.PAUSE)&&s().createElement(_.Z,{msgId:"playback.stop"})},{glyph:"step-forward",key:"forward",onClick:r,disabled:!p,tooltip:p&&s().createElement(_.Z,{msgId:"playback.forwardStep"})},{glyph:"cog",key:"settings",bsStyle:t!==a.PLAY&&t!==a.PAUSE&&m?"success":"primary",active:(t!==a.PLAY||t!==a.PAUSE)&&!!m,disabled:t===a.PLAY||t===a.PAUSE,onClick:()=>t!==a.PLAY&&d(!m),tooltip:!(t===a.PLAY||t===a.PAUSE)&&s().createElement(_.Z,{msgId:"playback.settings.tooltip"})}]}))})),se=(0,i.compose)((0,i.defaultProps)({statusMap:p.Q_}),(0,o.connect)((0,c.P1)(E.dS,v.WT,E.E2,((e,t,a)=>({loading:a,currentTime:t,status:e}))),{play:p.hY,pause:p.wO,stop:p.sT}))(le);class oe extends s().Component{render(){return s().createElement("div",{className:"playback-plugin"},s().createElement(se,this.props))}}const ie={PlaybackPlugin:r()(oe,{noRoot:!0,disablePluginIf:"{state('featuregridmode') === 'EDIT'}",Timeline:{name:"playback",position:1,priority:1}}),epics:D,reducers:{playback:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:p.Q_.STOP,currentFrame:-1,settings:M},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.NH:return(0,K.t8)("status",p.Q_.PLAY,e);case p.E7:return(0,K.t8)("status",p.Q_.PAUSE,e);case p.N7:return(0,K.t8)("status",p.Q_.STOP,(0,K.t8)("currentFrame",-1,e));case p.L9:return(0,K.t8)("frames",t.frames,(0,K.t8)("currentFrame",-1,e));case p.NC:return(0,K.t8)("framesLoading",t.loading,e);case p.hQ:return(0,K.t8)("frames",[...e.frames||[],...t.frames],e);case p.c9:return(0,K.t8)("currentFrame",t.frame,e);case p.up:return(0,K.t8)("playbackRange",t.range,e);case p.FZ:return(0,K.t8)(`settings[${t.name}]`,t.value,e);case p.E0:return(0,K.t8)("metadata",{next:t.next,previous:t.previous,forTime:t.forTime},e);case p.AN:return(0,K.t8)("metadata",{...e.metadata,timeIntervalData:t.timeIntervalData},e);case U.l:return(0,K.t8)("metadata",void 0,(0,K.t8)("framesLoading",void 0,(0,K.t8)("playbackRange",void 0,(0,K.t8)("frames",void 0,(0,K.t8)("currentFrame",-1,(0,K.t8)("status","STOP",(0,K.t8)("settings",M,e)))))));default:return e}},dimension:x.Z}}},811974:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(929761),r=a(333101),l=a(687753),s=a(521923),o=a(730381),i=a.n(o),c=a(66604),p=a.n(c),m=a(535937),d=a.n(m);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.XV:return(0,s.t8)(`data[${t.dimension}][${t.layerId}]`,t.data,e);case n.mE:return(0,s.t8)("currentTime",t.time,e);case n.at:return(0,s.t8)("offsetTime",t.offsetTime,e);case n.mD:if(e.offsetTime&&e.currentTime){const a=i()(e.offsetTime).diff(e.currentTime),n=i()(t.time).add(a);return(0,s.t8)("currentTime",t.time,(0,s.t8)("offsetTime",n.toISOString(),e))}return(0,s.t8)("currentTime",t.time,e);case r.sb:{const a=p()(e.data,(e=>d()(e,((e,a)=>a!==t.node))));return(0,s.t8)("data",a,e)}case l.l:return(0,s.t8)("data",void 0,(0,s.t8)("currentTime",void 0,(0,s.t8)("offsetTime",void 0,e)));default:return e}}},365452:(e,t,a)=>{"use strict";a.d(t,{z2:()=>r,V3:()=>l,dS:()=>s,yt:()=>i,E2:()=>c,Np:()=>p,KC:()=>m,Wq:()=>d,rp:()=>u,PF:()=>y});var n=a(22222);const r=e=>e&&e.playback&&e.playback.settings,l=e=>(r(e)||{}).frameDuration||5,s=e=>e&&e.playback&&e.playback.status,o=e=>e&&e.playback&&e.playback.frames,i=e=>{const t=o(e)||[];return t[t.length-1]},c=e=>e&&e.playback&&e.playback.framesLoading,p=e=>e&&e.playback&&e.playback.currentFrame,m=e=>(e=>e&&e.playback&&e.playback.playbackRange)(e),d=e=>(o(e)||[])[p(e)],u=e=>e&&e.playback&&e.playback.metadata,y=(0,n.P1)(o,p,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{hasNext:e[t+1],hasPrevious:e[t-1]}}))},18190:e=>{var t=Math.floor;e.exports=function(e,a){var n="";if(!e||a<1||a>9007199254740991)return n;do{a%2&&(n+=e),(a=t(a/2))&&(e+=e)}while(a);return n}},378302:(e,t,a)=>{var n=a(18190),r=a(880531),l=a(440180),s=a(862689),o=a(788016),i=a(683140),c=Math.ceil;e.exports=function(e,t){var a=(t=void 0===t?" ":r(t)).length;if(a<2)return a?n(t,e):t;var p=n(t,c(e/o(t)));return s(t)?l(i(p),0,e).join(""):p.slice(0,e)}},532475:(e,t,a)=>{var n=a(378302),r=a(788016),l=a(640554),s=a(479833);e.exports=function(e,t,a){e=s(e);var o=(t=l(t))?r(e):0;return t&&o<t?n(t-o,a)+e:e}}}]);