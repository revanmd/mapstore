(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[2902],{360613:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>S});var a=o(124852),s=o.n(a),n=o(867076),r=o(171703),l=o(22222),i=o(630294),c=o(103651),p=o.n(c),u=o(804504),d=o(274363),v=o(510644),m=o(152543),y=o(687753),b=o(926854),g=o(450514);const S=(0,m.rx)("SaveAs",{component:(0,n.compose)((0,r.connect)((0,l.P1)((e=>e.controls&&e.controls.mapSaveAs&&e.controls.mapSaveAs.enabled),d._H,((e,t)=>{const{id:o,attributes:a,name:s,description:n,detailsSettings:r,...l}=t||{};return{show:e,resource:l}})),{onClose:y.Xi.bind(null,"mapSaveAs",!1),onResetMapSaveError:b.N_}),(0,n.withProps)({isNewResource:!0}))(g.Z),containers:{BurgerMenu:{name:"saveAs",position:31,text:s().createElement(u.Z,{msgId:"saveAs"}),icon:s().createElement(i.Glyphicon,{glyph:"floppy-open"}),action:y.Xi.bind(null,"mapSaveAs",null),tooltip:"saveDialog.saveAsTooltip",selector:e=>e&&e.controls&&e.controls.saveAs&&e.controls.saveAs.allowedRoles?-1!==p()(e.controls.saveAs.allowedRoles,e&&e.security&&e.security.user&&e.security.user.role)?{}:{style:{display:"none"}}:{style:(0,v.jl)(e)?{}:{display:"none"}},priority:2,doNotHide:!0},SidebarMenu:{name:"saveAs",position:31,icon:s().createElement(i.Glyphicon,{glyph:"floppy-open"}),text:s().createElement(u.Z,{msgId:"saveAs"}),action:y.Xi.bind(null,"mapSaveAs",null),tooltip:"saveDialog.saveAsTooltip",selector:e=>({style:(0,v.jl)(e)?{}:{display:"none"},bsStyle:e.controls.mapSaveAs&&e.controls.mapSaveAs.enabled?"primary":"tray",active:e.controls.mapSaveAs&&e.controls.mapSaveAs.enabled||!1}),priority:1,doNotHide:!0}}})},450514:(e,t,o)=>{"use strict";o.d(t,{Z:()=>f});var a=o(45697),s=o.n(a),n=o(171703),r=o(867076),l=o(22222),i=o(371714),c=o(626365),p=o(130609),u=o(4143),d=o(27908),v=o(612912),m=o(274363),y=o(945395),b=o(101092),g=o(57677),S=o(510644),A=o(835516);const h=(0,l.P1)(S.np,m.ez,m.Kr,v.l2,v.Bt,u.Mz,y.UC,g.I,g._,m.Od,b.$v,d.pf,d.SV,((e,t,o,a,s,n,r,l,i,c,p,u,d)=>({user:e,loading:t,errors:o,layers:a,groups:s,backgrounds:n,additionalOptions:r,textSearchConfig:l,bookmarkSearchConfig:i,map:c,mapType:p,context:u,contextResource:d}))),f=(0,r.compose)((0,n.connect)(h,{saveMap:i.aj}),(0,r.withProps)({category:"MAP",enableDetails:!0}),(0,r.getContext)({router:s().object}),(0,r.withHandlers)({onClose:e=>{let{onClose:t,onResetMapSaveError:o}=e;return()=>{t(),o()}},onSave:e=>{let{map:t,layers:o,groups:a,backgrounds:s,textSearchConfig:n,bookmarkSearchConfig:r,additionalOptions:l,saveMap:i,isNewResource:c,contextResource:p}=e;return e=>{const u=A.default.saveMapConfiguration(t,o,a,s,n,r,l),{metadata:d,data:v,attributes:m,id:y,...b}=e;let g;return g=c?{data:u,attributes:{...m,context:(null==p?void 0:p.id)||m.context},metadata:{attributes:null,...d},...b}:{data:u,attributes:m,metadata:d,id:y,...b},i(g)}}}),c.Z)(p.Z)},103651:(e,t,o)=>{var a=o(442118),s=o(640554),n=Math.max;e.exports=function(e,t,o){var r=null==e?0:e.length;if(!r)return-1;var l=null==o?0:s(o);return l<0&&(l=n(r+l,0)),a(e,t,l)}}}]);