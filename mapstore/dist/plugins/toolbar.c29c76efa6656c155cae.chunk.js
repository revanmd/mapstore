(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9859],{956611:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var o=s(747037),l=s.n(o),n=s(45697),r=s.n(n),i=s(124852),a=s.n(i),p=s(630294),c=s(719648);function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class m extends a().Component{constructor(){super(...arguments),h(this,"onMouseOver",(()=>{const e=l()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return a().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}h(m,"propTypes",{id:r().string,helpText:r().oneOfType([r().string,r().element]),isVisible:r().bool,changeHelpText:r().func,changeHelpwinVisibility:r().func,className:r().string}),h(m,"contextTypes",{messages:r().object}),h(m,"defaultProps",{helpText:"",isVisible:!1});const g=m},403626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var o=s(124852),l=s.n(o),n=s(45697),r=s.n(n),i=s(171703),a=s(264317),p=s(820709),c=s(350126),h=s(22222),m=s(727418),g=s.n(m),u=s(638510);function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},d.apply(this,arguments)}class b extends l().Component{render(){const{children:e,...t}=this.props;return l().createElement(a.CSSTransitionGroup,d({},t,{transitionName:"toolbarexpand",transitionEnterTimeout:500,transitionLeaveTimeout:300}),e)}}class f extends l().Component{render(){const{children:e,...t}=this.props;return l().createElement("div",t,e)}}class S extends l().Component{constructor(){super(...arguments),y(this,"getPanel",(e=>!0===e.panel?e.plugin:e.panel)),y(this,"getPanels",(()=>this.getTools().filter((e=>e.panel)).map((e=>({name:e.name,title:e.title,cfg:e.cfg,panel:this.getPanel(e),items:e.items,wrap:e.wrap||!1}))))),y(this,"getTools",(()=>{const e=this.props.items.filter((e=>!e.alwaysVisible))||[];return this.props.items.filter((t=>t.alwaysVisible||1===e.length||this.props.allVisible)).filter((e=>!e.showWhen||e.showWhen(this.props))).map(((e,t)=>g()({},e,{position:e.position||t}))).sort(((e,t)=>e.position-t.position))}))}render(){const e=this.props.disableAnimation?f:b;return l().createElement(u.Z,{id:this.props.id,className:"mapToolbar btn-group-"+this.props.layout,toolCfg:this.props.btnConfig,container:e,mapType:this.props.mapType,toolStyle:this.props.buttonStyle,activeStyle:this.props.pressedButtonStyle,toolSize:this.props.buttonSize,stateSelector:this.props.stateSelector,tools:this.getTools(),panels:this.getPanels(),activePanel:this.props.active,style:"vertical"!==this.props.layout?{...this.props.style,display:"flex"}:this.props.style,panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}y(S,"propTypes",{id:r().string,tools:r().array,mapType:r().string,style:r().object,panelStyle:r().object,panelClassName:r().string,disableAnimation:r().bool,active:r().string,items:r().array,allVisible:r().bool,layout:r().string,stateSelector:r().string,buttonStyle:r().string,buttonSize:r().string,pressedButtonStyle:r().string,btnConfig:r().object}),y(S,"contextTypes",{messages:r().object,router:r().object}),y(S,"defaultProps",{id:"mapstore-toolbar",style:{},panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto",left:"450px"},panelClassName:"toolbar-panel",disableAnimation:!1,items:[],allVisible:!0,layout:"vertical",stateSelector:"toolbar",buttonStyle:"primary",buttonSize:null,pressedButtonStyle:"success",btnConfig:{className:"square-button"}});const T=e=>(0,h.P1)([t=>t.controls&&t.controls[e]&&t.controls[e].active,t=>t.controls&&t.controls[e]&&t.controls[e].expanded,p.Rd,e=>(0,c.ic)(e,{right:!0,bottom:!0})],((t,s,o,l)=>({active:t,allVisible:s,stateSelector:e,layout:o?"horizontal":"vertical",style:l}))),v={ToolbarPlugin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toolbar";return(0,i.connect)(T(e))(S)},reducers:{controls:s(182862).Z}}},638510:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var o=s(353131),l=s.n(o),n=s(727418),r=s.n(n),i=s(45697),a=s.n(i),p=s(124852),c=s.n(p),h=s(630294),m=s(171703),g=s(12838),u=s(687753),y=s(723813),d=s(956611),b=s(804504),f=s(401811),S=s(23888);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},T.apply(this,arguments)}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const C=(0,m.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:y.n2,changeHelpwinVisibility:y.SA})(d.Z);class x extends c().Component{constructor(){super(...arguments),v(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),v(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const s={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),s[this.props.eventSelector]=u.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),s[this.props.eventSelector]=u.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(s[this.props.eventSelector]=l()(e.action,this.context),t=e.selector||t),(0,m.connect)(t,s,((e,t,s)=>this.mergeHandlers({...s,...e},t)))(this.props.tool)})),v(this,"renderTool",((e,t)=>{if(e.element)return e.element;const s=e.help?c().createElement(C,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),o=e.tooltip?c().createElement(b.Z,{msgId:e.tooltip}):null,l=this.getTool(e),n=this.getToolConfig(e),r=e.childTools||[];return this.addTooltip(c().createElement(l,T({},n,{pluginCfg:e.cfg,tooltip:o,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:s,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(h.Glyphicon,{glyph:e.cfg.glyph}):e.icon,s," ",e.text,r.length>0&&c().createElement(x,T({},e.innerProps,{mapType:this.props.mapType,tools:r,panels:e.childPanels}))),e)})),v(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),v(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,s=c().createElement(t,T({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),o=e.title?c().createElement(b.Z,{msgId:e.title}):null;return e.wrap?c().createElement(h.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(h.Panel,{header:o,style:this.props.panelStyle,className:this.props.panelClassName},s)):s})))),v(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((s,o)=>r()(s,{[o]:e[o]?(0,g.qC)(e[o],t[o]):t[o]})),e))),v(this,"addTooltip",((e,t)=>{if(t.tooltip){let s=c().createElement(h.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(b.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:s},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}v(x,"propTypes",{id:a().string.isRequired,container:a().func,containerWrapperStyle:a().object,tool:a().oneOfType([a().object,a().func]),className:a().string,style:a().object,tools:a().array,panels:a().array,mapType:a().string,toolStyle:a().string,activeStyle:a().string,toolSize:a().string,stateSelector:a().string.isRequired,eventSelector:a().string,panelStyle:a().object,panelClassName:a().string,activePanel:a().string,toolCfg:a().object}),v(x,"contextTypes",{messages:a().object,router:a().object}),v(x,"defaultProps",{container:h.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:S.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const P=x}}]);